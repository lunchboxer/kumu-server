var app=function(){"use strict";function e(){}const n=e=>e;function t(e,n){for(const t in n)e[t]=n[t];return e}function r(e){return e()}function s(){return Object.create(null)}function a(e){e.forEach(r)}function i(e){return"function"==typeof e}function o(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}function l(e,n,t){const r=n.subscribe(t);e.$$.on_destroy.push(r.unsubscribe?()=>r.unsubscribe():r)}function c(e,n,t){if(e){const r=d(e,n,t);return e[0](r)}}function d(e,n,r){return e[1]?t({},t(n.$$scope.ctx,e[1](r?r(n):{}))):n.$$scope.ctx}function u(e,n,r,s){return e[1]?t({},t(n.$$scope.changed||{},e[1](s?s(r):{}))):n.$$scope.changed||{}}let p="undefined"!=typeof window?()=>window.performance.now():()=>Date.now(),m=e=>requestAnimationFrame(e);const f=new Set;let g,h=!1;function $(){f.forEach(e=>{e[0](p())||(f.delete(e),e[1]())}),(h=f.size>0)&&m($)}function v(e){let n;return h||(h=!0,m($)),{promise:new Promise(t=>{f.add(n=[e,t])}),abort(){f.delete(n)}}}function b(e,n){e.appendChild(n)}function w(e,n,t){e.insertBefore(n,t||null)}function y(e){e.parentNode.removeChild(e)}function x(e,n){for(;e.nextSibling&&e.nextSibling!==n;)e.parentNode.removeChild(e.nextSibling)}function k(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}function _(e){return document.createElement(e)}function S(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function D(e){return document.createTextNode(e)}function I(){return D(" ")}function C(){return D("")}function M(e,n,t,r){return e.addEventListener(n,t,r),()=>e.removeEventListener(n,t,r)}function T(e){return function(n){return n.preventDefault(),e.call(this,n)}}function A(e,n,t){null==t?e.removeAttribute(n):e.setAttribute(n,t)}function N(e,n){n=""+n,e.data!==n&&(e.data=n)}function E(e,n,t){e.style.setProperty(n,t)}function O(e,n){for(let t=0;t<e.options.length;t+=1){const r=e.options[t];if(r.__value===n)return void(r.selected=!0)}}function L(e){const n=e.querySelector(":checked")||e.options[0];return n&&n.__value}function P(e,n,t){e.classList[t?"add":"remove"](n)}function R(e,n){const t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,n),t}let j,z=0,q={};function H(e,n,t,r,s,a,i,o=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=n+(t-n)*a(e);c+=100*e+`%{${i(r,1-r)}}\n`}const d=c+`100% {${i(t,1-t)}}\n}`,u=`__svelte_${function(e){let n=5381,t=e.length;for(;t--;)n=(n<<5)-n^e.charCodeAt(t);return n>>>0}(d)}_${o}`;if(!q[u]){if(!g){const e=_("style");document.head.appendChild(e),g=e.sheet}q[u]=!0,g.insertRule(`@keyframes ${u} ${d}`,g.cssRules.length)}const p=e.style.animation||"";return e.style.animation=`${p?`${p}, `:""}${u} ${r}ms linear ${s}ms 1 both`,z+=1,u}function F(e,n){e.style.animation=(e.style.animation||"").split(", ").filter(n?e=>e.indexOf(n)<0:e=>-1===e.indexOf("__svelte")).join(", "),n&&!--z&&m(()=>{if(z)return;let e=g.cssRules.length;for(;e--;)g.deleteRule(e);q={}})}function W(e){j=e}function Y(){if(!j)throw new Error("Function called outside component initialization");return j}function B(e){Y().$$.on_mount.push(e)}function U(e){Y().$$.on_destroy.push(e)}function G(){const e=j;return(n,t)=>{const r=e.$$.callbacks[n];if(r){const s=R(n,t);r.slice().forEach(n=>{n.call(e,s)})}}}function Z(e,n){const t=e.$$.callbacks[n.type];t&&t.slice().forEach(e=>e(n))}const V=[],J=[],X=[],Q=[],K=Promise.resolve();let ee,ne=!1;function te(e){X.push(e)}function re(e){Q.push(e)}function se(){const e=new Set;do{for(;V.length;){const e=V.shift();W(e),ae(e.$$)}for(;J.length;)J.pop()();for(let n=0;n<X.length;n+=1){const t=X[n];e.has(t)||(t(),e.add(t))}X.length=0}while(V.length);for(;Q.length;)Q.pop()();ne=!1}function ae(e){e.fragment&&(e.update(e.dirty),a(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(te))}function ie(){return ee||(ee=Promise.resolve()).then(()=>{ee=null}),ee}function oe(e,n,t){e.dispatchEvent(R(`${n?"intro":"outro"}${t}`))}const le=new Set;let ce;function de(){ce={r:0,c:[],p:ce}}function ue(){ce.r||a(ce.c),ce=ce.p}function pe(e,n){e&&e.i&&(le.delete(e),e.i(n))}function me(e,n,t,r){if(e&&e.o){if(le.has(e))return;le.add(e),ce.c.push(()=>{le.delete(e),r&&(t&&e.d(1),r())}),e.o(n)}}function fe(t,r,s){let a,o,l=r(t,s),c=!1,d=0;function u(){a&&F(t,a)}function m(){const{delay:r=0,duration:s=300,easing:i=n,tick:m=e,css:f}=l;f&&(a=H(t,0,1,s,r,i,f,d++)),m(0,1);const g=p()+r,h=g+s;o&&o.abort(),c=!0,te(()=>oe(t,!0,"start")),o=v(e=>{if(c){if(e>=h)return m(1,0),oe(t,!0,"end"),u(),c=!1;if(e>=g){const n=i((e-g)/s);m(n,1-n)}}return c})}let f=!1;return{start(){f||(F(t),i(l)?(l=l(),ie().then(m)):m())},invalidate(){f=!1},end(){c&&(u(),c=!1)}}}function ge(t,r,s){let o,l=r(t,s),c=!0;const d=ce;function u(){const{delay:r=0,duration:s=300,easing:i=n,tick:u=e,css:m}=l;m&&(o=H(t,1,0,s,r,i,m));const f=p()+r,g=f+s;te(()=>oe(t,!1,"start")),v(e=>{if(c){if(e>=g)return u(0,1),oe(t,!1,"end"),--d.r||a(d.c),!1;if(e>=f){const n=i((e-f)/s);u(1-n,n)}}return c})}return d.r+=1,i(l)?ie().then(()=>{l=l(),u()}):u(),{end(e){e&&l.tick&&l.tick(1,0),c&&(o&&F(t,o),c=!1)}}}function he(t,r,s,o){let l=r(t,s),c=o?0:1,d=null,u=null,m=null;function f(){m&&F(t,m)}function g(e,n){const t=e.b-c;return n*=Math.abs(t),{a:c,b:e.b,d:t,duration:n,start:e.start,end:e.start+n,group:e.group}}function h(r){const{delay:s=0,duration:i=300,easing:o=n,tick:h=e,css:$}=l,b={start:p()+s,b:r};r||(b.group=ce,ce.r+=1),d?u=b:($&&(f(),m=H(t,c,r,i,s,o,$)),r&&h(0,1),d=g(b,i),te(()=>oe(t,r,"start")),v(e=>{if(u&&e>u.start&&(d=g(u,i),u=null,oe(t,d.b,"start"),$&&(f(),m=H(t,c,d.b,d.duration,0,o,l.css))),d)if(e>=d.end)h(c=d.b,1-c),oe(t,d.b,"end"),u||(d.b?f():--d.group.r||a(d.group.c)),d=null;else if(e>=d.start){const n=e-d.start;c=d.a+d.d*o(n/d.duration),h(c,1-c)}return!(!d&&!u)}))}return{run(e){i(l)?ie().then(()=>{l=l(),h(e)}):h(e)},end(){f(),d=u=null}}}function $e(e,n){const r=n.token={};function s(e,s,a,i){if(n.token!==r)return;n.resolved=a&&{[a]:i};const o=t(t({},n.ctx),n.resolved),l=e&&(n.current=e)(o);n.block&&(n.blocks?n.blocks.forEach((e,t)=>{t!==s&&e&&(de(),me(e,1,1,()=>{n.blocks[t]=null}),ue())}):n.block.d(1),l.c(),pe(l,1),l.m(n.mount(),n.anchor),se()),n.block=l,n.blocks&&(n.blocks[s]=l)}if((a=e)&&"object"==typeof a&&"function"==typeof a.then){if(e.then(e=>{s(n.then,1,n.value,e)},e=>{s(n.catch,2,n.error,e)}),n.current!==n.pending)return s(n.pending,0),!0}else{if(n.current!==n.then)return s(n.then,1,n.value,e),!0;n.resolved={[n.value]:e}}var a}const ve="undefined"!=typeof window?window:global;function be(e,n){e.d(1),n.delete(e.key)}function we(e,n){me(e,1,1,()=>{n.delete(e.key)})}function ye(e,n,t,r,s,a,i,o,l,c,d,u){let p=e.length,m=a.length,f=p;const g={};for(;f--;)g[e[f].key]=f;const h=[],$=new Map,v=new Map;for(f=m;f--;){const e=u(s,a,f),o=t(e);let l=i.get(o);l?r&&l.p(n,e):(l=c(o,e)).c(),$.set(o,h[f]=l),o in g&&v.set(o,Math.abs(f-g[o]))}const b=new Set,w=new Set;function y(e){pe(e,1),e.m(o,d),i.set(e.key,e),d=e.first,m--}for(;p&&m;){const n=h[m-1],t=e[p-1],r=n.key,s=t.key;n===t?(d=n.first,p--,m--):$.has(s)?!i.has(r)||b.has(r)?y(n):w.has(s)?p--:v.get(r)>v.get(s)?(w.add(r),y(n)):(b.add(s),p--):(l(t,i),p--)}for(;p--;){const n=e[p];$.has(n.key)||l(n,i)}for(;m;)y(h[m-1]);return h}function xe(e,n){const t={},r={},s={$$scope:1};let a=e.length;for(;a--;){const i=e[a],o=n[a];if(o){for(const e in i)e in o||(r[e]=1);for(const e in o)s[e]||(t[e]=o[e],s[e]=1);e[a]=o}else for(const e in i)s[e]=1}for(const e in r)e in t||(t[e]=void 0);return t}function ke(e,n,t){-1!==e.$$.props.indexOf(n)&&(e.$$.bound[n]=t,t(e.$$.ctx[n]))}function _e(e,n,t){const{fragment:s,on_mount:o,on_destroy:l,after_update:c}=e.$$;s.m(n,t),te(()=>{const n=o.map(r).filter(i);l?l.push(...n):a(n),e.$$.on_mount=[]}),c.forEach(te)}function Se(e,n){e.$$.fragment&&(a(e.$$.on_destroy),e.$$.fragment.d(n),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function De(e,n){e.$$.dirty||(V.push(e),ne||(ne=!0,K.then(se)),e.$$.dirty=s()),e.$$.dirty[n]=!0}function Ie(n,t,r,i,o,l){const c=j;W(n);const d=t.props||{},u=n.$$={fragment:null,ctx:null,props:l,update:e,not_equal:o,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:s(),dirty:null};let p=!1;u.ctx=r?r(n,d,(e,t)=>{u.ctx&&o(u.ctx[e],u.ctx[e]=t)&&(u.bound[e]&&u.bound[e](t),p&&De(n,e))}):d,u.update(),p=!0,a(u.before_update),u.fragment=i(u.ctx),t.target&&(t.hydrate?u.fragment.l(function(e){return Array.from(e.childNodes)}(t.target)):u.fragment.c(),t.intro&&pe(n.$$.fragment),_e(n,t.target,t.anchor),se()),W(c)}class Ce{$destroy(){Se(this,1),this.$destroy=e}$on(e,n){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const e=t.indexOf(n);-1!==e&&t.splice(e,1)}}$set(){}}const Me=[];function Te(e,n){return{subscribe:Ae(e,n).subscribe}}function Ae(n,t=e){let r;const s=[];function a(e){if(o(n,e)&&(n=e,r)){const e=!Me.length;for(let e=0;e<s.length;e+=1){const t=s[e];t[1](),Me.push(t,n)}if(e){for(let e=0;e<Me.length;e+=2)Me[e][0](Me[e+1]);Me.length=0}}}return{set:a,update:function(e){a(e(n))},subscribe:function(i,o=e){const l=[i,o];return s.push(l),1===s.length&&(r=t(a)||e),i(n),()=>{const e=s.indexOf(l);-1!==e&&s.splice(e,1),0===s.length&&(r(),r=null)}}}}function Ne(n,t,r){const s=!Array.isArray(n),o=s?[n]:n,l=t.length<2;return Te(r,n=>{let r=!1;const c=[];let d=0,u=e;const p=()=>{if(d)return;u();const r=t(s?c[0]:c,n);l?n(r):u=i(r)?r:e},m=o.map((e,n)=>e.subscribe(e=>{c[n]=e,d&=~(1<<n),r&&p()},()=>{d|=1<<n}));return r=!0,p(),function(){a(m),u()}})}const Ee=(()=>{const{subscribe:e,update:n}=Ae({});return{subscribe:e,remove:e=>{n(n=>{const{[e]:t,...r}=n;return r})},add:function(e){const t=(()=>{const e=new Date,n=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e.toISOString()+n})();n(n=>({...n,[t]:e})),setTimeout(()=>{this.remove(t)},4e3)}}})();function Oe(e){const n=e-1;return n*n*n+1}function Le(e,{delay:n=0,duration:t=400}){const r=+getComputedStyle(e).opacity;return{delay:n,duration:t,css:e=>`opacity: ${e*r}`}}function Pe(e,{delay:n=0,duration:t=400,easing:r=Oe,x:s=0,y:a=0,opacity:i=0}){const o=getComputedStyle(e),l=+o.opacity,c="none"===o.transform?"":o.transform,d=l*(1-i);return{delay:n,duration:t,easing:r,css:(e,n)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*s}px, ${(1-e)*a}px);\n\t\t\topacity: ${l-d*n}`}}function Re(e,{delay:n=0,duration:t=400,easing:r=Oe}){const s=getComputedStyle(e),a=+s.opacity,i=parseFloat(s.height),o=parseFloat(s.paddingTop),l=parseFloat(s.paddingBottom),c=parseFloat(s.marginTop),d=parseFloat(s.marginBottom),u=parseFloat(s.borderTopWidth),p=parseFloat(s.borderBottomWidth);return{delay:n,duration:t,easing:r,css:e=>"overflow: hidden;"+`opacity: ${Math.min(20*e,1)*a};`+`height: ${e*i}px;`+`padding-top: ${e*o}px;`+`padding-bottom: ${e*l}px;`+`margin-top: ${e*c}px;`+`margin-bottom: ${e*d}px;`+`border-top-width: ${e*u}px;`+`border-bottom-width: ${e*p}px;`}}function je(n){var t,r,s,a,i,o;return{c(){t=_("div"),r=_("button"),s=I(),a=D(n.text),A(r,"class","delete"),A(t,"class",i="notification is-"+n.type+" svelte-zww63w"),o=M(r,"click",n.remove)},m(e,n){w(e,t,n),b(t,r),b(t,s),b(t,a)},p(e,n){e.text&&N(a,n.text),e.type&&i!==(i="notification is-"+n.type+" svelte-zww63w")&&A(t,"class",i)},i:e,o:e,d(e){e&&y(t),o()}}}function ze(e,n,t){let{id:r,message:s}=n;let a,i;return e.$set=e=>{"id"in e&&t("id",r=e.id),"message"in e&&t("message",s=e.message)},e.$$.update=(e={message:1})=>{e.message&&t("text",a=s&&"string"!=typeof s?s.text:s),e.message&&t("type",i=s&&"string"!=typeof s?s.type:"info")},{id:r,message:s,remove:()=>Ee.remove(r),text:a,type:i}}class qe extends Ce{constructor(e){super(),Ie(this,e,ze,je,o,["id","message"])}}function He(e,n,t){const r=Object.create(e);return r.id=n[t][0],r.message=n[t][1],r}function Fe(e){var n,t,r=[],s=new Map,a=Object.entries(e.$notifications);const i=e=>e.id;for(var o=0;o<a.length;o+=1){let n=He(e,a,o),t=i(n);s.set(t,r[o]=We(t,n))}return{c(){for(n=_("div"),o=0;o<r.length;o+=1)r[o].c();A(n,"class","notification-list svelte-1t0onhw")},m(e,s){for(w(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=Object.entries(t.$notifications);de(),r=ye(r,e,i,1,t,a,s,n,we,We,null,He),ue()},i(e){if(!t){for(var n=0;n<a.length;n+=1)pe(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)me(r[o]);t=!1},d(e){for(e&&y(n),o=0;o<r.length;o+=1)r[o].d()}}}function We(e,n){var t,r,s,a,i=new qe({props:{message:n.message,id:n.id}});return{key:e,first:null,c(){t=_("div"),i.$$.fragment.c(),r=I(),this.first=t},m(e,n){w(e,t,n),_e(i,t,null),b(t,r),a=!0},p(e,n){var t={};e.$notifications&&(t.message=n.message),e.$notifications&&(t.id=n.id),i.$set(t)},i(e){a||(pe(i.$$.fragment,e),te(()=>{s||(s=he(t,Pe,{x:400},!0)),s.run(1)}),a=!0)},o(e){me(i.$$.fragment,e),s||(s=he(t,Pe,{x:400},!1)),s.run(0),a=!1},d(e){e&&y(t),Se(i),e&&s&&s.end()}}}function Ye(e){var n,t,r=e.$notifications&&Fe(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.$notifications?r?(r.p(e,t),pe(r,1)):((r=Fe(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function Be(e,n,t){let r;return l(e,Ee,e=>{t("$notifications",r=e)}),{$notifications:r}}class Ue extends Ce{constructor(e){super(),Ie(this,e,Be,Ye,o,[])}}const Ge=window.fetch,Ze=async(e,n)=>{const t=window.localStorage.getItem("auth"),r=t?JSON.parse(t).token:null,s="function"==typeof e?e(n):JSON.stringify({query:e,variables:n}),a=await Ge("https://oe.openode.io/api",{method:"post",headers:{"Content-Type":"application/json",Authorization:r||""},body:s}),i=a&&await a.json();if(a&&a.ok&&!i.errors&&i.data)return i.data;throw i.errors},Ve=()=>{const e=window.localStorage.getItem("auth");return{user:e?JSON.parse(e).user:null,token:e?JSON.parse(e).token:null}},Je=(()=>{const{user:e,token:n}=Ve(),{subscribe:t,set:r,update:s}=Ae({...e,token:n});return{subscribe:t,login:async(e,n)=>{const t=await Ze("\n  mutation Login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      token\n      user {\n        id\n        username\n      }\n    }\n  }\n",{username:e,password:n});window.localStorage.setItem("auth",JSON.stringify(t.login)),s(e=>({...e,...t.login.user,token:t.login.token}))},logout:()=>{const{user:e}=Ve();return window.localStorage.removeItem("auth"),r({}),e&&e.username}}})();function Xe(e){var n,t,r=e.component;function s(e){return{props:{params:e.componentParams}}}if(r)var a=new r(s(e));return{c(){a&&a.$$.fragment.c(),n=C()},m(e,r){a&&_e(a,e,r),w(e,n,r),t=!0},p(e,t){var i={};if(e.componentParams&&(i.params=t.componentParams),r!==(r=t.component)){if(a){de();const e=a;me(e.$$.fragment,1,0,()=>{Se(e,1)}),ue()}r?((a=new r(s(t))).$$.fragment.c(),pe(a.$$.fragment,1),_e(a,n.parentNode,n)):a=null}else r&&a.$set(i)},i(e){t||(a&&pe(a.$$.fragment,e),t=!0)},o(e){a&&me(a.$$.fragment,e),t=!1},d(e){e&&y(n),a&&Se(a,e)}}}function Qe(){const e=window.location.href.indexOf("#/");let n=e>-1?window.location.href.substr(e+1):"/";const t=n.indexOf("?");let r="";return t>-1&&(r=n.substr(t+1),n=n.substr(0,t)),{location:n,querystring:r}}const Ke=Te(Qe(),function(e){const n=()=>{e(Qe())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}}),en=Ne(Ke,e=>e.location);Ne(Ke,e=>e.querystring);function nn(e){if(!e||e.length<1||"/"!=e.charAt(0))throw Error("Invalid parameter location");setTimeout(()=>{window.location.hash="#"+e},0)}function tn(){setTimeout(()=>{window.history.back()},0)}function rn(e,n,t){let r;l(e,Ke,e=>{t("$loc",r=e)});let{routes:s={}}=n;class a{constructor(e,n){if(!e||"string"==typeof e&&(e.length<1||"/"!=e.charAt(0)&&"*"!=e.charAt(0))||"object"==typeof e&&!(e instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:t,keys:r}=function(e,n){if(e instanceof RegExp)return{keys:!1,pattern:e};var t,r,s,a,i=[],o="",l=e.split("/");for(l[0]||l.shift();s=l.shift();)"*"===(t=s[0])?(i.push("wild"),o+="/(.*)"):":"===t?(r=s.indexOf("?",1),a=s.indexOf(".",1),i.push(s.substring(1,~r?r:~a?a:s.length)),o+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(o+=(~r?"?":"")+"\\"+s.substring(a))):o+="/"+s;return{keys:i,pattern:new RegExp("^"+o+(n?"(?=$|/)":"/?$"),"i")}}(e);this.path=e,this.component=n,this._pattern=t,this._keys=r}match(e){const n=this._pattern.exec(e);if(null===n)return null;if(!1===this._keys)return n;const t={};let r=0;for(;r<this._keys.length;)t[this._keys[r]]=n[++r]||null;return t}}const i=s instanceof Map?s:Object.entries(s),o=[];for(const[e,n]of i)o.push(new a(e,n));let c=null,d={};return e.$set=e=>{"routes"in e&&t("routes",s=e.routes)},e.$$.update=(e={component:1,$loc:1})=>{if(e.component||e.$loc){t("component",c=null);let e=0;for(;!c&&e<o.length;){const n=o[e].match(r.location);n&&(t("component",c=o[e].component),t("componentParams",d=n)),e++}}},{routes:s,component:c,componentParams:d}}class sn extends Ce{constructor(e){super(),Ie(this,e,rn,Xe,o,["routes"])}}function an(e){var n,t,r,s;return{c(){n=_("p"),t=D("The path '"),r=D(e.$location),s=D("' leads nowhere")},m(e,a){w(e,n,a),b(n,t),b(n,r),b(n,s)},p(e,n){e.$location&&N(r,n.$location)},d(e){e&&y(n)}}}function on(e){var n,t,r,s,a,i,o,l=e.params.item,c=e.params.id?`'${e.params.id}'`:"";return{c(){n=_("p"),t=D("The "),r=_("strong"),s=D(l),a=I(),i=D(c),o=D(" could not be found.")},m(e,l){w(e,n,l),b(n,t),b(n,r),b(r,s),b(n,a),b(n,i),b(n,o)},p(e,n){e.params&&l!==(l=n.params.item)&&N(s,l),e.params&&c!==(c=n.params.id?`'${n.params.id}'`:"")&&N(i,c)},d(e){e&&y(n)}}}function ln(n){var t,r,s,a,i,o,l,c,d,u,p;function m(e){return e.params.item?on:an}var f=m(n),g=f(n);return{c(){t=_("div"),r=_("section"),(s=_("h1")).innerHTML='<i class="fas fa-frown-open"></i> 404',a=I(),(i=_("h2")).textContent="resource not found",o=I(),g.c(),l=I(),(c=_("p")).innerHTML='It might be wise to return to the <a href="#/">main page</a>.',d=I(),(u=_("button")).innerHTML='<i class="fas fa-backward"></i> go back',A(s,"class","title is-1 primary svelte-vcg24b"),A(i,"class","subtitle is-3"),A(u,"class","button is-link svelte-vcg24b"),A(t,"class","container svelte-vcg24b"),p=M(u,"click",tn)},m(e,n){w(e,t,n),b(t,r),b(r,s),b(r,a),b(r,i),b(r,o),g.m(r,null),b(r,l),b(r,c),b(r,d),b(r,u)},p(e,n){f===(f=m(n))&&g?g.p(e,n):(g.d(1),(g=f(n))&&(g.c(),g.m(r,l)))},i:e,o:e,d(e){e&&y(t),g.d(),p()}}}function cn(e,n,t){let r;l(e,en,e=>{t("$location",r=e)});let{params:s={}}=n;return e.$set=e=>{"params"in e&&t("params",s=e.params)},{params:s,$location:r}}class dn extends Ce{constructor(e){super(),Ie(this,e,cn,ln,o,["params"])}}function un(n){var t,r;return{c(){t=I(),(r=_("h1")).textContent="Dashboard",document.title="Dashboard",A(r,"class","title")},m(e,n){w(e,t,n),w(e,r,n)},p:e,i:e,o:e,d(e){e&&(y(t),y(r))}}}const pn=(()=>{const{subscribe:e,set:n,update:t}=Ae();return{subscribe:e,get:async()=>{const e=await Ze("\n  {\n    semesters {\n      id\n      name\n      startDate\n      endDate\n      groups {\n        id\n        name\n      }\n    }\n  }\n");n(e.semesters)},remove:async e=>{const n=await Ze("\n  mutation deleteSemester($id: ID!) {\n    deleteSemester(id: $id) {\n      id\n      name\n    }\n  }\n",{id:e});t(e=>e.filter(e=>n.deleteSemester.id!==e.id))},create:async e=>{const n=await Ze("\n  mutation createSemester($input: SemesterInput!) {\n    createSemester(input: $input) {\n      name\n      id\n      startDate\n      endDate\n      groups {\n        id\n        name\n      }\n    }\n  }\n",{input:e});t(e=>[...e,n.createSemester])},patch:async(e,n)=>{const r=await Ze("\n  mutation updateSemester($id: ID!, $input: SemesterInput!) {\n  updateSemester(input: $input, id: $id) {\n    name\n      id\n      startDate\n      endDate\n      groups {\n        id\n        name\n      }\n  }\n}\n",{id:e,input:n});t(n=>n.map(n=>n.id!==e?n:r.updateSemester))}}})();function mn(e){var n,t,r,s,a,i,o=e.getMessage(e.errors);return{c(){n=_("p"),t=_("span"),r=_("i"),(s=_("strong")).textContent="Error:",a=D(" "),i=D(o),A(r,"class","fas fa-exclamation-triangle svelte-sljdgk"),A(s,"class","svelte-sljdgk"),A(t,"class","error-message svelte-sljdgk"),A(n,"class","error svelte-sljdgk")},m(e,o){w(e,n,o),b(n,t),b(t,r),b(t,s),b(t,a),b(t,i)},p(e,n){e.errors&&o!==(o=n.getMessage(n.errors))&&N(i,o)},d(e){e&&y(n)}}}function fn(n){var t,r=n.getMessage(n.errors)&&mn(n);return{c(){r&&r.c(),t=C()},m(e,n){r&&r.m(e,n),w(e,t,n)},p(e,n){n.getMessage(n.errors)?r?r.p(e,n):((r=mn(n)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:e,o:e,d(e){r&&r.d(e),e&&y(t)}}}function gn(e,n,t){let{errors:r=""}=n;return e.$set=e=>{"errors"in e&&t("errors",r=e.errors)},{errors:r,getMessage:e=>!!e&&(Array.isArray(e)?e.map(e=>e.message).join("\n"):e.message?e.message:e)}}class hn extends Ce{constructor(e){super(),Ie(this,e,gn,fn,o,["errors"])}}function $n(e){var n,t,r,s,i,o,l,p,m,f,g,h,$,v,x,k,S,C=new hn({props:{errors:e.errors}});const T=e.$$slots.default,E=c(T,e,null);return{c(){n=_("h1"),t=D("Delete "),r=D(e.name),s=I(),C.$$.fragment.c(),i=I(),o=_("p"),l=D("Permanently delete "),E||((p=_("span")).textContent="item"),E&&E.c(),m=D("\n  ?"),f=I(),g=_("div"),h=_("button"),$=D("Delete"),v=I(),(x=_("button")).textContent="Keep it",A(n,"class","title"),E||A(p,"class","placeholder"),A(h,"class","button is-primary"),h.disabled=e.loading,P(h,"is-loading",e.loading),A(x,"class","button"),A(g,"class","buttons svelte-5zwjdi"),S=[M(h,"click",e.handleDelete),M(x,"click",e.close)]},l(e){E&&E.l(p_nodes)},m(e,a){w(e,n,a),b(n,t),b(n,r),w(e,s,a),_e(C,e,a),w(e,i,a),w(e,o,a),b(o,l),E?E.m(o,null):b(o,p),b(o,m),w(e,f,a),w(e,g,a),b(g,h),b(h,$),b(g,v),b(g,x),k=!0},p(e,n){k&&!e.name||N(r,n.name);var t={};e.errors&&(t.errors=n.errors),C.$set(t),E&&E.p&&e.$$scope&&E.p(u(T,n,e,null),d(T,n,null)),k&&!e.loading||(h.disabled=n.loading),e.loading&&P(h,"is-loading",n.loading)},i(e){k||(pe(C.$$.fragment,e),pe(E,e),k=!0)},o(e){me(C.$$.fragment,e),me(E,e),k=!1},d(e){e&&(y(n),y(s)),Se(C,e),e&&(y(i),y(o)),E&&E.d(e),e&&(y(f),y(g)),a(S)}}}function vn(e,n,t){const r=G();let{open:s=!1,loading:a=!1,errors:i="",name:o="item"}=n;let{$$slots:l={},$$scope:c}=n;return e.$set=e=>{"open"in e&&t("open",s=e.open),"loading"in e&&t("loading",a=e.loading),"errors"in e&&t("errors",i=e.errors),"name"in e&&t("name",o=e.name),"$$scope"in e&&t("$$scope",c=e.$$scope)},{open:s,loading:a,errors:i,name:o,handleDelete:async()=>{r("delete")},close:()=>{t("open",s=!1)},$$slots:l,$$scope:c}}class bn extends Ce{constructor(e){super(),Ie(this,e,vn,$n,o,["open","loading","errors","name"])}}function wn(e){var n,t,r,s,a,i,o,l,p,m;const f=e.$$slots.default,g=c(f,e,null);return{c(){n=_("div"),t=_("div"),s=I(),a=_("div"),i=_("section"),g&&g.c(),A(t,"class","modal-background"),A(i,"class","section svelte-1v8v78e"),A(a,"class","modal-content is-clipped svelte-1v8v78e"),A(n,"class","modal is-active"),m=M(t,"click",e.close)},l(e){g&&g.l(section_nodes)},m(e,r){w(e,n,r),b(n,t),b(n,s),b(n,a),b(a,i),g&&g.m(i,null),p=!0},p(e,n){g&&g.p&&e.$$scope&&g.p(u(f,n,e,null),d(f,n,null))},i(e){p||(e&&te(()=>{r||(r=he(t,Le,{duration:200},!0)),r.run(1)}),pe(g,e),te(()=>{l&&l.end(1),o||(o=fe(a,Pe,{duration:200,y:-300})),o.start()}),p=!0)},o(e){e&&(r||(r=he(t,Le,{duration:200},!1)),r.run(0)),me(g,e),o&&o.invalidate(),l=ge(a,Pe,{duration:200,y:300}),p=!1},d(e){e&&(y(n),r&&r.end()),g&&g.d(e),e&&l&&l.end(),m()}}}function yn(e){var n,t,r=e.open&&wn(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.open?r?(r.p(e,t),pe(r,1)):((r=wn(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function xn(e,n,t){let{open:r=!1}=n;let{$$slots:s={},$$scope:a}=n;return e.$set=e=>{"open"in e&&t("open",r=e.open),"$$scope"in e&&t("$$scope",a=e.$$scope)},{open:r,close:()=>{t("open",r=!1)},$$slots:s,$$scope:a}}class kn extends Ce{constructor(e){super(),Ie(this,e,xn,yn,o,["open"])}}function _n(e){var n,t;function r(t){e.confirmdelete_open_binding.call(null,t),n=!0,re(()=>n=!1)}let s={name:e.type,errors:e.errors,loading:e.loading,$$slots:{default:[Sn]},$$scope:{ctx:e}};void 0!==e.open&&(s.open=e.open);var a=new bn({props:s});return J.push(()=>ke(a,"open",r)),a.$on("delete",e.handleDelete),{c(){a.$$.fragment.c()},m(e,n){_e(a,e,n),t=!0},p(e,t){var r={};e.type&&(r.name=t.type),e.errors&&(r.errors=t.errors),e.loading&&(r.loading=t.loading),(e.$$scope||e.name||e.type)&&(r.$$scope={changed:e,ctx:t}),!n&&e.open&&(r.open=t.open),a.$set(r)},i(e){t||(pe(a.$$.fragment,e),t=!0)},o(e){me(a.$$.fragment,e),t=!1},d(e){Se(a,e)}}}function Sn(e){var n,t,r,s,a;return{c(){n=D("the "),t=D(e.type),r=D(" '"),s=D(e.name),a=D("'")},m(e,i){w(e,n,i),w(e,t,i),w(e,r,i),w(e,s,i),w(e,a,i)},p(e,n){e.type&&N(t,n.type),e.name&&N(s,n.name)},d(e){e&&(y(n),y(t),y(r),y(s),y(a))}}}function Dn(e){var n,t,r=e.open&&_n(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.open?r?(r.p(e,t),pe(r,1)):((r=_n(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function In(e){var n,t;function r(t){e.modal_open_binding.call(null,t),n=!0,re(()=>n=!1)}let s={$$slots:{default:[Dn]},$$scope:{ctx:e}};void 0!==e.open&&(s.open=e.open);var a=new kn({props:s});return J.push(()=>ke(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){_e(a,e,n),t=!0},p(e,t){var r={};(e.$$scope||e.open||e.type||e.errors||e.loading||e.name)&&(r.$$scope={changed:e,ctx:t}),!n&&e.open&&(r.open=t.open),a.$set(r)},i(e){t||(pe(a.$$.fragment,e),t=!0)},o(e){me(a.$$.fragment,e),t=!1},d(e){Se(a,e)}}}function Cn(e,n,t){let{id:r,store:s,type:a="",name:i="",open:o=!1}=n,l="",c=!1,{next:d=""}=n;return e.$set=e=>{"id"in e&&t("id",r=e.id),"store"in e&&t("store",s=e.store),"type"in e&&t("type",a=e.type),"name"in e&&t("name",i=e.name),"open"in e&&t("open",o=e.open),"next"in e&&t("next",d=e.next)},{id:r,store:s,type:a,name:i,open:o,errors:l,loading:c,next:d,handleDelete:async()=>{t("loading",c=!0);try{await s.remove(r),d?nn(d):tn(),t("open",o=!1),Ee.add({text:`${a} '${i}' deleted`,type:"success"})}catch(e){t("errors",l=e),Ee.add({text:`Could not delete ${a} '${i}'`,type:"danger"})}finally{t("loading",c=!1)}},confirmdelete_open_binding:function(e){t("open",o=e)},modal_open_binding:function(e){t("open",o=e)}}}class Mn extends Ce{constructor(e){super(),Ie(this,e,Cn,In,o,["id","store","type","name","open","next"])}}function Tn(e){var n,t;return{c(){n=_("p"),t=D(e.description),A(n,"class","help is-info"),A(n,"id",e.descriptionId)},m(e,r){w(e,n,r),b(n,t)},p(e,r){e.description&&N(t,r.description),e.descriptionId&&A(n,"id",r.descriptionId)},d(e){e&&y(n)}}}function An(e){var n,t;return{c(){A(n=_("input"),"name",e.name),A(n,"class","input svelte-193htxd"),A(n,"type","text"),A(n,"pattern",e.pattern),A(n,"minlength",e.minlength),A(n,"maxlength",e.maxlength),n.required=e.required,A(n,"aria-describedby",e.descriptionId),A(n,"placeholder",e.placeholder),P(n,"error",e.error),t=[M(n,"input",e.input_1_input_handler),M(n,"input",e.checkValidity),M(n,"invalid",T(e.checkValidity))]},m(t,r){w(t,n,r),n.value=e.value,e.input_1_binding(n)},p(e,t){e.value&&n.value!==t.value&&(n.value=t.value),e.name&&A(n,"name",t.name),e.pattern&&A(n,"pattern",t.pattern),e.minlength&&A(n,"minlength",t.minlength),e.maxlength&&A(n,"maxlength",t.maxlength),e.required&&(n.required=t.required),e.descriptionId&&A(n,"aria-describedby",t.descriptionId),e.placeholder&&A(n,"placeholder",t.placeholder),e.error&&P(n,"error",t.error)},d(r){r&&y(n),e.input_1_binding(null),a(t)}}}function Nn(e){var n,t;return{c(){A(n=_("input"),"name",e.name),A(n,"class","input svelte-193htxd"),A(n,"type","password"),A(n,"pattern",e.pattern),A(n,"minlength",e.minlength),A(n,"maxlength",e.maxlength),n.required=e.required,A(n,"aria-describedby",e.descriptionId),A(n,"placeholder",e.placeholder),P(n,"error",e.error),t=[M(n,"input",e.input_1_input_handler_1),M(n,"input",e.checkValidity),M(n,"invalid",T(e.checkValidity))]},m(t,r){w(t,n,r),n.value=e.value,e.input_1_binding_1(n)},p(e,t){e.value&&n.value!==t.value&&(n.value=t.value),e.name&&A(n,"name",t.name),e.pattern&&A(n,"pattern",t.pattern),e.minlength&&A(n,"minlength",t.minlength),e.maxlength&&A(n,"maxlength",t.maxlength),e.required&&(n.required=t.required),e.descriptionId&&A(n,"aria-describedby",t.descriptionId),e.placeholder&&A(n,"placeholder",t.placeholder),e.error&&P(n,"error",t.error)},d(r){r&&y(n),e.input_1_binding_1(null),a(t)}}}function En(e){var n,t;return{c(){A(n=_("input"),"name",e.name),A(n,"class","input svelte-193htxd"),A(n,"type","date"),A(n,"pattern","^[0-9]4-(1[0-2]|0[1-9])-([1-3][0-9]|0[1-9])$"),n.required=e.required,A(n,"max",e.max),A(n,"aria-describedby",e.descriptionId),P(n,"error",e.error),t=[M(n,"input",e.input_1_input_handler_2),M(n,"input",e.checkValidity),M(n,"invalid",T(e.checkValidity))]},m(t,r){w(t,n,r),n.value=e.value,e.input_1_binding_2(n)},p(e,t){e.value&&(n.value=t.value),e.name&&A(n,"name",t.name),e.required&&(n.required=t.required),e.max&&A(n,"max",t.max),e.descriptionId&&A(n,"aria-describedby",t.descriptionId),e.error&&P(n,"error",t.error)},d(r){r&&y(n),e.input_1_binding_2(null),a(t)}}}function On(e){var n,t;return{c(){A(n=_("input"),"name",e.name),A(n,"class","input svelte-193htxd"),A(n,"type","datetime-local"),n.required=e.required,A(n,"max",e.max),A(n,"aria-describedby",e.descriptionId),P(n,"error",e.error),t=[M(n,"input",e.input_1_input_handler_3),M(n,"input",e.checkValidity),M(n,"invalid",T(e.checkValidity))]},m(t,r){w(t,n,r),n.value=e.value,e.input_1_binding_3(n)},p(e,t){e.value&&(n.value=t.value),e.name&&A(n,"name",t.name),e.required&&(n.required=t.required),e.max&&A(n,"max",t.max),e.descriptionId&&A(n,"aria-describedby",t.descriptionId),e.error&&P(n,"error",t.error)},d(r){r&&y(n),e.input_1_binding_3(null),a(t)}}}function Ln(e){var n,t,r;return{c(){n=_("span"),A(t=_("i"),"class",r="fas fa-"+e.leftIcon),A(n,"class","icon is-small is-left")},m(e,r){w(e,n,r),b(n,t)},p(e,n){e.leftIcon&&r!==(r="fas fa-"+n.leftIcon)&&A(t,"class",r)},d(e){e&&y(n)}}}function Pn(e){var n,t,r;return{c(){n=_("span"),A(t=_("i"),"class",r="fas fa-"+e.rightIcon),A(n,"class","icon is-small is-right")},m(e,r){w(e,n,r),b(n,t)},p(e,n){e.rightIcon&&r!==(r="fas fa-"+n.rightIcon)&&A(t,"class",r)},d(e){e&&y(n)}}}function Rn(e){var n,t;return{c(){n=_("p"),t=D(e.error),A(n,"class","help is-danger")},m(e,r){w(e,n,r),b(n,t)},p(e,n){e.error&&N(t,n.error)},d(e){e&&y(n)}}}function jn(n){var t,r,s,a,i,o,l,c,d,u,p,m,f,g=n.description&&Tn(n),h="text"===n.type&&An(n),$="password"===n.type&&Nn(n),v="date"===n.type&&En(n),x="datetime-local"===n.type&&On(n),k=n.leftIcon&&Ln(n),S=n.rightIcon&&Pn(n),C=n.error&&Rn(n);return{c(){t=_("div"),r=_("label"),s=D(n.label),a=I(),g&&g.c(),i=I(),o=_("div"),l=_("div"),h&&h.c(),c=I(),$&&$.c(),d=I(),v&&v.c(),u=I(),x&&x.c(),p=I(),k&&k.c(),m=I(),S&&S.c(),f=I(),C&&C.c(),A(r,"class","label"),A(l,"class","control"),P(l,"has-icons-left",n.leftIcon),P(l,"has-icons-right",n.rightIcon),A(o,"class","field-body"),A(t,"class","field")},m(e,n){w(e,t,n),b(t,r),b(r,s),b(r,a),g&&g.m(r,null),b(t,i),b(t,o),b(o,l),h&&h.m(l,null),b(l,c),$&&$.m(l,null),b(l,d),v&&v.m(l,null),b(l,u),x&&x.m(l,null),b(l,p),k&&k.m(l,null),b(l,m),S&&S.m(l,null),b(l,f),C&&C.m(l,null)},p(e,n){e.label&&N(s,n.label),n.description?g?g.p(e,n):((g=Tn(n)).c(),g.m(r,null)):g&&(g.d(1),g=null),"text"===n.type?h?h.p(e,n):((h=An(n)).c(),h.m(l,c)):h&&(h.d(1),h=null),"password"===n.type?$?$.p(e,n):(($=Nn(n)).c(),$.m(l,d)):$&&($.d(1),$=null),"date"===n.type?v?v.p(e,n):((v=En(n)).c(),v.m(l,u)):v&&(v.d(1),v=null),"datetime-local"===n.type?x?x.p(e,n):((x=On(n)).c(),x.m(l,p)):x&&(x.d(1),x=null),n.leftIcon?k?k.p(e,n):((k=Ln(n)).c(),k.m(l,m)):k&&(k.d(1),k=null),n.rightIcon?S?S.p(e,n):((S=Pn(n)).c(),S.m(l,f)):S&&(S.d(1),S=null),n.error?C?C.p(e,n):((C=Rn(n)).c(),C.m(l,null)):C&&(C.d(1),C=null),e.leftIcon&&P(l,"has-icons-left",n.leftIcon),e.rightIcon&&P(l,"has-icons-right",n.rightIcon)},i:e,o:e,d(e){e&&y(t),g&&g.d(),h&&h.d(),$&&$.d(),v&&v.d(),x&&x.d(),k&&k.d(),S&&S.d(),C&&C.d()}}}function zn(e,n,t){let r,s,a,{value:i,showDescription:o=!1,label:l=""}=n,c=!1,{required:d=!1,pattern:u="^.+$",minlength:p=1,maxlength:m=null,type:f="text",description:g="",width:h="40rem",min:$=null,max:v=null,rightIcon:b=null,leftIcon:w=null,placeholder:y=""}=n;return e.$set=e=>{"value"in e&&t("value",i=e.value),"showDescription"in e&&t("showDescription",o=e.showDescription),"label"in e&&t("label",l=e.label),"required"in e&&t("required",d=e.required),"pattern"in e&&t("pattern",u=e.pattern),"minlength"in e&&t("minlength",p=e.minlength),"maxlength"in e&&t("maxlength",m=e.maxlength),"type"in e&&t("type",f=e.type),"description"in e&&t("description",g=e.description),"width"in e&&t("width",h=e.width),"min"in e&&t("min",$=e.min),"max"in e&&t("max",v=e.max),"rightIcon"in e&&t("rightIcon",b=e.rightIcon),"leftIcon"in e&&t("leftIcon",w=e.leftIcon),"placeholder"in e&&t("placeholder",y=e.placeholder)},e.$$.update=(e={label:1,name:1})=>{e.label&&t("name",s=l.replace(/\W+(.)/g,(e,n)=>n.toUpperCase())),e.name&&t("descriptionId",a=`description${s}`)},{input:r,value:i,showDescription:o,label:l,error:c,required:d,pattern:u,minlength:p,maxlength:m,type:f,description:g,width:h,min:$,max:v,rightIcon:b,leftIcon:w,placeholder:y,checkValidity:function(){t("error",c=!r.validity.valid&&r.validationMessage?r.validationMessage:"")},name:s,descriptionId:a,input_1_input_handler:function(){i=this.value,t("value",i)},input_1_binding:function(e){J[e?"unshift":"push"](()=>{t("input",r=e)})},input_1_input_handler_1:function(){i=this.value,t("value",i)},input_1_binding_1:function(e){J[e?"unshift":"push"](()=>{t("input",r=e)})},input_1_input_handler_2:function(){i=this.value,t("value",i)},input_1_binding_2:function(e){J[e?"unshift":"push"](()=>{t("input",r=e)})},input_1_input_handler_3:function(){i=this.value,t("value",i)},input_1_binding_3:function(e){J[e?"unshift":"push"](()=>{t("input",r=e)})}}}class qn extends Ce{constructor(e){super(),Ie(this,e,zn,jn,o,["value","showDescription","label","required","pattern","minlength","maxlength","type","description","width","min","max","rightIcon","leftIcon","placeholder"])}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Hn(e,n){return e(n={exports:{}},n.exports),n.exports}var Fn=Hn(function(e,n){e.exports=function(){var e=function(){return(e=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var s in n=arguments[t])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e}).apply(this,arguments)},n=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],t={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:function(e){return"undefined"!=typeof console&&console.warn(e)},getWeek:function(e){var n=new Date(e.getTime());n.setHours(0,0,0,0),n.setDate(n.getDate()+3-(n.getDay()+6)%7);var t=new Date(n.getFullYear(),0,4);return 1+Math.round(((n.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},r={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var n=e%100;if(n>3&&n<21)return"th";switch(n%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year"},s=function(e){return("0"+e).slice(-2)},a=function(e){return!0===e?1:0};function i(e,n,t){var r;return void 0===t&&(t=!1),function(){var s=this,a=arguments;null!==r&&clearTimeout(r),r=window.setTimeout(function(){r=null,t||e.apply(s,a)},n),t&&!r&&e.apply(s,a)}}var o=function(e){return e instanceof Array?e:[e]};function l(e,n,t){if(!0===t)return e.classList.add(n);e.classList.remove(n)}function c(e,n,t){var r=window.document.createElement(e);return n=n||"",t=t||"",r.className=n,void 0!==t&&(r.textContent=t),r}function d(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function u(e,n){var t=c("div","numInputWrapper"),r=c("input","numInput "+e),s=c("span","arrowUp"),a=c("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?r.type="number":(r.type="text",r.pattern="\\d*"),void 0!==n)for(var i in n)r.setAttribute(i,n[i]);return t.appendChild(r),t.appendChild(s),t.appendChild(a),t}var p=function(){},m=function(e,n,t){return t.months[n?"shorthand":"longhand"][e]},f={D:p,F:function(e,n,t){e.setMonth(t.months.longhand.indexOf(n))},G:function(e,n){e.setHours(parseFloat(n))},H:function(e,n){e.setHours(parseFloat(n))},J:function(e,n){e.setDate(parseFloat(n))},K:function(e,n,t){e.setHours(e.getHours()%12+12*a(new RegExp(t.amPM[1],"i").test(n)))},M:function(e,n,t){e.setMonth(t.months.shorthand.indexOf(n))},S:function(e,n){e.setSeconds(parseFloat(n))},U:function(e,n){return new Date(1e3*parseFloat(n))},W:function(e,n){var t=parseInt(n);return new Date(e.getFullYear(),0,2+7*(t-1),0,0,0,0)},Y:function(e,n){e.setFullYear(parseFloat(n))},Z:function(e,n){return new Date(n)},d:function(e,n){e.setDate(parseFloat(n))},h:function(e,n){e.setHours(parseFloat(n))},i:function(e,n){e.setMinutes(parseFloat(n))},j:function(e,n){e.setDate(parseFloat(n))},l:p,m:function(e,n){e.setMonth(parseFloat(n)-1)},n:function(e,n){e.setMonth(parseFloat(n)-1)},s:function(e,n){e.setSeconds(parseFloat(n))},u:function(e,n){return new Date(parseFloat(n))},w:p,y:function(e,n){e.setFullYear(2e3+parseFloat(n))}},g={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},h={Z:function(e){return e.toISOString()},D:function(e,n,t){return n.weekdays.shorthand[h.w(e,n,t)]},F:function(e,n,t){return m(h.n(e,n,t)-1,!1,n)},G:function(e,n,t){return s(h.h(e,n,t))},H:function(e){return s(e.getHours())},J:function(e,n){return void 0!==n.ordinal?e.getDate()+n.ordinal(e.getDate()):e.getDate()},K:function(e,n){return n.amPM[a(e.getHours()>11)]},M:function(e,n){return m(e.getMonth(),!0,n)},S:function(e){return s(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,n,t){return t.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(e){return s(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return s(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,n){return n.weekdays.longhand[e.getDay()]},m:function(e){return s(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},$=function(e){var n=e.config,s=void 0===n?t:n,a=e.l10n,i=void 0===a?r:a;return function(e,n,t){var r=t||i;return void 0!==s.formatDate?s.formatDate(e,n,r):n.split("").map(function(n,t,a){return h[n]&&"\\"!==a[t-1]?h[n](e,r,s):"\\"!==n?n:""}).join("")}},v=function(e){var n=e.config,s=void 0===n?t:n,a=e.l10n,i=void 0===a?r:a;return function(e,n,r,a){if(0===e||e){var o,l=a||i,c=e;if(e instanceof Date)o=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)o=new Date(e);else if("string"==typeof e){var d=n||(s||t).dateFormat,u=String(e).trim();if("today"===u)o=new Date,r=!0;else if(/Z$/.test(u)||/GMT$/.test(u))o=new Date(e);else if(s&&s.parseDate)o=s.parseDate(e,d);else{o=s&&s.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var p=void 0,m=[],h=0,$=0,v="";h<d.length;h++){var b=d[h],w="\\"===b,y="\\"===d[h-1]||w;if(g[b]&&!y){v+=g[b];var x=new RegExp(v).exec(e);x&&(p=!0)&&m["Y"!==b?"push":"unshift"]({fn:f[b],val:x[++$]})}else w||(v+=".");m.forEach(function(e){var n=e.fn,t=e.val;return o=n(o,t,l)||o})}o=p?o:void 0}}if(o instanceof Date&&!isNaN(o.getTime()))return!0===r&&o.setHours(0,0,0,0),o;s.errorHandler(new Error("Invalid date provided: "+c))}}};function b(e,n,t){return void 0===t&&(t=!0),!1!==t?new Date(e.getTime()).setHours(0,0,0,0)-new Date(n.getTime()).setHours(0,0,0,0):e.getTime()-n.getTime()}var w=function(e,n,t){return e>Math.min(n,t)&&e<Math.max(n,t)},y={DAY:864e5};"function"!=typeof Object.assign&&(Object.assign=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var r=function(n){n&&Object.keys(n).forEach(function(t){return e[t]=n[t]})},s=0,a=n;s<a.length;s++){var i=a[s];r(i)}return e});var x=300;function k(t,p){var f={config:e({},S.defaultConfig),l10n:r};function h(e){return e.bind(f)}function k(){var e=f.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame(function(){if(void 0!==f.calendarContainer&&(f.calendarContainer.style.visibility="hidden",f.calendarContainer.style.display="block"),void 0!==f.daysContainer){var n=(f.days.offsetWidth+1)*e.showMonths;f.daysContainer.style.width=n+"px",f.calendarContainer.style.width=n+(void 0!==f.weekWrapper?f.weekWrapper.offsetWidth:0)+"px",f.calendarContainer.style.removeProperty("visibility"),f.calendarContainer.style.removeProperty("display")}})}function _(e){0===f.selectedDates.length&&se(),void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();var n="keydown"===e.type,t=e.target;void 0!==f.amPM&&e.target===f.amPM&&(f.amPM.textContent=f.l10n.amPM[a(f.amPM.textContent===f.l10n.amPM[0])]);var r=parseFloat(t.getAttribute("min")),i=parseFloat(t.getAttribute("max")),o=parseFloat(t.getAttribute("step")),l=parseInt(t.value,10),c=e.delta||(n?38===e.which?1:-1:0),d=l+o*c;if(void 0!==t.value&&2===t.value.length){var u=t===f.hourElement,p=t===f.minuteElement;d<r?(d=i+d+a(!u)+(a(u)&&a(!f.amPM)),p&&R(void 0,-1,f.hourElement)):d>i&&(d=t===f.hourElement?d-i-a(!f.amPM):r,p&&R(void 0,1,f.hourElement)),f.amPM&&u&&(1===o?d+l===23:Math.abs(d-l)>o)&&(f.amPM.textContent=f.l10n.amPM[a(f.amPM.textContent===f.l10n.amPM[0])]),t.value=s(d)}}(e);var n=f._input.value;D(),be(),f._input.value!==n&&f._debouncedChange()}function D(){if(void 0!==f.hourElement&&void 0!==f.minuteElement){var e,n,t=(parseInt(f.hourElement.value.slice(-2),10)||0)%24,r=(parseInt(f.minuteElement.value,10)||0)%60,s=void 0!==f.secondElement?(parseInt(f.secondElement.value,10)||0)%60:0;void 0!==f.amPM&&(e=t,n=f.amPM.textContent,t=e%12+12*a(n===f.l10n.amPM[1]));var i=void 0!==f.config.minTime||f.config.minDate&&f.minDateHasTime&&f.latestSelectedDateObj&&0===b(f.latestSelectedDateObj,f.config.minDate,!0),o=void 0!==f.config.maxTime||f.config.maxDate&&f.maxDateHasTime&&f.latestSelectedDateObj&&0===b(f.latestSelectedDateObj,f.config.maxDate,!0);if(o){var l=void 0!==f.config.maxTime?f.config.maxTime:f.config.maxDate;(t=Math.min(t,l.getHours()))===l.getHours()&&(r=Math.min(r,l.getMinutes())),r===l.getMinutes()&&(s=Math.min(s,l.getSeconds()))}if(i){var c=void 0!==f.config.minTime?f.config.minTime:f.config.minDate;(t=Math.max(t,c.getHours()))===c.getHours()&&(r=Math.max(r,c.getMinutes())),r===c.getMinutes()&&(s=Math.max(s,c.getSeconds()))}M(t,r,s)}}function I(e){var n=e||f.latestSelectedDateObj;n&&M(n.getHours(),n.getMinutes(),n.getSeconds())}function C(){var e=f.config.defaultHour,n=f.config.defaultMinute,t=f.config.defaultSeconds;if(void 0!==f.config.minDate){var r=f.config.minDate.getHours(),s=f.config.minDate.getMinutes();(e=Math.max(e,r))===r&&(n=Math.max(s,n)),e===r&&n===s&&(t=f.config.minDate.getSeconds())}if(void 0!==f.config.maxDate){var a=f.config.maxDate.getHours(),i=f.config.maxDate.getMinutes();(e=Math.min(e,a))===a&&(n=Math.min(i,n)),e===a&&n===i&&(t=f.config.maxDate.getSeconds())}M(e,n,t)}function M(e,n,t){void 0!==f.latestSelectedDateObj&&f.latestSelectedDateObj.setHours(e%24,n,t||0,0),f.hourElement&&f.minuteElement&&!f.isMobile&&(f.hourElement.value=s(f.config.time_24hr?e:(12+e)%12+12*a(e%12==0)),f.minuteElement.value=s(n),void 0!==f.amPM&&(f.amPM.textContent=f.l10n.amPM[a(e>=12)]),void 0!==f.secondElement&&(f.secondElement.value=s(t)))}function T(e){var n=parseInt(e.target.value)+(e.delta||0);(n/1e3>1||"Enter"===e.key&&!/[^\d]/.test(n.toString()))&&Q(n)}function A(e,n,t,r){return n instanceof Array?n.forEach(function(n){return A(e,n,t,r)}):e instanceof Array?e.forEach(function(e){return A(e,n,t,r)}):(e.addEventListener(n,t,r),void f._handlers.push({element:e,event:n,handler:t,options:r}))}function N(e){return function(n){1===n.which&&e(n)}}function E(){fe("onChange")}function O(){if(f.config.wrap&&["open","close","toggle","clear"].forEach(function(e){Array.prototype.forEach.call(f.element.querySelectorAll("[data-"+e+"]"),function(n){return A(n,"click",f[e])})}),f.isMobile)!function(){var e=f.config.enableTime?f.config.noCalendar?"time":"datetime-local":"date";f.mobileInput=c("input",f.input.className+" flatpickr-mobile"),f.mobileInput.step=f.input.getAttribute("step")||"any",f.mobileInput.tabIndex=1,f.mobileInput.type=e,f.mobileInput.disabled=f.input.disabled,f.mobileInput.required=f.input.required,f.mobileInput.placeholder=f.input.placeholder,f.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",f.selectedDates.length>0&&(f.mobileInput.defaultValue=f.mobileInput.value=f.formatDate(f.selectedDates[0],f.mobileFormatStr)),f.config.minDate&&(f.mobileInput.min=f.formatDate(f.config.minDate,"Y-m-d")),f.config.maxDate&&(f.mobileInput.max=f.formatDate(f.config.maxDate,"Y-m-d")),f.input.type="hidden",void 0!==f.altInput&&(f.altInput.type="hidden");try{f.input.parentNode&&f.input.parentNode.insertBefore(f.mobileInput,f.input.nextSibling)}catch(e){}A(f.mobileInput,"change",function(e){f.setDate(e.target.value,!1,f.mobileFormatStr),fe("onChange"),fe("onClose")})}();else{var e=i(re,50);f._debouncedChange=i(E,x),f.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&A(f.daysContainer,"mouseover",function(e){"range"===f.config.mode&&te(e.target)}),A(window.document.body,"keydown",ne),f.config.static||A(f._input,"keydown",ne),f.config.inline||f.config.static||A(window,"resize",e),void 0!==window.ontouchstart?A(window.document,"click",X):A(window.document,"mousedown",N(X)),A(window.document,"focus",X,{capture:!0}),!0===f.config.clickOpens&&(A(f._input,"focus",f.open),A(f._input,"mousedown",N(f.open))),void 0!==f.daysContainer&&(A(f.monthNav,"mousedown",N(we)),A(f.monthNav,["keyup","increment"],T),A(f.daysContainer,"mousedown",N(de))),void 0!==f.timeContainer&&void 0!==f.minuteElement&&void 0!==f.hourElement&&(A(f.timeContainer,["increment"],_),A(f.timeContainer,"blur",_,{capture:!0}),A(f.timeContainer,"mousedown",N(P)),A([f.hourElement,f.minuteElement],["focus","click"],function(e){return e.target.select()}),void 0!==f.secondElement&&A(f.secondElement,"focus",function(){return f.secondElement&&f.secondElement.select()}),void 0!==f.amPM&&A(f.amPM,"mousedown",N(function(e){_(e),E()})))}}function L(e){var n=void 0!==e?f.parseDate(e):f.latestSelectedDateObj||(f.config.minDate&&f.config.minDate>f.now?f.config.minDate:f.config.maxDate&&f.config.maxDate<f.now?f.config.maxDate:f.now);try{void 0!==n&&(f.currentYear=n.getFullYear(),f.currentMonth=n.getMonth())}catch(e){e.message="Invalid date supplied: "+n,f.config.errorHandler(e)}f.redraw()}function P(e){~e.target.className.indexOf("arrow")&&R(e,e.target.classList.contains("arrowUp")?1:-1)}function R(e,n,t){var r=e&&e.target,s=t||r&&r.parentNode&&r.parentNode.firstChild,a=ge("increment");a.delta=n,s&&s.dispatchEvent(a)}function j(){var e=window.document.createDocumentFragment();if(f.calendarContainer=c("div","flatpickr-calendar"),f.calendarContainer.tabIndex=-1,!f.config.noCalendar){if(e.appendChild((f.monthNav=c("div","flatpickr-months"),f.yearElements=[],f.monthElements=[],f.prevMonthNav=c("span","flatpickr-prev-month"),f.prevMonthNav.innerHTML=f.config.prevArrow,f.nextMonthNav=c("span","flatpickr-next-month"),f.nextMonthNav.innerHTML=f.config.nextArrow,U(),Object.defineProperty(f,"_hidePrevMonthArrow",{get:function(){return f.__hidePrevMonthArrow},set:function(e){f.__hidePrevMonthArrow!==e&&(l(f.prevMonthNav,"disabled",e),f.__hidePrevMonthArrow=e)}}),Object.defineProperty(f,"_hideNextMonthArrow",{get:function(){return f.__hideNextMonthArrow},set:function(e){f.__hideNextMonthArrow!==e&&(l(f.nextMonthNav,"disabled",e),f.__hideNextMonthArrow=e)}}),f.currentYearElement=f.yearElements[0],$e(),f.monthNav)),f.innerContainer=c("div","flatpickr-innerContainer"),f.config.weekNumbers){var n=function(){f.calendarContainer.classList.add("hasWeeks");var e=c("div","flatpickr-weekwrapper");e.appendChild(c("span","flatpickr-weekday",f.l10n.weekAbbreviation));var n=c("div","flatpickr-weeks");return e.appendChild(n),{weekWrapper:e,weekNumbers:n}}(),t=n.weekWrapper,r=n.weekNumbers;f.innerContainer.appendChild(t),f.weekNumbers=r,f.weekWrapper=t}f.rContainer=c("div","flatpickr-rContainer"),f.rContainer.appendChild(G()),f.daysContainer||(f.daysContainer=c("div","flatpickr-days"),f.daysContainer.tabIndex=-1),Y(),f.rContainer.appendChild(f.daysContainer),f.innerContainer.appendChild(f.rContainer),e.appendChild(f.innerContainer)}f.config.enableTime&&e.appendChild(function(){f.calendarContainer.classList.add("hasTime"),f.config.noCalendar&&f.calendarContainer.classList.add("noCalendar"),f.timeContainer=c("div","flatpickr-time"),f.timeContainer.tabIndex=-1;var e=c("span","flatpickr-time-separator",":"),n=u("flatpickr-hour");f.hourElement=n.getElementsByTagName("input")[0];var t=u("flatpickr-minute");if(f.minuteElement=t.getElementsByTagName("input")[0],f.hourElement.tabIndex=f.minuteElement.tabIndex=-1,f.hourElement.value=s(f.latestSelectedDateObj?f.latestSelectedDateObj.getHours():f.config.time_24hr?f.config.defaultHour:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(f.config.defaultHour)),f.minuteElement.value=s(f.latestSelectedDateObj?f.latestSelectedDateObj.getMinutes():f.config.defaultMinute),f.hourElement.setAttribute("step",f.config.hourIncrement.toString()),f.minuteElement.setAttribute("step",f.config.minuteIncrement.toString()),f.hourElement.setAttribute("min",f.config.time_24hr?"0":"1"),f.hourElement.setAttribute("max",f.config.time_24hr?"23":"12"),f.minuteElement.setAttribute("min","0"),f.minuteElement.setAttribute("max","59"),f.timeContainer.appendChild(n),f.timeContainer.appendChild(e),f.timeContainer.appendChild(t),f.config.time_24hr&&f.timeContainer.classList.add("time24hr"),f.config.enableSeconds){f.timeContainer.classList.add("hasSeconds");var r=u("flatpickr-second");f.secondElement=r.getElementsByTagName("input")[0],f.secondElement.value=s(f.latestSelectedDateObj?f.latestSelectedDateObj.getSeconds():f.config.defaultSeconds),f.secondElement.setAttribute("step",f.minuteElement.getAttribute("step")),f.secondElement.setAttribute("min","0"),f.secondElement.setAttribute("max","59"),f.timeContainer.appendChild(c("span","flatpickr-time-separator",":")),f.timeContainer.appendChild(r)}return f.config.time_24hr||(f.amPM=c("span","flatpickr-am-pm",f.l10n.amPM[a((f.latestSelectedDateObj?f.hourElement.value:f.config.defaultHour)>11)]),f.amPM.title=f.l10n.toggleTitle,f.amPM.tabIndex=-1,f.timeContainer.appendChild(f.amPM)),f.timeContainer}()),l(f.calendarContainer,"rangeMode","range"===f.config.mode),l(f.calendarContainer,"animate",!0===f.config.animate),l(f.calendarContainer,"multiMonth",f.config.showMonths>1),f.calendarContainer.appendChild(e);var i=void 0!==f.config.appendTo&&void 0!==f.config.appendTo.nodeType;if((f.config.inline||f.config.static)&&(f.calendarContainer.classList.add(f.config.inline?"inline":"static"),f.config.inline&&(!i&&f.element.parentNode?f.element.parentNode.insertBefore(f.calendarContainer,f._input.nextSibling):void 0!==f.config.appendTo&&f.config.appendTo.appendChild(f.calendarContainer)),f.config.static)){var o=c("div","flatpickr-wrapper");f.element.parentNode&&f.element.parentNode.insertBefore(o,f.element),o.appendChild(f.element),f.altInput&&o.appendChild(f.altInput),o.appendChild(f.calendarContainer)}f.config.static||f.config.inline||(void 0!==f.config.appendTo?f.config.appendTo:window.document.body).appendChild(f.calendarContainer)}function z(e,n,t,r){var s=K(n,!0),a=c("span","flatpickr-day "+e,n.getDate().toString());return a.dateObj=n,a.$i=r,a.setAttribute("aria-label",f.formatDate(n,f.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===b(n,f.now)&&(f.todayDateElem=a,a.classList.add("today"),a.setAttribute("aria-current","date")),s?(a.tabIndex=-1,he(n)&&(a.classList.add("selected"),f.selectedDateElem=a,"range"===f.config.mode&&(l(a,"startRange",f.selectedDates[0]&&0===b(n,f.selectedDates[0],!0)),l(a,"endRange",f.selectedDates[1]&&0===b(n,f.selectedDates[1],!0)),"nextMonthDay"===e&&a.classList.add("inRange")))):a.classList.add("disabled"),"range"===f.config.mode&&function(e){return!("range"!==f.config.mode||f.selectedDates.length<2)&&b(e,f.selectedDates[0])>=0&&b(e,f.selectedDates[1])<=0}(n)&&!he(n)&&a.classList.add("inRange"),f.weekNumbers&&1===f.config.showMonths&&"prevMonthDay"!==e&&t%7==1&&f.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+f.config.getWeek(n)+"</span>"),fe("onDayCreate",a),a}function q(e){e.focus(),"range"===f.config.mode&&te(e)}function H(e){for(var n=e>0?0:f.config.showMonths-1,t=e>0?f.config.showMonths:-1,r=n;r!=t;r+=e)for(var s=f.daysContainer.children[r],a=e>0?0:s.children.length-1,i=e>0?s.children.length:-1,o=a;o!=i;o+=e){var l=s.children[o];if(-1===l.className.indexOf("hidden")&&K(l.dateObj))return l}}function F(e,n){var t=ee(document.activeElement||document.body),r=void 0!==e?e:t?document.activeElement:void 0!==f.selectedDateElem&&ee(f.selectedDateElem)?f.selectedDateElem:void 0!==f.todayDateElem&&ee(f.todayDateElem)?f.todayDateElem:H(n>0?1:-1);return void 0===r?f._input.focus():t?void function(e,n){for(var t=-1===e.className.indexOf("Month")?e.dateObj.getMonth():f.currentMonth,r=n>0?f.config.showMonths:-1,s=n>0?1:-1,a=t-f.currentMonth;a!=r;a+=s)for(var i=f.daysContainer.children[a],o=t-f.currentMonth===a?e.$i+n:n<0?i.children.length-1:0,l=i.children.length,c=o;c>=0&&c<l&&c!=(n>0?l:-1);c+=s){var d=i.children[c];if(-1===d.className.indexOf("hidden")&&K(d.dateObj)&&Math.abs(e.$i-c)>=Math.abs(n))return q(d)}f.changeMonth(s),F(H(s),0)}(r,n):q(r)}function W(e,n){for(var t=(new Date(e,n,1).getDay()-f.l10n.firstDayOfWeek+7)%7,r=f.utils.getDaysInMonth((n-1+12)%12),s=f.utils.getDaysInMonth(n),a=window.document.createDocumentFragment(),i=f.config.showMonths>1,o=i?"prevMonthDay hidden":"prevMonthDay",l=i?"nextMonthDay hidden":"nextMonthDay",d=r+1-t,u=0;d<=r;d++,u++)a.appendChild(z(o,new Date(e,n-1,d),d,u));for(d=1;d<=s;d++,u++)a.appendChild(z("",new Date(e,n,d),d,u));for(var p=s+1;p<=42-t&&(1===f.config.showMonths||u%7!=0);p++,u++)a.appendChild(z(l,new Date(e,n+1,p%s),p,u));var m=c("div","dayContainer");return m.appendChild(a),m}function Y(){if(void 0!==f.daysContainer){d(f.daysContainer),f.weekNumbers&&d(f.weekNumbers);for(var e=document.createDocumentFragment(),n=0;n<f.config.showMonths;n++){var t=new Date(f.currentYear,f.currentMonth,1);t.setMonth(f.currentMonth+n),e.appendChild(W(t.getFullYear(),t.getMonth()))}f.daysContainer.appendChild(e),f.days=f.daysContainer.firstChild,"range"===f.config.mode&&1===f.selectedDates.length&&te()}}function B(){var e=c("div","flatpickr-month"),n=window.document.createDocumentFragment(),t=c("span","cur-month"),r=u("cur-year",{tabindex:"-1"}),s=r.getElementsByTagName("input")[0];s.setAttribute("aria-label",f.l10n.yearAriaLabel),f.config.minDate&&s.setAttribute("min",f.config.minDate.getFullYear().toString()),f.config.maxDate&&(s.setAttribute("max",f.config.maxDate.getFullYear().toString()),s.disabled=!!f.config.minDate&&f.config.minDate.getFullYear()===f.config.maxDate.getFullYear());var a=c("div","flatpickr-current-month");return a.appendChild(t),a.appendChild(r),n.appendChild(a),e.appendChild(n),{container:e,yearElement:s,monthElement:t}}function U(){d(f.monthNav),f.monthNav.appendChild(f.prevMonthNav),f.config.showMonths&&(f.yearElements=[],f.monthElements=[]);for(var e=f.config.showMonths;e--;){var n=B();f.yearElements.push(n.yearElement),f.monthElements.push(n.monthElement),f.monthNav.appendChild(n.container)}f.monthNav.appendChild(f.nextMonthNav)}function G(){f.weekdayContainer?d(f.weekdayContainer):f.weekdayContainer=c("div","flatpickr-weekdays");for(var e=f.config.showMonths;e--;){var n=c("div","flatpickr-weekdaycontainer");f.weekdayContainer.appendChild(n)}return Z(),f.weekdayContainer}function Z(){var e=f.l10n.firstDayOfWeek,n=f.l10n.weekdays.shorthand.slice();e>0&&e<n.length&&(n=n.splice(e,n.length).concat(n.splice(0,e)));for(var t=f.config.showMonths;t--;)f.weekdayContainer.children[t].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+n.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}function V(e,n){void 0===n&&(n=!0);var t=n?e:e-f.currentMonth;t<0&&!0===f._hidePrevMonthArrow||t>0&&!0===f._hideNextMonthArrow||(f.currentMonth+=t,(f.currentMonth<0||f.currentMonth>11)&&(f.currentYear+=f.currentMonth>11?1:-1,f.currentMonth=(f.currentMonth+12)%12,fe("onYearChange")),Y(),fe("onMonthChange"),$e())}function J(e){return!(!f.config.appendTo||!f.config.appendTo.contains(e))||f.calendarContainer.contains(e)}function X(e){if(f.isOpen&&!f.config.inline){var n=function(e){if("function"==typeof e.composedPath){var n=e.composedPath();return n[0]}return e.target}(e),t=J(n),r=n===f.input||n===f.altInput||f.element.contains(n)||e.path&&e.path.indexOf&&(~e.path.indexOf(f.input)||~e.path.indexOf(f.altInput)),s="blur"===e.type?r&&e.relatedTarget&&!J(e.relatedTarget):!r&&!t&&!J(e.relatedTarget),a=!f.config.ignoredFocusElements.some(function(e){return e.contains(n)});s&&a&&(f.close(),"range"===f.config.mode&&1===f.selectedDates.length&&(f.clear(!1),f.redraw()))}}function Q(e){if(!(!e||f.config.minDate&&e<f.config.minDate.getFullYear()||f.config.maxDate&&e>f.config.maxDate.getFullYear())){var n=e,t=f.currentYear!==n;f.currentYear=n||f.currentYear,f.config.maxDate&&f.currentYear===f.config.maxDate.getFullYear()?f.currentMonth=Math.min(f.config.maxDate.getMonth(),f.currentMonth):f.config.minDate&&f.currentYear===f.config.minDate.getFullYear()&&(f.currentMonth=Math.max(f.config.minDate.getMonth(),f.currentMonth)),t&&(f.redraw(),fe("onYearChange"))}}function K(e,n){void 0===n&&(n=!0);var t=f.parseDate(e,void 0,n);if(f.config.minDate&&t&&b(t,f.config.minDate,void 0!==n?n:!f.minDateHasTime)<0||f.config.maxDate&&t&&b(t,f.config.maxDate,void 0!==n?n:!f.maxDateHasTime)>0)return!1;if(0===f.config.enable.length&&0===f.config.disable.length)return!0;if(void 0===t)return!1;for(var r=f.config.enable.length>0,s=r?f.config.enable:f.config.disable,a=0,i=void 0;a<s.length;a++){if("function"==typeof(i=s[a])&&i(t))return r;if(i instanceof Date&&void 0!==t&&i.getTime()===t.getTime())return r;if("string"==typeof i&&void 0!==t){var o=f.parseDate(i,void 0,!0);return o&&o.getTime()===t.getTime()?r:!r}if("object"==typeof i&&void 0!==t&&i.from&&i.to&&t.getTime()>=i.from.getTime()&&t.getTime()<=i.to.getTime())return r}return!r}function ee(e){return void 0!==f.daysContainer&&-1===e.className.indexOf("hidden")&&f.daysContainer.contains(e)}function ne(e){var n=e.target===f._input,t=f.config.allowInput,r=f.isOpen&&(!t||!n),s=f.config.inline&&n&&!t;if(13===e.keyCode&&n){if(t)return f.setDate(f._input.value,!0,e.target===f.altInput?f.config.altFormat:f.config.dateFormat),e.target.blur();f.open()}else if(J(e.target)||r||s){var a=!!f.timeContainer&&f.timeContainer.contains(e.target);switch(e.keyCode){case 13:a?(_(),ce()):de(e);break;case 27:e.preventDefault(),ce();break;case 8:case 46:n&&!f.config.allowInput&&(e.preventDefault(),f.clear());break;case 37:case 39:if(a)f.hourElement&&f.hourElement.focus();else if(e.preventDefault(),void 0!==f.daysContainer&&(!1===t||document.activeElement&&ee(document.activeElement))){var i=39===e.keyCode?1:-1;e.ctrlKey?(e.stopPropagation(),V(i),F(H(1),0)):F(void 0,i)}break;case 38:case 40:e.preventDefault();var o=40===e.keyCode?1:-1;f.daysContainer&&void 0!==e.target.$i||e.target===f.input?e.ctrlKey?(e.stopPropagation(),Q(f.currentYear-o),F(H(1),0)):a||F(void 0,7*o):f.config.enableTime&&(!a&&f.hourElement&&f.hourElement.focus(),_(e),f._debouncedChange());break;case 9:if(a){var l=[f.hourElement,f.minuteElement,f.secondElement,f.amPM].filter(function(e){return e}),c=l.indexOf(e.target);if(-1!==c){var d=l[c+(e.shiftKey?-1:1)];void 0!==d?(e.preventDefault(),d.focus()):e.shiftKey&&(e.preventDefault(),f._input.focus())}}}}if(void 0!==f.amPM&&e.target===f.amPM)switch(e.key){case f.l10n.amPM[0].charAt(0):case f.l10n.amPM[0].charAt(0).toLowerCase():f.amPM.textContent=f.l10n.amPM[0],D(),be();break;case f.l10n.amPM[1].charAt(0):case f.l10n.amPM[1].charAt(0).toLowerCase():f.amPM.textContent=f.l10n.amPM[1],D(),be()}fe("onKeyDown",e)}function te(e){if(1===f.selectedDates.length&&(!e||e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled"))){for(var n=e?e.dateObj.getTime():f.days.firstElementChild.dateObj.getTime(),t=f.parseDate(f.selectedDates[0],void 0,!0).getTime(),r=Math.min(n,f.selectedDates[0].getTime()),s=Math.max(n,f.selectedDates[0].getTime()),a=f.daysContainer.lastChild.lastChild.dateObj.getTime(),i=!1,o=0,l=0,c=r;c<a;c+=y.DAY)K(new Date(c),!0)||(i=i||c>r&&c<s,c<t&&(!o||c>o)?o=c:c>t&&(!l||c<l)&&(l=c));for(var d=0;d<f.config.showMonths;d++)for(var u=f.daysContainer.children[d],p=f.daysContainer.children[d-1],m=function(r,s){var a=u.children[r],c=a.dateObj,m=c.getTime(),g=o>0&&m<o||l>0&&m>l;return g?(a.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){a.classList.remove(e)}),"continue"):i&&!g?"continue":(["startRange","inRange","endRange","notAllowed"].forEach(function(e){a.classList.remove(e)}),void(void 0!==e&&(e.classList.add(n<f.selectedDates[0].getTime()?"startRange":"endRange"),!u.contains(e)&&d>0&&p&&p.lastChild.dateObj.getTime()>=m||(t<n&&m===t?a.classList.add("startRange"):t>n&&m===t&&a.classList.add("endRange"),m>=o&&(0===l||m<=l)&&w(m,t,n)&&a.classList.add("inRange")))))},g=0,h=u.children.length;g<h;g++)m(g)}}function re(){!f.isOpen||f.config.static||f.config.inline||oe()}function se(){f.setDate(void 0!==f.config.minDate?new Date(f.config.minDate.getTime()):new Date,!1),C(),be()}function ae(e){return function(n){var t=f.config["_"+e+"Date"]=f.parseDate(n,f.config.dateFormat),r=f.config["_"+("min"===e?"max":"min")+"Date"];void 0!==t&&(f["min"===e?"minDateHasTime":"maxDateHasTime"]=t.getHours()>0||t.getMinutes()>0||t.getSeconds()>0),f.selectedDates&&(f.selectedDates=f.selectedDates.filter(function(e){return K(e)}),f.selectedDates.length||"min"!==e||I(t),be()),f.daysContainer&&(le(),void 0!==t?f.currentYearElement[e]=t.getFullYear().toString():f.currentYearElement.removeAttribute(e),f.currentYearElement.disabled=!!r&&void 0!==t&&r.getFullYear()===t.getFullYear())}}function ie(){"object"!=typeof f.config.locale&&void 0===S.l10ns[f.config.locale]&&f.config.errorHandler(new Error("flatpickr: invalid locale "+f.config.locale)),f.l10n=e({},S.l10ns.default,"object"==typeof f.config.locale?f.config.locale:"default"!==f.config.locale?S.l10ns[f.config.locale]:void 0),g.K="("+f.l10n.amPM[0]+"|"+f.l10n.amPM[1]+"|"+f.l10n.amPM[0].toLowerCase()+"|"+f.l10n.amPM[1].toLowerCase()+")",f.formatDate=$(f),f.parseDate=v({config:f.config,l10n:f.l10n})}function oe(e){if(void 0!==f.calendarContainer){fe("onPreCalendarPosition");var n=e||f._positionElement,t=Array.prototype.reduce.call(f.calendarContainer.children,function(e,n){return e+n.offsetHeight},0),r=f.calendarContainer.offsetWidth,s=f.config.position.split(" "),a=s[0],i=s.length>1?s[1]:null,o=n.getBoundingClientRect(),c=window.innerHeight-o.bottom,d="above"===a||"below"!==a&&c<t&&o.top>t,u=window.pageYOffset+o.top+(d?-t-2:n.offsetHeight+2);if(l(f.calendarContainer,"arrowTop",!d),l(f.calendarContainer,"arrowBottom",d),!f.config.inline){var p=window.pageXOffset+o.left-(null!=i&&"center"===i?(r-o.width)/2:0),m=window.document.body.offsetWidth-o.right,g=p+r>window.document.body.offsetWidth,h=m+r>window.document.body.offsetWidth;if(l(f.calendarContainer,"rightMost",g),!f.config.static)if(f.calendarContainer.style.top=u+"px",g)if(h){var $=document.styleSheets[0];if(void 0===$)return;var v=window.document.body.offsetWidth,b=Math.max(0,v/2-r/2),w=$.cssRules.length,y="{left:"+o.left+"px;right:auto;}";l(f.calendarContainer,"rightMost",!1),l(f.calendarContainer,"centerMost",!0),$.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+y,w),f.calendarContainer.style.left=b+"px",f.calendarContainer.style.right="auto"}else f.calendarContainer.style.left="auto",f.calendarContainer.style.right=m+"px";else f.calendarContainer.style.left=p+"px",f.calendarContainer.style.right="auto"}}}function le(){f.config.noCalendar||f.isMobile||($e(),Y())}function ce(){f._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(f.close,0):f.close()}function de(e){e.preventDefault(),e.stopPropagation();var n=function e(n,t){return t(n)?n:n.parentNode?e(n.parentNode,t):void 0}(e.target,function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")&&!e.classList.contains("notAllowed")});if(void 0!==n){var t=n,r=f.latestSelectedDateObj=new Date(t.dateObj.getTime()),s=(r.getMonth()<f.currentMonth||r.getMonth()>f.currentMonth+f.config.showMonths-1)&&"range"!==f.config.mode;if(f.selectedDateElem=t,"single"===f.config.mode)f.selectedDates=[r];else if("multiple"===f.config.mode){var a=he(r);a?f.selectedDates.splice(parseInt(a),1):f.selectedDates.push(r)}else"range"===f.config.mode&&(2===f.selectedDates.length&&f.clear(!1,!1),f.latestSelectedDateObj=r,f.selectedDates.push(r),0!==b(r,f.selectedDates[0],!0)&&f.selectedDates.sort(function(e,n){return e.getTime()-n.getTime()}));if(D(),s){var i=f.currentYear!==r.getFullYear();f.currentYear=r.getFullYear(),f.currentMonth=r.getMonth(),i&&fe("onYearChange"),fe("onMonthChange")}if($e(),Y(),be(),f.config.enableTime&&setTimeout(function(){return f.showTimeInput=!0},50),s||"range"===f.config.mode||1!==f.config.showMonths?void 0!==f.selectedDateElem&&void 0===f.hourElement&&f.selectedDateElem&&f.selectedDateElem.focus():q(t),void 0!==f.hourElement&&void 0!==f.hourElement&&f.hourElement.focus(),f.config.closeOnSelect){var o="single"===f.config.mode&&!f.config.enableTime,l="range"===f.config.mode&&2===f.selectedDates.length&&!f.config.enableTime;(o||l)&&ce()}E()}}f.parseDate=v({config:f.config,l10n:f.l10n}),f._handlers=[],f._bind=A,f._setHoursFromDate=I,f._positionCalendar=oe,f.changeMonth=V,f.changeYear=Q,f.clear=function(e,n){void 0===e&&(e=!0),void 0===n&&(n=!0),f.input.value="",void 0!==f.altInput&&(f.altInput.value=""),void 0!==f.mobileInput&&(f.mobileInput.value=""),f.selectedDates=[],f.latestSelectedDateObj=void 0,!0===n&&(f.currentYear=f._initialDate.getFullYear(),f.currentMonth=f._initialDate.getMonth()),f.showTimeInput=!1,!0===f.config.enableTime&&C(),f.redraw(),e&&fe("onChange")},f.close=function(){f.isOpen=!1,f.isMobile||(void 0!==f.calendarContainer&&f.calendarContainer.classList.remove("open"),void 0!==f._input&&f._input.classList.remove("active")),fe("onClose")},f._createElement=c,f.destroy=function(){void 0!==f.config&&fe("onDestroy");for(var e=f._handlers.length;e--;){var n=f._handlers[e];n.element.removeEventListener(n.event,n.handler,n.options)}if(f._handlers=[],f.mobileInput)f.mobileInput.parentNode&&f.mobileInput.parentNode.removeChild(f.mobileInput),f.mobileInput=void 0;else if(f.calendarContainer&&f.calendarContainer.parentNode)if(f.config.static&&f.calendarContainer.parentNode){var t=f.calendarContainer.parentNode;if(t.lastChild&&t.removeChild(t.lastChild),t.parentNode){for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}else f.calendarContainer.parentNode.removeChild(f.calendarContainer);f.altInput&&(f.input.type="text",f.altInput.parentNode&&f.altInput.parentNode.removeChild(f.altInput),delete f.altInput),f.input&&(f.input.type=f.input._type,f.input.classList.remove("flatpickr-input"),f.input.removeAttribute("readonly"),f.input.value=""),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(e){try{delete f[e]}catch(e){}})},f.isEnabled=K,f.jumpToDate=L,f.open=function(e,n){if(void 0===n&&(n=f._positionElement),!0===f.isMobile)return e&&(e.preventDefault(),e.target&&e.target.blur()),void 0!==f.mobileInput&&(f.mobileInput.focus(),f.mobileInput.click()),void fe("onOpen");if(!f._input.disabled&&!f.config.inline){var t=f.isOpen;f.isOpen=!0,t||(f.calendarContainer.classList.add("open"),f._input.classList.add("active"),fe("onOpen"),oe(n)),!0===f.config.enableTime&&!0===f.config.noCalendar&&(0===f.selectedDates.length&&se(),!1!==f.config.allowInput||void 0!==e&&f.timeContainer.contains(e.relatedTarget)||setTimeout(function(){return f.hourElement.select()},50))}},f.redraw=le,f.set=function(e,t){null!==e&&"object"==typeof e?Object.assign(f.config,e):(f.config[e]=t,void 0!==ue[e]?ue[e].forEach(function(e){return e()}):n.indexOf(e)>-1&&(f.config[e]=o(t))),f.redraw(),be(!1)},f.setDate=function(e,n,t){if(void 0===n&&(n=!1),void 0===t&&(t=f.config.dateFormat),0!==e&&!e||e instanceof Array&&0===e.length)return f.clear(n);pe(e,t),f.showTimeInput=f.selectedDates.length>0,f.latestSelectedDateObj=f.selectedDates[0],f.redraw(),L(),I(),be(n),n&&fe("onChange")},f.toggle=function(e){if(!0===f.isOpen)return f.close();f.open(e)};var ue={locale:[ie,Z],showMonths:[U,k,G]};function pe(e,n){var t=[];if(e instanceof Array)t=e.map(function(e){return f.parseDate(e,n)});else if(e instanceof Date||"number"==typeof e)t=[f.parseDate(e,n)];else if("string"==typeof e)switch(f.config.mode){case"single":case"time":t=[f.parseDate(e,n)];break;case"multiple":t=e.split(f.config.conjunction).map(function(e){return f.parseDate(e,n)});break;case"range":t=e.split(f.l10n.rangeSeparator).map(function(e){return f.parseDate(e,n)})}else f.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));f.selectedDates=t.filter(function(e){return e instanceof Date&&K(e,!1)}),"range"===f.config.mode&&f.selectedDates.sort(function(e,n){return e.getTime()-n.getTime()})}function me(e){return e.slice().map(function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?f.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:f.parseDate(e.from,void 0),to:f.parseDate(e.to,void 0)}:e}).filter(function(e){return e})}function fe(e,n){if(void 0!==f.config){var t=f.config[e];if(void 0!==t&&t.length>0)for(var r=0;t[r]&&r<t.length;r++)t[r](f.selectedDates,f.input.value,f,n);"onChange"===e&&(f.input.dispatchEvent(ge("change")),f.input.dispatchEvent(ge("input")))}}function ge(e){var n=document.createEvent("Event");return n.initEvent(e,!0,!0),n}function he(e){for(var n=0;n<f.selectedDates.length;n++)if(0===b(f.selectedDates[n],e))return""+n;return!1}function $e(){f.config.noCalendar||f.isMobile||!f.monthNav||(f.yearElements.forEach(function(e,n){var t=new Date(f.currentYear,f.currentMonth,1);t.setMonth(f.currentMonth+n),f.monthElements[n].textContent=m(t.getMonth(),f.config.shorthandCurrentMonth,f.l10n)+" ",e.value=t.getFullYear().toString()}),f._hidePrevMonthArrow=void 0!==f.config.minDate&&(f.currentYear===f.config.minDate.getFullYear()?f.currentMonth<=f.config.minDate.getMonth():f.currentYear<f.config.minDate.getFullYear()),f._hideNextMonthArrow=void 0!==f.config.maxDate&&(f.currentYear===f.config.maxDate.getFullYear()?f.currentMonth+1>f.config.maxDate.getMonth():f.currentYear>f.config.maxDate.getFullYear()))}function ve(e){return f.selectedDates.map(function(n){return f.formatDate(n,e)}).filter(function(e,n,t){return"range"!==f.config.mode||f.config.enableTime||t.indexOf(e)===n}).join("range"!==f.config.mode?f.config.conjunction:f.l10n.rangeSeparator)}function be(e){if(void 0===e&&(e=!0),0===f.selectedDates.length)return f.clear(e);void 0!==f.mobileInput&&f.mobileFormatStr&&(f.mobileInput.value=void 0!==f.latestSelectedDateObj?f.formatDate(f.latestSelectedDateObj,f.mobileFormatStr):""),f.input.value=ve(f.config.dateFormat),void 0!==f.altInput&&(f.altInput.value=ve(f.config.altFormat)),!1!==e&&fe("onValueUpdate")}function we(e){e.preventDefault();var n=f.prevMonthNav.contains(e.target),t=f.nextMonthNav.contains(e.target);n||t?V(n?-1:1):f.yearElements.indexOf(e.target)>=0?e.target.select():e.target.classList.contains("arrowUp")?f.changeYear(f.currentYear+1):e.target.classList.contains("arrowDown")&&f.changeYear(f.currentYear-1)}return function(){f.element=f.input=t,f.isOpen=!1,function(){var r=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],s=e({},p,JSON.parse(JSON.stringify(t.dataset||{}))),a={};f.config.parseDate=s.parseDate,f.config.formatDate=s.formatDate,Object.defineProperty(f.config,"enable",{get:function(){return f.config._enable},set:function(e){f.config._enable=me(e)}}),Object.defineProperty(f.config,"disable",{get:function(){return f.config._disable},set:function(e){f.config._disable=me(e)}});var i="time"===s.mode;s.dateFormat||!s.enableTime&&!i||(a.dateFormat=s.noCalendar||i?"H:i"+(s.enableSeconds?":S":""):S.defaultConfig.dateFormat+" H:i"+(s.enableSeconds?":S":"")),s.altInput&&(s.enableTime||i)&&!s.altFormat&&(a.altFormat=s.noCalendar||i?"h:i"+(s.enableSeconds?":S K":" K"):S.defaultConfig.altFormat+" h:i"+(s.enableSeconds?":S":"")+" K"),Object.defineProperty(f.config,"minDate",{get:function(){return f.config._minDate},set:ae("min")}),Object.defineProperty(f.config,"maxDate",{get:function(){return f.config._maxDate},set:ae("max")});var l=function(e){return function(n){f.config["min"===e?"_minTime":"_maxTime"]=f.parseDate(n,"H:i")}};Object.defineProperty(f.config,"minTime",{get:function(){return f.config._minTime},set:l("min")}),Object.defineProperty(f.config,"maxTime",{get:function(){return f.config._maxTime},set:l("max")}),"time"===s.mode&&(f.config.noCalendar=!0,f.config.enableTime=!0),Object.assign(f.config,a,s);for(var c=0;c<r.length;c++)f.config[r[c]]=!0===f.config[r[c]]||"true"===f.config[r[c]];n.filter(function(e){return void 0!==f.config[e]}).forEach(function(e){f.config[e]=o(f.config[e]||[]).map(h)}),f.isMobile=!f.config.disableMobile&&!f.config.inline&&"single"===f.config.mode&&!f.config.disable.length&&!f.config.enable.length&&!f.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var c=0;c<f.config.plugins.length;c++){var d=f.config.plugins[c](f)||{};for(var u in d)n.indexOf(u)>-1?f.config[u]=o(d[u]).map(h).concat(f.config[u]):void 0===s[u]&&(f.config[u]=d[u])}fe("onParseConfig")}(),ie(),f.input=f.config.wrap?t.querySelector("[data-input]"):t,f.input?(f.input._type=f.input.type,f.input.type="text",f.input.classList.add("flatpickr-input"),f._input=f.input,f.config.altInput&&(f.altInput=c(f.input.nodeName,f.input.className+" "+f.config.altInputClass),f._input=f.altInput,f.altInput.placeholder=f.input.placeholder,f.altInput.disabled=f.input.disabled,f.altInput.required=f.input.required,f.altInput.tabIndex=f.input.tabIndex,f.altInput.type="text",f.input.setAttribute("type","hidden"),!f.config.static&&f.input.parentNode&&f.input.parentNode.insertBefore(f.altInput,f.input.nextSibling)),f.config.allowInput||f._input.setAttribute("readonly","readonly"),f._positionElement=f.config.positionElement||f._input):f.config.errorHandler(new Error("Invalid input element specified")),function(){f.selectedDates=[],f.now=f.parseDate(f.config.now)||new Date;var e=f.config.defaultDate||("INPUT"!==f.input.nodeName&&"TEXTAREA"!==f.input.nodeName||!f.input.placeholder||f.input.value!==f.input.placeholder?f.input.value:null);e&&pe(e,f.config.dateFormat),f._initialDate=f.selectedDates.length>0?f.selectedDates[0]:f.config.minDate&&f.config.minDate.getTime()>f.now.getTime()?f.config.minDate:f.config.maxDate&&f.config.maxDate.getTime()<f.now.getTime()?f.config.maxDate:f.now,f.currentYear=f._initialDate.getFullYear(),f.currentMonth=f._initialDate.getMonth(),f.selectedDates.length>0&&(f.latestSelectedDateObj=f.selectedDates[0]),void 0!==f.config.minTime&&(f.config.minTime=f.parseDate(f.config.minTime,"H:i")),void 0!==f.config.maxTime&&(f.config.maxTime=f.parseDate(f.config.maxTime,"H:i")),f.minDateHasTime=!!f.config.minDate&&(f.config.minDate.getHours()>0||f.config.minDate.getMinutes()>0||f.config.minDate.getSeconds()>0),f.maxDateHasTime=!!f.config.maxDate&&(f.config.maxDate.getHours()>0||f.config.maxDate.getMinutes()>0||f.config.maxDate.getSeconds()>0),Object.defineProperty(f,"showTimeInput",{get:function(){return f._showTimeInput},set:function(e){f._showTimeInput=e,f.calendarContainer&&l(f.calendarContainer,"showTimeInput",e),f.isOpen&&oe()}})}(),f.utils={getDaysInMonth:function(e,n){return void 0===e&&(e=f.currentMonth),void 0===n&&(n=f.currentYear),1===e&&(n%4==0&&n%100!=0||n%400==0)?29:f.l10n.daysInMonth[e]}},f.isMobile||j(),O(),(f.selectedDates.length||f.config.noCalendar)&&(f.config.enableTime&&I(f.config.noCalendar?f.latestSelectedDateObj||f.config.minDate:void 0),be(!1)),k(),f.showTimeInput=f.selectedDates.length>0||f.config.noCalendar;var r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!f.isMobile&&r&&oe(),fe("onReady")}(),f}function _(e,n){for(var t=Array.prototype.slice.call(e).filter(function(e){return e instanceof HTMLElement}),r=[],s=0;s<t.length;s++){var a=t[s];try{if(null!==a.getAttribute("data-fp-omit"))continue;void 0!==a._flatpickr&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=k(a,n||{}),r.push(a._flatpickr)}catch(e){console.error(e)}}return 1===r.length?r[0]:r}"undefined"!=typeof HTMLElement&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return _(this,e)},HTMLElement.prototype.flatpickr=function(e){return _([this],e)});var S=function(e,n){return"string"==typeof e?_(window.document.querySelectorAll(e),n):e instanceof Node?_([e],n):_(e,n)};return S.defaultConfig=t,S.l10ns={en:e({},r),default:e({},r)},S.localize=function(n){S.l10ns.default=e({},S.l10ns.default,n)},S.setDefaults=function(n){S.defaultConfig=e({},S.defaultConfig,n)},S.parseDate=v({}),S.formatDate=$({}),S.compareDates=b,"undefined"!=typeof jQuery&&(jQuery.fn.flatpickr=function(e){return _(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=S),S}()});function Wn(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===t&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}Wn('.flatpickr-calendar {\n  background: transparent;\n  opacity: 0;\n  display: none;\n  text-align: center;\n  visibility: hidden;\n  padding: 0;\n  -webkit-animation: none;\n          animation: none;\n  direction: ltr;\n  border: 0;\n  font-size: 14px;\n  line-height: 24px;\n  border-radius: 5px;\n  position: absolute;\n  width: 307.875px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  -ms-touch-action: manipulation;\n      touch-action: manipulation;\n  background: #fff;\n  -webkit-box-shadow: 1px 0 0 #e6e6e6, -1px 0 0 #e6e6e6, 0 1px 0 #e6e6e6, 0 -1px 0 #e6e6e6, 0 3px 13px rgba(0,0,0,0.08);\n          box-shadow: 1px 0 0 #e6e6e6, -1px 0 0 #e6e6e6, 0 1px 0 #e6e6e6, 0 -1px 0 #e6e6e6, 0 3px 13px rgba(0,0,0,0.08);\n}\n.flatpickr-calendar.open,\n.flatpickr-calendar.inline {\n  opacity: 1;\n  max-height: 640px;\n  visibility: visible;\n}\n.flatpickr-calendar.open {\n  display: inline-block;\n  z-index: 99999;\n}\n.flatpickr-calendar.animate.open {\n  -webkit-animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);\n          animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);\n}\n.flatpickr-calendar.inline {\n  display: block;\n  position: relative;\n  top: 2px;\n}\n.flatpickr-calendar.static {\n  position: absolute;\n  top: calc(100% + 2px);\n}\n.flatpickr-calendar.static.open {\n  z-index: 999;\n  display: block;\n}\n.flatpickr-calendar.multiMonth .flatpickr-days .dayContainer:nth-child(n+1) .flatpickr-day.inRange:nth-child(7n+7) {\n  -webkit-box-shadow: none !important;\n          box-shadow: none !important;\n}\n.flatpickr-calendar.multiMonth .flatpickr-days .dayContainer:nth-child(n+2) .flatpickr-day.inRange:nth-child(7n+1) {\n  -webkit-box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n          box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n}\n.flatpickr-calendar .hasWeeks .dayContainer,\n.flatpickr-calendar .hasTime .dayContainer {\n  border-bottom: 0;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.flatpickr-calendar .hasWeeks .dayContainer {\n  border-left: 0;\n}\n.flatpickr-calendar.showTimeInput.hasTime .flatpickr-time {\n  height: 40px;\n  border-top: 1px solid #e6e6e6;\n}\n.flatpickr-calendar.noCalendar.hasTime .flatpickr-time {\n  height: auto;\n}\n.flatpickr-calendar:before,\n.flatpickr-calendar:after {\n  position: absolute;\n  display: block;\n  pointer-events: none;\n  border: solid transparent;\n  content: \'\';\n  height: 0;\n  width: 0;\n  left: 22px;\n}\n.flatpickr-calendar.rightMost:before,\n.flatpickr-calendar.rightMost:after {\n  left: auto;\n  right: 22px;\n}\n.flatpickr-calendar:before {\n  border-width: 5px;\n  margin: 0 -5px;\n}\n.flatpickr-calendar:after {\n  border-width: 4px;\n  margin: 0 -4px;\n}\n.flatpickr-calendar.arrowTop:before,\n.flatpickr-calendar.arrowTop:after {\n  bottom: 100%;\n}\n.flatpickr-calendar.arrowTop:before {\n  border-bottom-color: #e6e6e6;\n}\n.flatpickr-calendar.arrowTop:after {\n  border-bottom-color: #fff;\n}\n.flatpickr-calendar.arrowBottom:before,\n.flatpickr-calendar.arrowBottom:after {\n  top: 100%;\n}\n.flatpickr-calendar.arrowBottom:before {\n  border-top-color: #e6e6e6;\n}\n.flatpickr-calendar.arrowBottom:after {\n  border-top-color: #fff;\n}\n.flatpickr-calendar:focus {\n  outline: 0;\n}\n.flatpickr-wrapper {\n  position: relative;\n  display: inline-block;\n}\n.flatpickr-months {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n.flatpickr-months .flatpickr-month {\n  background: transparent;\n  color: rgba(0,0,0,0.9);\n  fill: rgba(0,0,0,0.9);\n  height: 28px;\n  line-height: 1;\n  text-align: center;\n  position: relative;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  overflow: hidden;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n.flatpickr-months .flatpickr-prev-month,\n.flatpickr-months .flatpickr-next-month {\n  text-decoration: none;\n  cursor: pointer;\n  position: absolute;\n  top: 0px;\n  line-height: 16px;\n  height: 28px;\n  padding: 10px;\n  z-index: 3;\n  color: rgba(0,0,0,0.9);\n  fill: rgba(0,0,0,0.9);\n}\n.flatpickr-months .flatpickr-prev-month.disabled,\n.flatpickr-months .flatpickr-next-month.disabled {\n  display: none;\n}\n.flatpickr-months .flatpickr-prev-month i,\n.flatpickr-months .flatpickr-next-month i {\n  position: relative;\n}\n.flatpickr-months .flatpickr-prev-month.flatpickr-prev-month,\n.flatpickr-months .flatpickr-next-month.flatpickr-prev-month {\n/*\n      /*rtl:begin:ignore*/\n/*\n      */\n  left: 0;\n/*\n      /*rtl:end:ignore*/\n/*\n      */\n}\n/*\n      /*rtl:begin:ignore*/\n/*\n      /*rtl:end:ignore*/\n.flatpickr-months .flatpickr-prev-month.flatpickr-next-month,\n.flatpickr-months .flatpickr-next-month.flatpickr-next-month {\n/*\n      /*rtl:begin:ignore*/\n/*\n      */\n  right: 0;\n/*\n      /*rtl:end:ignore*/\n/*\n      */\n}\n/*\n      /*rtl:begin:ignore*/\n/*\n      /*rtl:end:ignore*/\n.flatpickr-months .flatpickr-prev-month:hover,\n.flatpickr-months .flatpickr-next-month:hover {\n  color: #959ea9;\n}\n.flatpickr-months .flatpickr-prev-month:hover svg,\n.flatpickr-months .flatpickr-next-month:hover svg {\n  fill: #f64747;\n}\n.flatpickr-months .flatpickr-prev-month svg,\n.flatpickr-months .flatpickr-next-month svg {\n  width: 14px;\n  height: 14px;\n}\n.flatpickr-months .flatpickr-prev-month svg path,\n.flatpickr-months .flatpickr-next-month svg path {\n  -webkit-transition: fill 0.1s;\n  transition: fill 0.1s;\n  fill: inherit;\n}\n.numInputWrapper {\n  position: relative;\n  height: auto;\n}\n.numInputWrapper input,\n.numInputWrapper span {\n  display: inline-block;\n}\n.numInputWrapper input {\n  width: 100%;\n}\n.numInputWrapper input::-ms-clear {\n  display: none;\n}\n.numInputWrapper input::-webkit-outer-spin-button,\n.numInputWrapper input::-webkit-inner-spin-button {\n  margin: 0;\n  -webkit-appearance: none;\n}\n.numInputWrapper span {\n  position: absolute;\n  right: 0;\n  width: 14px;\n  padding: 0 4px 0 2px;\n  height: 50%;\n  line-height: 50%;\n  opacity: 0;\n  cursor: pointer;\n  border: 1px solid rgba(57,57,57,0.15);\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.numInputWrapper span:hover {\n  background: rgba(0,0,0,0.1);\n}\n.numInputWrapper span:active {\n  background: rgba(0,0,0,0.2);\n}\n.numInputWrapper span:after {\n  display: block;\n  content: "";\n  position: absolute;\n}\n.numInputWrapper span.arrowUp {\n  top: 0;\n  border-bottom: 0;\n}\n.numInputWrapper span.arrowUp:after {\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-bottom: 4px solid rgba(57,57,57,0.6);\n  top: 26%;\n}\n.numInputWrapper span.arrowDown {\n  top: 50%;\n}\n.numInputWrapper span.arrowDown:after {\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-top: 4px solid rgba(57,57,57,0.6);\n  top: 40%;\n}\n.numInputWrapper span svg {\n  width: inherit;\n  height: auto;\n}\n.numInputWrapper span svg path {\n  fill: rgba(0,0,0,0.5);\n}\n.numInputWrapper:hover {\n  background: rgba(0,0,0,0.05);\n}\n.numInputWrapper:hover span {\n  opacity: 1;\n}\n.flatpickr-current-month {\n  font-size: 135%;\n  line-height: inherit;\n  font-weight: 300;\n  color: inherit;\n  position: absolute;\n  width: 75%;\n  left: 12.5%;\n  padding: 6.16px 0 0 0;\n  line-height: 1;\n  height: 28px;\n  display: inline-block;\n  text-align: center;\n  -webkit-transform: translate3d(0px, 0px, 0px);\n          transform: translate3d(0px, 0px, 0px);\n}\n.flatpickr-current-month span.cur-month {\n  font-family: inherit;\n  font-weight: 700;\n  color: inherit;\n  display: inline-block;\n  margin-left: 0.5ch;\n  padding: 0;\n}\n.flatpickr-current-month span.cur-month:hover {\n  background: rgba(0,0,0,0.05);\n}\n.flatpickr-current-month .numInputWrapper {\n  width: 6ch;\n  width: 7ch\\0;\n  display: inline-block;\n}\n.flatpickr-current-month .numInputWrapper span.arrowUp:after {\n  border-bottom-color: rgba(0,0,0,0.9);\n}\n.flatpickr-current-month .numInputWrapper span.arrowDown:after {\n  border-top-color: rgba(0,0,0,0.9);\n}\n.flatpickr-current-month input.cur-year {\n  background: transparent;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: inherit;\n  cursor: text;\n  padding: 0 0 0 0.5ch;\n  margin: 0;\n  display: inline-block;\n  font-size: inherit;\n  font-family: inherit;\n  font-weight: 300;\n  line-height: inherit;\n  height: auto;\n  border: 0;\n  border-radius: 0;\n  vertical-align: initial;\n  -webkit-appearance: textfield;\n  -moz-appearance: textfield;\n  appearance: textfield;\n}\n.flatpickr-current-month input.cur-year:focus {\n  outline: 0;\n}\n.flatpickr-current-month input.cur-year[disabled],\n.flatpickr-current-month input.cur-year[disabled]:hover {\n  font-size: 100%;\n  color: rgba(0,0,0,0.5);\n  background: transparent;\n  pointer-events: none;\n}\n.flatpickr-weekdays {\n  background: transparent;\n  text-align: center;\n  overflow: hidden;\n  width: 100%;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  height: 28px;\n}\n.flatpickr-weekdays .flatpickr-weekdaycontainer {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\nspan.flatpickr-weekday {\n  cursor: default;\n  font-size: 90%;\n  background: transparent;\n  color: rgba(0,0,0,0.54);\n  line-height: 1;\n  margin: 0;\n  text-align: center;\n  display: block;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  font-weight: bolder;\n}\n.dayContainer,\n.flatpickr-weeks {\n  padding: 1px 0 0 0;\n}\n.flatpickr-days {\n  position: relative;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: start;\n  -webkit-align-items: flex-start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n  width: 307.875px;\n}\n.flatpickr-days:focus {\n  outline: 0;\n}\n.dayContainer {\n  padding: 0;\n  outline: 0;\n  text-align: left;\n  width: 307.875px;\n  min-width: 307.875px;\n  max-width: 307.875px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  display: inline-block;\n  display: -ms-flexbox;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-wrap: wrap;\n          flex-wrap: wrap;\n  -ms-flex-wrap: wrap;\n  -ms-flex-pack: justify;\n  -webkit-justify-content: space-around;\n          justify-content: space-around;\n  -webkit-transform: translate3d(0px, 0px, 0px);\n          transform: translate3d(0px, 0px, 0px);\n  opacity: 1;\n}\n.dayContainer + .dayContainer {\n  -webkit-box-shadow: -1px 0 0 #e6e6e6;\n          box-shadow: -1px 0 0 #e6e6e6;\n}\n.flatpickr-day {\n  background: none;\n  border: 1px solid transparent;\n  border-radius: 150px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #393939;\n  cursor: pointer;\n  font-weight: 400;\n  width: 14.2857143%;\n  -webkit-flex-basis: 14.2857143%;\n      -ms-flex-preferred-size: 14.2857143%;\n          flex-basis: 14.2857143%;\n  max-width: 39px;\n  height: 39px;\n  line-height: 39px;\n  margin: 0;\n  display: inline-block;\n  position: relative;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  text-align: center;\n}\n.flatpickr-day.inRange,\n.flatpickr-day.prevMonthDay.inRange,\n.flatpickr-day.nextMonthDay.inRange,\n.flatpickr-day.today.inRange,\n.flatpickr-day.prevMonthDay.today.inRange,\n.flatpickr-day.nextMonthDay.today.inRange,\n.flatpickr-day:hover,\n.flatpickr-day.prevMonthDay:hover,\n.flatpickr-day.nextMonthDay:hover,\n.flatpickr-day:focus,\n.flatpickr-day.prevMonthDay:focus,\n.flatpickr-day.nextMonthDay:focus {\n  cursor: pointer;\n  outline: 0;\n  background: #e6e6e6;\n  border-color: #e6e6e6;\n}\n.flatpickr-day.today {\n  border-color: #959ea9;\n}\n.flatpickr-day.today:hover,\n.flatpickr-day.today:focus {\n  border-color: #959ea9;\n  background: #959ea9;\n  color: #fff;\n}\n.flatpickr-day.selected,\n.flatpickr-day.startRange,\n.flatpickr-day.endRange,\n.flatpickr-day.selected.inRange,\n.flatpickr-day.startRange.inRange,\n.flatpickr-day.endRange.inRange,\n.flatpickr-day.selected:focus,\n.flatpickr-day.startRange:focus,\n.flatpickr-day.endRange:focus,\n.flatpickr-day.selected:hover,\n.flatpickr-day.startRange:hover,\n.flatpickr-day.endRange:hover,\n.flatpickr-day.selected.prevMonthDay,\n.flatpickr-day.startRange.prevMonthDay,\n.flatpickr-day.endRange.prevMonthDay,\n.flatpickr-day.selected.nextMonthDay,\n.flatpickr-day.startRange.nextMonthDay,\n.flatpickr-day.endRange.nextMonthDay {\n  background: #569ff7;\n  -webkit-box-shadow: none;\n          box-shadow: none;\n  color: #fff;\n  border-color: #569ff7;\n}\n.flatpickr-day.selected.startRange,\n.flatpickr-day.startRange.startRange,\n.flatpickr-day.endRange.startRange {\n  border-radius: 50px 0 0 50px;\n}\n.flatpickr-day.selected.endRange,\n.flatpickr-day.startRange.endRange,\n.flatpickr-day.endRange.endRange {\n  border-radius: 0 50px 50px 0;\n}\n.flatpickr-day.selected.startRange + .endRange:not(:nth-child(7n+1)),\n.flatpickr-day.startRange.startRange + .endRange:not(:nth-child(7n+1)),\n.flatpickr-day.endRange.startRange + .endRange:not(:nth-child(7n+1)) {\n  -webkit-box-shadow: -10px 0 0 #569ff7;\n          box-shadow: -10px 0 0 #569ff7;\n}\n.flatpickr-day.selected.startRange.endRange,\n.flatpickr-day.startRange.startRange.endRange,\n.flatpickr-day.endRange.startRange.endRange {\n  border-radius: 50px;\n}\n.flatpickr-day.inRange {\n  border-radius: 0;\n  -webkit-box-shadow: -5px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n          box-shadow: -5px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n}\n.flatpickr-day.disabled,\n.flatpickr-day.disabled:hover,\n.flatpickr-day.prevMonthDay,\n.flatpickr-day.nextMonthDay,\n.flatpickr-day.notAllowed,\n.flatpickr-day.notAllowed.prevMonthDay,\n.flatpickr-day.notAllowed.nextMonthDay {\n  color: rgba(57,57,57,0.3);\n  background: transparent;\n  border-color: transparent;\n  cursor: default;\n}\n.flatpickr-day.disabled,\n.flatpickr-day.disabled:hover {\n  cursor: not-allowed;\n  color: rgba(57,57,57,0.1);\n}\n.flatpickr-day.week.selected {\n  border-radius: 0;\n  -webkit-box-shadow: -5px 0 0 #569ff7, 5px 0 0 #569ff7;\n          box-shadow: -5px 0 0 #569ff7, 5px 0 0 #569ff7;\n}\n.flatpickr-day.hidden {\n  visibility: hidden;\n}\n.rangeMode .flatpickr-day {\n  margin-top: 1px;\n}\n.flatpickr-weekwrapper {\n  display: inline-block;\n  float: left;\n}\n.flatpickr-weekwrapper .flatpickr-weeks {\n  padding: 0 12px;\n  -webkit-box-shadow: 1px 0 0 #e6e6e6;\n          box-shadow: 1px 0 0 #e6e6e6;\n}\n.flatpickr-weekwrapper .flatpickr-weekday {\n  float: none;\n  width: 100%;\n  line-height: 28px;\n}\n.flatpickr-weekwrapper span.flatpickr-day,\n.flatpickr-weekwrapper span.flatpickr-day:hover {\n  display: block;\n  width: 100%;\n  max-width: none;\n  color: rgba(57,57,57,0.3);\n  background: transparent;\n  cursor: default;\n  border: none;\n}\n.flatpickr-innerContainer {\n  display: block;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  overflow: hidden;\n}\n.flatpickr-rContainer {\n  display: inline-block;\n  padding: 0;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.flatpickr-time {\n  text-align: center;\n  outline: 0;\n  display: block;\n  height: 0;\n  line-height: 40px;\n  max-height: 40px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n.flatpickr-time:after {\n  content: "";\n  display: table;\n  clear: both;\n}\n.flatpickr-time .numInputWrapper {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  width: 40%;\n  height: 40px;\n  float: left;\n}\n.flatpickr-time .numInputWrapper span.arrowUp:after {\n  border-bottom-color: #393939;\n}\n.flatpickr-time .numInputWrapper span.arrowDown:after {\n  border-top-color: #393939;\n}\n.flatpickr-time.hasSeconds .numInputWrapper {\n  width: 26%;\n}\n.flatpickr-time.time24hr .numInputWrapper {\n  width: 49%;\n}\n.flatpickr-time input {\n  background: transparent;\n  -webkit-box-shadow: none;\n          box-shadow: none;\n  border: 0;\n  border-radius: 0;\n  text-align: center;\n  margin: 0;\n  padding: 0;\n  height: inherit;\n  line-height: inherit;\n  color: #393939;\n  font-size: 14px;\n  position: relative;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  -webkit-appearance: textfield;\n  -moz-appearance: textfield;\n  appearance: textfield;\n}\n.flatpickr-time input.flatpickr-hour {\n  font-weight: bold;\n}\n.flatpickr-time input.flatpickr-minute,\n.flatpickr-time input.flatpickr-second {\n  font-weight: 400;\n}\n.flatpickr-time input:focus {\n  outline: 0;\n  border: 0;\n}\n.flatpickr-time .flatpickr-time-separator,\n.flatpickr-time .flatpickr-am-pm {\n  height: inherit;\n  display: inline-block;\n  float: left;\n  line-height: inherit;\n  color: #393939;\n  font-weight: bold;\n  width: 2%;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-align-self: center;\n      -ms-flex-item-align: center;\n          align-self: center;\n}\n.flatpickr-time .flatpickr-am-pm {\n  outline: 0;\n  width: 18%;\n  cursor: pointer;\n  text-align: center;\n  font-weight: 400;\n}\n.flatpickr-time input:hover,\n.flatpickr-time .flatpickr-am-pm:hover,\n.flatpickr-time input:focus,\n.flatpickr-time .flatpickr-am-pm:focus {\n  background: #eee;\n}\n.flatpickr-input[readonly] {\n  cursor: pointer;\n}\n@-webkit-keyframes fpFadeInDown {\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -20px, 0);\n            transform: translate3d(0, -20px, 0);\n  }\n  to {\n    opacity: 1;\n    -webkit-transform: translate3d(0, 0, 0);\n            transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes fpFadeInDown {\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -20px, 0);\n            transform: translate3d(0, -20px, 0);\n  }\n  to {\n    opacity: 1;\n    -webkit-transform: translate3d(0, 0, 0);\n            transform: translate3d(0, 0, 0);\n  }\n}\n');function Yn(n){var t,r;return{c(){A(t=_("input"),"type","date"),A(t,"class",n.className+" svelte-4yoq4p"),A(t,"placeholder",n.placeholder),r=M(t,"input",n.input_input_handler)},m(e,r){w(e,t,r),t.value=n.value,n.input_binding(t)},p(e,n){e.value&&(t.value=n.value),e.className&&A(t,"class",n.className+" svelte-4yoq4p"),e.placeholder&&A(t,"placeholder",n.placeholder)},i:e,o:e,d(e){e&&y(t),n.input_binding(null),r()}}}function Bn(e,n,t){const r=G();let s,a,{value:i,placeholder:o="",className:l="",options:c={}}=n;const d=new Set(["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"]);B(()=>{t("fp",a=Fn(s,u(c)))}),U(()=>{a&&"destroy"in a&&a.destroy()});const u=e=>{e=Object.assign({},e);for(let n of d){let t=(e,t,s)=>{r(m(n),[e,t,s])};n in e?(Array.isArray(e[n])||(e[n]=[e[n]]),e[n].push(t)):e[n]=[t]}return e.onChange&&!e.onChange.includes(p)&&e.onChange.push(p),e},p=e=>{Array.isArray(e)&&1===e.length&&(e=e[0]),t("value",i=e)},m=e=>e.charAt(2).toLowerCase()+e.substring(3);return e.$set=e=>{"value"in e&&t("value",i=e.value),"placeholder"in e&&t("placeholder",o=e.placeholder),"className"in e&&t("className",l=e.className),"options"in e&&t("options",c=e.options)},e.$$.update=(e={fp:1,value:1})=>{(e.fp||e.value)&&a&&i&&a.setDate(i)},{dateInput:s,value:i,placeholder:o,className:l,options:c,input_input_handler:function(){i=this.value,t("value",i)},input_binding:function(e){J[e?"unshift":"push"](()=>{t("dateInput",s=e)})}}}Wn('.flatpickr-calendar {\n  opacity: 0;\n  display: none;\n  text-align: center;\n  visibility: hidden;\n  padding: 0;\n  -webkit-animation: none;\n  animation: none;\n  direction: ltr;\n  border: 0;\n  font-size: 14px;\n  line-height: 24px;\n  border-radius: 4px;\n  position: absolute;\n  width: 307.875px;\n  -webkit-box-shadow: none !important;\n  box-shadow: none !important;\n  background: rgba(0, 0, 0, 0.9);\n}\n.flatpickr-calendar.open,\n.flatpickr-calendar.inline {\n  opacity: 1;\n  max-height: 640px;\n  visibility: visible;\n}\n.flatpickr-calendar.open {\n  display: inline-block;\n  z-index: 99999;\n}\n.flatpickr-calendar.animate.open {\n  -webkit-animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);\n  animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);\n}\n.flatpickr-calendar.inline {\n  display: block;\n  position: relative;\n  top: 4px;\n}\n.flatpickr-calendar.static {\n  position: absolute;\n  top: calc(100% + 4px);\n}\n.flatpickr-calendar.static.open {\n  z-index: 999;\n  display: block;\n}\n.flatpickr-calendar.multiMonth\n  .flatpickr-days\n  .dayContainer:nth-child(n + 1)\n  .flatpickr-day.inRange:nth-child(7n + 7) {\n  -webkit-box-shadow: none !important;\n  box-shadow: none !important;\n}\n.flatpickr-calendar.multiMonth\n  .flatpickr-days\n  .dayContainer:nth-child(n + 2)\n  .flatpickr-day.inRange:nth-child(7n + 1) {\n  -webkit-box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n  box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n}\n.flatpickr-calendar .hasWeeks .dayContainer,\n.flatpickr-calendar .hasTime .dayContainer {\n  border-bottom: 0;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.flatpickr-calendar .hasWeeks .dayContainer {\n  border-left: 0;\n}\n.flatpickr-calendar.showTimeInput.hasTime .flatpickr-time {\n  height: 40px;\n  border-top: 1px solid #20222c;\n}\n.flatpickr-calendar.noCalendar.hasTime .flatpickr-time {\n  height: auto;\n}\n.flatpickr-calendar:before,\n.flatpickr-calendar:after {\n  position: absolute;\n  display: block;\n  pointer-events: none;\n  border: solid transparent;\n  content: "";\n  height: 0;\n  width: 0;\n  left: 22px;\n}\n.flatpickr-calendar.rightMost:before,\n.flatpickr-calendar.rightMost:after {\n  left: auto;\n  right: 22px;\n}\n.flatpickr-calendar:before {\n  border-width: 5px;\n  margin: 0 -5px;\n}\n.flatpickr-calendar:after {\n  border-width: 4px;\n  margin: 0 -4px;\n}\n.flatpickr-calendar.arrowTop:before,\n.flatpickr-calendar.arrowTop:after {\n  bottom: 100%;\n}\n.flatpickr-calendar.arrowTop:before {\n  border-bottom-color: #20222c;\n}\n.flatpickr-calendar.arrowTop:after {\n  border-bottom-color: #3f4458;\n}\n.flatpickr-calendar.arrowBottom:before,\n.flatpickr-calendar.arrowBottom:after {\n  top: 100%;\n}\n.flatpickr-calendar.arrowBottom:before {\n  border-top-color: #20222c;\n}\n.flatpickr-calendar.arrowBottom:after {\n  border-top-color: #3f4458;\n}\n.flatpickr-calendar:focus {\n  outline: 0;\n}\n.flatpickr-wrapper {\n  position: relative;\n  display: inline-block;\n}\n.flatpickr-months {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n.flatpickr-months .flatpickr-month {\n  background: transparent;\n  color: #fff;\n  fill: #fff;\n  height: 28px;\n  line-height: 1;\n  text-align: center;\n  position: relative;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  overflow: hidden;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n}\n.flatpickr-months .flatpickr-prev-month,\n.flatpickr-months .flatpickr-next-month {\n  text-decoration: none;\n  cursor: pointer;\n  position: absolute;\n  top: 0px;\n  line-height: 16px;\n  height: 28px;\n  padding: 10px;\n  z-index: 3;\n  color: #fff;\n  fill: #fff;\n}\n.flatpickr-months .flatpickr-prev-month.disabled,\n.flatpickr-months .flatpickr-next-month.disabled {\n  display: none;\n}\n.flatpickr-months .flatpickr-prev-month i,\n.flatpickr-months .flatpickr-next-month i {\n  position: relative;\n}\n.flatpickr-months .flatpickr-prev-month.flatpickr-prev-month,\n.flatpickr-months .flatpickr-next-month.flatpickr-prev-month {\n  /*\n      /*rtl:begin:ignore*/\n  /*\n      */\n  left: 0;\n  /*\n      /*rtl:end:ignore*/\n  /*\n      */\n}\n/*\n      /*rtl:begin:ignore*/\n/*\n      /*rtl:end:ignore*/\n.flatpickr-months .flatpickr-prev-month.flatpickr-next-month,\n.flatpickr-months .flatpickr-next-month.flatpickr-next-month {\n  /*\n      /*rtl:begin:ignore*/\n  /*\n      */\n  right: 0;\n  /*\n      /*rtl:end:ignore*/\n  /*\n      */\n}\n/*\n      /*rtl:begin:ignore*/\n/*\n      /*rtl:end:ignore*/\n.flatpickr-months .flatpickr-prev-month:hover,\n.flatpickr-months .flatpickr-next-month:hover {\n  color: #eee;\n}\n.flatpickr-months .flatpickr-prev-month:hover svg,\n.flatpickr-months .flatpickr-next-month:hover svg {\n  fill: #f64747;\n}\n.flatpickr-months .flatpickr-prev-month svg,\n.flatpickr-months .flatpickr-next-month svg {\n  width: 14px;\n  height: 14px;\n}\n.flatpickr-months .flatpickr-prev-month svg path,\n.flatpickr-months .flatpickr-next-month svg path {\n  -webkit-transition: fill 0.1s;\n  transition: fill 0.1s;\n  fill: inherit;\n}\n.numInputWrapper {\n  position: relative;\n  height: auto;\n}\n.numInputWrapper input,\n.numInputWrapper span {\n  display: inline-block;\n}\n.numInputWrapper input {\n  width: 100%;\n}\n.numInputWrapper input::-ms-clear {\n  display: none;\n}\n.numInputWrapper span {\n  position: absolute;\n  right: 0;\n  width: 14px;\n  padding: 0 4px 0 2px;\n  height: 50%;\n  line-height: 50%;\n  opacity: 0;\n  cursor: pointer;\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.numInputWrapper span:hover {\n  background: rgba(192, 187, 167, 0.1);\n}\n.numInputWrapper span:active {\n  background: rgba(192, 187, 167, 0.2);\n}\n.numInputWrapper span:after {\n  display: block;\n  content: "";\n  position: absolute;\n}\n.numInputWrapper span.arrowUp {\n  top: 0;\n  border-bottom: 0;\n}\n.numInputWrapper span.arrowUp:after {\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-bottom: 4px solid rgba(255, 255, 255, 0.6);\n  top: 26%;\n}\n.numInputWrapper span.arrowDown {\n  top: 50%;\n}\n.numInputWrapper span.arrowDown:after {\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-top: 4px solid rgba(255, 255, 255, 0.6);\n  top: 40%;\n}\n.numInputWrapper span svg {\n  width: inherit;\n  height: auto;\n}\n.numInputWrapper span svg path {\n  fill: rgba(255, 255, 255, 0.5);\n}\n.numInputWrapper:hover {\n  background: rgba(192, 187, 167, 0.05);\n}\n.numInputWrapper:hover span {\n  opacity: 1;\n}\n.flatpickr-current-month {\n  font-size: 135%;\n  line-height: inherit;\n  font-weight: 300;\n  color: inherit;\n  position: absolute;\n  width: 75%;\n  left: 12.5%;\n  padding: 6.16px 0 0 0;\n  line-height: 1;\n  height: 28px;\n  display: inline-block;\n  text-align: center;\n  -webkit-transform: translate3d(0px, 0px, 0px);\n  transform: translate3d(0px, 0px, 0px);\n}\n.flatpickr-current-month span.cur-month {\n  font-family: inherit;\n  font-weight: 700;\n  color: inherit;\n  display: inline-block;\n  margin-left: 0.5ch;\n  padding: 0;\n}\n.flatpickr-current-month span.cur-month:hover {\n  background: rgba(192, 187, 167, 0.05);\n}\n.flatpickr-current-month .numInputWrapper {\n  width: 6ch;\n  width: 7ch\\0;\n  display: inline-block;\n}\n.flatpickr-current-month .numInputWrapper span.arrowUp:after {\n  border-bottom-color: #fff;\n}\n.flatpickr-current-month .numInputWrapper span.arrowDown:after {\n  border-top-color: #fff;\n}\n.flatpickr-current-month input.cur-year {\n  background: transparent;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  color: inherit;\n  cursor: text;\n  padding: 0 0 0 0.5ch;\n  margin: 0;\n  display: inline-block;\n  font-size: inherit;\n  font-family: inherit;\n  font-weight: 300;\n  line-height: inherit;\n  height: auto;\n  border: 0;\n  border-radius: 0;\n  vertical-align: initial;\n}\n.flatpickr-current-month input.cur-year:focus {\n  outline: 0;\n}\n.flatpickr-current-month input.cur-year[disabled],\n.flatpickr-current-month input.cur-year[disabled]:hover {\n  font-size: 100%;\n  color: rgba(255, 255, 255, 0.5);\n  background: transparent;\n  pointer-events: none;\n}\n.flatpickr-weekdays {\n  background: transparent;\n  text-align: center;\n  overflow: hidden;\n  width: 100%;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n  height: 28px;\n}\n.flatpickr-weekdays .flatpickr-weekdaycontainer {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n}\nspan.flatpickr-weekday {\n  cursor: default;\n  font-size: 90%;\n  background: transparent;\n  color: #fff;\n  line-height: 1;\n  margin: 0;\n  text-align: center;\n  display: block;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  font-weight: bolder;\n}\n.dayContainer,\n.flatpickr-weeks {\n  padding: 1px 0 0 0;\n}\n.flatpickr-days {\n  position: relative;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: start;\n  -webkit-align-items: flex-start;\n  -ms-flex-align: start;\n  align-items: flex-start;\n  width: 307.875px;\n}\n.flatpickr-days:focus {\n  outline: 0;\n}\n.dayContainer {\n  padding: 0;\n  outline: 0;\n  text-align: left;\n  width: 307.875px;\n  min-width: 307.875px;\n  max-width: 307.875px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  display: inline-block;\n  display: -ms-flexbox;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-wrap: wrap;\n  flex-wrap: wrap;\n  -ms-flex-wrap: wrap;\n  -ms-flex-pack: justify;\n  -webkit-justify-content: space-around;\n  justify-content: space-around;\n  -webkit-transform: translate3d(0px, 0px, 0px);\n  transform: translate3d(0px, 0px, 0px);\n  opacity: 1;\n}\n.dayContainer + .dayContainer {\n  -webkit-box-shadow: -1px 0 0 #20222c;\n  box-shadow: -1px 0 0 #20222c;\n}\n.flatpickr-day {\n  background: none;\n  border: 1px solid transparent;\n  border-radius: 150px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  color: rgba(255, 255, 255, 0.95);\n  cursor: pointer;\n  font-weight: 400;\n  width: 14.2857143%;\n  -webkit-flex-basis: 14.2857143%;\n  -ms-flex-preferred-size: 14.2857143%;\n  flex-basis: 14.2857143%;\n  max-width: 39px;\n  height: 39px;\n  line-height: 39px;\n  margin: 0;\n  display: inline-block;\n  position: relative;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  text-align: center;\n}\n.flatpickr-day.inRange,\n.flatpickr-day.prevMonthDay.inRange,\n.flatpickr-day.nextMonthDay.inRange,\n.flatpickr-day.today.inRange,\n.flatpickr-day.prevMonthDay.today.inRange,\n.flatpickr-day.nextMonthDay.today.inRange,\n.flatpickr-day:hover,\n.flatpickr-day.prevMonthDay:hover,\n.flatpickr-day.nextMonthDay:hover,\n.flatpickr-day:focus,\n.flatpickr-day.prevMonthDay:focus,\n.flatpickr-day.nextMonthDay:focus {\n  cursor: pointer;\n  outline: 0;\n  background: #98003c;\n  border-color: #98003c;\n}\n.flatpickr-day.today {\n  border-color: #eee;\n}\n.flatpickr-day.today:hover,\n.flatpickr-day.today:focus {\n  border-color: #eee;\n  background: #eee;\n  color: #3f4458;\n}\n.flatpickr-day.selected,\n.flatpickr-day.startRange,\n.flatpickr-day.endRange,\n.flatpickr-day.selected.inRange,\n.flatpickr-day.startRange.inRange,\n.flatpickr-day.endRange.inRange,\n.flatpickr-day.selected:focus,\n.flatpickr-day.startRange:focus,\n.flatpickr-day.endRange:focus,\n.flatpickr-day.selected:hover,\n.flatpickr-day.startRange:hover,\n.flatpickr-day.endRange:hover,\n.flatpickr-day.selected.prevMonthDay,\n.flatpickr-day.startRange.prevMonthDay,\n.flatpickr-day.endRange.prevMonthDay,\n.flatpickr-day.selected.nextMonthDay,\n.flatpickr-day.startRange.nextMonthDay,\n.flatpickr-day.endRange.nextMonthDay {\n  background: #cb2d6f;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  color: #fff;\n  border-color: #cb2d6f;\n}\n.flatpickr-day.selected.startRange,\n.flatpickr-day.startRange.startRange,\n.flatpickr-day.endRange.startRange {\n  border-radius: 50px 0 0 50px;\n}\n.flatpickr-day.selected.endRange,\n.flatpickr-day.startRange.endRange,\n.flatpickr-day.endRange.endRange {\n  border-radius: 0 50px 50px 0;\n}\n.flatpickr-day.selected.startRange + .endRange:not(:nth-child(7n + 1)),\n.flatpickr-day.startRange.startRange + .endRange:not(:nth-child(7n + 1)),\n.flatpickr-day.endRange.startRange + .endRange:not(:nth-child(7n + 1)) {\n  -webkit-box-shadow: -10px 0 0 #98003c;\n  box-shadow: -10px 0 0 #98003c;\n}\n.flatpickr-day.selected.startRange.endRange,\n.flatpickr-day.startRange.startRange.endRange,\n.flatpickr-day.endRange.startRange.endRange {\n  border-radius: 50px;\n}\n.flatpickr-day.inRange {\n  border-radius: 0;\n  -webkit-box-shadow: -5px 0 0 #98003c, 5px 0 0 #98003c;\n  box-shadow: -5px 0 0 #98003c, 5px 0 0 #98003c;\n}\n.flatpickr-day.disabled,\n.flatpickr-day.disabled:hover,\n.flatpickr-day.prevMonthDay,\n.flatpickr-day.nextMonthDay,\n.flatpickr-day.notAllowed,\n.flatpickr-day.notAllowed.prevMonthDay,\n.flatpickr-day.notAllowed.nextMonthDay {\n  color: rgba(255, 255, 255, 0.3);\n  background: transparent;\n  border-color: transparent;\n  cursor: default;\n}\n.flatpickr-day.disabled,\n.flatpickr-day.disabled:hover {\n  cursor: not-allowed;\n  color: rgba(255, 255, 255, 0.1);\n}\n.flatpickr-day.week.selected {\n  border-radius: 0;\n  -webkit-box-shadow: -5px 0 0 #80cbc4, 5px 0 0 #80cbc4;\n  box-shadow: -5px 0 0 #80cbc4, 5px 0 0 #80cbc4;\n}\n.flatpickr-day.hidden {\n  visibility: hidden;\n}\n.rangeMode .flatpickr-day {\n  margin-top: 1px;\n}\n.flatpickr-weekwrapper {\n  display: inline-block;\n  float: left;\n}\n.flatpickr-weekwrapper .flatpickr-weeks {\n  padding: 0 12px;\n  -webkit-box-shadow: 1px 0 0 #20222c;\n  box-shadow: 1px 0 0 #20222c;\n}\n.flatpickr-weekwrapper .flatpickr-weekday {\n  float: none;\n  width: 100%;\n  line-height: 28px;\n}\n.flatpickr-weekwrapper span.flatpickr-day,\n.flatpickr-weekwrapper span.flatpickr-day:hover {\n  display: block;\n  width: 100%;\n  max-width: none;\n  color: rgba(255, 255, 255, 0.3);\n  background: transparent;\n  cursor: default;\n  border: none;\n}\n.flatpickr-innerContainer {\n  display: block;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n}\n.flatpickr-rContainer {\n  display: inline-block;\n  padding: 0;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.flatpickr-time {\n  text-align: center;\n  outline: 0;\n  display: block;\n  height: 0;\n  line-height: 40px;\n  max-height: 40px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n.flatpickr-time:after {\n  content: "";\n  display: table;\n  clear: both;\n}\n.flatpickr-time .numInputWrapper {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  width: 40%;\n  height: 40px;\n  float: left;\n}\n.flatpickr-time .numInputWrapper span.arrowUp:after {\n  border-bottom-color: rgba(255, 255, 255, 0.95);\n}\n.flatpickr-time .numInputWrapper span.arrowDown:after {\n  border-top-color: rgba(255, 255, 255, 0.95);\n}\n.flatpickr-time.hasSeconds .numInputWrapper {\n  width: 26%;\n}\n.flatpickr-time.time24hr .numInputWrapper {\n  width: 49%;\n}\n.flatpickr-time input {\n  background: transparent;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  border: 0;\n  border-radius: 0;\n  text-align: center;\n  margin: 0;\n  padding: 0;\n  height: inherit;\n  line-height: inherit;\n  color: rgba(255, 255, 255, 0.95);\n  font-size: 14px;\n  position: relative;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.flatpickr-time input.flatpickr-hour {\n  font-weight: bold;\n}\n.flatpickr-time input.flatpickr-minute,\n.flatpickr-time input.flatpickr-second {\n  font-weight: 400;\n}\n.flatpickr-time input:focus {\n  outline: 0;\n  border: 0;\n}\n.flatpickr-time .flatpickr-time-separator,\n.flatpickr-time .flatpickr-am-pm {\n  height: inherit;\n  display: inline-block;\n  float: left;\n  line-height: inherit;\n  color: rgba(255, 255, 255, 0.95);\n  font-weight: bold;\n  width: 2%;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n  align-self: center;\n}\n.flatpickr-time .flatpickr-am-pm {\n  outline: 0;\n  width: 18%;\n  cursor: pointer;\n  text-align: center;\n  font-weight: 400;\n}\n.flatpickr-time input:hover,\n.flatpickr-time .flatpickr-am-pm:hover,\n.flatpickr-time input:focus,\n.flatpickr-time .flatpickr-am-pm:focus {\n  background: #707999;\n}\n.flatpickr-input[readonly] {\n  cursor: pointer;\n}\n@-webkit-keyframes fpFadeInDown {\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -20px, 0);\n    transform: translate3d(0, -20px, 0);\n  }\n  to {\n    opacity: 1;\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes fpFadeInDown {\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -20px, 0);\n    transform: translate3d(0, -20px, 0);\n  }\n  to {\n    opacity: 1;\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n}\n');class Un extends Ce{constructor(e){super(),Ie(this,e,Bn,Yn,o,["value","placeholder","className","options"])}}function Gn(e){var n;return{c(){n=D("Create")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function Zn(e){var n;return{c(){n=D("Edit")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function Vn(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v;function x(e){return e.defaultDate?Zn:Gn}var k=x(e),S=k(e),C=new hn({props:{errors:e.errors}});function N(n){e.input0_value_binding.call(null,n),o=!0,re(()=>o=!1)}let E={label:"Name",placeholder:"i.e. 'Autumn 1978'",required:!0};void 0!==e.name&&(E.value=e.name);var O=new qn({props:E});function L(n){e.datepicker_value_binding.call(null,n),u=!0,re(()=>u=!1)}J.push(()=>ke(O,"value",N));let R={placeholder:"Pick two dates below",className:"input",options:e.options};void 0!==e.defaultDate&&(R.value=e.defaultDate);var j=new Un({props:R});return J.push(()=>ke(j,"value",L)),j.$on("change",e.change_handler),{c(){n=_("h1"),S.c(),t=D(" semester"),r=I(),s=_("form"),C.$$.fragment.c(),i=I(),O.$$.fragment.c(),l=I(),(c=_("label")).textContent="Start and end dates",d=I(),j.$$.fragment.c(),p=I(),m=_("div"),(f=_("button")).textContent="Save semester",g=I(),h=_("input"),A(n,"class","title"),A(c,"class","label"),A(f,"type","submit"),A(f,"class","button is-primary"),P(f,"is-loading",e.loading),A(h,"type","reset"),A(h,"class","button"),h.value="Cancel",A(m,"class","buttons svelte-oih4d0"),s.noValidate=!0,A(s,"class","svelte-oih4d0"),v=[M(s,"submit",T(e.handleSubmit)),M(s,"reset",e.reset_handler)]},m(a,o){w(a,n,o),S.m(n,null),b(n,t),w(a,r,o),w(a,s,o),_e(C,s,null),b(s,i),_e(O,s,null),b(s,l),b(s,c),b(s,d),_e(j,s,null),b(s,p),b(s,m),b(m,f),e.button_binding(f),b(m,g),b(m,h),e.form_1_binding(s),$=!0},p(e,r){k!==(k=x(r))&&(S.d(1),(S=k(r))&&(S.c(),S.m(n,t)));var s={};e.errors&&(s.errors=r.errors),C.$set(s);var a={};!o&&e.name&&(a.value=r.name),O.$set(a);var i={};e.options&&(i.options=r.options),!u&&e.defaultDate&&(i.value=r.defaultDate),j.$set(i),e.loading&&P(f,"is-loading",r.loading)},i(e){$||(pe(C.$$.fragment,e),pe(O.$$.fragment,e),pe(j.$$.fragment,e),$=!0)},o(e){me(C.$$.fragment,e),me(O.$$.fragment,e),me(j.$$.fragment,e),$=!1},d(t){t&&y(n),S.d(),t&&(y(r),y(s)),Se(C),Se(O),Se(j),e.button_binding(null),e.form_1_binding(null),a(v)}}}function Jn(e,n,t){let r,s,a,i,{errors:o,loading:l,name:c="",defaultDate:d=null}=n;const u=G(),p=e=>{2===e.length&&(a=e[0].toISOString(),i=new Date(e[1].setHours(23,59,59,999)).toISOString())};return e.$set=e=>{"errors"in e&&t("errors",o=e.errors),"loading"in e&&t("loading",l=e.loading),"name"in e&&t("name",c=e.name),"defaultDate"in e&&t("defaultDate",d=e.defaultDate)},e.$$.update=(e={saveButton:1,loading:1})=>{(e.saveButton||e.loading)&&r&&(r.disabled=l,t("saveButton",r),t("loading",l))},{saveButton:r,form:s,errors:o,loading:l,name:c,defaultDate:d,options:{inline:!0,mode:"range",enableTime:!1,altInput:!0,altFormat:"M j, Y",dateFormat:"Y-m-d"},handleChange:p,handleSubmit:()=>{s.checkValidity()?u("submit",{name:c,startDate:a,endDate:i}):Ee.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){Z(e,n)},input0_value_binding:function(e){t("name",c=e)},datepicker_value_binding:function(e){t("defaultDate",d=e)},change_handler:function(e){return p(...e.detail)},button_binding:function(e){J[e?"unshift":"push"](()=>{t("saveButton",r=e)})},form_1_binding:function(e){J[e?"unshift":"push"](()=>{t("form",s=e)})}}}class Xn extends Ce{constructor(e){super(),Ie(this,e,Jn,Vn,o,["errors","loading","name","defaultDate"])}}function Qn(e){var n,t=new Xn({props:{name:e.name,defaultDate:e.defaultDate,errors:e.errors,loading:e.loading}});return t.$on("reset",e.reset),t.$on("submit",e.save),{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.name&&(r.name=n.name),e.defaultDate&&(r.defaultDate=n.defaultDate),e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function Kn(e,n,t){let{id:r,open:s=!1,semester:a={},name:i="",startDate:o="",endDate:l=""}=n,c=!1,d="",u=null;B(()=>{t("defaultDate",u=o&&l?[o,l]:null)});const p=()=>{t("errors",d=""),t("open",s=!1)};return e.$set=e=>{"id"in e&&t("id",r=e.id),"open"in e&&t("open",s=e.open),"semester"in e&&t("semester",a=e.semester),"name"in e&&t("name",i=e.name),"startDate"in e&&t("startDate",o=e.startDate),"endDate"in e&&t("endDate",l=e.endDate)},{id:r,open:s,semester:a,name:i,startDate:o,endDate:l,loading:c,errors:d,defaultDate:u,reset:p,save:async({detail:e})=>{t("loading",c=!0);try{await pn.patch(r,e),Ee.add({text:`Saved semester '${e.name}'`,type:"success"}),p()}catch(e){t("errors",d=e),Ee.add({text:"Could not update semester.",type:"danger"})}finally{t("loading",c=!1)}}}}class et extends Ce{constructor(e){super(),Ie(this,e,Kn,Qn,o,["id","open","semester","name","startDate","endDate"])}}function nt(e){var n,r,s=[e.semester];function a(t){e.editsemester_open_binding.call(null,t),n=!0,re(()=>n=!1)}let i={};for(var o=0;o<s.length;o+=1)i=t(i,s[o]);void 0!==e.showEdit&&(i.open=e.showEdit);var l=new et({props:i});return J.push(()=>ke(l,"open",a)),{c(){l.$$.fragment.c()},m(e,n){_e(l,e,n),r=!0},p(e,t){var r=e.semester?xe(s,[t.semester]):{};!n&&e.showEdit&&(r.open=t.showEdit),l.$set(r)},i(e){r||(pe(l.$$.fragment,e),r=!0)},o(e){me(l.$$.fragment,e),r=!1},d(e){Se(l,e)}}}function tt(e){var n,t,r=e.showEdit&&nt(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.showEdit?r?(r.p(e,t),pe(r,1)):((r=nt(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function rt(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k,S,C,T,E=e.semester.name;function O(n){e.deleteitem_open_binding.call(null,n),x=!0,re(()=>x=!1)}let L={id:e.semester.id,store:pn,type:"semester",name:e.semester.name};void 0!==e.confirmDelete&&(L.open=e.confirmDelete);var P=new Mn({props:L});function R(n){e.modal_open_binding.call(null,n),S=!0,re(()=>S=!1)}J.push(()=>ke(P,"open",O));let j={$$slots:{default:[tt]},$$scope:{ctx:e}};void 0!==e.showEdit&&(j.open=e.showEdit);var z=new kn({props:j});return J.push(()=>ke(z,"open",R)),{c(){n=_("li"),t=_("div"),r=_("div"),s=_("span"),i=D(E),o=I(),l=_("span"),c=D(e.startDate),d=D(" to "),u=D(e.endDate),p=I(),m=_("div"),f=_("i"),g=I(),h=_("i"),$=I(),v=_("div"),P.$$.fragment.c(),k=I(),z.$$.fragment.c(),A(s,"class","name svelte-19fa947"),A(l,"class","date svelte-19fa947"),A(r,"class","info"),A(f,"class","fas fa-minus-circle butt svelte-19fa947"),A(h,"class","fas fa-pencil-alt butt svelte-19fa947"),A(m,"class","buttons svelte-19fa947"),A(t,"class","firstrow svelte-19fa947"),A(v,"class","action"),A(n,"class","svelte-19fa947"),T=[M(f,"click",e.showDeleteDialog),M(h,"click",e.click_handler)]},m(e,a){w(e,n,a),b(n,t),b(t,r),b(r,s),b(s,i),b(r,o),b(r,l),b(l,c),b(l,d),b(l,u),b(t,p),b(t,m),b(m,f),b(m,g),b(m,h),b(n,$),b(n,v),_e(P,v,null),b(v,k),_e(z,v,null),C=!0},p(e,n){C&&!e.semester||E===(E=n.semester.name)||N(i,E),C&&!e.startDate||N(c,n.startDate),C&&!e.endDate||N(u,n.endDate);var t={};e.semester&&(t.id=n.semester.id),e.semesters&&(t.store=pn),e.semester&&(t.name=n.semester.name),!x&&e.confirmDelete&&(t.open=n.confirmDelete),P.$set(t);var r={};(e.$$scope||e.showEdit||e.semester)&&(r.$$scope={changed:e,ctx:n}),!S&&e.showEdit&&(r.open=n.showEdit),z.$set(r)},i(e){C||(pe(P.$$.fragment,e),pe(z.$$.fragment,e),C=!0)},o(e){me(P.$$.fragment,e),me(z.$$.fragment,e),C=!1},d(e){e&&y(n),Se(P),Se(z),a(T)}}}function st(e,n,t){let r=!1,s=!1,{semester:a={}}=n;let i,o;return e.$set=e=>{"semester"in e&&t("semester",a=e.semester)},e.$$.update=(e={semester:1})=>{e.semester&&t("startDate",i=new Date(a.startDate).toDateString()),e.semester&&t("endDate",o=new Date(a.endDate).toDateString())},{confirmDelete:r,showEdit:s,semester:a,showDeleteDialog:()=>{t("confirmDelete",r=!0)},startDate:i,endDate:o,click_handler:function(){t("showEdit",s=!0)},deleteitem_open_binding:function(e){t("confirmDelete",r=e)},editsemester_open_binding:function(e){t("showEdit",s=e)},modal_open_binding:function(e){t("showEdit",s=e)}}}class at extends Ce{constructor(e){super(),Ie(this,e,st,rt,o,["semester"])}}function it(e,n,t){const r=Object.create(e);return r.semester=n[t],r}function ot(e){var n,t,r,s,a,i,o,l=e.$semesters.length,c=[],d=new Map,u=e.$semesters;const p=e=>e.semester.id;for(var m=0;m<u.length;m+=1){let n=it(e,u,m),t=p(n);d.set(t,c[m]=lt(t,n))}return{c(){for(n=_("div"),t=_("p"),r=D("There are "),s=D(l),a=D(" semesters in the system."),i=I(),m=0;m<c.length;m+=1)c[m].c();A(t,"class","svelte-1ec7ahu"),A(n,"class","semester-list svelte-1ec7ahu")},m(e,l){for(w(e,n,l),b(n,t),b(t,r),b(t,s),b(t,a),b(n,i),m=0;m<c.length;m+=1)c[m].m(n,null);o=!0},p(e,t){o&&!e.$semesters||l===(l=t.$semesters.length)||N(s,l);const r=t.$semesters;de(),c=ye(c,e,p,1,t,r,d,n,we,lt,null,it),ue()},i(e){if(!o){for(var n=0;n<u.length;n+=1)pe(c[n]);o=!0}},o(e){for(m=0;m<c.length;m+=1)me(c[m]);o=!1},d(e){for(e&&y(n),m=0;m<c.length;m+=1)c[m].d()}}}function lt(e,n){var t,r,s=new at({props:{semester:n.semester}});return{key:e,first:null,c(){t=C(),s.$$.fragment.c(),this.first=t},m(e,n){w(e,t,n),_e(s,e,n),r=!0},p(e,n){var t={};e.$semesters&&(t.semester=n.semester),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&y(t),Se(s,e)}}}function ct(e){var n,t,r=e.$semesters&&e.$semesters.length&&ot(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.$semesters&&t.$semesters.length?r?(r.p(e,t),pe(r,1)):((r=ot(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function dt(e,n,t){let r;return l(e,pn,e=>{t("$semesters",r=e)}),{$semesters:r}}class ut extends Ce{constructor(e){super(),Ie(this,e,dt,ct,o,[])}}function pt(e){var n,t=new Xn({props:{errors:e.errors,loading:e.loading}});return t.$on("reset",e.reset),t.$on("submit",e.save),{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function mt(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,re(()=>r=!1)}let o={$$slots:{default:[pt]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new kn({props:o});return J.push(()=>ke(l,"open",i)),{c(){(n=_("button")).textContent="Add semester",t=I(),l.$$.fragment.c(),A(n,"class","button is-primary"),a=M(n,"click",e.click_handler)},m(e,r){w(e,n,r),w(e,t,r),_e(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||(pe(l.$$.fragment,e),s=!0)},o(e){me(l.$$.fragment,e),s=!1},d(e){e&&(y(n),y(t)),Se(l,e),a()}}}function ft(e,n,t){let r=!1,s="",a=!1;const i=()=>{t("errors",s=""),t("open",a=!1)};return{loading:r,errors:s,open:a,reset:i,save:async({detail:e})=>{t("loading",r=!0);try{await pn.create(e),Ee.add({text:`Saved new semester '${e.name}'`,type:"success"}),i()}catch(e){t("errors",s=e),Ee.add({text:"Could not save new semester.",type:"danger"})}finally{t("loading",r=!1)}},click_handler:function(){t("open",a=!0)},modal_open_binding:function(e){t("open",a=e)}}}class gt extends Ce{constructor(e){super(),Ie(this,e,ft,mt,o,[])}}function ht(n){var t,r,s,a,i,o,l,c;return{c(){t=_("div"),r=S("svg"),s=S("path"),a=I(),i=_("p"),o=D("Loading "),l=D(n.what),c=D(" ..."),A(s,"fill","currentColor"),A(s,"d","M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z"),A(r,"aria-hidden","true"),A(r,"focusable","false"),A(r,"data-prefix","fas"),A(r,"data-icon","circle-notch"),A(r,"class","svg-inline--fa fa-circle-notch fa-w-16 fa-spin spinner svelte-16ssi7j"),A(r,"role","img"),A(r,"xmlns","http://www.w3.org/2000/svg"),A(r,"viewBox","0 0 512 512"),A(t,"class","svelte-16ssi7j")},m(e,n){w(e,t,n),b(t,r),b(r,s),b(t,a),b(t,i),b(i,o),b(i,l),b(i,c)},p(e,n){e.what&&N(l,n.what)},i:e,o:e,d(e){e&&y(t)}}}function $t(e,n,t){let{what:r="things"}=n;return e.$set=e=>{"what"in e&&t("what",r=e.what)},{what:r}}class vt extends Ce{constructor(e){super(),Ie(this,e,$t,ht,o,["what"])}}function bt(e){var n,t=new vt({props:{what:"semesters"}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function wt(e){var n,t,r=new gt({}),s=new ut({});return{c(){r.$$.fragment.c(),n=I(),s.$$.fragment.c()},m(e,a){_e(r,e,a),w(e,n,a),_e(s,e,a),t=!0},i(e){t||(pe(r.$$.fragment,e),pe(s.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),me(s.$$.fragment,e),t=!1},d(e){Se(r,e),e&&y(n),Se(s,e)}}}function yt(e){var n,t,r,s,a,i,o,l,c=new hn({props:{errors:e.errors}}),d=[wt,bt],u=[];function p(e){return e.$semesters?0:e.errors?-1:1}return~(a=p(e))&&(i=u[a]=d[a](e)),{c(){n=I(),(t=_("h1")).textContent="Semesters",r=I(),c.$$.fragment.c(),s=I(),i&&i.c(),o=C(),document.title="Semesters",A(t,"class","title")},m(e,i){w(e,n,i),w(e,t,i),w(e,r,i),_e(c,e,i),w(e,s,i),~a&&u[a].m(e,i),w(e,o,i),l=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),c.$set(t);var r=a;(a=p(n))!==r&&(i&&(de(),me(u[r],1,1,()=>{u[r]=null}),ue()),~a?((i=u[a])||(i=u[a]=d[a](n)).c(),pe(i,1),i.m(o.parentNode,o)):i=null)},i(e){l||(pe(c.$$.fragment,e),pe(i),l=!0)},o(e){me(c.$$.fragment,e),me(i),l=!1},d(e){e&&(y(n),y(t),y(r)),Se(c,e),e&&y(s),~a&&u[a].d(e),e&&y(o)}}}function xt(e,n,t){let r;l(e,pn,e=>{t("$semesters",r=e)});let s="";return B(async()=>{try{await pn.get()}catch(e){t("errors",s=e),Ee.add({text:"Couldn't get semesters from server.",type:"danger"})}}),{errors:s,$semesters:r}}const kt=(()=>{const{subscribe:e,set:n,update:t}=Ae();return{subscribe:e,get:async(e,t)=>{const r=await Ze("\n  query getStudents ($orderBy: StudentOrderByInput, $searchString: String) {\n    students (orderBy: $orderBy, searchString: $searchString){\n      id\n      chineseName\n      pinyinName\n      englishName\n      gender\n      birthdate\n      pointsTally\n      groups {\n        id\n        name\n        semester {\n          id\n          name\n        }\n      }\n    }\n  }\n",{orderBy:e,searchString:t});n(r.students)},sort:(e,n)=>{t(t=>t.slice().sort((t,r)=>t[e]?t[e].localeCompare(r[e]||"")*n:1))},create:async(e,n)=>{const r=await Ze(" \nmutation createStudent($groupId: ID!, $input: StudentInput!) {\n  createStudent(input: $input, groupId: $groupId) {\n    id\n    chineseName\n    englishName\n    pinyinName\n    birthdate\n    gender\n    pointsTally\n    groups {\n      id\n      name\n      semester {\n        id\n        name\n      }\n    }\n  }\n}\n",{input:e,groupId:n});t(e=>e&&[...e,r.createStudent])},remove:async e=>{const n=await Ze(" \nmutation deleteStudent($id: ID!) {\n  deleteStudent(id:$id) {\n    id\n    chineseName\n    englishName\n  }\n}\n",{id:e});t(e=>e.filter(e=>n.deleteStudent.id!==e.id))},patch:async(e,n)=>{const r=await Ze("\nmutation updateStudent($id: ID!, $input: StudentInput!) {\n  updateStudent(input: $input, id: $id) {\n    id\n    chineseName\n    englishName\n    pinyinName\n    birthdate\n    gender\n    pointsTally\n    groups {\n      id\n      name\n      semester {\n        id\n        name\n      }\n    }\n  }\n}",{id:e,input:n});t(n=>n.map(n=>n.id!==e?n:r.updateStudent))},moveToDifferentGroup:async(e,n,r)=>{const s=await Ze("\nmutation moveStudentToDifferentGroup($oldGroupId: ID!, $newGroupId: ID!, $studentId: ID! ) {\n  moveStudentToDifferentGroup(studentId: $studentId, oldGroupId: $oldGroupId, newGroupId: $newGroupId) {\n    id\n    chineseName\n    englishName\n    pinyinName\n    birthdate\n    gender\n    pointsTally\n    groups {\n      id\n      name\n      semester {\n        id\n        name\n      }\n    }\n  }\n}\n",{studentId:e,oldGroupId:n,newGroupId:r});t(n=>n.map(n=>n.id!==e?n:s.moveStudentToDifferentGroup))},addStudentToGroup:async(e,n)=>{const r=await Ze("\nmutation addStudentToGroup($groupId: ID!, $studentId: ID! ) {\n  addStudentToGroup(studentId: $studentId, groupId: $groupId) {\n    id\n    chineseName\n    englishName\n    pinyinName\n    birthdate\n    gender\n    pointsTally\n    groups {\n      id\n      name\n      semester {\n        id\n        name\n      }\n    }\n  }\n}\n",{studentId:e,groupId:n});t(n=>n.map(n=>n.id!==e?n:r.addStudentToGroup))},removeStudentFromGroup:async(e,n)=>{const r=await Ze("\nmutation removeStudentFromGroup($groupId: ID!, $studentId: ID! ) {\n  removeStudentFromGroup(studentId: $studentId, groupId: $groupId) {\n    id\n    chineseName\n    englishName\n    pinyinName\n    birthdate\n    gender\n    pointsTally\n    groups {\n      id\n      name\n      semester {\n        id\n        name\n      }\n    }\n  }\n}\n",{studentId:e,groupId:n});t(n=>n.map(n=>n.id!==e?n:r.removeStudentFromGroup))}}})(),_t="\n{\n  activeGroups {\n    id\n    name\n    semester {\n      name\n    }\n  }\n}\n",St="\n{\n  currentSemester {\n    id\n    name\n    groups {\n      id\n      name\n    }\n  }\n  nextSemester {\n    id\n    name\n    groups {\n      id\n      name\n    }\n  }\n}\n";function Dt(e,n,t){const r=Object.create(e);return r.group=n[t],r}function It(n){var t;return{c(){(t=_("option")).textContent="Loading groups ...",t.__value="Loading groups ...",t.value=t.__value},m(e,n){w(e,t,n)},p:e,d(e){e&&y(t)}}}function Ct(e){var n;function t(e){return e.groups.length?Tt:Mt}var r=t(e),s=r(e);return{c(){s.c(),n=C()},m(e,t){s.m(e,t),w(e,n,t)},p(e,a){r===(r=t(a))&&s?s.p(e,a):(s.d(1),(s=r(a))&&(s.c(),s.m(n.parentNode,n)))},d(e){s.d(e),e&&y(n)}}}function Mt(n){var t;return{c(){(t=_("option")).textContent="No active groups",t.__value="No active groups",t.value=t.__value},m(e,n){w(e,t,n)},p:e,d(e){e&&y(t)}}}function Tt(e){for(var n,t,r=e.groups,s=[],a=0;a<r.length;a+=1)s[a]=At(Dt(e,r,a));return{c(){(n=_("option")).textContent="Select group...";for(var e=0;e<s.length;e+=1)s[e].c();t=C(),n.__value="",n.value=n.__value},m(e,r){w(e,n,r);for(var a=0;a<s.length;a+=1)s[a].m(e,r);w(e,t,r)},p(e,n){if(e.groups){r=n.groups;for(var a=0;a<r.length;a+=1){const i=Dt(n,r,a);s[a]?s[a].p(e,i):(s[a]=At(i),s[a].c(),s[a].m(t.parentNode,t))}for(;a<s.length;a+=1)s[a].d(1);s.length=r.length}},d(e){e&&y(n),k(s,e),e&&y(t)}}}function At(e){var n,t,r,s,a,i=e.group.semester?e.group.semester.name+" ":"",o=e.group.name;return{c(){n=_("option"),t=D(i),r=D(o),s=D(" class"),n.__value=a=e.group.id,n.value=n.__value},m(e,a){w(e,n,a),b(n,t),b(n,r),b(n,s)},p(e,s){e.groups&&i!==(i=s.group.semester?s.group.semester.name+" ":"")&&N(t,i),e.groups&&o!==(o=s.group.name)&&N(r,o),e.groups&&a!==(a=s.group.id)&&(n.__value=a),n.value=n.__value},d(e){e&&y(n)}}}function Nt(e){var n,t,r=JSON.stringify(e.errors);return{c(){n=_("p"),t=D(r),A(n,"class","help is-danger")},m(e,r){w(e,n,r),b(n,t)},p(e,n){e.errors&&r!==(r=JSON.stringify(n.errors))&&N(t,r)},d(e){e&&y(n)}}}function Et(n){var t,r,s,i,o;function l(e){return e.groups?Ct:It}var c=l(n),d=c(n),u=n.errors&&Nt(n);return{c(){t=_("div"),r=_("div"),s=_("select"),d.c(),i=I(),u&&u.c(),void 0===n.groupId&&te(()=>n.select_change_handler.call(s)),s.required=n.required,P(s,"is-loading",!n.groups),A(r,"class","select"),A(t,"class","field svelte-16aen4b"),o=[M(s,"change",n.select_change_handler),M(s,"invalid",T(n.checkValidity))]},m(e,a){w(e,t,a),b(t,r),b(r,s),d.m(s,null),O(s,n.groupId),n.select_binding(s),b(t,i),u&&u.m(t,null)},p(e,n){c===(c=l(n))&&d?d.p(e,n):(d.d(1),(d=c(n))&&(d.c(),d.m(s,null))),e.groupId&&O(s,n.groupId),e.required&&(s.required=n.required),e.groups&&P(s,"is-loading",!n.groups),n.errors?u?u.p(e,n):((u=Nt(n)).c(),u.m(t,null)):u&&(u.d(1),u=null)},i:e,o:e,d(e){e&&y(t),d.d(),n.select_binding(null),u&&u.d(),a(o)}}}function Ot(e,n,t){let r,{groups:s=null}=n,a="",{groupId:i="",required:o=!1}=n;return B(async()=>{if(!s)try{const e=await Ze(_t);t("groups",s=e?e.activeGroups:[])}catch(e){t("errors",a=e)}}),e.$set=e=>{"groups"in e&&t("groups",s=e.groups),"groupId"in e&&t("groupId",i=e.groupId),"required"in e&&t("required",o=e.required)},{groups:s,selectElement:r,errors:a,groupId:i,required:o,checkValidity:function(){t("errors",a=!r.validity.valid&&r.validationMessage?r.validationMessage:"")},select_change_handler:function(){i=L(this),t("groupId",i)},select_binding:function(e){J[e?"unshift":"push"](()=>{t("selectElement",r=e)})}}}class Lt extends Ce{constructor(e){super(),Ie(this,e,Ot,Et,o,["groups","groupId","required"])}}function Pt(e){var n;return{c(){n=D("Add")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function Rt(e){var n;return{c(){n=D("Edit")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function jt(e){var n,t=new hn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function zt(e){var n,t;function r(t){e.groupselect_groupId_binding.call(null,t),n=!0,re(()=>n=!1)}let s={};void 0!==e.groupId&&(s.groupId=e.groupId);var a=new Lt({props:s});return J.push(()=>ke(a,"groupId",r)),{c(){a.$$.fragment.c()},m(e,n){_e(a,e,n),t=!0},p(e,t){var r={};!n&&e.groupId&&(r.groupId=t.groupId),a.$set(r)},i(e){t||(pe(a.$$.fragment,e),t=!0)},o(e){me(a.$$.fragment,e),t=!1},d(e){Se(a,e)}}}function qt(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k,S,C,N,E,O,L,R,j,z,q;function H(e){return e.id?Rt:Pt}var F=H(e),W=F(e),Y=e.errors&&jt(e);function B(n){e.input0_value_binding.call(null,n),o=!0,re(()=>o=!1)}let U={label:"Chinese name",placeholder:"孙悟空"};void 0!==e.chineseName&&(U.value=e.chineseName);var G=new qn({props:U});function Z(n){e.input1_value_binding.call(null,n),c=!0,re(()=>c=!1)}J.push(()=>ke(G,"value",B));let V={label:"Pinyin name",placeholder:"Sūn Wùkōng"};void 0!==e.pinyinName&&(V.value=e.pinyinName);var X=new qn({props:V});function Q(n){e.input2_value_binding.call(null,n),u=!0,re(()=>u=!1)}J.push(()=>ke(X,"value",Z));let K={label:"English name",placeholder:"Monkey King"};void 0!==e.englishName&&(K.value=e.englishName);var ee=new qn({props:K});function ne(n){e.input3_value_binding.call(null,n),m=!0,re(()=>m=!1)}J.push(()=>ke(ee,"value",Q));let te={type:"date",label:"Birthdate",max:e.todaysDate};void 0!==e.birthdate&&(te.value=e.birthdate);var se=new qn({props:te});J.push(()=>ke(se,"value",ne));var ae=!e.id&&zt(e);return{c(){n=_("h2"),W.c(),t=D(" a student"),r=I(),s=_("form"),Y&&Y.c(),i=I(),G.$$.fragment.c(),l=I(),X.$$.fragment.c(),d=I(),ee.$$.fragment.c(),p=I(),se.$$.fragment.c(),f=I(),g=_("div"),h=_("label"),$=_("input"),v=D("\n\t\t\t\tMale"),x=I(),k=_("label"),S=_("input"),C=D("\n\t\t\t\tFemale"),N=I(),ae&&ae.c(),E=I(),O=_("div"),(L=_("button")).textContent="Save student",R=I(),j=_("input"),A(n,"class","title"),e.$$binding_groups[0].push($),A($,"type","radio"),$.__value="M",$.value=$.__value,A(h,"class","radio"),e.$$binding_groups[0].push(S),A(S,"type","radio"),S.__value="F",S.value=S.__value,A(k,"class","radio"),A(g,"class","control genders svelte-dhu3f3"),A(L,"type","submit"),A(L,"class","button is-primary"),P(L,"is-loading",e.loading),A(j,"type","reset"),A(j,"class","button"),j.value="Cancel",A(O,"class","buttons svelte-dhu3f3"),s.noValidate=!0,q=[M($,"change",e.input4_change_handler),M(S,"change",e.input5_change_handler),M(s,"submit",T(e.handleSubmit)),M(s,"reset",e.reset_handler)]},m(a,o){w(a,n,o),W.m(n,null),b(n,t),w(a,r,o),w(a,s,o),Y&&Y.m(s,null),b(s,i),_e(G,s,null),b(s,l),_e(X,s,null),b(s,d),_e(ee,s,null),b(s,p),_e(se,s,null),b(s,f),b(s,g),b(g,h),b(h,$),$.checked=$.__value===e.gender,b(h,v),b(g,x),b(g,k),b(k,S),S.checked=S.__value===e.gender,b(k,C),b(s,N),ae&&ae.m(s,null),b(s,E),b(s,O),b(O,L),e.button_binding(L),b(O,R),b(O,j),e.form_1_binding(s),z=!0},p(e,r){F!==(F=H(r))&&(W.d(1),(W=F(r))&&(W.c(),W.m(n,t))),r.errors?Y?(Y.p(e,r),pe(Y,1)):((Y=jt(r)).c(),pe(Y,1),Y.m(s,i)):Y&&(de(),me(Y,1,1,()=>{Y=null}),ue());var a={};!o&&e.chineseName&&(a.value=r.chineseName),G.$set(a);var l={};!c&&e.pinyinName&&(l.value=r.pinyinName),X.$set(l);var d={};!u&&e.englishName&&(d.value=r.englishName),ee.$set(d);var p={};e.todaysDate&&(p.max=r.todaysDate),!m&&e.birthdate&&(p.value=r.birthdate),se.$set(p),e.gender&&($.checked=$.__value===r.gender),e.gender&&(S.checked=S.__value===r.gender),r.id?ae&&(de(),me(ae,1,1,()=>{ae=null}),ue()):ae?(ae.p(e,r),pe(ae,1)):((ae=zt(r)).c(),pe(ae,1),ae.m(s,E)),e.loading&&P(L,"is-loading",r.loading)},i(e){z||(pe(Y),pe(G.$$.fragment,e),pe(X.$$.fragment,e),pe(ee.$$.fragment,e),pe(se.$$.fragment,e),pe(ae),z=!0)},o(e){me(Y),me(G.$$.fragment,e),me(X.$$.fragment,e),me(ee.$$.fragment,e),me(se.$$.fragment,e),me(ae),z=!1},d(t){t&&y(n),W.d(),t&&(y(r),y(s)),Y&&Y.d(),Se(G),Se(X),Se(ee),Se(se),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf($),1),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf(S),1),ae&&ae.d(),e.button_binding(null),e.form_1_binding(null),a(q)}}}function Ht(e,n,t){const r=G();let s,a,{chineseName:i="",pinyinName:o="",englishName:l="",birthdate:c=null,groupId:d=null,id:u=null,loading:p=!1,errors:m,groups:f=[],gender:g=null}=n;const h=(new Date).toISOString().slice(0,10);return e.$set=e=>{"chineseName"in e&&t("chineseName",i=e.chineseName),"pinyinName"in e&&t("pinyinName",o=e.pinyinName),"englishName"in e&&t("englishName",l=e.englishName),"birthdate"in e&&t("birthdate",c=e.birthdate),"groupId"in e&&t("groupId",d=e.groupId),"id"in e&&t("id",u=e.id),"loading"in e&&t("loading",p=e.loading),"errors"in e&&t("errors",m=e.errors),"groups"in e&&t("groups",f=e.groups),"gender"in e&&t("gender",g=e.gender)},e.$$.update=(e={saveButton:1,loading:1})=>{(e.saveButton||e.loading)&&a&&(a.disabled=p,t("saveButton",a),t("loading",p))},{chineseName:i,pinyinName:o,englishName:l,birthdate:c,groupId:d,id:u,loading:p,errors:m,groups:f,gender:g,form:s,saveButton:a,todaysDate:h,handleSubmit:()=>{s.checkValidity()?r("submit",{id:u,chineseName:i,birthdate:c,englishName:l,pinyinName:o,gender:g,groupId:d}):Ee.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){Z(e,n)},input0_value_binding:function(e){t("chineseName",i=e)},input1_value_binding:function(e){t("pinyinName",o=e)},input2_value_binding:function(e){t("englishName",l=e)},input3_value_binding:function(e){t("birthdate",c=e)},input4_change_handler:function(){g=this.__value,t("gender",g)},input5_change_handler:function(){g=this.__value,t("gender",g)},groupselect_groupId_binding:function(e){t("groupId",d=e)},button_binding:function(e){J[e?"unshift":"push"](()=>{t("saveButton",a=e)})},form_1_binding:function(e){J[e?"unshift":"push"](()=>{t("form",s=e)})},$$binding_groups:[[]]}}class Ft extends Ce{constructor(e){super(),Ie(this,e,Ht,qt,o,["chineseName","pinyinName","englishName","birthdate","groupId","id","loading","errors","groups","gender"])}}function Wt(e){var n,r=[{errors:e.errors},{loading:e.loading},e.student,{birthdate:e.student.birthdate&&e.student.birthdate.slice(0,10)}];let s={};for(var a=0;a<r.length;a+=1)s=t(s,r[a]);var i=new Ft({props:s});return i.$on("reset",e.reset),i.$on("submit",e.save),{c(){i.$$.fragment.c()},m(e,t){_e(i,e,t),n=!0},p(e,n){var t=e.errors||e.loading||e.student?xe(r,[e.errors&&{errors:n.errors},e.loading&&{loading:n.loading},e.student&&n.student,e.student&&{birthdate:n.student.birthdate&&n.student.birthdate.slice(0,10)}]):{};i.$set(t)},i(e){n||(pe(i.$$.fragment,e),n=!0)},o(e){me(i.$$.fragment,e),n=!1},d(e){Se(i,e)}}}function Yt(e,n,t){let{open:r=!1}=n,s=null,a=!1,{student:i}=n;const o=()=>{t("errors",s=null),t("open",r=!1)};return e.$set=e=>{"open"in e&&t("open",r=e.open),"student"in e&&t("student",i=e.student)},{open:r,errors:s,loading:a,student:i,reset:o,save:async({detail:e})=>{const{id:n,groupId:r,...i}=e;t("loading",a=!0);try{await kt.patch(n,i),Ee.add({text:`Saved changes to student: '${e.englishName}'`,type:"success"}),o()}catch(e){t("errors",s=e),Ee.add({text:"Could not save changes to student",type:"danger"})}finally{t("loading",a=!1)}}}}class Bt extends Ce{constructor(e){super(),Ie(this,e,Yt,Wt,o,["open","student"])}}function Ut(e,n,t){const r=Object.create(e);return r.group=n[t],r}function Gt(e,n,t){const r=Object.create(e);return r.group=n[t],r}function Zt(e){var n,t=e.error;return{c(){n=D(t)},m(e,t){w(e,n,t)},p(e,r){e.semesters&&t!==(t=r.error)&&N(n,t)},d(e){e&&y(n)}}}function Vt(e){var n,t,r=e.result&&e.result.currentSemester&&Jt(e),s=e.result&&e.result.nextSemester&&Qt(e);return{c(){r&&r.c(),n=I(),s&&s.c(),t=C()},m(e,a){r&&r.m(e,a),w(e,n,a),s&&s.m(e,a),w(e,t,a)},p(e,a){a.result&&a.result.currentSemester?r?r.p(e,a):((r=Jt(a)).c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),a.result&&a.result.nextSemester?s?s.p(e,a):((s=Qt(a)).c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(e){r&&r.d(e),e&&y(n),s&&s.d(e),e&&y(t)}}}function Jt(e){for(var n,t,r,s,i,o,l,c=e.result.currentSemester.groups,d=[],u=0;u<c.length;u+=1)d[u]=Xt(Gt(e,c,u));function p(){return e.change_handler(e)}return{c(){(n=_("label")).textContent="Current semester",t=I(),r=_("div"),s=_("div"),i=_("select"),(o=_("option")).textContent="none";for(var a=0;a<d.length;a+=1)d[a].c();A(n,"class","label svelte-iubj27"),o.__value="",o.value=o.__value,void 0===e.currentSemester&&te(()=>e.select_change_handler.call(i)),A(s,"class","select"),P(s,"is-loading",e.currentLoading),A(r,"class","control svelte-iubj27"),l=[M(i,"change",e.select_change_handler),M(i,"change",p)]},m(a,l){w(a,n,l),w(a,t,l),w(a,r,l),b(r,s),b(s,i),b(i,o);for(var c=0;c<d.length;c+=1)d[c].m(i,null);O(i,e.currentSemester),e.select_binding(i)},p(n,t){if(e=t,n.semesters||n.isInGroup){c=e.result.currentSemester.groups;for(var r=0;r<c.length;r+=1){const t=Gt(e,c,r);d[r]?d[r].p(n,t):(d[r]=Xt(t),d[r].c(),d[r].m(i,null))}for(;r<d.length;r+=1)d[r].d(1);d.length=c.length}n.currentSemester&&O(i,e.currentSemester),n.currentLoading&&P(s,"is-loading",e.currentLoading)},d(s){s&&(y(n),y(t),y(r)),k(d,s),e.select_binding(null),a(l)}}}function Xt(e){var n,t,r,s,a=e.group.name;return{c(){n=_("option"),t=D(a),n.__value=r=e.group.id,n.value=n.__value,n.selected=s=e.isInGroup(e.group.id)},m(e,r){w(e,n,r),b(n,t)},p(e,i){e.semesters&&a!==(a=i.group.name)&&N(t,a),e.semesters&&r!==(r=i.group.id)&&(n.__value=r),n.value=n.__value,e.semesters&&s!==(s=i.isInGroup(i.group.id))&&(n.selected=s)},d(e){e&&y(n)}}}function Qt(e){for(var n,t,r,s,i,o,l,c,d=e.result.nextSemester.name,u=e.result.nextSemester.groups,p=[],m=0;m<u.length;m+=1)p[m]=Kt(Ut(e,u,m));function f(){return e.change_handler_1(e)}return{c(){n=_("label"),t=D(d),r=I(),s=_("div"),i=_("div"),o=_("select"),(l=_("option")).textContent="none";for(var a=0;a<p.length;a+=1)p[a].c();A(n,"class","label svelte-iubj27"),l.__value="",l.value=l.__value,void 0===e.nextSemester&&te(()=>e.select_change_handler_1.call(o)),A(i,"class","select"),P(i,"is-loading",e.nextLoading),A(s,"class","control svelte-iubj27"),c=[M(o,"change",e.select_change_handler_1),M(o,"change",f)]},m(a,c){w(a,n,c),b(n,t),w(a,r,c),w(a,s,c),b(s,i),b(i,o),b(o,l);for(var d=0;d<p.length;d+=1)p[d].m(o,null);O(o,e.nextSemester),e.select_binding_1(o)},p(n,r){if(e=r,n.semesters&&d!==(d=e.result.nextSemester.name)&&N(t,d),n.semesters||n.isInGroup){u=e.result.nextSemester.groups;for(var s=0;s<u.length;s+=1){const t=Ut(e,u,s);p[s]?p[s].p(n,t):(p[s]=Kt(t),p[s].c(),p[s].m(o,null))}for(;s<p.length;s+=1)p[s].d(1);p.length=u.length}n.nextSemester&&O(o,e.nextSemester),n.nextLoading&&P(i,"is-loading",e.nextLoading)},d(t){t&&(y(n),y(r),y(s)),k(p,t),e.select_binding_1(null),a(c)}}}function Kt(e){var n,t,r,s,a=e.group.name;return{c(){n=_("option"),t=D(a),n.__value=r=e.group.id,n.value=n.__value,n.selected=s=e.isInGroup(e.group.id)},m(e,r){w(e,n,r),b(n,t)},p(e,i){e.semesters&&a!==(a=i.group.name)&&N(t,a),e.semesters&&r!==(r=i.group.id)&&(n.__value=r),n.value=n.__value,e.semesters&&s!==(s=i.isInGroup(i.group.id))&&(n.selected=s)},d(e){e&&y(n)}}}function er(n){var t;return{c(){t=D("Loading groups ...")},m(e,n){w(e,t,n)},p:e,d(e){e&&y(t)}}}function nr(e){var n,r,s,a,i,o,l,c,d,u,p,m,f,g=e.student.englishName,h=new hn({props:{errors:e.errors}});let $={ctx:e,current:null,token:null,pending:er,then:Vt,catch:Zt,value:"result",error:"error"};return $e(c=e.semesters,$),{c(){n=_("h2"),r=D("Change "),s=D(g),a=D("'s classes"),i=I(),h.$$.fragment.c(),o=I(),l=_("div"),$.block.c(),d=I(),u=_("div"),(p=_("button")).textContent="Done",A(n,"class","title"),A(l,"class","grid-container svelte-iubj27"),A(p,"class","button is-primary"),P(p,"is-loading",e.loading),A(u,"class","buttons svelte-iubj27"),f=M(p,"click",e.click_handler)},m(t,c){w(t,n,c),b(n,r),b(n,s),b(n,a),w(t,i,c),_e(h,t,c),w(t,o,c),w(t,l,c),$.block.m(l,$.anchor=null),$.mount=()=>l,$.anchor=null,w(t,d,c),w(t,u,c),b(u,p),e.button_binding(p),m=!0},p(n,r){e=r,m&&!n.student||g===(g=e.student.englishName)||N(s,g);var a={};n.errors&&(a.errors=e.errors),h.$set(a),$.ctx=e,"semesters"in n&&c!==(c=e.semesters)&&$e(c,$)||$.block.p(n,t(t({},e),$.resolved)),n.loading&&P(p,"is-loading",e.loading)},i(e){m||(pe(h.$$.fragment,e),m=!0)},o(e){me(h.$$.fragment,e),m=!1},d(t){t&&(y(n),y(i)),Se(h,t),t&&(y(o),y(l)),$.block.d(),$.token=null,$=null,t&&(y(d),y(u)),e.button_binding(null),f()}}}function tr(e,n,t){let r,s,a,i,o,l,c="",d=!1,u=!1,{open:p,student:m={}}=n;B(()=>{t("semesters",r=Ze(St))});const f=e=>!!m.groups.find(n=>n.id===e);async function g(e,n){e===s?d=!0:u=!0,t("currentLoading",d),t("nextLoading",u),e.disabled=!0,l.disabled=!0,t("closeButton",l);const r=e.value,a=e.selectedOptions[0].text,i=n.groups.find(e=>f(e.id));let o="";try{""===r&&i?(await kt.removeStudentFromGroup(m.id,i.id),o=`Removed ${m.englishName} from ${i.name} class`):i?(await kt.moveToDifferentGroup(m.id,i.id,r),o=`Switched ${m.englishName} from ${i.name} class to ${a} class`):(await kt.addStudentToGroup(m.id,r),o=`Added ${m.englishName} to ${a} class`),Ee.add({text:o,type:"success"})}catch(e){t("errors",c=e),Ee.add({text:`Unable to change ${m.englishName}'s classes`,type:"danger"})}finally{e.disabled=!1,l.disabled=!1,t("closeButton",l),e===s?d=!1:u=!1,t("currentLoading",d),t("nextLoading",u)}}let h;return e.$set=e=>{"open"in e&&t("open",p=e.open),"student"in e&&t("student",m=e.student)},e.$$.update=(e={currentLoading:1,nextLoading:1})=>{(e.currentLoading||e.nextLoading)&&t("loading",h=d||u)},{semesters:r,selectCurrent:s,currentSemester:a,nextSemester:i,selectNext:o,errors:c,currentLoading:d,nextLoading:u,closeButton:l,open:p,student:m,isInGroup:f,joinOrChangeGroup:g,loading:h,select_change_handler:function(){a=L(this),t("currentSemester",a)},select_binding:function(e){J[e?"unshift":"push"](()=>{t("selectCurrent",s=e)})},change_handler:function({result:e}){return g(s,e.currentSemester)},select_change_handler_1:function(){i=L(this),t("nextSemester",i)},select_binding_1:function(e){J[e?"unshift":"push"](()=>{t("selectNext",o=e)})},change_handler_1:function({result:e}){return g(o,e.nextSemester)},button_binding:function(e){J[e?"unshift":"push"](()=>{t("closeButton",l=e)})},click_handler:function(){const e=p=!1;return t("open",p),e}}}class rr extends Ce{constructor(e){super(),Ie(this,e,tr,nr,o,["open","student"])}}function sr(e){var n,t;const r=e.$$slots.default,s=c(r,e,null);return{c(){n=_("dl"),s&&s.c(),A(n,"class","svelte-1usf7k9")},l(e){s&&s.l(dl_nodes)},m(e,r){w(e,n,r),s&&s.m(n,null),t=!0},p(e,n){s&&s.p&&e.$$scope&&s.p(u(r,n,e,null),d(r,n,null))},i(e){t||(pe(s,e),t=!0)},o(e){me(s,e),t=!1},d(e){e&&y(n),s&&s.d(e)}}}function ar(e,n,t){let{$$slots:r={},$$scope:s}=n;return e.$set=e=>{"$$scope"in e&&t("$$scope",s=e.$$scope)},{$$slots:r,$$scope:s}}class ir extends Ce{constructor(e){super(),Ie(this,e,ar,sr,o,[])}}function or(e,n,t){const r=Object.create(e);return r.group=n[t],r}function lr(e){var n,t,r,s=e.getAge(e.birthdate);return{c(){n=_("p"),t=D(s),r=D(" yrs old")},m(e,s){w(e,n,s),b(n,t),b(n,r)},p(e,n){e.birthdate&&s!==(s=n.getAge(n.birthdate))&&N(t,s)},d(e){e&&y(n)}}}function cr(e){var n,t,r,s=new ir({props:{$$slots:{default:[pr]},$$scope:{ctx:e}}});return{c(){n=_("div"),s.$$.fragment.c()},m(e,t){w(e,n,t),_e(s,n,null),r=!0},p(e,n){var t={};(e.$$scope||e.student||e.birthdate)&&(t.$$scope={changed:e,ctx:n}),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),e&&te(()=>{t||(t=he(n,Re,{duration:200},!0)),t.run(1)}),r=!0)},o(e){me(s.$$.fragment,e),e&&(t||(t=he(n,Re,{duration:200},!1)),t.run(0)),r=!1},d(e){e&&y(n),Se(s),e&&t&&t.end()}}}function dr(e){var n;return{c(){n=D("none")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function ur(e){var n,t,r,s,a=e.group.name,i=e.group.semester.name;return{c(){n=_("li"),t=D(a),r=D(" - "),s=D(i),A(n,"class","svelte-1i7iszh")},m(e,a){w(e,n,a),b(n,t),b(n,r),b(n,s)},p(e,n){e.student&&a!==(a=n.group.name)&&N(t,a),e.student&&i!==(i=n.group.semester.name)&&N(s,i)},d(e){e&&y(n)}}}function pr(e){for(var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$=e.student.pinyinName,v=e.student.pointsTally,x=e.student.groups,S=[],C=0;C<x.length;C+=1)S[C]=ur(or(e,x,C));var M=null;return x.length||(M=dr()).c(),{c(){(n=_("dt")).textContent="Groups:",t=I(),r=_("dd"),s=_("ul");for(var b=0;b<S.length;b+=1)S[b].c();a=I(),(i=_("dt")).textContent="Pinyin:",o=_("dd"),l=D($),c=I(),(d=_("dt")).textContent="Birthdate:",u=_("dd"),p=D(e.birthdate),m=I(),(f=_("dt")).textContent="Total points:",g=_("dd"),h=D(v),A(s,"class","groups-list svelte-1i7iszh")},m(e,$){w(e,n,$),w(e,t,$),w(e,r,$),b(r,s);for(var v=0;v<S.length;v+=1)S[v].m(s,null);M&&M.m(s,null),w(e,a,$),w(e,i,$),w(e,o,$),b(o,l),w(e,c,$),w(e,d,$),w(e,u,$),b(u,p),w(e,m,$),w(e,f,$),w(e,g,$),b(g,h)},p(e,n){if(e.student){x=n.student.groups;for(var t=0;t<x.length;t+=1){const r=or(n,x,t);S[t]?S[t].p(e,r):(S[t]=ur(r),S[t].c(),S[t].m(s,null))}for(;t<S.length;t+=1)S[t].d(1);S.length=x.length}x.length?M&&(M.d(1),M=null):M||((M=dr()).c(),M.m(s,null)),e.student&&$!==($=n.student.pinyinName)&&N(l,$),e.birthdate&&N(p,n.birthdate),e.student&&v!==(v=n.student.pointsTally)&&N(h,v)},d(e){e&&(y(n),y(t),y(r)),k(S,e),M&&M.d(),e&&(y(a),y(i),y(o),y(c),y(d),y(u),y(m),y(f),y(g))}}}function mr(e){var n,t;function r(t){e.editstudent_open_binding.call(null,t),n=!0,re(()=>n=!1)}let s={student:e.student};void 0!==e.editShowing&&(s.open=e.editShowing);var a=new Bt({props:s});return J.push(()=>ke(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){_e(a,e,n),t=!0},p(e,t){var r={};e.student&&(r.student=t.student),!n&&e.editShowing&&(r.open=t.editShowing),a.$set(r)},i(e){t||(pe(a.$$.fragment,e),t=!0)},o(e){me(a.$$.fragment,e),t=!1},d(e){Se(a,e)}}}function fr(e){var n,t,r=e.editShowing&&mr(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.editShowing?r?(r.p(e,t),pe(r,1)):((r=mr(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function gr(e){var n,t;function r(t){e.editstudentgroups_open_binding.call(null,t),n=!0,re(()=>n=!1)}let s={student:e.student};void 0!==e.groupsShowing&&(s.open=e.groupsShowing);var a=new rr({props:s});return J.push(()=>ke(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){_e(a,e,n),t=!0},p(e,t){var r={};e.student&&(r.student=t.student),!n&&e.groupsShowing&&(r.open=t.groupsShowing),a.$set(r)},i(e){t||(pe(a.$$.fragment,e),t=!0)},o(e){me(a.$$.fragment,e),t=!1},d(e){Se(a,e)}}}function hr(e){var n,t,r=e.groupsShowing&&gr(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.groupsShowing?r?(r.p(e,t),pe(r,1)):((r=gr(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function $r(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k,S,C,T,E,O,L,P,R,j,z,q,H,F,W,Y,B,U,G,Z,V=e.student.englishName,X=e.student.chineseName,Q=e.student.birthdate&&lr(e),K=e.expanded&&cr(e);function ee(n){e.deleteitem_open_binding.call(null,n),F=!0,re(()=>F=!1)}let ne={id:e.student.id,store:kt,type:"student",name:e.student.englishName+" ("+e.student.chineseName+")"};void 0!==e.showDelete&&(ne.open=e.showDelete);var te=new Mn({props:ne});function se(n){e.modal0_open_binding.call(null,n),Y=!0,re(()=>Y=!1)}J.push(()=>ke(te,"open",ee));let ae={$$slots:{default:[fr]},$$scope:{ctx:e}};void 0!==e.editShowing&&(ae.open=e.editShowing);var ie=new kn({props:ae});function oe(n){e.modal1_open_binding.call(null,n),U=!0,re(()=>U=!1)}J.push(()=>ke(ie,"open",se));let le={$$slots:{default:[hr]},$$scope:{ctx:e}};void 0!==e.groupsShowing&&(le.open=e.groupsShowing);var ce=new kn({props:le});return J.push(()=>ke(ce,"open",oe)),{c(){n=_("div"),t=_("div"),r=_("div"),s=_("div"),i=_("figure"),o=_("img"),c=I(),d=_("div"),u=_("p"),p=_("strong"),m=D(V),f=I(),g=_("span"),h=D(X),$=I(),v=_("p"),x=D(e.currentOrNextClass),k=I(),Q&&Q.c(),S=I(),C=_("i"),E=I(),K&&K.c(),O=I(),L=_("footer"),(P=_("button")).textContent="Groups",R=I(),(j=_("button")).textContent="Edit",z=I(),(q=_("button")).textContent="Delete",H=I(),te.$$.fragment.c(),W=I(),ie.$$.fragment.c(),B=I(),ce.$$.fragment.c(),A(o,"src","images/"+e.gender+".jpg"),A(o,"alt","portrait"),A(o,"class",l="is-rounded portrait "+e.student.gender+" svelte-1i7iszh"),A(i,"class","image svelte-1i7iszh"),A(s,"class","media-left svelte-1i7iszh"),A(g,"class","chinese svelte-1i7iszh"),A(d,"class","media-content svelte-1i7iszh"),A(C,"class",T="expand-button fas fa-angle-"+(e.expanded?"up":"down")+" svelte-1i7iszh"),A(r,"class","media svelte-1i7iszh"),A(t,"class","card-content svelte-1i7iszh"),A(P,"class","card-footer-item svelte-1i7iszh"),A(j,"class","card-footer-item svelte-1i7iszh"),A(q,"class","card-footer-item svelte-1i7iszh"),A(L,"class","card-footer svelte-1i7iszh"),A(n,"class","card svelte-1i7iszh"),Z=[M(r,"click",e.click_handler),M(P,"click",e.showGroups),M(j,"click",e.showEdit),M(q,"click",e.click_handler_1)]},m(e,a){w(e,n,a),b(n,t),b(t,r),b(r,s),b(s,i),b(i,o),b(r,c),b(r,d),b(d,u),b(u,p),b(p,m),b(u,f),b(u,g),b(g,h),b(d,$),b(d,v),b(v,x),b(d,k),Q&&Q.m(d,null),b(r,S),b(r,C),b(t,E),K&&K.m(t,null),b(n,O),b(n,L),b(L,P),b(L,R),b(L,j),b(L,z),b(L,q),w(e,H,a),_e(te,e,a),w(e,W,a),_e(ie,e,a),w(e,B,a),_e(ce,e,a),G=!0},p(e,n){G&&!e.student||l===(l="is-rounded portrait "+n.student.gender+" svelte-1i7iszh")||A(o,"class",l),G&&!e.student||V===(V=n.student.englishName)||N(m,V),G&&!e.student||X===(X=n.student.chineseName)||N(h,X),G&&!e.currentOrNextClass||N(x,n.currentOrNextClass),n.student.birthdate?Q?Q.p(e,n):((Q=lr(n)).c(),Q.m(d,null)):Q&&(Q.d(1),Q=null),G&&!e.expanded||T===(T="expand-button fas fa-angle-"+(n.expanded?"up":"down")+" svelte-1i7iszh")||A(C,"class",T),n.expanded?K?(K.p(e,n),pe(K,1)):((K=cr(n)).c(),pe(K,1),K.m(t,null)):K&&(de(),me(K,1,1,()=>{K=null}),ue());var r={};e.student&&(r.id=n.student.id),e.students&&(r.store=kt),e.student&&(r.name=n.student.englishName+" ("+n.student.chineseName+")"),!F&&e.showDelete&&(r.open=n.showDelete),te.$set(r);var s={};(e.$$scope||e.editShowing||e.student)&&(s.$$scope={changed:e,ctx:n}),!Y&&e.editShowing&&(s.open=n.editShowing),ie.$set(s);var a={};(e.$$scope||e.groupsShowing||e.student)&&(a.$$scope={changed:e,ctx:n}),!U&&e.groupsShowing&&(a.open=n.groupsShowing),ce.$set(a)},i(e){G||(pe(K),pe(te.$$.fragment,e),pe(ie.$$.fragment,e),pe(ce.$$.fragment,e),G=!0)},o(e){me(K),me(te.$$.fragment,e),me(ie.$$.fragment,e),me(ce.$$.fragment,e),G=!1},d(e){e&&y(n),Q&&Q.d(),K&&K.d(),e&&y(H),Se(te,e),e&&y(W),Se(ie,e),e&&y(B),Se(ce,e),a(Z)}}}function vr(e,n,t){let{student:r={},semesters:s={}}=n,a=!1,i=!1,o=!1,l=!1;const c="M"===r.gender?"boy":"girl";let d,u,p;return e.$set=e=>{"student"in e&&t("student",r=e.student),"semesters"in e&&t("semesters",s=e.semesters)},e.$$.update=(e={student:1})=>{e.student&&t("birthdate",d=r.birthdate?r.birthdate.slice(0,10):"none"),e.student&&(u=r.groups?r.groups.map(e=>{if(e.name)return`${e.name} (${e.semester.name})`}).join(", "):"none"),e.student&&t("currentOrNextClass",p=(e=>{if(e){if(s.currentSemester){const n=e.find(e=>e.semester.id===s.currentSemester.id);if(n)return`Current ${n.name} class`}if(s.nextSemester){const n=e.find(e=>e.semester.id===s.nextSemester.id);if(n)return`Next ${n.name} class`}return"Not enrolled"}})(r.groups))},{student:r,semesters:s,expanded:a,showDelete:i,editShowing:o,groupsShowing:l,gender:c,showEdit:()=>{t("editShowing",o=!0)},showGroups:()=>{t("groupsShowing",l=!0)},getAge:e=>{if("none"===e)return;const n=new Date,t=new Date(e);let r=n.getFullYear()-t.getFullYear();const s=n.getMonth()-t.getMonth();return(s<0||0===s&&n.getDate()<t.getDate())&&r--,r},birthdate:d,currentOrNextClass:p,click_handler:function(){t("expanded",a=!a)},click_handler_1:function(){t("showDelete",i=!0)},deleteitem_open_binding:function(e){t("showDelete",i=e)},editstudent_open_binding:function(e){t("editShowing",o=e)},modal0_open_binding:function(e){t("editShowing",o=e)},editstudentgroups_open_binding:function(e){t("groupsShowing",l=e)},modal1_open_binding:function(e){t("groupsShowing",l=e)}}}class br extends Ce{constructor(e){super(),Ie(this,e,vr,$r,o,["student","semesters"])}}function wr(n){var t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k;return{c(){t=_("div"),r=_("input"),s=I(),(i=_("span")).innerHTML='<i class="fas fa-search"></i>',o=I(),l=_("div"),c=_("div"),d=_("select"),(u=_("option")).textContent="Sort by: ID",(p=_("option")).textContent="Chinese name",(m=_("option")).textContent="English name",(f=_("option")).textContent="Age",(g=_("option")).textContent="Gender",h=I(),$=_("button"),v=_("i"),A(r,"class","input"),A(r,"type","text"),A(r,"placeholder","Search"),A(i,"class","icon is-small is-left"),A(t,"class","control search has-icons-left svelte-49z4zm"),u.__value="id",u.value=u.__value,p.__value="pinyinName",p.value=p.__value,m.__value="englishName",m.value=m.__value,f.__value="birthdate",f.value=f.__value,g.__value="gender",g.value=g.__value,void 0===n.sortParam&&te(()=>n.select_change_handler.call(d)),A(c,"class","select"),A(v,"class",x="fas fa-sort-"+(-1===n.direction?"up":"down")+" svelte-49z4zm"),A($,"class","button is-link"),A(l,"class","control svelte-49z4zm"),k=[M(r,"input",n.input_input_handler),M(r,"input",n.reload),M(d,"change",n.select_change_handler),M(d,"change",n.sort),M($,"click",n.reverse)]},m(e,a){w(e,t,a),b(t,r),r.value=n.searchString,b(t,s),b(t,i),w(e,o,a),w(e,l,a),b(l,c),b(c,d),b(d,u),b(d,p),b(d,m),b(d,f),b(d,g),O(d,n.sortParam),b(l,h),b(l,$),b($,v)},p(e,n){e.searchString&&r.value!==n.searchString&&(r.value=n.searchString),e.sortParam&&O(d,n.sortParam),e.direction&&x!==(x="fas fa-sort-"+(-1===n.direction?"up":"down")+" svelte-49z4zm")&&A(v,"class",x)},i:e,o:e,d(e){e&&(y(t),y(o),y(l)),a(k)}}}function yr(e,n,t){let r="id",s=1,a="";const i=()=>{r&&kt.sort(r,s)};return{sortParam:r,direction:s,searchString:a,reload:()=>{const e=1===s?"ASC":"DESC";kt.get(`${r}_${e}`,a)},sort:i,reverse:()=>{t("direction",s=-s),i()},input_input_handler:function(){a=this.value,t("searchString",a)},select_change_handler:function(){r=L(this),t("sortParam",r)}}}class xr extends Ce{constructor(e){super(),Ie(this,e,yr,wr,o,[])}}function kr(e){var n,t=new Ft({props:{errors:e.errors,loading:e.loading}});return t.$on("reset",e.reset),t.$on("submit",e.save),{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function _r(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,re(()=>r=!1)}let o={$$slots:{default:[kr]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new kn({props:o});return J.push(()=>ke(l,"open",i)),{c(){(n=_("button")).innerHTML='<i class="fas fa-plus"></i> Add Student\n\t\t\t',t=I(),l.$$.fragment.c(),A(n,"class","button is-primary svelte-10d3jcz"),a=M(n,"click",e.click_handler)},m(e,r){w(e,n,r),w(e,t,r),_e(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||(pe(l.$$.fragment,e),s=!0)},o(e){me(l.$$.fragment,e),s=!1},d(e){e&&(y(n),y(t)),Se(l,e),a()}}}function Sr(e,n,t){let r=!1,s=null,a=!1;const i=()=>{t("errors",s=null),t("open",r=!1)};return{open:r,errors:s,loading:a,reset:i,save:async({detail:e})=>{const{groupId:n,id:r,...o}=e;t("loading",a=!0);try{await kt.create(o,n),Ee.add({text:`Created new student: '${e.englishName}'`,type:"success"}),i()}catch(e){t("errors",s=e),Ee.add({text:"Could not save new student",type:"danger"})}finally{t("loading",a=!1)}},click_handler:function(){const e=r=!0;return t("open",r),e},modal_open_binding:function(e){t("open",r=e)}}}class Dr extends Ce{constructor(e){super(),Ie(this,e,Sr,_r,o,[])}}function Ir(e,n,t){const r=Object.create(e);return r.student=n[t],r}function Cr(e){var n,t,r=[],s=new Map,a=e.$students;const i=e=>e.student.id;for(var o=0;o<a.length;o+=1){let n=Ir(e,a,o),t=i(n);s.set(t,r[o]=Mr(t,n))}return{c(){for(n=_("div"),o=0;o<r.length;o+=1)r[o].c();A(n,"class","student-list svelte-5i8m0")},m(e,s){for(w(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=t.$students;de(),r=ye(r,e,i,1,t,a,s,n,we,Mr,null,Ir),ue()},i(e){if(!t){for(var n=0;n<a.length;n+=1)pe(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)me(r[o]);t=!1},d(e){for(e&&y(n),o=0;o<r.length;o+=1)r[o].d()}}}function Mr(e,n){var t,r,s=new br({props:{student:n.student,semesters:n.semesters}});return{key:e,first:null,c(){t=C(),s.$$.fragment.c(),this.first=t},m(e,n){w(e,t,n),_e(s,e,n),r=!0},p(e,n){var t={};e.$students&&(t.student=n.student),e.semesters&&(t.semesters=n.semesters),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&y(t),Se(s,e)}}}function Tr(e){var n,t,r,s,a,i,o,l,c,d,u=e.$students&&e.$students.length,p=new Dr({}),m=new xr({}),f=e.$students&&e.$students.length&&e.semesters&&Cr(e);return{c(){n=_("p"),t=D("Showing "),r=D(u),s=D(" students."),a=I(),i=_("div"),o=_("div"),p.$$.fragment.c(),l=I(),m.$$.fragment.c(),c=I(),f&&f.c(),A(n,"class","student-number"),A(o,"class","details svelte-5i8m0"),A(i,"class","svelte-5i8m0")},m(e,u){w(e,n,u),b(n,t),b(n,r),b(n,s),w(e,a,u),w(e,i,u),b(i,o),_e(p,o,null),b(o,l),_e(m,o,null),b(i,c),f&&f.m(i,null),d=!0},p(e,n){d&&!e.$students||u===(u=n.$students&&n.$students.length)||N(r,u),n.$students&&n.$students.length&&n.semesters?f?(f.p(e,n),pe(f,1)):((f=Cr(n)).c(),pe(f,1),f.m(i,null)):f&&(de(),me(f,1,1,()=>{f=null}),ue())},i(e){d||(pe(p.$$.fragment,e),pe(m.$$.fragment,e),pe(f),d=!0)},o(e){me(p.$$.fragment,e),me(m.$$.fragment,e),me(f),d=!1},d(e){e&&(y(n),y(a),y(i)),Se(p),Se(m),f&&f.d()}}}function Ar(e,n,t){let r,s;return l(e,kt,e=>{t("$students",r=e)}),B(async()=>{t("semesters",s=await Ze(St))}),{semesters:s,$students:r}}class Nr extends Ce{constructor(e){super(),Ie(this,e,Ar,Tr,o,[])}}function Er(e){var n,t=new hn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function Or(n){var t,r=new vt({props:{what:"students"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function Lr(n){var t,r=new Nr({});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function Pr(e){var n,t,r,s,a,i,o,l=[Lr,Or,Er],c=[];function d(e){return e.$students?0:e.errors?2:1}return s=d(e),a=c[s]=l[s](e),{c(){n=I(),(t=_("h1")).textContent="Students",r=I(),a.c(),i=C(),document.title="Students",A(t,"class","title")},m(e,a){w(e,n,a),w(e,t,a),w(e,r,a),c[s].m(e,a),w(e,i,a),o=!0},p(e,n){var t=s;(s=d(n))===t?c[s].p(e,n):(de(),me(c[t],1,1,()=>{c[t]=null}),ue(),(a=c[s])||(a=c[s]=l[s](n)).c(),pe(a,1),a.m(i.parentNode,i))},i(e){o||(pe(a),o=!0)},o(e){me(a),o=!1},d(e){e&&(y(n),y(t),y(r)),c[s].d(e),e&&y(i)}}}function Rr(e,n,t){let r,s;return l(e,kt,e=>{t("$students",r=e)}),B(async()=>{try{await kt.get()}catch(e){t("errors",s=e),Ee.add({text:"Couldn't get students from server.",type:"danger"})}}),{errors:s,$students:r}}const jr=(()=>{const{subscribe:e,set:n,update:t}=Ae();return{subscribe:e,get:async()=>{const e=await Ze("\n  {\n    groups {\n      id\n      name\n      semester {\n        id\n        name\n        startDate\n      }\n      students {\n        chineseName\n        englishName\n        pinyinName\n        id\n      }\n    }\n  }\n");n(e.groups)},create:async(e,n)=>{const r=await Ze("\n  mutation createGroup($semesterId: ID!, $name: String!) {\n    createGroup(semesterId: $semesterId, name: $name){\n      id\n      name\n      semester {\n        id\n        name\n        startDate\n      }\n      students {\n        chineseName\n        englishName\n        pinyinName\n        id\n      }\n    }\n  }\n",{name:e,semesterId:n});t(e=>[...e,r.createGroup])},patch:async(e,n,r)=>{const s=await Ze("\n  mutation updateGroup($id: ID!, $semesterId: ID, $name: String) {\n    updateGroup(id: $id, semesterId: $semesterId, name: $name){\n      id\n      name\n      semester {\n        id\n        name\n        startDate\n      }\n      students {\n        chineseName\n        englishName\n        pinyinName\n        id\n      }\n    }\n  }\n",{id:e,name:n,semesterId:r});t(n=>n.map(n=>n.id!==e?n:s.updateGroup))},remove:async e=>{const n=await Ze("\nmutation deleteGroup($id: ID!) {\n  deleteGroup(id: $id) {\n    id\n    name\n  }\n}\n",{id:e});t(e=>e.filter(e=>n.deleteGroup.id!==e.id))}}})();function zr(e,n,t){const r=Object.create(e);return r.semester=n[t],r}function qr(e){var n;return{c(){(n=_("p")).textContent="Be careful! Only change if there aren't any class sessions.",A(n,"class","help is-warning")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function Hr(n){var t;return{c(){(t=_("option")).textContent="Loading semesters ...",t.__value="Loading semesters ...",t.value=t.__value},m(e,n){w(e,t,n)},p:e,d(e){e&&y(t)}}}function Fr(e){var n,t=e.result&&e.result.length&&Wr(e);return{c(){t&&t.c(),n=C()},m(e,r){t&&t.m(e,r),w(e,n,r)},p(e,r){r.result&&r.result.length?t?t.p(e,r):((t=Wr(r)).c(),t.m(n.parentNode,n)):t&&(t.d(1),t=null)},d(e){t&&t.d(e),e&&y(n)}}}function Wr(e){for(var n,t,r=e.result,s=[],a=0;a<r.length;a+=1)s[a]=Yr(zr(e,r,a));return{c(){(n=_("option")).textContent="--";for(var e=0;e<s.length;e+=1)s[e].c();t=C(),n.__value="",n.value=n.__value},m(e,r){w(e,n,r);for(var a=0;a<s.length;a+=1)s[a].m(e,r);w(e,t,r)},p(e,n){if(e.$semesters||e.value){r=n.result;for(var a=0;a<r.length;a+=1){const i=zr(n,r,a);s[a]?s[a].p(e,i):(s[a]=Yr(i),s[a].c(),s[a].m(t.parentNode,t))}for(;a<s.length;a+=1)s[a].d(1);s.length=r.length}},d(e){e&&y(n),k(s,e),e&&y(t)}}}function Yr(e){var n,t,r,s,a=e.semester.name;return{c(){n=_("option"),t=D(a),n.__value=r=e.semester.id,n.value=n.__value,n.selected=s=e.semester.id===e.value},m(e,r){w(e,n,r),b(n,t)},p(e,i){e.$semesters&&a!==(a=i.semester.name)&&N(t,a),e.$semesters&&r!==(r=i.semester.id)&&(n.__value=r),n.value=n.__value,(e.$semesters||e.value)&&s!==(s=i.semester.id===i.value)&&(n.selected=s)},d(e){e&&y(n)}}}function Br(n){var t;return{c(){(t=_("option")).textContent="Loading semesters ...",t.__value="Loading semesters ...",t.value=t.__value},m(e,n){w(e,t,n)},p:e,d(e){e&&y(t)}}}function Ur(e){var n,t;return{c(){n=_("p"),t=D(e.error),A(n,"class","help is-danger")},m(e,r){w(e,n,r),b(n,t)},p(e,n){e.error&&N(t,n.error)},d(e){e&&y(n)}}}function Gr(n){var r,s,i,o,l,c,d,u,p=n.edit&&qr();let m={ctx:n,current:null,token:null,pending:Br,then:Fr,catch:Hr,value:"result",error:"null"};$e(c=n.$semesters,m);var f=n.error&&Ur(n);return{c(){(r=_("label")).textContent="Semester",s=I(),p&&p.c(),i=I(),o=_("div"),l=_("select"),m.block.c(),d=I(),f&&f.c(),A(r,"class","label"),void 0===n.value&&te(()=>n.select_change_handler.call(l)),l.required=!0,A(o,"class","select svelte-t5dn19"),u=[M(l,"change",n.select_change_handler),M(l,"invalid",T(n.checkValidity))]},m(e,t){w(e,r,t),w(e,s,t),p&&p.m(e,t),w(e,i,t),w(e,o,t),b(o,l),m.block.m(l,m.anchor=null),m.mount=()=>l,m.anchor=null,O(l,n.value),n.select_binding(l),b(o,d),f&&f.m(o,null)},p(e,r){(n=r).edit?p||((p=qr()).c(),p.m(i.parentNode,i)):p&&(p.d(1),p=null),m.ctx=n,"$semesters"in e&&c!==(c=n.$semesters)&&$e(c,m)||m.block.p(e,t(t({},n),m.resolved)),e.value&&O(l,n.value),n.error?f?f.p(e,n):((f=Ur(n)).c(),f.m(o,null)):f&&(f.d(1),f=null)},i:e,o:e,d(e){e&&(y(r),y(s)),p&&p.d(e),e&&(y(i),y(o)),m.block.d(),m.token=null,m=null,n.select_binding(null),f&&f.d(),a(u)}}}function Zr(e,n,t){let r,s;l(e,pn,e=>{t("$semesters",r=e)});let a="",{edit:i=!1,value:o=""}=n;return B(()=>{r&&0!==r.length||pn.get()}),e.$set=e=>{"edit"in e&&t("edit",i=e.edit),"value"in e&&t("value",o=e.value)},{selectElement:s,error:a,edit:i,value:o,checkValidity:function(){t("error",a=!s.validity.valid&&s.validationMessage?s.validationMessage:"")},$semesters:r,select_change_handler:function(){o=L(this),t("value",o)},select_binding:function(e){J[e?"unshift":"push"](()=>{t("selectElement",s=e)})}}}class Vr extends Ce{constructor(e){super(),Ie(this,e,Zr,Gr,o,["edit","value"])}}function Jr(e){var n;return{c(){n=D("Add")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function Xr(e){var n;return{c(){n=D("Edit")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function Qr(e){var n,t=new hn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function Kr(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h;function $(e){return e.id?Xr:Jr}var v=$(e),x=v(e),k=e.errors&&Qr(e);function S(n){e.input0_value_binding.call(null,n),o=!0,re(()=>o=!1)}let C={label:"Name"};void 0!==e.name&&(C.value=e.name);var N=new qn({props:C});function E(n){e.semesterselect_value_binding.call(null,n),c=!0,re(()=>c=!1)}J.push(()=>ke(N,"value",S));let O={edit:!!e.id};void 0!==e.semesterId&&(O.value=e.semesterId);var L=new Vr({props:O});return J.push(()=>ke(L,"value",E)),{c(){n=_("h2"),x.c(),t=D(" a group"),r=I(),s=_("form"),k&&k.c(),i=I(),N.$$.fragment.c(),l=I(),L.$$.fragment.c(),d=I(),u=_("div"),(p=_("button")).textContent="Save group",m=I(),f=_("input"),A(n,"class","title"),A(p,"type","submit"),A(p,"class","button is-primary"),P(p,"is-loading",e.loading),A(f,"type","reset"),A(f,"class","button"),f.value="Cancel",A(u,"class","buttons svelte-i7r75e"),s.noValidate=!0,h=[M(s,"submit",T(e.handleSubmit)),M(s,"reset",e.reset_handler)]},m(a,o){w(a,n,o),x.m(n,null),b(n,t),w(a,r,o),w(a,s,o),k&&k.m(s,null),b(s,i),_e(N,s,null),b(s,l),_e(L,s,null),b(s,d),b(s,u),b(u,p),e.button_binding(p),b(u,m),b(u,f),e.form_1_binding(s),g=!0},p(e,r){v!==(v=$(r))&&(x.d(1),(x=v(r))&&(x.c(),x.m(n,t))),r.errors?k?(k.p(e,r),pe(k,1)):((k=Qr(r)).c(),pe(k,1),k.m(s,i)):k&&(de(),me(k,1,1,()=>{k=null}),ue());var a={};!o&&e.name&&(a.value=r.name),N.$set(a);var l={};e.id&&(l.edit=!!r.id),!c&&e.semesterId&&(l.value=r.semesterId),L.$set(l),e.loading&&P(p,"is-loading",r.loading)},i(e){g||(pe(k),pe(N.$$.fragment,e),pe(L.$$.fragment,e),g=!0)},o(e){me(k),me(N.$$.fragment,e),me(L.$$.fragment,e),g=!1},d(t){t&&y(n),x.d(),t&&(y(r),y(s)),k&&k.d(),Se(N),Se(L),e.button_binding(null),e.form_1_binding(null),a(h)}}}function es(e,n,t){const r=G();let s,a,{errors:i="",loading:o=!1,name:l="",semesterId:c=null,id:d=null}=n;return e.$set=e=>{"errors"in e&&t("errors",i=e.errors),"loading"in e&&t("loading",o=e.loading),"name"in e&&t("name",l=e.name),"semesterId"in e&&t("semesterId",c=e.semesterId),"id"in e&&t("id",d=e.id)},{form:s,saveButton:a,errors:i,loading:o,name:l,semesterId:c,id:d,handleSubmit:()=>{s.checkValidity()?r("submit",{id:d,name:l,semesterId:c}):Ee.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){Z(e,n)},input0_value_binding:function(e){t("name",l=e)},semesterselect_value_binding:function(e){t("semesterId",c=e)},button_binding:function(e){J[e?"unshift":"push"](()=>{t("saveButton",a=e)})},form_1_binding:function(e){J[e?"unshift":"push"](()=>{t("form",s=e)})}}}class ns extends Ce{constructor(e){super(),Ie(this,e,es,Kr,o,["errors","loading","name","semesterId","id"])}}function ts(e){var n,t=new ns({props:{id:e.group.id,loading:e.loading,errors:e.errors,name:e.group.name,semesterId:e.group.semester.id}});return t.$on("reset",e.reset),t.$on("submit",e.save),{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.group&&(r.id=n.group.id),e.loading&&(r.loading=n.loading),e.errors&&(r.errors=n.errors),e.group&&(r.name=n.group.name),e.group&&(r.semesterId=n.group.semester.id),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function rs(e,n,t){let{open:r=!1,group:s}=n,a="",i=!1;const o=()=>{t("errors",a=""),t("open",r=!1)};return e.$set=e=>{"open"in e&&t("open",r=e.open),"group"in e&&t("group",s=e.group)},{open:r,group:s,errors:a,loading:i,reset:o,save:async({detail:e})=>{const{id:n,semesterId:r,name:s}=e;t("loading",i=!0);try{await jr.patch(n,s,r),Ee.add({text:`Saved changes to '${s}' class`,type:"success"}),o()}catch(e){t("errors",a=e),Ee.add({text:"Could not save changes to group",type:"danger"})}finally{t("loading",i=!1)}}}}class ss extends Ce{constructor(e){super(),Ie(this,e,rs,ts,o,["open","group"])}}function as(e,n,t){const r=Object.create(e);return r.student=n[t],r}function is(e){for(var n,t,r,s,a,i,o=e.group.students.length,l=e.group.students,c=[],d=0;d<l.length;d+=1)c[d]=os(as(e,l,d));return{c(){n=_("p"),t=_("strong"),r=D(o),s=D(" students"),a=I(),i=_("ul");for(var e=0;e<c.length;e+=1)c[e].c();A(i,"class","student-list")},m(e,o){w(e,n,o),b(n,t),b(t,r),b(t,s),w(e,a,o),w(e,i,o);for(var l=0;l<c.length;l+=1)c[l].m(i,null)},p(e,n){if(e.group&&o!==(o=n.group.students.length)&&N(r,o),e.group){l=n.group.students;for(var t=0;t<l.length;t+=1){const r=as(n,l,t);c[t]?c[t].p(e,r):(c[t]=os(r),c[t].c(),c[t].m(i,null))}for(;t<c.length;t+=1)c[t].d(1);c.length=l.length}},d(e){e&&(y(n),y(a),y(i)),k(c,e)}}}function os(e){var n,t,r,s,a=e.student.chineseName,i=e.student.englishName;return{c(){n=_("li"),t=D(a),r=I(),s=D(i)},m(e,a){w(e,n,a),b(n,t),b(n,r),b(n,s)},p(e,n){e.group&&a!==(a=n.student.chineseName)&&N(t,a),e.group&&i!==(i=n.student.englishName)&&N(s,i)},d(e){e&&y(n)}}}function ls(e){var n,t;function r(t){e.editgroup_open_binding.call(null,t),n=!0,re(()=>n=!1)}let s={group:e.group};void 0!==e.editShowing&&(s.open=e.editShowing);var a=new ss({props:s});return J.push(()=>ke(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){_e(a,e,n),t=!0},p(e,t){var r={};e.group&&(r.group=t.group),!n&&e.editShowing&&(r.open=t.editShowing),a.$set(r)},i(e){t||(pe(a.$$.fragment,e),t=!0)},o(e){me(a.$$.fragment,e),t=!1},d(e){Se(a,e)}}}function cs(e){var n,t,r=e.editShowing&&ls(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.editShowing?r?(r.p(e,t),pe(r,1)):((r=ls(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function ds(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k,S,C,T,E=e.group.name,O=e.group.semester.name,L=e.group.students&&e.group.students.length&&is(e);function P(n){e.modal_open_binding.call(null,n),x=!0,re(()=>x=!1)}let R={$$slots:{default:[cs]},$$scope:{ctx:e}};void 0!==e.editShowing&&(R.open=e.editShowing);var j=new kn({props:R});function z(n){e.deleteitem_open_binding.call(null,n),S=!0,re(()=>S=!1)}J.push(()=>ke(j,"open",P));let q={id:e.group.id,store:jr,type:"group",name:e.group.name+" class"};void 0!==e.showDelete&&(q.open=e.showDelete);var H=new Mn({props:q});return J.push(()=>ke(H,"open",z)),{c(){n=_("li"),t=_("div"),r=_("h3"),s=D(E),i=D(" class"),o=I(),l=_("h4"),c=D(O),d=I(),L&&L.c(),u=I(),p=_("footer"),(m=_("button")).textContent="Edit",f=I(),(g=_("button")).textContent="Delete",v=I(),j.$$.fragment.c(),k=I(),H.$$.fragment.c(),A(r,"class","title is-4"),A(l,"class","subtitle is-6"),A(t,"class","card-content svelte-3tpm8l"),A(m,"class","card-footer-item svelte-3tpm8l"),A(g,"class","card-footer-item svelte-3tpm8l"),A(p,"class","card-footer svelte-3tpm8l"),A(n,"class","card svelte-3tpm8l"),T=[M(m,"click",e.click_handler),M(g,"click",e.click_handler_1)]},m(e,a){w(e,n,a),b(n,t),b(t,r),b(r,s),b(r,i),b(t,o),b(t,l),b(l,c),b(t,d),L&&L.m(t,null),b(n,u),b(n,p),b(p,m),b(p,f),b(p,g),w(e,v,a),_e(j,e,a),w(e,k,a),_e(H,e,a),C=!0},p(e,n){C&&!e.group||E===(E=n.group.name)||N(s,E),C&&!e.group||O===(O=n.group.semester.name)||N(c,O),n.group.students&&n.group.students.length?L?L.p(e,n):((L=is(n)).c(),L.m(t,null)):L&&(L.d(1),L=null);var r={};(e.$$scope||e.editShowing||e.group)&&(r.$$scope={changed:e,ctx:n}),!x&&e.editShowing&&(r.open=n.editShowing),j.$set(r);var a={};e.group&&(a.id=n.group.id),e.groups&&(a.store=jr),e.group&&(a.name=n.group.name+" class"),!S&&e.showDelete&&(a.open=n.showDelete),H.$set(a)},i(e){C||(te(()=>{$&&$.end(1),h||(h=fe(n,Pe,{x:400})),h.start()}),pe(j.$$.fragment,e),pe(H.$$.fragment,e),C=!0)},o(e){h&&h.invalidate(),$=ge(n,Pe,{x:-400}),me(j.$$.fragment,e),me(H.$$.fragment,e),C=!1},d(e){e&&y(n),L&&L.d(),e&&($&&$.end(),y(v)),Se(j,e),e&&y(k),Se(H,e),a(T)}}}function us(e,n,t){let{group:r}=n,s=!1,a=!1;return e.$set=e=>{"group"in e&&t("group",r=e.group)},{group:r,editShowing:s,showDelete:a,click_handler:function(){t("editShowing",s=!0)},click_handler_1:function(){t("showDelete",a=!0)},editgroup_open_binding:function(e){t("editShowing",s=e)},modal_open_binding:function(e){t("editShowing",s=e)},deleteitem_open_binding:function(e){t("showDelete",a=e)}}}class ps extends Ce{constructor(e){super(),Ie(this,e,us,ds,o,["group"])}}function ms(e){var n,t=new ns({props:{errors:e.errors,loading:e.loading}});return t.$on("reset",e.reset),t.$on("submit",e.save),{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function fs(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,re(()=>r=!1)}let o={$$slots:{default:[ms]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new kn({props:o});return J.push(()=>ke(l,"open",i)),{c(){(n=_("button")).innerHTML='<i class="fas fa-plus"></i> Add a group\n\t\t\t',t=I(),l.$$.fragment.c(),A(n,"class","button is-primary"),a=M(n,"click",e.click_handler)},m(e,r){w(e,n,r),w(e,t,r),_e(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||(pe(l.$$.fragment,e),s=!0)},o(e){me(l.$$.fragment,e),s=!1},d(e){e&&(y(n),y(t)),Se(l,e),a()}}}function gs(e,n,t){let r="",s=!1,a=!1;const i=()=>{t("errors",r=""),t("open",a=!1)};return{errors:r,loading:s,open:a,reset:i,save:async({detail:e})=>{const{semesterId:n,name:a}=e;t("loading",s=!0);try{await jr.create(a,n),Ee.add({text:`Added new class '${a} class'`,type:"success"}),i()}catch(e){t("errors",r=e),Ee.add({text:"Could not save changes to group",type:"danger"})}finally{t("loading",s=!1)}},click_handler:function(){const e=a=!0;return t("open",a),e},modal_open_binding:function(e){t("open",a=e)}}}class hs extends Ce{constructor(e){super(),Ie(this,e,gs,fs,o,[])}}function $s(e,n,t){const r=Object.create(e);return r.group=n[t],r}function vs(e){var n,t,r=[],s=new Map,a=e.sortedGroups;const i=e=>e.group.id;for(var o=0;o<a.length;o+=1){let n=$s(e,a,o),t=i(n);s.set(t,r[o]=bs(t,n))}return{c(){for(n=_("ul"),o=0;o<r.length;o+=1)r[o].c();A(n,"class","group-list svelte-v4hmp")},m(e,s){for(w(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=t.sortedGroups;de(),r=ye(r,e,i,1,t,a,s,n,we,bs,null,$s),ue()},i(e){if(!t){for(var n=0;n<a.length;n+=1)pe(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)me(r[o]);t=!1},d(e){for(e&&y(n),o=0;o<r.length;o+=1)r[o].d()}}}function bs(e,n){var t,r,s=new ps({props:{group:n.group}});return{key:e,first:null,c(){t=C(),s.$$.fragment.c(),this.first=t},m(e,n){w(e,t,n),_e(s,e,n),r=!0},p(e,n){var t={};e.sortedGroups&&(t.group=n.group),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&y(t),Se(s,e)}}}function ws(e){var n,t,r,s,a,i,o,l,c,d=e.$groups&&e.$groups.length,u=new hs({}),p=e.$groups&&e.$groups.length&&vs(e);return{c(){n=_("p"),t=D("Showing "),r=D(d),s=D(" groups sorted by semester."),a=I(),i=_("div"),u.$$.fragment.c(),o=I(),p&&p.c(),l=C(),A(n,"class","groups-count svelte-v4hmp"),A(i,"class","details")},m(e,d){w(e,n,d),b(n,t),b(n,r),b(n,s),w(e,a,d),w(e,i,d),_e(u,i,null),w(e,o,d),p&&p.m(e,d),w(e,l,d),c=!0},p(e,n){c&&!e.$groups||d===(d=n.$groups&&n.$groups.length)||N(r,d),n.$groups&&n.$groups.length?p?(p.p(e,n),pe(p,1)):((p=vs(n)).c(),pe(p,1),p.m(l.parentNode,l)):p&&(de(),me(p,1,1,()=>{p=null}),ue())},i(e){c||(pe(u.$$.fragment,e),pe(p),c=!0)},o(e){me(u.$$.fragment,e),me(p),c=!1},d(e){e&&(y(n),y(a),y(i)),Se(u),e&&y(o),p&&p.d(e),e&&y(l)}}}function ys(e,n,t){let r,s;return l(e,jr,e=>{t("$groups",r=e)}),e.$$.update=(e={$groups:1})=>{e.$groups&&t("sortedGroups",s=r.slice().sort((e,n)=>{const t=e.semester.startDate,r=n.semester.startDate;return(t>r)-(t<r)}))},{sortedGroups:s,$groups:r}}class xs extends Ce{constructor(e){super(),Ie(this,e,ys,ws,o,[])}}function ks(e){var n,t=new hn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function _s(n){var t,r=new vt({props:{what:"groups"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function Ss(n){var t,r=new xs({});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function Ds(e){var n,t,r,s,a,i,o,l=[Ss,_s,ks],c=[];function d(e){return e.$groups?0:e.errors?2:1}return s=d(e),a=c[s]=l[s](e),{c(){n=I(),(t=_("h1")).textContent="Groups",r=I(),a.c(),i=C(),document.title="Groups",A(t,"class","title")},m(e,a){w(e,n,a),w(e,t,a),w(e,r,a),c[s].m(e,a),w(e,i,a),o=!0},p(e,n){var t=s;(s=d(n))===t?c[s].p(e,n):(de(),me(c[t],1,1,()=>{c[t]=null}),ue(),(a=c[s])||(a=c[s]=l[s](n)).c(),pe(a,1),a.m(i.parentNode,i))},i(e){o||(pe(a),o=!0)},o(e){me(a),o=!1},d(e){e&&(y(n),y(t),y(r)),c[s].d(e),e&&y(i)}}}function Is(e,n,t){let r;return l(e,jr,e=>{t("$groups",r=e)}),B(()=>{jr.get()}),{errors:void 0,$groups:r}}var Cs=Ms;function Ms(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Ms.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),t=Math.floor(n*this.jitter*e);e=0==(1&Math.floor(10*n))?e-t:e+t}return 0|Math.min(e,this.max)},Ms.prototype.reset=function(){this.attempts=0},Ms.prototype.setMin=function(e){this.ms=e},Ms.prototype.setMax=function(e){this.max=e},Ms.prototype.setJitter=function(e){this.jitter=e};var Ts=Hn(function(e){var n=Object.prototype.hasOwnProperty,t="~";function r(){}function s(e,n,t){this.fn=e,this.context=n,this.once=t||!1}function a(e,n,r,a,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new s(r,a||e,i),l=t?t+n:n;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function i(e,n){0==--e._eventsCount?e._events=new r:delete e._events[n]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(t=!1)),o.prototype.eventNames=function(){var e,r,s=[];if(0===this._eventsCount)return s;for(r in e=this._events)n.call(e,r)&&s.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},o.prototype.listeners=function(e){var n=t?t+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,a=r.length,i=new Array(a);s<a;s++)i[s]=r[s].fn;return i},o.prototype.listenerCount=function(e){var n=t?t+e:e,r=this._events[n];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,n,r,s,a,i){var o=t?t+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,n),!0;case 3:return d.fn.call(d.context,n,r),!0;case 4:return d.fn.call(d.context,n,r,s),!0;case 5:return d.fn.call(d.context,n,r,s,a),!0;case 6:return d.fn.call(d.context,n,r,s,a,i),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var p,m=d.length;for(c=0;c<m;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,n);break;case 3:d[c].fn.call(d[c].context,n,r);break;case 4:d[c].fn.call(d[c].context,n,r,s);break;default:if(!l)for(p=1,l=new Array(u-1);p<u;p++)l[p-1]=arguments[p];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,n,t){return a(this,e,n,t,!1)},o.prototype.once=function(e,n,t){return a(this,e,n,t,!0)},o.prototype.removeListener=function(e,n,r,s){var a=t?t+e:e;if(!this._events[a])return this;if(!n)return i(this,a),this;var o=this._events[a];if(o.fn)o.fn!==n||s&&!o.once||r&&o.context!==r||i(this,a);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==n||s&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[a]=1===c.length?c[0]:c:i(this,a)}return this},o.prototype.removeAllListeners=function(e){var n;return e?(n=t?t+e:e,this._events[n]&&i(this,n)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,e.exports=o});var As=function(e){var n,t=e.Symbol;return"function"==typeof t?t.observable?n=t.observable:(n=t("observable"),t.observable=n):n="@@observable",n}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")());const Ns=3e4;function Es(e){return"string"==typeof e}const Os=new class{constructor(e,n){const{connectionCallback:t,connectionParams:r={},timeout:s=Ns,reconnect:a=!1,reconnectionAttempts:i=1/0,lazy:o=!1,inactivityTimeout:l=0}=n||{};this.wsImpl=WebSocket,this.connectionCallback=t,this.url=e,this.operations={},this.nextOperationId=0,this.wsTimeout=s,this.unsentMessagesQueue=[],this.reconnect=a,this.reconnecting=!1,this.reconnectionAttempts=i,this.lazy=!!o,this.inactivityTimeout=l,this.closedByUser=!1,this.backoff=new Cs({jitter:.5}),this.eventEmitter=new Ts,this.middlewares=[],this.client=null,this.maxConnectTimeGenerator=this.createMaxConnectTimeGenerator(),this.connectionParams=this.getConnectionParams(r),this.lazy||this.connect()}get status(){return null===this.client?this.wsImpl.CLOSED:this.client.readyState}close(e=!0,n=!0){this.clearInactivityTimeout(),null!==this.client&&(this.closedByUser=n,e&&(this.clearCheckConnectionInterval(),this.clearMaxConnectTimeout(),this.clearTryReconnectTimeout(),this.unsubscribeAll(),this.sendMessage(void 0,"connection_terminate",null)),this.client.close(),this.client=null,this.eventEmitter.emit("disconnected"),e||this.tryReconnect())}request(e){const n=this.getObserver.bind(this),t=this.executeOperation.bind(this),r=this.unsubscribe.bind(this);let s;return this.clearInactivityTimeout(),{[As](){return this},subscribe(a,i,o){const l=n(a,i,o);return s=t(e,(e,n)=>{null===e&&null===n?l.complete&&l.complete():e?l.error&&l.error(e[0]):l.next&&l.next(n)}),{unsubscribe:()=>{s&&(r(s),s=null)}}}}}on(e,n,t){const r=this.eventEmitter.on(e,n,t);return()=>{r.off(e,n,t)}}onConnected(e,n){return this.on("connected",e,n)}onConnecting(e,n){return this.on("connecting",e,n)}onDisconnected(e,n){return this.on("disconnected",e,n)}onReconnected(e,n){return this.on("reconnected",e,n)}onReconnecting(e,n){return this.on("reconnecting",e,n)}onError(e,n){return this.on("error",e,n)}unsubscribeAll(){Object.keys(this.operations).forEach(e=>{this.unsubscribe(e)})}applyMiddlewares(e){return new Promise((n,t)=>{((r,s)=>{const a=i=>{if(i)t(i);else if(r.length>0){const n=r.shift();n&&n.applyMiddleware.apply(s,[e,a])}else n(e)};a()})([...this.middlewares],this)})}use(e){return e.map(e=>{if("function"!=typeof e.applyMiddleware)throw new TypeError("Middleware must implement the applyMiddleware function.");this.middlewares.push(e)}),this}getConnectionParams(e){return()=>new Promise((n,t)=>{if("function"==typeof e)try{return n(e.call(null))}catch(e){return t(e)}n(e)})}executeOperation(e,n){null===this.client&&this.connect();const t=this.generateOperationId();return this.operations[t]={options:e,handler:n},this.applyMiddlewares(e).then(e=>{this.checkOperationOptions(e,n),this.operations[t]&&(this.operations[t]={options:e,handler:n},this.sendMessage(t,"start",e))}).catch(e=>{this.unsubscribe(t),n(this.formatErrors(e))}),t}getObserver(e,n,t){return"function"==typeof e?{next:n=>e(n),error:e=>n&&n(e),complete:()=>t&&t()}:e}createMaxConnectTimeGenerator(){const e=this.wsTimeout;return new Cs({min:1e3,max:e,factor:1.2})}clearCheckConnectionInterval(){this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnectionIntervalId=null)}clearMaxConnectTimeout(){this.maxConnectTimeoutId&&(clearTimeout(this.maxConnectTimeoutId),this.maxConnectTimeoutId=null)}clearTryReconnectTimeout(){this.tryReconnectTimeoutId&&(clearTimeout(this.tryReconnectTimeoutId),this.tryReconnectTimeoutId=null)}clearInactivityTimeout(){this.inactivityTimeoutId&&(clearTimeout(this.inactivityTimeoutId),this.inactivityTimeoutId=null)}setInactivityTimeout(){this.inactivityTimeout>0&&0===Object.keys(this.operations).length&&(this.inactivityTimeoutId=setTimeout(()=>{0===Object.keys(this.operations).length&&this.close()},this.inactivityTimeout))}checkOperationOptions(e,n){const{query:t,variables:r,operationName:s}=e;if(!t)throw new Error("Must provide a query.");if(!n)throw new Error("Must provide an handler.");if(!Es(t)||s&&!Es(s)||r&&(null===(a=r)||"object"!=typeof a))throw new Error("Incorrect option types. query must be a string,`operationName` must be a string, and `variables` must be an object.");var a}buildMessage(e,n,t){return{id:e,type:n,payload:t&&t.query?Object.assign({},t,{query:t.query}):t}}formatErrors(e){return Array.isArray(e)?e:e&&e.errors?this.formatErrors(e.errors):e&&e.message?[e]:[{name:"FormatedError",message:"Unknown error",originalError:e}]}sendMessage(e,n,t){this.sendMessageRaw(this.buildMessage(e,n,t))}sendMessageRaw(e){switch(this.status){case this.wsImpl.OPEN:let n=JSON.stringify(e);try{JSON.parse(n)}catch(n){this.eventEmitter.emit("error",new Error(`Message must be JSON-serializable. Got: ${e}`))}this.client.send(n);break;case this.wsImpl.CONNECTING:this.unsentMessagesQueue.push(e);break;default:this.reconnecting||this.eventEmitter.emit("error",new Error("A message was not sent because socket is not connected, is closing or is already closed. Message was: "+JSON.stringify(e)))}}generateOperationId(){return String(++this.nextOperationId)}tryReconnect(){if(!this.reconnect||this.backoff.attempts>=this.reconnectionAttempts)return;this.reconnecting||(Object.keys(this.operations).forEach(e=>{this.unsentMessagesQueue.push(this.buildMessage(e,"start",this.operations[e].options))}),this.reconnecting=!0),this.clearTryReconnectTimeout();const e=this.backoff.duration();this.tryReconnectTimeoutId=setTimeout(()=>{this.connect()},e)}flushUnsentMessagesQueue(){this.unsentMessagesQueue.forEach(e=>{this.sendMessageRaw(e)}),this.unsentMessagesQueue=[]}checkConnection(){this.wasKeepAliveReceived?this.wasKeepAliveReceived=!1:this.reconnecting||this.close(!1,!0)}checkMaxConnectTimeout(){this.clearMaxConnectTimeout(),this.maxConnectTimeoutId=setTimeout(()=>{this.status!==this.wsImpl.OPEN&&(this.reconnecting=!0,this.close(!1,!0))},this.maxConnectTimeGenerator.duration())}connect(){this.client=new WebSocket(this.url,"graphql-ws"),this.checkMaxConnectTimeout(),this.client.addEventListener("open",async()=>{if(this.status===this.wsImpl.OPEN){this.clearMaxConnectTimeout(),this.closedByUser=!1,this.eventEmitter.emit(this.reconnecting?"reconnecting":"connecting");try{const e=await this.connectionParams();this.sendMessage(void 0,"connection_init",e),this.flushUnsentMessagesQueue()}catch(e){this.sendMessage(void 0,"connection_error",e),this.flushUnsentMessagesQueue()}}}),this.client.onclose=()=>{this.closedByUser||this.close(!1,!1)},this.client.addEventListener("error",e=>{this.eventEmitter.emit("error",e)}),this.client.addEventListener("message",({data:e})=>{this.processReceivedData(e)})}processReceivedData(e){let n,t;try{t=(n=JSON.parse(e)).id}catch(n){throw new Error(`Message must be JSON-parseable. Got: ${e}`)}if(!["data","complete","error"].includes(n.type)||this.operations[t])switch(n.type){case"connection_error":this.connectionCallback&&this.connectionCallback(n.payload);break;case"connection_ack":this.eventEmitter.emit(this.reconnecting?"reconnected":"connected"),this.reconnecting=!1,this.backoff.reset(),this.maxConnectTimeGenerator.reset(),this.connectionCallback&&this.connectionCallback();break;case"complete":this.operations[t].handler(null,null),delete this.operations[t];break;case"error":this.operations[t].handler(this.formatErrors(n.payload),null),delete this.operations[t];break;case"data":const e=n.payload.errors?{...n.payload,errors:this.formatErrors(n.payload.errors)}:n.payload;this.operations[t].handler(null,e);break;case"ka":const r=void 0===this.wasKeepAliveReceived;this.wasKeepAliveReceived=!0,r&&this.checkConnection(),this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnection()),this.checkConnectionIntervalId=setInterval(this.checkConnection.bind(this),this.wsTimeout);break;default:throw new Error("Invalid message type!")}else this.unsubscribe(t)}unsubscribe(e){this.operations[e]&&(delete this.operations[e],this.setInactivityTimeout(),this.sendMessage(e,"stop",void 0))}}("wss://oe.openode.io/api",{reconnect:!0,connectionCallback:e=>{e&&console.error(e)}}),Ls=Ae(),Ps=Ae(),Rs=(()=>{const{subscribe:e,set:n,update:t}=Ae();return{subscribe:e,update:t,get:async()=>{const e=function(e){let n;const t=e.subscribe(e=>n=e);return t.unsubscribe?t.unsubscribe():t(),n}(Ps),t=await Ze("\n query getSessions($where: ClassSessionWhereInput){\n  classSessions (where: $where) {\n    id\n    startsAt\n    endsAt\n    stage\n    number\n    group {\n      id\n      name\n    }\n    lesson {\n      id\n    }\n  }\n}",{where:e});n(t.classSessions)},create:async(e,n,t)=>{const r=await Ze("\nmutation newClassSession($groupId: ID!, $lessonId: ID, $input: ClassSessionCreateInput!) {\n  createClassSession(input: $input, groupId: $groupId, lessonId: $lessonId) {\n    id\n    stage\n    startsAt\n    endsAt\n    group {\n      name\n      id\n    }\n  }\n}\n",{input:e,groupId:n,lessonId:t});return Rs.get(),r.createClassSession},remove:async e=>{const n=await Ze("\nmutation deleteClassSession($id: ID!) {\n  deleteClassSession(id: $id) {\n    id\n    stage\n    startsAt\n    endsAt\n  }\n}\n",{id:e});return Rs.get(),n.deleteClassSession},patch:async(e,n,t,r)=>{const s=await Ze("\nmutation updateClassSession($id: ID!, $lessonId: ID, $groupId: ID, $input: ClassSessionUpdateInput) {\n  updateClassSession(id: $id, input: $input, groupId: $groupId, lessonId: $lessonId) {\n    id\n    stage\n    startsAt\n    endsAt\n    group {\n      name\n      id\n    }\n  }\n}",{id:e,input:n,groupId:t,lessonId:r});return Rs.get(),s.updateClassSession}}})(),js=e=>{if(!e)return;const n=new Date,t=new Date(n.getTime()+18e5).toISOString(),r=new Date(n.getTime()+864e5).toISOString();return{now:e.find(e=>e.startsAt<n.toISOString()&&e.endsAt>n.toISOString()),soon:e.filter(e=>e.startsAt>n.toISOString()&&e.startsAt<t),later:e.filter(e=>e.startsAt>t&&e.startsAt<r)}},zs=async()=>{const e=new Date,n=new Date(e.getTime()+864e5);return(await Ze("\nquery todaysSessions($now: DateTime, $latest: DateTime){\n  classSessions(where: {\n    startsAt_lt: $latest,\n    endsAt_gt: $now\n  }) {\n    id\n    startsAt\n    endsAt\n    stage\n    number\n    group {\n      id\n      name\n    }\n  }\n}",{now:e,latest:n})).classSessions},qs=Te(null,e=>{const n=new Date;let t=[];zs().then(r=>{t=r,e({...js(r),updatedAt:n})});const r=Os.request({query:"\nsubscription {\n  classSessions {\n    mutation\n    updatedFields\n    previousValues{\n      id\n      stage\n      startsAt\n      endsAt\n    }\n      node {\n        id\n        stage\n        startsAt\n        endsAt\n        number\n        group {\n          id\n          name\n        }\n      }\n  }\n}"}).subscribe({next(n){n.data&&n.data.classSessions&&zs().then(n=>{t=n,e({...js(n),updatedAt:new Date})})}}),s=setInterval(()=>{const r=new Date,s=new Date(r-36e5);n<s?zs().then(n=>{t=n;const r=new Date;e({...js(t),updatedAt:r})}):e({...js(t),updatedAt:n})},15e3);return()=>{r&&r.unsubscribe(),clearInterval(s)}}),Hs=Te(new Date,e=>{const n=setInterval(()=>{e(new Date)},1e3);return()=>clearInterval(n)});function Fs(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===n?new Date(e.getTime()):"number"==typeof e||"[object Number]"===n?new Date(e):("string"!=typeof e&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Ws(e){if(null===e||!0===e||!1===e)return NaN;var n=Number(e);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}var Ys=6e4;function Bs(e){var n=new Date(e.getTime()),t=n.getTimezoneOffset();n.setSeconds(0,0);var r=n.getTime()%Ys;return t*Ys+r}function Us(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Fs(e);return n.setHours(0,0,0,0),n}var Gs=864e5;function Zs(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var t=Fs(e),r=Fs(n),s=t.getTime()-r.getTime();return s<0?-1:s>0?1:s}function Vs(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var t=Fs(e),r=Fs(n),s=Zs(t,r),a=Math.abs(function(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var t=Fs(e),r=Fs(n);return 12*(t.getFullYear()-r.getFullYear())+(t.getMonth()-r.getMonth())}(t,r));t.setMonth(t.getMonth()-s*a);var i=s*(a-(Zs(t,r)===-s));return 0===i?0:i}function Js(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var t=function(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var t=Fs(e),r=Fs(n);return t.getTime()-r.getTime()}(e,n)/1e3;return t>0?Math.floor(t):Math.ceil(t)}var Xs={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Qs(e){return function(n){var t=n||{},r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var Ks={date:Qs({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Qs({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Qs({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ea={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function na(e){return function(n,t){var r,s=t||{};if("formatting"===(s.context?String(s.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,i=s.width?String(s.width):a;r=e.formattingValues[i]||e.formattingValues[a]}else{var o=e.defaultWidth,l=s.width?String(s.width):e.defaultWidth;r=e.values[l]||e.values[o]}return r[e.argumentCallback?e.argumentCallback(n):n]}}function ta(e){return function(n,t){var r=String(n),s=t||{},a=s.width,i=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],o=r.match(i);if(!o)return null;var l,c=o[0],d=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth];return l="[object Array]"===Object.prototype.toString.call(d)?d.findIndex(function(e){return e.test(r)}):function(e,n){for(var t in e)if(e.hasOwnProperty(t)&&n(e[t]))return t}(d,function(e){return e.test(r)}),l=e.valueCallback?e.valueCallback(l):l,{value:l=s.valueCallback?s.valueCallback(l):l,rest:r.slice(c.length)}}}var ra,sa={formatDistance:function(e,n,t){var r;return t=t||{},r="string"==typeof Xs[e]?Xs[e]:1===n?Xs[e].one:Xs[e].other.replace("{{count}}",n),t.addSuffix?t.comparison>0?"in "+r:r+" ago":r},formatLong:Ks,formatRelative:function(e,n,t,r){return ea[e]},localize:{ordinalNumber:function(e,n){var t=Number(e),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:na({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:na({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:na({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:na({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:na({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(ra={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,n){var t=String(e),r=n||{},s=t.match(ra.matchPattern);if(!s)return null;var a=s[0],i=t.match(ra.parsePattern);if(!i)return null;var o=ra.valueCallback?ra.valueCallback(i[0]):i[0];return{value:o=r.valueCallback?r.valueCallback(o):o,rest:t.slice(a.length)}}),era:ta({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:ta({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:ta({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:ta({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:ta({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function aa(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return function(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var t=Fs(e).getTime(),r=Ws(n);return new Date(t+r)}(e,-Ws(n))}function ia(e,n){for(var t=e<0?"-":"",r=Math.abs(e).toString();r.length<n;)r="0"+r;return t+r}var oa=function(e,n){var t=e.getUTCFullYear(),r=t>0?t:1-t;return ia("yy"===n?r%100:r,n.length)},la=function(e,n){var t=e.getUTCMonth();return"M"===n?String(t+1):ia(t+1,2)},ca=function(e,n){return ia(e.getUTCDate(),n.length)},da=function(e,n){return ia(e.getUTCHours()%12||12,n.length)},ua=function(e,n){return ia(e.getUTCHours(),n.length)},pa=function(e,n){return ia(e.getUTCMinutes(),n.length)},ma=function(e,n){return ia(e.getUTCSeconds(),n.length)},fa=function(e,n){var t=n.length,r=e.getUTCMilliseconds();return ia(Math.floor(r*Math.pow(10,t-3)),n.length)},ga=864e5;function ha(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Fs(e),t=n.getUTCDay(),r=(t<1?7:0)+t-1;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function $a(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Fs(e),t=n.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var s=ha(r),a=new Date(0);a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0);var i=ha(a);return n.getTime()>=s.getTime()?t+1:n.getTime()>=i.getTime()?t:t-1}var va=6048e5;function ba(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Fs(e),t=ha(n).getTime()-function(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=$a(e),t=new Date(0);return t.setUTCFullYear(n,0,4),t.setUTCHours(0,0,0,0),ha(t)}(n).getTime();return Math.round(t/va)+1}function wa(e,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=n||{},r=t.locale,s=r&&r.options&&r.options.weekStartsOn,a=null==s?0:Ws(s),i=null==t.weekStartsOn?a:Ws(t.weekStartsOn);if(!(i>=0&&i<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var o=Fs(e),l=o.getUTCDay(),c=(l<i?7:0)+l-i;return o.setUTCDate(o.getUTCDate()-c),o.setUTCHours(0,0,0,0),o}function ya(e,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Fs(e,n),r=t.getUTCFullYear(),s=n||{},a=s.locale,i=a&&a.options&&a.options.firstWeekContainsDate,o=null==i?1:Ws(i),l=null==s.firstWeekContainsDate?o:Ws(s.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,l),c.setUTCHours(0,0,0,0);var d=wa(c,n),u=new Date(0);u.setUTCFullYear(r,0,l),u.setUTCHours(0,0,0,0);var p=wa(u,n);return t.getTime()>=d.getTime()?r+1:t.getTime()>=p.getTime()?r:r-1}var xa=6048e5;function ka(e,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Fs(e),r=wa(t,n).getTime()-function(e,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=n||{},r=t.locale,s=r&&r.options&&r.options.firstWeekContainsDate,a=null==s?1:Ws(s),i=null==t.firstWeekContainsDate?a:Ws(t.firstWeekContainsDate),o=ya(e,n),l=new Date(0);return l.setUTCFullYear(o,0,i),l.setUTCHours(0,0,0,0),wa(l,n)}(t,n).getTime();return Math.round(r/xa)+1}var _a="midnight",Sa="noon",Da="morning",Ia="afternoon",Ca="evening",Ma="night",Ta={G:function(e,n,t){var r=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(e,n,t){if("yo"===n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return oa(e,n)},Y:function(e,n,t,r){var s=ya(e,r),a=s>0?s:1-s;return"YY"===n?ia(a%100,2):"Yo"===n?t.ordinalNumber(a,{unit:"year"}):ia(a,n.length)},R:function(e,n){return ia($a(e),n.length)},u:function(e,n){return ia(e.getUTCFullYear(),n.length)},Q:function(e,n,t){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return ia(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,t){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return ia(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,t){var r=e.getUTCMonth();switch(n){case"M":case"MM":return la(e,n);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,t){var r=e.getUTCMonth();switch(n){case"L":return String(r+1);case"LL":return ia(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,t,r){var s=ka(e,r);return"wo"===n?t.ordinalNumber(s,{unit:"week"}):ia(s,n.length)},I:function(e,n,t){var r=ba(e);return"Io"===n?t.ordinalNumber(r,{unit:"week"}):ia(r,n.length)},d:function(e,n,t){return"do"===n?t.ordinalNumber(e.getUTCDate(),{unit:"date"}):ca(e,n)},D:function(e,n,t){var r=function(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Fs(e),t=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var r=t-n.getTime();return Math.floor(r/ga)+1}(e);return"Do"===n?t.ordinalNumber(r,{unit:"dayOfYear"}):ia(r,n.length)},E:function(e,n,t){var r=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,t,r){var s=e.getUTCDay(),a=(s-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return ia(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,t,r){var s=e.getUTCDay(),a=(s-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return ia(a,n.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,t){var r=e.getUTCDay(),s=0===r?7:r;switch(n){case"i":return String(s);case"ii":return ia(s,n.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,n,t){var r,s=e.getUTCHours();switch(r=12===s?Sa:0===s?_a:s/12>=1?"pm":"am",n){case"b":case"bb":case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,n,t){var r,s=e.getUTCHours();switch(r=s>=17?Ca:s>=12?Ia:s>=4?Da:Ma,n){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,n,t){if("ho"===n){var r=e.getUTCHours()%12;return 0===r&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return da(e,n)},H:function(e,n,t){return"Ho"===n?t.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ua(e,n)},K:function(e,n,t){var r=e.getUTCHours()%12;return"Ko"===n?t.ordinalNumber(r,{unit:"hour"}):ia(r,n.length)},k:function(e,n,t){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===n?t.ordinalNumber(r,{unit:"hour"}):ia(r,n.length)},m:function(e,n,t){return"mo"===n?t.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):pa(e,n)},s:function(e,n,t){return"so"===n?t.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):ma(e,n)},S:function(e,n){return fa(e,n)},X:function(e,n,t,r){var s=(r._originalDate||e).getTimezoneOffset();if(0===s)return"Z";switch(n){case"X":return Na(s);case"XXXX":case"XX":return Ea(s);case"XXXXX":case"XXX":default:return Ea(s,":")}},x:function(e,n,t,r){var s=(r._originalDate||e).getTimezoneOffset();switch(n){case"x":return Na(s);case"xxxx":case"xx":return Ea(s);case"xxxxx":case"xxx":default:return Ea(s,":")}},O:function(e,n,t,r){var s=(r._originalDate||e).getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Aa(s,":");case"OOOO":default:return"GMT"+Ea(s,":")}},z:function(e,n,t,r){var s=(r._originalDate||e).getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Aa(s,":");case"zzzz":default:return"GMT"+Ea(s,":")}},t:function(e,n,t,r){var s=r._originalDate||e;return ia(Math.floor(s.getTime()/1e3),n.length)},T:function(e,n,t,r){return ia((r._originalDate||e).getTime(),n.length)}};function Aa(e,n){var t=e>0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),a=r%60;if(0===a)return t+String(s);var i=n||"";return t+String(s)+i+ia(a,2)}function Na(e,n){return e%60==0?(e>0?"-":"+")+ia(Math.abs(e)/60,2):Ea(e,n)}function Ea(e,n){var t=n||"",r=e>0?"-":"+",s=Math.abs(e);return r+ia(Math.floor(s/60),2)+t+ia(s%60,2)}function Oa(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}}function La(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}}var Pa={p:La,P:function(e,n){var t,r=e.match(/(P+)(p+)?/),s=r[1],a=r[2];if(!a)return Oa(e,n);switch(s){case"P":t=n.dateTime({width:"short"});break;case"PP":t=n.dateTime({width:"medium"});break;case"PPP":t=n.dateTime({width:"long"});break;case"PPPP":default:t=n.dateTime({width:"full"})}return t.replace("{{date}}",Oa(s,n)).replace("{{time}}",La(a,n))}},Ra=["D","DD"],ja=["YY","YYYY"];function za(e){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` for formatting years; see: https://git.io/fxCyr");if("YY"===e)throw new RangeError("Use `yy` instead of `YY` for formatting years; see: https://git.io/fxCyr");if("D"===e)throw new RangeError("Use `d` instead of `D` for formatting days of the month; see: https://git.io/fxCyr");if("DD"===e)throw new RangeError("Use `dd` instead of `DD` for formatting days of the month; see: https://git.io/fxCyr")}var qa=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ha=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Fa=/^'(.*?)'?$/,Wa=/''/g,Ya=/[a-zA-Z]/;function Ba(e,n,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=String(n),s=t||{},a=s.locale||sa,i=a.options&&a.options.firstWeekContainsDate,o=null==i?1:Ws(i),l=null==s.firstWeekContainsDate?o:Ws(s.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=a.options&&a.options.weekStartsOn,d=null==c?0:Ws(c),u=null==s.weekStartsOn?d:Ws(s.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!a.localize)throw new RangeError("locale must contain localize property");if(!a.formatLong)throw new RangeError("locale must contain formatLong property");var p=Fs(e);if(!function(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Fs(e);return!isNaN(n)}(p))throw new RangeError("Invalid time value");var m=aa(p,Bs(p)),f={firstWeekContainsDate:l,weekStartsOn:u,locale:a,_originalDate:p};return r.match(Ha).map(function(e){var n=e[0];return"p"===n||"P"===n?(0,Pa[n])(e,a.formatLong,f):e}).join("").match(qa).map(function(e){if("''"===e)return"'";var n=e[0];if("'"===n)return e.match(Fa)[1].replace(Wa,"'");var t,r=Ta[n];if(r)return s.useAdditionalWeekYearTokens||(t=e,-1===ja.indexOf(t))||za(e),!s.useAdditionalDayOfYearTokens&&function(e){return-1!==Ra.indexOf(e)}(e)&&za(e),r(m,e,a.localize,f);if(n.match(Ya))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");return e}).join("")}function Ua(e){return function(e,n){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in n=n||{})n.hasOwnProperty(t)&&(e[t]=n[t]);return e}({},e)}var Ga=1440,Za=2520,Va=43200,Ja=86400;function Xa(e,n,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=t||{},s=r.locale||sa;if(!s.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=Zs(e,n);if(isNaN(a))throw new RangeError("Invalid time value");var i,o,l=Ua(r);l.addSuffix=Boolean(r.addSuffix),l.comparison=a,a>0?(i=Fs(n),o=Fs(e)):(i=Fs(e),o=Fs(n));var c,d=Js(o,i),u=(Bs(o)-Bs(i))/1e3,p=Math.round((d-u)/60);if(p<2)return r.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,l):d<10?s.formatDistance("lessThanXSeconds",10,l):d<20?s.formatDistance("lessThanXSeconds",20,l):d<40?s.formatDistance("halfAMinute",null,l):d<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):0===p?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",p,l);if(p<45)return s.formatDistance("xMinutes",p,l);if(p<90)return s.formatDistance("aboutXHours",1,l);if(p<Ga){var m=Math.round(p/60);return s.formatDistance("aboutXHours",m,l)}if(p<Za)return s.formatDistance("xDays",1,l);if(p<Va){var f=Math.round(p/Ga);return s.formatDistance("xDays",f,l)}if(p<Ja)return c=Math.round(p/Va),s.formatDistance("aboutXMonths",c,l);if((c=Vs(o,i))<12){var g=Math.round(p/Va);return s.formatDistance("xMonths",g,l)}var h=c%12,$=Math.floor(c/12);return h<3?s.formatDistance("aboutXYears",$,l):h<9?s.formatDistance("overXYears",$,l):s.formatDistance("almostXYears",$+1,l)}var Qa=1440,Ka=43200,ei=525600;function ni(e,n,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Fs(e),s=Fs(n),a=t||{},i=a.locale||sa;if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");if(!i.formatRelative)throw new RangeError("locale must contain formatRelative property");var o,l=function(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var t=Us(e),r=Us(n),s=t.getTime()-Bs(t),a=r.getTime()-Bs(r);return Math.round((s-a)/Gs)}(r,s);if(isNaN(l))throw new RangeError("Invalid time value");o=l<-6?"other":l<-1?"lastWeek":l<0?"yesterday":l<1?"today":l<2?"tomorrow":l<7?"nextWeek":"other";var c=aa(r,Bs(r)),d=aa(s,Bs(s));return Ba(r,i.formatRelative(o,c,d,a),a)}function ti(e){var n,t,r,s,a,i,o=e.dateString(e.session.startsAt),l=e.session.group.name;return{c(){n=_("span"),t=D("the session which takes place "),r=D(o),s=D(" with "),a=D(l),i=D(" class?")},m(e,o){w(e,n,o),b(n,t),b(n,r),b(n,s),b(n,a),b(n,i)},p(e,n){e.session&&o!==(o=n.dateString(n.session.startsAt))&&N(r,o),e.session&&l!==(l=n.session.group.name)&&N(a,l)},d(e){e&&y(n)}}}function ri(e){var n,t;function r(t){e.confirmdelete_open_binding.call(null,t),n=!0,re(()=>n=!1)}let s={name:"session",errors:e.errors,loading:e.loading,$$slots:{default:[ti]},$$scope:{ctx:e}};void 0!==e.open&&(s.open=e.open);var a=new bn({props:s});return J.push(()=>ke(a,"open",r)),a.$on("delete",e.handleDelete),{c(){a.$$.fragment.c()},m(e,n){_e(a,e,n),t=!0},p(e,t){var r={};e.errors&&(r.errors=t.errors),e.loading&&(r.loading=t.loading),(e.$$scope||e.session)&&(r.$$scope={changed:e,ctx:t}),!n&&e.open&&(r.open=t.open),a.$set(r)},i(e){t||(pe(a.$$.fragment,e),t=!0)},o(e){me(a.$$.fragment,e),t=!1},d(e){Se(a,e)}}}function si(e,n,t){let{open:r=!1,session:s={}}=n,a=!1,i="";return e.$set=e=>{"open"in e&&t("open",r=e.open),"session"in e&&t("session",s=e.session)},{open:r,session:s,loading:a,errors:i,handleDelete:async()=>{t("loading",a=!0);try{await Rs.remove(s.id),t("open",r=!1),Ee.add({text:"Session deleted",type:"success"})}catch(e){t("errors",i=e),Ee.add({text:"Could not delete session'",type:"danger"})}finally{t("loading",a=!1)}},dateString:e=>ni(new Date(e),new Date),confirmdelete_open_binding:function(e){t("open",r=e)}}}class ai extends Ce{constructor(e){super(),Ie(this,e,si,ri,o,["open","session"])}}function ii(e,n,t){const r=Object.create(e);return r.id=n[t].id,r.name=n[t].name,r}function oi(n){var t;return{c(){(t=_("option")).textContent="Loading semesters...",t.__value="",t.value=t.__value},m(e,n){w(e,t,n)},p:e,d(e){e&&y(t)}}}function li(e){var n,t=[],r=new Map,s=e.$semesters;const a=e=>e.id;for(var i=0;i<s.length;i+=1){let n=ii(e,s,i),o=a(n);r.set(o,t[i]=ci(o,n))}return{c(){for(i=0;i<t.length;i+=1)t[i].c();n=C()},m(e,r){for(i=0;i<t.length;i+=1)t[i].m(e,r);w(e,n,r)},p(e,s){const i=s.$semesters;t=ye(t,e,a,1,s,i,r,n.parentNode,be,ci,n,ii)},d(e){for(i=0;i<t.length;i+=1)t[i].d(e);e&&y(n)}}}function ci(e,n){var t,r,s,a=n.name;return{key:e,first:null,c(){t=_("option"),r=D(a),t.__value=s=n.id,t.value=t.__value,this.first=t},m(e,n){w(e,t,n),b(t,r)},p(e,n){e.$semesters&&a!==(a=n.name)&&N(r,a),e.$semesters&&s!==(s=n.id)&&(t.__value=s),t.value=t.__value},d(e){e&&y(t)}}}function di(n){var t,r,s,a;function i(e){return e.$semesters?li:oi}var o=i(n),l=o(n);return{c(){t=_("div"),r=_("select"),l.c(),A(t,"class","select svelte-t5dn19"),a=M(r,"change",n.handleChange)},m(e,a){w(e,t,a),b(t,r),l.m(r,null),n.select_binding(r),s=n.$semester&&n.$semester.id;for(var i=0;i<r.options.length;i+=1){var o=r.options[i];if(o.__value===s){o.selected=!0;break}}},p(e,n){if(o===(o=i(n))&&l?l.p(e,n):(l.d(1),(l=o(n))&&(l.c(),l.m(r,null))),e.$semester&&s!==(s=n.$semester&&n.$semester.id))for(var t=0;t<r.options.length;t+=1){var a=r.options[t];if(a.__value===s){a.selected=!0;break}}},i:e,o:e,d(e){e&&y(t),l.d(),n.select_binding(null),a()}}}function ui(e,n,t){let r,s,a;l(e,Ls,e=>{t("$semester",r=e)}),l(e,pn,e=>{t("$semesters",s=e)}),B(async()=>{if(await pn.get(),!r){const e=(new Date).toISOString(),n=s.find(n=>n.startDate<e&&n.endDate>e);n&&Ls.set(n)}});return{semesterSelect:a,handleChange:()=>{const e=s.find(e=>e.id===a.value);Ls.set(e)},$semester:r,$semesters:s,select_binding:function(e){J[e?"unshift":"push"](()=>{t("semesterSelect",a=e)})}}}class pi extends Ce{constructor(e){super(),Ie(this,e,ui,di,o,[])}}const mi="\n  fragment LessonFields on Lesson {\n    id\n    name\n    summaryEN\n    summaryZH\n    homeworkEN\n    homeworkZH\n    tags {\n      id\n      name\n    }\n    words {\n      id\n      english\n      chinese\n    }\n    materials {\n        id\n        title\n        type\n      }\n  }",fi=`\n  query Lesson($id: ID!) {\n    lesson(id: $id){\n      ...LessonFields\n    }\n  }\n  ${mi}`,gi=`\n  mutation CreateLesson($input: LessonCreateInput!){\n    createLesson(input: $input) {\n      ...LessonFields\n    }\n  }\n  ${mi}`,hi=`\n  mutation UpdateLesson($input: LessonUpdateInput!, $id: ID!){\n    updateLesson(input: $input, id: $id) {\n      ...LessonFields\n    }\n  }\n  ${mi}`,$i=(()=>{const{subscribe:e,set:n,update:t}=Ae();return{subscribe:e,get:async(e={})=>{const{orderBy:t,where:r}=e,s=await Ze("\n  query ($orderBy: LessonOrderByInput, $where: LessonWhereInput) {\n    lessons (orderBy: $orderBy, where: $where) {\n      id\n      name\n      tags {\n        id\n        name\n      }\n    }\n  }",{orderBy:t,where:r});n(s.lessons)},remove:async e=>{await Ze("\n  mutation DeleteLesson($id: ID!){\n    deleteLesson(id: $id) {\n      id\n    }\n  }",{id:e}),t(n=>n&&n.filter(n=>n.id!==e))},create:async e=>{const n=await Ze(gi,{input:e});t(e=>e?[...e,n.createLesson]:[n.createLesson])},patch:async({input:e,id:n})=>{const r=await Ze(hi,{id:n,input:e});t(e=>e?e.map(e=>e.id!==n?e:r.updateLesson):[r.updateLesson]),vi.update(e=>e&&e.id===n?r.updateLesson:e)}}})(),vi=(()=>{const{subscribe:e,set:n,update:t}=Ae();return{subscribe:e,update:t,patch:$i.patch,get:async e=>{const t=await Ze(fi,{id:e});n(t.lesson)}}})();function bi(e,n,t){const r=Object.create(e);return r.tag=n[t],r}function wi(e){var n,t,r,s,i,o,l,c,d=[],u=new Map,p=e.tags;const m=e=>e.tag.id;for(var f=0;f<p.length;f+=1){let n=bi(e,p,f),t=m(n);u.set(t,d[f]=yi(t,n))}return{c(){for(n=_("div"),t=_("div"),r=_("div"),s=_("select"),(i=_("option")).textContent="No tag filter",f=0;f<d.length;f+=1)d[f].c();o=I(),(l=_("div")).innerHTML='<i class="fas fa-tag"></i>',i.__value="",i.value=i.__value,void 0===e.tagFilter&&te(()=>e.select_change_handler.call(s)),A(r,"class","select"),A(l,"class","icon is-small is-left"),A(t,"class","control has-icons-left"),A(n,"class","field svelte-1038q9s"),c=[M(s,"change",e.select_change_handler),M(s,"change",e.getItems)]},m(a,c){for(w(a,n,c),b(n,t),b(t,r),b(r,s),b(s,i),f=0;f<d.length;f+=1)d[f].m(s,null);O(s,e.tagFilter),b(t,o),b(t,l)},p(e,n){const t=n.tags;d=ye(d,e,m,1,n,t,u,s,be,yi,null,bi),e.tagFilter&&O(s,n.tagFilter)},d(e){for(e&&y(n),f=0;f<d.length;f+=1)d[f].d();a(c)}}}function yi(e,n){var t,r,s,a=n.tag.name;return{key:e,first:null,c(){t=_("option"),r=D(a),t.__value=s=n.tag.id,t.value=t.__value,this.first=t},m(e,n){w(e,t,n),b(t,r)},p(e,n){e.tags&&a!==(a=n.tag.name)&&N(r,a),e.tags&&s!==(s=n.tag.id)&&(t.__value=s),t.value=t.__value},d(e){e&&y(t)}}}function xi(n){var t,r,s,i,o,l,c,d,u=n.tags&&wi(n);return{c(){t=_("section"),r=_("div"),s=_("div"),i=_("input"),o=I(),(l=_("span")).innerHTML='<i class="fas fa-search"></i>',c=I(),u&&u.c(),A(i,"class","input"),A(i,"type","text"),A(i,"placeholder","Search"),A(l,"class","icon is-small is-left"),A(s,"class","control search has-icons-left"),P(s,"is-loading",n.loading),A(r,"class","field svelte-1038q9s"),A(t,"class","filters svelte-1038q9s"),d=[M(i,"input",n.input_input_handler),M(i,"input",n.getItems)]},m(e,a){w(e,t,a),b(t,r),b(r,s),b(s,i),i.value=n.searchString,b(s,o),b(s,l),b(t,c),u&&u.m(t,null)},p(e,n){e.searchString&&i.value!==n.searchString&&(i.value=n.searchString),e.loading&&P(s,"is-loading",n.loading),n.tags?u?u.p(e,n):((u=wi(n)).c(),u.m(t,null)):u&&(u.d(1),u=null)},i:e,o:e,d(e){e&&y(t),u&&u.d(),a(d)}}}function ki(e,n,t){let r,s="",a=!1,i="",{searchParams:o="name",store:c}=n;l(e,c,e=>{t("$store",r=e)});let d;return e.$set=e=>{"searchParams"in e&&t("searchParams",o=e.searchParams),"store"in e&&t("store",c=e.store)},e.$$.update=(e={$store:1})=>{e.$store&&t("tags",d=r&&[...new Set(r.reduce((e,n)=>[...e,...n.tags],[]))])},{searchString:s,loading:a,tagFilter:i,searchParams:o,store:c,getItems:async()=>{const e={};t("loading",a=!0),s&&(e.OR=[],"string"==typeof o&&t("searchParams",o=[o]),o.forEach(n=>{const t={};t[n+"_contains"]=s,e.OR.push(t)})),i&&(e.tags_some={id:i});try{await c.get({where:e})}catch(e){console.error(e)}finally{t("loading",a=!1)}},tags:d,input_input_handler:function(){s=this.value,t("searchString",s)},select_change_handler:function(){i=L(this),t("tagFilter",i),t("tags",d),t("$store",r)}}}class _i extends Ce{constructor(e){super(),Ie(this,e,ki,xi,o,["searchParams","store"])}}function Si(e,n,t){const r=Object.create(e);return r.lesson=n[t],r}function Di(n){var t;return{c(){(t=_("option")).textContent="Loading lessons...",t.__value="",t.value=t.__value},m(e,n){w(e,t,n)},p:e,d(e){e&&y(t)}}}function Ii(e){var n,t,r,s,a=e.$lessons.length,i=[],o=new Map,l=e.$lessons;const c=e=>e.lesson.id;for(var d=0;d<l.length;d+=1){let n=Si(e,l,d),t=c(n);o.set(t,i[d]=Ci(t,n))}return{c(){for(n=_("option"),t=D(a),r=D(" matching lessons"),d=0;d<i.length;d+=1)i[d].c();s=C(),n.__value="",n.value=n.__value},m(e,a){for(w(e,n,a),b(n,t),b(n,r),d=0;d<i.length;d+=1)i[d].m(e,a);w(e,s,a)},p(e,n){e.$lessons&&a!==(a=n.$lessons.length)&&N(t,a);const r=n.$lessons;i=ye(i,e,c,1,n,r,o,s.parentNode,be,Ci,s,Si)},d(e){for(e&&y(n),d=0;d<i.length;d+=1)i[d].d(e);e&&y(s)}}}function Ci(e,n){var t,r,s,a,i=n.lesson.name;return{key:e,first:null,c(){t=_("option"),r=D(i),t.__value=s=n.lesson.id,t.value=t.__value,t.selected=a=n.lesson.id===n.lessonId,this.first=t},m(e,n){w(e,t,n),b(t,r)},p(e,n){e.$lessons&&i!==(i=n.lesson.name)&&N(r,i),e.$lessons&&s!==(s=n.lesson.id)&&(t.__value=s),t.value=t.__value,(e.$lessons||e.lessonId)&&a!==(a=n.lesson.id===n.lessonId)&&(t.selected=a)},d(e){e&&y(t)}}}function Mi(e){var n,t,r,s,a,i,o=new _i({props:{store:$i}});function l(e){return e.$lessons?Ii:Di}var c=l(e),d=c(e);return{c(){n=_("div"),o.$$.fragment.c(),t=I(),r=_("div"),s=_("select"),d.c(),void 0===e.lessonId&&te(()=>e.select_change_handler.call(s)),A(r,"class","select"),A(n,"class","lesson-select svelte-610gz2"),i=M(s,"change",e.select_change_handler)},m(i,l){w(i,n,l),_e(o,n,null),b(n,t),b(n,r),b(r,s),d.m(s,null),O(s,e.lessonId),a=!0},p(e,n){var t={};e.lessons&&(t.store=$i),o.$set(t),c===(c=l(n))&&d?d.p(e,n):(d.d(1),(d=c(n))&&(d.c(),d.m(s,null))),e.lessonId&&O(s,n.lessonId)},i(e){a||(pe(o.$$.fragment,e),a=!0)},o(e){me(o.$$.fragment,e),a=!1},d(e){e&&y(n),Se(o),d.d(),i()}}}function Ti(e,n,t){let r;l(e,$i,e=>{t("$lessons",r=e)});let{lessonId:s=""}=n;return B(async()=>{await $i.get()}),e.$set=e=>{"lessonId"in e&&t("lessonId",s=e.lessonId)},{lessonId:s,$lessons:r,select_change_handler:function(){s=L(this),t("lessonId",s)}}}class Ai extends Ce{constructor(e){super(),Ie(this,e,Ti,Mi,o,["lessonId"])}}function Ni(e){var n;return{c(){n=D("Add")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function Ei(e){var n;return{c(){n=D("Edit")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function Oi(e){var n,t;function r(t){e.groupselect_groupId_binding.call(null,t),n=!0,re(()=>n=!1)}let s={groups:e.$semester.groups,required:!0};void 0!==e.groupId&&(s.groupId=e.groupId);var a=new Lt({props:s});return J.push(()=>ke(a,"groupId",r)),{c(){a.$$.fragment.c()},m(e,n){_e(a,e,n),t=!0},p(e,t){var r={};e.$semester&&(r.groups=t.$semester.groups),!n&&e.groupId&&(r.groupId=t.groupId),a.$set(r)},i(e){t||(pe(a.$$.fragment,e),t=!0)},o(e){me(a.$$.fragment,e),t=!1},d(e){Se(a,e)}}}function Li(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k,S,C,N,E;function O(e){return e.id?Ei:Ni}var L=O(e),P=L(e),R=new hn({props:{errors:e.errors}});function j(n){e.input0_value_binding.call(null,n),o=!0,re(()=>o=!1)}let z={label:"Start time",type:"datetime-local",required:!0};void 0!==e.startsAt&&(z.value=e.startsAt);var q=new qn({props:z});function H(n){e.input1_value_binding.call(null,n),c=!0,re(()=>c=!1)}J.push(()=>ke(q,"value",j));let F={label:"End time",type:"datetime-local",required:!0};void 0!==e.endsAt&&(F.value=e.endsAt);var W=new qn({props:F});J.push(()=>ke(W,"value",H));var Y=new pi({}),B=e.$semester&&Oi(e);function U(n){e.lessonselect_lessonId_binding.call(null,n),$=!0,re(()=>$=!1)}let G={};void 0!==e.lessonId&&(G.lessonId=e.lessonId);var Z=new Ai({props:G});return J.push(()=>ke(Z,"lessonId",U)),{c(){n=_("h2"),P.c(),t=D(" a class session"),r=I(),R.$$.fragment.c(),s=I(),i=_("form"),q.$$.fragment.c(),l=I(),W.$$.fragment.c(),d=I(),(u=_("label")).textContent="Semester & Group",p=I(),Y.$$.fragment.c(),m=I(),B&&B.c(),f=I(),(g=_("label")).textContent="Add lesson",h=I(),Z.$$.fragment.c(),v=I(),x=_("div"),(k=_("button")).textContent="Save",S=I(),C=_("input"),A(n,"class","title"),A(u,"class","label"),A(g,"class","label"),A(k,"class","button is-primary"),A(k,"type","submit"),A(C,"class","button"),A(C,"type","reset"),C.value="Cancel",A(x,"class","buttons svelte-jsaq7t"),i.noValidate=!0,E=[M(i,"submit",T(e.handleSubmit)),M(i,"reset",e.reset_handler)]},m(a,o){w(a,n,o),P.m(n,null),b(n,t),w(a,r,o),_e(R,a,o),w(a,s,o),w(a,i,o),_e(q,i,null),b(i,l),_e(W,i,null),b(i,d),b(i,u),b(i,p),_e(Y,i,null),b(i,m),B&&B.m(i,null),b(i,f),b(i,g),b(i,h),_e(Z,i,null),b(i,v),b(i,x),b(x,k),e.button_binding(k),b(x,S),b(x,C),e.form_1_binding(i),N=!0},p(e,r){L!==(L=O(r))&&(P.d(1),(P=L(r))&&(P.c(),P.m(n,t)));var s={};e.errors&&(s.errors=r.errors),R.$set(s);var a={};!o&&e.startsAt&&(a.value=r.startsAt),q.$set(a);var l={};!c&&e.endsAt&&(l.value=r.endsAt),W.$set(l),r.$semester?B?(B.p(e,r),pe(B,1)):((B=Oi(r)).c(),pe(B,1),B.m(i,f)):B&&(de(),me(B,1,1,()=>{B=null}),ue());var d={};!$&&e.lessonId&&(d.lessonId=r.lessonId),Z.$set(d)},i(e){N||(pe(R.$$.fragment,e),pe(q.$$.fragment,e),pe(W.$$.fragment,e),pe(Y.$$.fragment,e),pe(B),pe(Z.$$.fragment,e),N=!0)},o(e){me(R.$$.fragment,e),me(q.$$.fragment,e),me(W.$$.fragment,e),me(Y.$$.fragment,e),me(B),me(Z.$$.fragment,e),N=!1},d(t){t&&y(n),P.d(),t&&y(r),Se(R,t),t&&(y(s),y(i)),Se(q),Se(W),Se(Y),B&&B.d(),Se(Z),e.button_binding(null),e.form_1_binding(null),a(E)}}}function Pi(e,n,t){let r;l(e,Ls,e=>{t("$semester",r=e)});const s=G(),a=new Date;a.setHours(19),a.setMinutes(0);const i=new Date;i.setHours(20),i.setMinutes(30);let o,c,{errors:d,loading:u=!1}=n,{id:p="",groupId:m="",startsAt:f=Ba(a,"yyyy-MM-dd'T'HH:mm"),endsAt:g=Ba(i,"yyyy-MM-dd'T'HH:mm"),lessonId:h=""}=n;return e.$set=e=>{"errors"in e&&t("errors",d=e.errors),"loading"in e&&t("loading",u=e.loading),"id"in e&&t("id",p=e.id),"groupId"in e&&t("groupId",m=e.groupId),"startsAt"in e&&t("startsAt",f=e.startsAt),"endsAt"in e&&t("endsAt",g=e.endsAt),"lessonId"in e&&t("lessonId",h=e.lessonId)},{errors:d,loading:u,form:o,saveButton:c,id:p,groupId:m,startsAt:f,endsAt:g,lessonId:h,handleSubmit:()=>{o.checkValidity()?s("submit",{id:p,groupId:m,startsAt:f,endsAt:g,lessonId:h}):Ee.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){Z(e,n)},$semester:r,input0_value_binding:function(e){t("startsAt",f=e)},input1_value_binding:function(e){t("endsAt",g=e)},groupselect_groupId_binding:function(e){t("groupId",m=e)},lessonselect_lessonId_binding:function(e){t("lessonId",h=e)},button_binding:function(e){J[e?"unshift":"push"](()=>{t("saveButton",c=e)})},form_1_binding:function(e){J[e?"unshift":"push"](()=>{t("form",o=e)})}}}class Ri extends Ce{constructor(e){super(),Ie(this,e,Pi,Li,o,["errors","loading","id","groupId","startsAt","endsAt","lessonId"])}}function ji(e){var n,t=new Ri({props:{errors:e.errors,groupId:e.session.group.id,startsAt:e.startsAtLocal,endsAt:e.endsAtLocal,id:e.session.id,lessonId:e.lessonId,loading:e.loading}});return t.$on("submit",e.save),t.$on("reset",e.reset),{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),e.session&&(r.groupId=n.session.group.id),e.startsAtLocal&&(r.startsAt=n.startsAtLocal),e.endsAtLocal&&(r.endsAt=n.endsAtLocal),e.session&&(r.id=n.session.id),e.lessonId&&(r.lessonId=n.lessonId),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function zi(e,n,t){let r="",s=!1,{open:a=!1,session:i={}}=n;const o=()=>{t("errors",r=""),t("open",a=!1)};let l,c,d;return e.$set=e=>{"open"in e&&t("open",a=e.open),"session"in e&&t("session",i=e.session)},e.$$.update=(e={session:1})=>{e.session&&t("startsAtLocal",l=Ba(new Date(i.startsAt),"yyyy-MM-dd'T'HH:mm")),e.session&&t("endsAtLocal",c=Ba(new Date(i.endsAt),"yyyy-MM-dd'T'HH:mm")),e.session&&t("lessonId",d=i.lesson?i.lesson.id:null)},{errors:r,loading:s,open:a,session:i,reset:o,save:async({detail:e})=>{const{id:n,groupId:a,lessonId:i,...l}=e;l.startsAt=new Date(l.startsAt).toISOString(),l.endsAt=new Date(l.endsAt).toISOString(),t("loading",s=!0);try{const e=await Rs.patch(n,l,a,i),c=ni(new Date(l.startsAt),new Date,{addSuffix:!0});Ee.add({text:`Updated session to ${c} with ${e.group.name} class`,type:"success"}),o()}catch(e){t("errors",r=e),Ee.add({text:"Couldn't save changes to session",type:"danger"})}finally{t("loading",s=!1)}},startsAtLocal:l,endsAtLocal:c,lessonId:d}}class qi extends Ce{constructor(e){super(),Ie(this,e,zi,ji,o,["open","session"])}}function Hi(e){var n,t,r,s,i,o,l;function c(e){return e.isCurrentOrPast(e.session.startsAt)?Wi:Fi}var d=c(e),u=d(e);return{c(){n=_("li"),u.c(),t=I(),r=_("div"),(s=_("button")).innerHTML='<i class="fas fa-edit"></i>',i=I(),(o=_("button")).innerHTML='<i class="fas fa-minus"></i>',A(s,"class","button is-small"),A(o,"class","button is-small"),A(r,"class","buttons svelte-ik776v"),A(n,"class","svelte-ik776v"),l=[M(s,"click",e.click_handler_2),M(o,"click",e.click_handler_3)]},m(e,a){w(e,n,a),u.m(n,null),b(n,t),b(n,r),b(r,s),b(r,i),b(r,o)},p(e,r){d===(d=c(r))&&u?u.p(e,r):(u.d(1),(u=d(r))&&(u.c(),u.m(n,t)))},d(e){e&&y(n),u.d(),a(l)}}}function Fi(e){var n,t,r,s,a,i,o,l,c,d=e.session.group.name,u=e.relativeDate(e.session.startsAt),p=e.maybeDate(e.session.startsAt)||e.formatTime(e.session.startsAt),m=e.formatTime(e.session.endsAt);return{c(){n=_("span"),t=D(d),r=D(" class "),s=D(u),a=D(", "),i=D(p),o=D(" to "),l=D(m),c=M(n,"click",e.click_handler_1)},m(e,c){w(e,n,c),b(n,t),b(n,r),b(n,s),b(n,a),b(n,i),b(n,o),b(n,l)},p(e,n){e.session&&d!==(d=n.session.group.name)&&N(t,d),e.session&&u!==(u=n.relativeDate(n.session.startsAt))&&N(s,u),e.session&&p!==(p=n.maybeDate(n.session.startsAt)||n.formatTime(n.session.startsAt))&&N(i,p),e.session&&m!==(m=n.formatTime(n.session.endsAt))&&N(l,m)},d(e){e&&y(n),c()}}}function Wi(e){var n,t,r,s,a,i,o,l,c,d,u,p=e.session.group.name,m=e.relativeDate(e.session.startsAt),f=e.maybeDate(e.session.startsAt)||e.formatTime(e.session.startsAt),g=e.formatTime(e.session.endsAt);return{c(){n=_("a"),t=_("span"),r=D(p),s=D(" class "),a=D(m),i=D(", "),o=D(f),l=D(" to "),c=D(g),A(n,"href",d="#/session/"+e.session.id),u=M(t,"click",e.click_handler)},m(e,d){w(e,n,d),b(n,t),b(t,r),b(t,s),b(t,a),b(t,i),b(t,o),b(t,l),b(t,c)},p(e,t){e.session&&p!==(p=t.session.group.name)&&N(r,p),e.session&&m!==(m=t.relativeDate(t.session.startsAt))&&N(a,m),e.session&&f!==(f=t.maybeDate(t.session.startsAt)||t.formatTime(t.session.startsAt))&&N(o,f),e.session&&g!==(g=t.formatTime(t.session.endsAt))&&N(c,g),e.session&&d!==(d="#/session/"+t.session.id)&&A(n,"href",d)},d(e){e&&y(n),u()}}}function Yi(e){var n,t;function r(t){e.deletesession_open_binding.call(null,t),n=!0,re(()=>n=!1)}let s={session:e.session};void 0!==e.showDelete&&(s.open=e.showDelete);var a=new ai({props:s});return J.push(()=>ke(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){_e(a,e,n),t=!0},p(e,t){var r={};e.session&&(r.session=t.session),!n&&e.showDelete&&(r.open=t.showDelete),a.$set(r)},i(e){t||(pe(a.$$.fragment,e),t=!0)},o(e){me(a.$$.fragment,e),t=!1},d(e){Se(a,e)}}}function Bi(e){var n,t,r=e.showDelete&&Yi(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.showDelete?r?(r.p(e,t),pe(r,1)):((r=Yi(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function Ui(e){var n,t;function r(t){e.editsession_open_binding.call(null,t),n=!0,re(()=>n=!1)}let s={session:e.session};void 0!==e.showEdit&&(s.open=e.showEdit);var a=new qi({props:s});return J.push(()=>ke(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){_e(a,e,n),t=!0},p(e,t){var r={};e.session&&(r.session=t.session),!n&&e.showEdit&&(r.open=t.showEdit),a.$set(r)},i(e){t||(pe(a.$$.fragment,e),t=!0)},o(e){me(a.$$.fragment,e),t=!1},d(e){Se(a,e)}}}function Gi(e){var n,t,r=e.showEdit&&Ui(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.showEdit?r?(r.p(e,t),pe(r,1)):((r=Ui(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function Zi(e){var n,t,r,s,a,i=e.session&&Hi(e);function o(n){e.modal0_open_binding.call(null,n),t=!0,re(()=>t=!1)}let l={$$slots:{default:[Bi]},$$scope:{ctx:e}};void 0!==e.showDelete&&(l.open=e.showDelete);var c=new kn({props:l});function d(n){e.modal1_open_binding.call(null,n),s=!0,re(()=>s=!1)}J.push(()=>ke(c,"open",o));let u={$$slots:{default:[Gi]},$$scope:{ctx:e}};void 0!==e.showEdit&&(u.open=e.showEdit);var p=new kn({props:u});return J.push(()=>ke(p,"open",d)),{c(){i&&i.c(),n=I(),c.$$.fragment.c(),r=I(),p.$$.fragment.c()},m(e,t){i&&i.m(e,t),w(e,n,t),_e(c,e,t),w(e,r,t),_e(p,e,t),a=!0},p(e,r){r.session?i?i.p(e,r):((i=Hi(r)).c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null);var a={};(e.$$scope||e.showDelete||e.session)&&(a.$$scope={changed:e,ctx:r}),!t&&e.showDelete&&(a.open=r.showDelete),c.$set(a);var o={};(e.$$scope||e.showEdit||e.session)&&(o.$$scope={changed:e,ctx:r}),!s&&e.showEdit&&(o.open=r.showEdit),p.$set(o)},i(e){a||(pe(c.$$.fragment,e),pe(p.$$.fragment,e),a=!0)},o(e){me(c.$$.fragment,e),me(p.$$.fragment,e),a=!1},d(e){i&&i.d(e),e&&y(n),Se(c,e),e&&y(r),Se(p,e)}}}function Vi(e,n,t){let{session:r}=n,s=!1,a=!1,i=!1;const o=e=>{if(!e)return;const n=new Date(e);return 0===n.getMinutes()?Ba(n,"h b"):Ba(n,"p")};return e.$set=e=>{"session"in e&&t("session",r=e.session)},{session:r,showDelete:s,showEdit:a,showActions:i,relativeDate:e=>{if(e)return Xa(new Date(e),new Date,{addSuffix:!0})},formatTime:o,maybeDate:e=>{const n=new Date(e)-new Date;if(Math.abs(n)>864e5){const n=ni(new Date(e),new Date);return["AM","PM"].includes(n.slice(-2))?n:`${n} ${o(e)}`}return""},isCurrentOrPast:e=>{const n=new Date;return e<new Date(n.valueOf()+18e5).toISOString()},click_handler:function(){t("showActions",i=!i)},click_handler_1:function(){t("showActions",i=!i)},click_handler_2:function(){const e=a=!0;return t("showEdit",a),e},click_handler_3:function(){const e=s=!0;return t("showDelete",s),e},deletesession_open_binding:function(e){t("showDelete",s=e)},modal0_open_binding:function(e){t("showDelete",s=e)},editsession_open_binding:function(e){t("showEdit",a=e)},modal1_open_binding:function(e){t("showEdit",a=e)}}}class Ji extends Ce{constructor(e){super(),Ie(this,e,Vi,Zi,o,["session"])}}function Xi(e,n,t){const r=Object.create(e);return r.session=n[t],r}function Qi(e,n,t){const r=Object.create(e);return r.session=n[t],r}function Ki(n){var t,r=new vt({props:{what:"today's lessons"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function eo(e){var n,t,r,s=e.$todaysSessions.soon&&no(e),a=e.$todaysSessions.later&&ro(e);return{c(){s&&s.c(),n=I(),a&&a.c(),t=C()},m(e,i){s&&s.m(e,i),w(e,n,i),a&&a.m(e,i),w(e,t,i),r=!0},p(e,r){r.$todaysSessions.soon?s?(s.p(e,r),pe(s,1)):((s=no(r)).c(),pe(s,1),s.m(n.parentNode,n)):s&&(de(),me(s,1,1,()=>{s=null}),ue()),r.$todaysSessions.later?a?(a.p(e,r),pe(a,1)):((a=ro(r)).c(),pe(a,1),a.m(t.parentNode,t)):a&&(de(),me(a,1,1,()=>{a=null}),ue())},i(e){r||(pe(s),pe(a),r=!0)},o(e){me(s),me(a),r=!1},d(e){s&&s.d(e),e&&y(n),a&&a.d(e),e&&y(t)}}}function no(e){var n,t,r,s,a,i,o,l,c=e.$todaysSessions.soon.length,d=e.$todaysSessions.soon.length-1?"s":"",u=[],p=new Map,m=e.$todaysSessions.soon;const f=e=>e.session.id;for(var g=0;g<m.length;g+=1){let n=Qi(e,m,g),t=f(n);p.set(t,u[g]=to(t,n))}return{c(){for(n=_("h3"),t=D(c),r=D(" Lesson"),s=D(d),a=D(" within 30 minutes"),i=I(),g=0;g<u.length;g+=1)u[g].c();o=C(),A(n,"class","title is-5")},m(e,c){for(w(e,n,c),b(n,t),b(n,r),b(n,s),b(n,a),w(e,i,c),g=0;g<u.length;g+=1)u[g].m(e,c);w(e,o,c),l=!0},p(e,n){l&&!e.$todaysSessions||c===(c=n.$todaysSessions.soon.length)||N(t,c),l&&!e.$todaysSessions||d===(d=n.$todaysSessions.soon.length-1?"s":"")||N(s,d);const r=n.$todaysSessions.soon;de(),u=ye(u,e,f,1,n,r,p,o.parentNode,we,to,o,Qi),ue()},i(e){if(!l){for(var n=0;n<m.length;n+=1)pe(u[n]);l=!0}},o(e){for(g=0;g<u.length;g+=1)me(u[g]);l=!1},d(e){for(e&&(y(n),y(i)),g=0;g<u.length;g+=1)u[g].d(e);e&&y(o)}}}function to(e,n){var t,r,s=new Ji({props:{session:n.session,time:n.$time}});return{key:e,first:null,c(){t=C(),s.$$.fragment.c(),this.first=t},m(e,n){w(e,t,n),_e(s,e,n),r=!0},p(e,n){var t={};e.$todaysSessions&&(t.session=n.session),e.$time&&(t.time=n.$time),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&y(t),Se(s,e)}}}function ro(e){var n,t,r,s,a,i,o,l,c=e.$todaysSessions.later.length,d=e.$todaysSessions.later.length-1?"s":"",u=[],p=new Map,m=e.$todaysSessions.later;const f=e=>e.session.id;for(var g=0;g<m.length;g+=1){let n=Xi(e,m,g),t=f(n);p.set(t,u[g]=so(t,n))}return{c(){for(n=_("h3"),t=D(c),r=D(" Lesson"),s=D(d),a=D(" within 24 hours"),i=I(),g=0;g<u.length;g+=1)u[g].c();o=C(),A(n,"class","title is-5")},m(e,c){for(w(e,n,c),b(n,t),b(n,r),b(n,s),b(n,a),w(e,i,c),g=0;g<u.length;g+=1)u[g].m(e,c);w(e,o,c),l=!0},p(e,n){l&&!e.$todaysSessions||c===(c=n.$todaysSessions.later.length)||N(t,c),l&&!e.$todaysSessions||d===(d=n.$todaysSessions.later.length-1?"s":"")||N(s,d);const r=n.$todaysSessions.later;de(),u=ye(u,e,f,1,n,r,p,o.parentNode,we,so,o,Xi),ue()},i(e){if(!l){for(var n=0;n<m.length;n+=1)pe(u[n]);l=!0}},o(e){for(g=0;g<u.length;g+=1)me(u[g]);l=!1},d(e){for(e&&(y(n),y(i)),g=0;g<u.length;g+=1)u[g].d(e);e&&y(o)}}}function so(e,n){var t,r,s=new Ji({props:{session:n.session,time:n.$time}});return{key:e,first:null,c(){t=C(),s.$$.fragment.c(),this.first=t},m(e,n){w(e,t,n),_e(s,e,n),r=!0},p(e,n){var t={};e.$todaysSessions&&(t.session=n.session),e.$time&&(t.time=n.$time),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&y(t),Se(s,e)}}}function ao(e){var n,t,r,s,a=[eo,Ki],i=[];function o(e){return e.$todaysSessions?0:1}return n=o(e),t=i[n]=a[n](e),{c(){t.c(),r=C()},m(e,t){i[n].m(e,t),w(e,r,t),s=!0},p(e,s){var l=n;(n=o(s))===l?i[n].p(e,s):(de(),me(i[l],1,1,()=>{i[l]=null}),ue(),(t=i[n])||(t=i[n]=a[n](s)).c(),pe(t,1),t.m(r.parentNode,r))},i(e){s||(pe(t),s=!0)},o(e){me(t),s=!1},d(e){i[n].d(e),e&&y(r)}}}function io(e,n,t){let r,s;return l(e,qs,e=>{t("$todaysSessions",r=e)}),l(e,Hs,e=>{t("$time",s=e)}),{$todaysSessions:r,$time:s}}class oo extends Ce{constructor(e){super(),Ie(this,e,io,ao,o,[])}}function lo(e,n,t){const r=Object.create(e);return r.session=n[t],r}function co(n){var t,r=new vt({props:{what:"sessions"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function uo(e){var n,t,r,s,a,i,o,l,c,d=e.$sessions.length,u=[],p=new Map,m=e.$sessions;const f=e=>e.session.id;for(var g=0;g<m.length;g+=1){let n=lo(e,m,g),t=f(n);p.set(t,u[g]=po(t,n))}return{c(){for(n=_("h3"),t=D("Showing "),r=D(d),s=D(" sessions"),a=I(),(i=_("p")).textContent="Click a session to view details.",o=I(),l=_("ul"),g=0;g<u.length;g+=1)u[g].c();A(n,"class","title is-5")},m(e,d){for(w(e,n,d),b(n,t),b(n,r),b(n,s),w(e,a,d),w(e,i,d),w(e,o,d),w(e,l,d),g=0;g<u.length;g+=1)u[g].m(l,null);c=!0},p(e,n){c&&!e.$sessions||d===(d=n.$sessions.length)||N(r,d);const t=n.$sessions;de(),u=ye(u,e,f,1,n,t,p,l,we,po,null,lo),ue()},i(e){if(!c){for(var n=0;n<m.length;n+=1)pe(u[n]);c=!0}},o(e){for(g=0;g<u.length;g+=1)me(u[g]);c=!1},d(e){for(e&&(y(n),y(a),y(i),y(o),y(l)),g=0;g<u.length;g+=1)u[g].d()}}}function po(e,n){var t,r,s=new Ji({props:{session:n.session}});return{key:e,first:null,c(){t=C(),s.$$.fragment.c(),this.first=t},m(e,n){w(e,t,n),_e(s,e,n),r=!0},p(e,n){var t={};e.$sessions&&(t.session=n.session),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&y(t),Se(s,e)}}}function mo(e){var n,t,r,s,a=[uo,co],i=[];function o(e){return e.$sessions?0:1}return n=o(e),t=i[n]=a[n](e),{c(){t.c(),r=C()},m(e,t){i[n].m(e,t),w(e,r,t),s=!0},p(e,s){var l=n;(n=o(s))===l?i[n].p(e,s):(de(),me(i[l],1,1,()=>{i[l]=null}),ue(),(t=i[n])||(t=i[n]=a[n](s)).c(),pe(t,1),t.m(r.parentNode,r))},i(e){s||(pe(t),s=!0)},o(e){me(t),s=!1},d(e){i[n].d(e),e&&y(r)}}}function fo(e,n,t){let r;return l(e,Rs,e=>{t("$sessions",r=e)}),{$sessions:r}}class go extends Ce{constructor(e){super(),Ie(this,e,fo,mo,o,[])}}function ho(e){var n,t=new Ri({props:{errors:e.errors,loading:e.loading}});return t.$on("submit",e.save),t.$on("reset",e.reset),{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function $o(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,re(()=>r=!1)}let o={$$slots:{default:[ho]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new kn({props:o});return J.push(()=>ke(l,"open",i)),{c(){(n=_("button")).innerHTML='<i class="fas fa-plus"></i> Add a\n\t\t\t  session',t=I(),l.$$.fragment.c(),A(n,"class","button add-button is-primary svelte-1igl3a3"),a=M(n,"click",e.click_handler)},m(e,r){w(e,n,r),w(e,t,r),_e(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||(pe(l.$$.fragment,e),s=!0)},o(e){me(l.$$.fragment,e),s=!1},d(e){e&&(y(n),y(t)),Se(l,e),a()}}}function vo(e,n,t){let r=null,s=!1,a=!1;const i=()=>{t("errors",r=null),t("open",s=!1)};return{errors:r,open:s,loading:a,reset:i,save:async({detail:e})=>{const{id:n,groupId:s,lessonId:o,...l}=e;console.log(e),l.startsAt=new Date(l.startsAt).toISOString(),l.endsAt=new Date(l.endsAt).toISOString(),t("loading",a=!0);try{const e=await Rs.create(l,s,o),n=ni(new Date(l.startsAt),new Date,{addSuffix:!0});Ee.add({text:`Created new session ${n} with ${e.group.name} class`,type:"success"}),i()}catch(e){t("errors",r=e),Ee.add({text:"Could not create new session",type:"danger"})}finally{t("loading",a=!1)}},click_handler:function(){const e=s=!0;return t("open",s),e},modal_open_binding:function(e){t("open",s=e)}}}class bo extends Ce{constructor(e){super(),Ie(this,e,vo,$o,o,[])}}function wo(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k=new bo({}),S=e.activeComponent;if(S)var D=new S({});return{c(){n=I(),(t=_("h1")).textContent="Class schedule",r=I(),k.$$.fragment.c(),s=I(),(i=_("button")).innerHTML='<i class="fas fa-sync"></i>',o=I(),l=_("nav"),(c=_("button")).textContent="24 hours",d=I(),(u=_("button")).textContent="Past",p=I(),(m=_("button")).textContent="Future",f=I(),(g=_("button")).textContent="All",h=I(),D&&D.$$.fragment.c(),$=C(),document.title="Class schedule",A(t,"class","title"),A(i,"class","button"),A(c,"class","button is-link svelte-1rwunha"),P(c,"is-outlined","upcoming"!==e.active),A(u,"class","button is-link svelte-1rwunha"),P(u,"is-outlined","past"!==e.active),A(m,"class","button is-link svelte-1rwunha"),P(m,"is-outlined","future"!==e.active),A(g,"class","button is-link svelte-1rwunha"),P(g,"is-outlined","all"!==e.active),A(l,"class","buttons has-addons is-centered svelte-1rwunha"),x=[M(i,"click",Rs.get),M(c,"click",e.click_handler),M(u,"click",e.click_handler_1),M(m,"click",e.click_handler_2),M(g,"click",e.click_handler_3)]},m(e,a){w(e,n,a),w(e,t,a),w(e,r,a),_e(k,e,a),w(e,s,a),w(e,i,a),w(e,o,a),w(e,l,a),b(l,c),b(l,d),b(l,u),b(l,p),b(l,m),b(l,f),b(l,g),w(e,h,a),D&&_e(D,e,a),w(e,$,a),v=!0},p(e,n){if(e.active&&(P(c,"is-outlined","upcoming"!==n.active),P(u,"is-outlined","past"!==n.active),P(m,"is-outlined","future"!==n.active),P(g,"is-outlined","all"!==n.active)),S!==(S=n.activeComponent)){if(D){de();const e=D;me(e.$$.fragment,1,0,()=>{Se(e,1)}),ue()}S?((D=new S({})).$$.fragment.c(),pe(D.$$.fragment,1),_e(D,$.parentNode,$)):D=null}},i(e){v||(pe(k.$$.fragment,e),D&&pe(D.$$.fragment,e),v=!0)},o(e){me(k.$$.fragment,e),D&&me(D.$$.fragment,e),v=!1},d(e){e&&(y(n),y(t),y(r)),Se(k,e),e&&(y(s),y(i),y(o),y(l),y(h),y($)),D&&Se(D,e),a(x)}}}function yo(e,n,t){let r=oo,s="upcoming";B(()=>{Rs.get();const e=setInterval(Rs.get,3e5);return()=>{e&&clearInterval(e)}});const a=e=>{let n=null;t("active",s=e),"past"===e?n={endsAt_lt:(new Date).toISOString()}:"future"===e&&(n={startsAt_gt:(new Date).toISOString()}),Ps.set(n),Rs.get(),t("activeComponent",r="upcoming"===e?oo:go)};return{activeComponent:r,active:s,switchTab:a,click_handler:function(){return a("upcoming")},click_handler_1:function(){return a("past")},click_handler_2:function(){return a("future")},click_handler_3:function(){return a("all")}}}const xo="\n  fragment AllSessionFields on ClassSession {\n    id\n     stage\n     startsAt\n     startedAt\n     endsAt\n     endedAt\n     number\n     group {\n       id\n       name\n     }\n     report {\n      id\n      published\n      homeworkEN\n      homeworkZH\n      summaryEN\n      summaryZH\n      performance\n      materials {\n        id\n        type\n        title\n        url\n        notes\n      }\n      words {\n        id\n        english\n        chinese\n        audio\n      }\n    }\n    lesson {\n      id\n      name\n    }\n  }\n",ko=`\n  query classSession($id: ID!){\n    classSession (id: $id){\n      ...AllSessionFields\n    }\n  }\n  ${xo}`,_o=`\nsubscription classSession($id: ID!){\n  classSession (id: $id){\n    ...AllSessionFields\n  }\n}\n${xo}`,So="\nquery points($classSessionId: ID!) {\n points(where: { classSession: {id: $classSessionId}}) {\n      id \n      value\n      student {\n        englishName\n        chineseName\n        id\n      }\n    }\n}\n",Do="\nsubscription sessionPoints($classSessionId: ID!){\n  points(classSessionId: $classSessionId){\n    mutation\n    previousValues {\n      id\n    }\n    node {\n      id\n      value\n      student {\n        englishName\n        chineseName\n        id\n      }\n    }\n    \n  }\n}\n",Io="\nquery sessionResults($id: ID!) {\n  classSession (id: $id){\n    id\n    stage\n    startsAt\n    startedAt\n    endsAt\n    endedAt\n    number\n    group {\n      id\n      name\n    }\n    attendances {\n      status\n      arrivedAt \n      student {\n        id\n        chineseName\n        englishName\n        pinyinName\n      }\n    }\n    points {\n      value\n      student {\n        id\n        chineseName\n        englishName\n        pinyinName\n      }\n    }\n  }\n}\n",Co="\n mutation activateSession($id:ID!){\n   activateSession(id:$id) {\n     id\n   }\n }",Mo="\nmutation startClass($id: ID!, $now: DateTime!) {\n  updateClassSession(id: $id, input: {stage: Started, startedAt: $now}) {\n    id\n  }\n  markRestAbsent(classSessionId: $id)\n}\n",To="\nmutation endClass($id: ID!, $now: DateTime!) {\n  updateClassSession(id: $id, input: {stage: Ended, endedAt: $now}) {\n    id\n  }\n}",Ao="\nmutation updateAttendance($classSessionId: ID!, $studentId: ID!, $status: String!){\n  updateAttendance(classSessionId: $classSessionId, studentId: $studentId, status: $status){\n    id\n  }\n}\n",No="\nmutation markAllPresent($classSessionId: ID!) {\n  markAllPresent(classSessionId: $classSessionId)\n}\n",Eo=`\nmutation AddLessonToSession($id: ID!, $lessonId: ID!) {\n  addLessonToClassSession(id: $id, lessonId: $lessonId) {\n    ...AllSessionFields\n  }\n}\n${xo}`,Oo=Ae(null,e=>e(null)),Lo=Te(null,e=>{let n;const t=Oo.subscribe(t=>{t?(n&&n.unsubscribe(),Ze(ko,{id:t}).then(n=>{e(n.classSession)}),n=Os.request({query:_o,variables:{id:t}}).subscribe({next(n){n.data&&n.data.classSession&&e(n.data.classSession)}})):e(null)});return()=>{n&&n.unsubscribe(),t()}}),Po=(()=>{const e=(e,n)=>e&&0===e.length?n:(e=Array.isArray(e)?e:[e],n.map(n=>{const t=e.find(e=>!!e.student&&e.student.id===n.id);return t&&(n.attendance=t),n})),{subscribe:n,update:t}=Ae(null,n=>{let r;const s=Lo.subscribe(s=>{s&&(r&&r.unsubscribe(),Ze("\nquery students($groupId: ID!, $classSessionId: ID!){\n  students (where: { groups_some: {id: $groupId}}) {\n    id\n    chineseName\n    pinyinName\n    englishName\n  }\n  attendances (where: {classSession: {id: $classSessionId}}) {\n    id\n    student {\n      id\n    }\n    status\n  }\n}\n",{groupId:s.group.id,classSessionId:s.id}).then(t=>{n(e(t.attendances,t.students))}),r=Os.request({query:"\nsubscription attendances($classSessionId: ID!){\n  attendances (classSessionId: $classSessionId){\n    id\n    student {\n      id\n    }\n    status\n  }\n}",variables:{classSessionId:s.id}}).subscribe({next(n){n.data&&n.data.attendances&&t(t=>e(n.data.attendances,t))}}))});return()=>{r&&r.unsubscribe(),s()}});return{subscribe:n,update:t,mapAttendanceToStudents:e}})(),Ro=(()=>{const{subscribe:e,update:n}=Ae([]);return{subscribe:e,update:n,add:e=>{n(n=>[e,...n.slice(0,9)])},remove:e=>{n(n=>n.filter(n=>n.id!==e))}}})(),jo=(()=>{const{subscribe:e,update:n}=Ae(null,e=>{let t;const r=Lo.subscribe(r=>{r&&(t&&t.unsubscribe(),Ze(So,{classSessionId:r.id}).then(n=>{e(n.points)}),t=Os.request({query:Do,variables:{classSessionId:r.id}}).subscribe({next(e){if(e.data&&e.data.points){const{node:t,mutation:r,previousValues:s}=e.data.points;"CREATED"===r&&n(e=>[t,...e]),"DELETED"===r&&(n(e=>e.filter(e=>e.id!==s.id)),Ro.update(e=>e.filter(e=>e.id!==s.id)))}}}))});return()=>{r(),t&&t.unsubscribe()}});return{subscribe:e,update:n,undo:async e=>{await Ze("\nmutation undoPoint($id: ID!) {\n  undoPoint(id: $id) {\n    id\n  }\n}\n",{id:e})},add:async(e,n,t)=>{const r=await Ze("\nmutation addPoint($value: Int!, $studentId: ID!, $classSessionId: ID!) {\n  addPoint(value: $value, studentId: $studentId, classSessionId: $classSessionId) {\n    id\n    value\n    student {\n      englishName\n      chineseName\n      id\n    }\n  }\n} ",{value:e,studentId:n,classSessionId:t});Ro.add(r.addPoint)}}})(),zo=(Ne(Oo,async(e,n)=>{if(!e)return;const t=await Ze(Io,{classSessionId:e});if(!t.classSession)return;const{attendances:r,points:s}=t.classSession;n((r&&r.map(e=>(e.points=s&&s.filter(n=>n.student.id===e.student.id),e.pointsTally=e.points.reduce((e,n)=>e+n.value,0),e))).slice().sort((e,n)=>n.pointsTally-e.pointsTally))}),async e=>{const n=await Ze(Io,{id:e});if(!n.classSession)return;const{attendances:t,points:r}=n.classSession;return(t&&t.map(e=>(e.points=r&&r.filter(n=>n.student.id===e.student.id),e.pointsTally=e.points.reduce((e,n)=>e+n.value,0),e))).slice().sort((e,n)=>n.pointsTally-e.pointsTally)});function qo(n){var t,r,s,a,i,o,l,c=n.student.englishName||n.student.chineseName;return{c(){t=_("li"),r=_("i"),a=I(),i=_("span"),o=D(c),A(r,"class",s="fas fa-"+(n.present?"check":"dot")+"-circle status svelte-1199exf"),A(i,"class","name"),A(t,"class","svelte-1199exf"),P(t,"absent",!n.present),l=M(t,"click",n.updateAttendance)},m(e,n){w(e,t,n),b(t,r),b(t,a),b(t,i),b(i,o)},p(e,n){e.present&&s!==(s="fas fa-"+(n.present?"check":"dot")+"-circle status svelte-1199exf")&&A(r,"class",s),e.student&&c!==(c=n.student.englishName||n.student.chineseName)&&N(o,c),e.present&&P(t,"absent",!n.present)},i:e,o:e,d(e){e&&y(t),l()}}}function Ho(e,n,t){let{student:r={},sessionId:s=null,started:a=!1}=n;let i;return e.$set=e=>{"student"in e&&t("student",r=e.student),"sessionId"in e&&t("sessionId",s=e.sessionId),"started"in e&&t("started",a=e.started)},e.$$.update=(e={student:1})=>{e.student&&t("present",i=!(!r.attendance||"Absent"===r.attendance.status))},{student:r,sessionId:s,started:a,updateAttendance:()=>{const e=i?"Absent":a?"Late":"Present";try{Ze(Ao,{classSessionId:s,studentId:r.id,status:e})}catch(e){console.error(e)}},present:i}}class Fo extends Ce{constructor(e){super(),Ie(this,e,Ho,qo,o,["student","sessionId","started"])}}function Wo(e,n,t){const r=Object.create(e);return r.student=n[t],r}function Yo(n){var t,r=new vt({props:{what:"students"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function Bo(e){var n,t,r,s,a=[Go,Uo],i=[];function o(e){return e.$sessionStudents.length?0:1}return n=o(e),t=i[n]=a[n](e),{c(){t.c(),r=C()},m(e,t){i[n].m(e,t),w(e,r,t),s=!0},p(e,s){var l=n;(n=o(s))===l?i[n].p(e,s):(de(),me(i[l],1,1,()=>{i[l]=null}),ue(),(t=i[n])||(t=i[n]=a[n](s)).c(),pe(t,1),t.m(r.parentNode,r))},i(e){s||(pe(t),s=!0)},o(e){me(t),s=!1},d(e){i[n].d(e),e&&y(r)}}}function Uo(n){var t;return{c(){(t=_("p")).textContent="No students were found for this class session."},m(e,n){w(e,t,n)},p:e,i:e,o:e,d(e){e&&y(t)}}}function Go(e){var n,t,r=[],s=new Map,a=e.$sessionStudents;const i=e=>e.student.id;for(var o=0;o<a.length;o+=1){let n=Wo(e,a,o),t=i(n);s.set(t,r[o]=Zo(t,n))}return{c(){for(o=0;o<r.length;o+=1)r[o].c();n=C()},m(e,s){for(o=0;o<r.length;o+=1)r[o].m(e,s);w(e,n,s),t=!0},p(e,t){const a=t.$sessionStudents;de(),r=ye(r,e,i,1,t,a,s,n.parentNode,we,Zo,n,Wo),ue()},i(e){if(!t){for(var n=0;n<a.length;n+=1)pe(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)me(r[o]);t=!1},d(e){for(o=0;o<r.length;o+=1)r[o].d(e);e&&y(n)}}}function Zo(e,n){var t,r,s=new Fo({props:{student:n.student,sessionId:n.$session.id}});return{key:e,first:null,c(){t=C(),s.$$.fragment.c(),this.first=t},m(e,n){w(e,t,n),_e(s,e,n),r=!0},p(e,n){var t={};e.$sessionStudents&&(t.student=n.student),e.$session&&(t.sessionId=n.$session.id),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&y(t),Se(s,e)}}}function Vo(e){var n,t,r,s,a,i,o,l,c=new hn({props:{errors:e.errors}}),d=[Bo,Yo],u=[];function p(e){return e.$sessionStudents?0:1}return a=p(e),i=u[a]=d[a](e),{c(){n=_("section"),c.$$.fragment.c(),t=I(),(r=_("button")).innerHTML='<i class="fas fa-clipboard-check"></i>All\n\t\t\t    present',s=I(),i.c(),A(r,"class","button is-primary is-inverted svelte-1yp3byo"),A(n,"class","attendance-form svelte-1yp3byo"),l=M(r,"click",e.markAllPresent)},m(e,i){w(e,n,i),_e(c,n,null),b(n,t),b(n,r),b(n,s),u[a].m(n,null),o=!0},p(e,t){var r={};e.errors&&(r.errors=t.errors),c.$set(r);var s=a;(a=p(t))===s?u[a].p(e,t):(de(),me(u[s],1,1,()=>{u[s]=null}),ue(),(i=u[a])||(i=u[a]=d[a](t)).c(),pe(i,1),i.m(n,null))},i(e){o||(pe(c.$$.fragment,e),pe(i),o=!0)},o(e){me(c.$$.fragment,e),me(i),o=!1},d(e){e&&y(n),Se(c),u[a].d(),l()}}}function Jo(e,n,t){let r,s;l(e,Lo,e=>{t("$session",r=e)}),l(e,Po,e=>{t("$sessionStudents",s=e)});let a="";return{errors:a,markAllPresent:()=>{try{Ze(No,{classSessionId:r.id})}catch(e){t("errors",a=e)}},$session:r,$sessionStudents:s}}class Xo extends Ce{constructor(e){super(),Ie(this,e,Jo,Vo,o,[])}}function Qo(e){var n,t,r,s,a,i,o,l,c,d,u=new hn({props:{errors:e.errors}}),p=new Xo({});return{c(){n=I(),t=_("p"),r=D("Scheduled start time: "),s=D(e.distance),a=I(),u.$$.fragment.c(),i=I(),p.$$.fragment.c(),o=I(),(l=_("button")).innerHTML='<i class="fas fa-play-circle"></i>\n\t\t\t  Start class\n\t\t\t',document.title="Active Session",A(t,"class","subtitle svelte-1rayv7m"),P(t,"late",e.$session.startsAt<e.$time.toJSON()),A(l,"class","button is-primary"),d=M(l,"click",e.startClass)},m(e,d){w(e,n,d),w(e,t,d),b(t,r),b(t,s),w(e,a,d),_e(u,e,d),w(e,i,d),_e(p,e,d),w(e,o,d),w(e,l,d),c=!0},p(e,n){c&&!e.distance||N(s,n.distance),(e.$session||e.$time)&&P(t,"late",n.$session.startsAt<n.$time.toJSON());var r={};e.errors&&(r.errors=n.errors),u.$set(r)},i(e){c||(pe(u.$$.fragment,e),pe(p.$$.fragment,e),c=!0)},o(e){me(u.$$.fragment,e),me(p.$$.fragment,e),c=!1},d(e){e&&(y(n),y(t),y(a)),Se(u,e),e&&y(i),Se(p,e),e&&(y(o),y(l)),d()}}}function Ko(e,n,t){let r,s;l(e,Lo,e=>{t("$session",r=e)}),l(e,Hs,e=>{t("$time",s=e)});let a="";let i;return e.$$.update=(e={$session:1,$time:1})=>{(e.$session||e.$time)&&t("distance",i=r&&s&&Xa(new Date(r.startsAt),s,{addSuffix:!0}))},{errors:a,startClass:()=>{const e=(new Date).toISOString();try{Ze(Mo,{id:r.id,now:e})}catch(e){t("errors",a=e)}},$session:r,distance:i,$time:s}}class el extends Ce{constructor(e){super(),Ie(this,e,Ko,Qo,o,[])}}function nl(n){var t;return{c(){(t=_("p")).textContent="Activating class session..."},m(e,n){w(e,t,n)},p:e,i:e,o:e,d(e){e&&y(t)}}}function tl(e,n,t){let{id:r=null}=n;return B(()=>{r&&Ze(Co,{id:r})}),e.$set=e=>{"id"in e&&t("id",r=e.id)},{id:r}}class rl extends Ce{constructor(e){super(),Ie(this,e,tl,nl,o,["id"])}}function sl(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k,S,C,T,E,O,L,R,j,z,q,H,F=e.$session.group.name,W=e.$session.number,Y=e.startDifference(),B=new hn({props:{errors:e.errors}});return{c(){n=_("h1"),t=D("End "),r=D(F),s=D(" class lesson "),i=D(W),o=I(),B.$$.fragment.c(),l=I(),c=_("p"),d=D("Scheduled end: "),u=D(e.endsAt),p=D(" ("),m=D(e.endsAtDistance),f=D(")"),g=I(),h=_("p"),$=D("Class started "),v=D(Y),x=I(),k=_("br"),S=I(),(C=_("p")).textContent="Sure you want to end class now?",T=I(),E=_("div"),O=_("button"),L=_("i"),R=D("\n    End class"),j=I(),(z=_("button")).textContent="Nevermind",A(n,"class","title"),A(L,"class","fas fa-thumbs-up"),A(O,"class","button is-primary"),O.disabled=al,P(O,"is-loading",al),A(z,"class","button"),A(E,"class","buttons svelte-8v8jl6"),H=[M(O,"click",e.handleEnd),M(z,"click",e.click_handler)]},m(e,a){w(e,n,a),b(n,t),b(n,r),b(n,s),b(n,i),w(e,o,a),_e(B,e,a),w(e,l,a),w(e,c,a),b(c,d),b(c,u),b(c,p),b(c,m),b(c,f),w(e,g,a),w(e,h,a),b(h,$),b(h,v),w(e,x,a),w(e,k,a),w(e,S,a),w(e,C,a),w(e,T,a),w(e,E,a),b(E,O),b(O,L),b(O,R),b(E,j),b(E,z),q=!0},p(e,n){q&&!e.$session||F===(F=n.$session.group.name)||N(r,F),q&&!e.$session||W===(W=n.$session.number)||N(i,W);var t={};e.errors&&(t.errors=n.errors),B.$set(t),e.loading&&P(O,"is-loading",al)},i(e){q||(pe(B.$$.fragment,e),q=!0)},o(e){me(B.$$.fragment,e),q=!1},d(e){e&&(y(n),y(o)),Se(B,e),e&&(y(l),y(c),y(g),y(h),y(x),y(k),y(S),y(C),y(T),y(E)),a(H)}}}let al=!1;function il(e,n,t){let r;l(e,Lo,e=>{t("$session",r=e)});let{open:s=!1}=n,a="";const i=Ba(new Date(r.endsAt),"p"),o=Xa(new Date(r.endsAt),new Date,{addSuffix:!0});return e.$set=e=>{"open"in e&&t("open",s=e.open)},{open:s,errors:a,handleEnd:()=>{try{Ze(To,{id:r.id,now:new Date})}catch(e){t("errors",a=e)}},endsAt:i,endsAtDistance:o,startDifference:()=>{const e=new Date(r.startsAt),n=new Date(r.startedAt),t=e-n;return`${Xa(e,n)}  ${t>0?"early":"late"}`},$session:r,click_handler:function(){t("open",s=!1)}}}class ol extends Ce{constructor(e){super(),Ie(this,e,il,sl,o,["open"])}}function ll(n){var t,r,s,a;return{c(){t=_("button"),A(r=_("i"),"class",s="fas fa-"+n.name+" svelte-1vxok5w"),E(r,"--color",n.color),t.disabled=n.disabled,A(t,"class","svelte-1vxok5w"),a=M(t,"click",n.click_handler)},m(e,n){w(e,t,n),b(t,r)},p(e,n){e.name&&s!==(s="fas fa-"+n.name+" svelte-1vxok5w")&&A(r,"class",s),e.color&&E(r,"--color",n.color),e.disabled&&(t.disabled=n.disabled)},i:e,o:e,d(e){e&&y(t),a()}}}function cl(e,n,t){let{name:r="",color:s="white",disabled:a=!1}=n;return e.$set=e=>{"name"in e&&t("name",r=e.name),"color"in e&&t("color",s=e.color),"disabled"in e&&t("disabled",a=e.disabled)},{name:r,color:s,disabled:a,click_handler:function(n){Z(e,n)}}}class dl extends Ce{constructor(e){super(),Ie(this,e,cl,ll,o,["name","color","disabled"])}}function ul(e){var n,t,r,s,a,i,o,l,c,d=e.student.englishName||e.student.chineseName,u=new dl({props:{name:"plus-square",color:"#55FF66"}});u.$on("click",e.click_handler);var p=new dl({props:{name:"minus-square",color:"#FF3344",disabled:e.pointsTally<1}});return p.$on("click",e.click_handler_1),{c(){n=_("li"),u.$$.fragment.c(),t=I(),r=_("span"),s=D(d),a=I(),i=_("span"),o=D(e.pointsTally),l=I(),p.$$.fragment.c(),A(r,"class","name svelte-ht5lal"),A(i,"class","points svelte-ht5lal"),A(n,"class","svelte-ht5lal")},m(e,d){w(e,n,d),_e(u,n,null),b(n,t),b(n,r),b(r,s),b(n,a),b(n,i),b(i,o),b(n,l),_e(p,n,null),c=!0},p(e,n){c&&!e.student||d===(d=n.student.englishName||n.student.chineseName)||N(s,d),c&&!e.pointsTally||N(o,n.pointsTally);var t={};e.pointsTally&&(t.disabled=n.pointsTally<1),p.$set(t)},i(e){c||(pe(u.$$.fragment,e),pe(p.$$.fragment,e),c=!0)},o(e){me(u.$$.fragment,e),me(p.$$.fragment,e),c=!1},d(e){e&&y(n),Se(u),Se(p)}}}function pl(e,n,t){let r;l(e,jo,e=>{t("$points",r=e)});let{student:s,sessionId:a}=n;const i=e=>{jo.add(e,s.id,a)};let o;return e.$set=e=>{"student"in e&&t("student",s=e.student),"sessionId"in e&&t("sessionId",a=e.sessionId)},e.$$.update=(e={$points:1,student:1})=>{(e.$points||e.student)&&t("pointsTally",o=r?r.reduce((e,n)=>n.student.id!==s.id?e:e+n.value,0):0)},{student:s,sessionId:a,addPoint:i,pointsTally:o,click_handler:function(){return i(1)},click_handler_1:function(){return i(-1)}}}class ml extends Ce{constructor(e){super(),Ie(this,e,pl,ul,o,["student","sessionId"])}}function fl(e,n,t){const r=Object.create(e);return r.student=n[t],r}function gl(e){var n,t=new ml({props:{student:e.student,sessionId:e.sessionId}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.$sessionStudents&&(r.student=n.student),e.sessionId&&(r.sessionId=n.sessionId),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function hl(e,n){var t,r,s,a=n.student.attendance&&"Absent"!==n.student.attendance.status&&gl(n);return{key:e,first:null,c(){t=C(),a&&a.c(),r=C(),this.first=t},m(e,n){w(e,t,n),a&&a.m(e,n),w(e,r,n),s=!0},p(e,n){n.student.attendance&&"Absent"!==n.student.attendance.status?a?(a.p(e,n),pe(a,1)):((a=gl(n)).c(),pe(a,1),a.m(r.parentNode,r)):a&&(de(),me(a,1,1,()=>{a=null}),ue())},i(e){s||(pe(a),s=!0)},o(e){me(a),s=!1},d(e){e&&y(t),a&&a.d(e),e&&y(r)}}}function $l(e){var n,t,r,s,a,i=[],o=new Map,l=e.$sessionStudents;const c=e=>e.student.id;for(var d=0;d<l.length;d+=1){let n=fl(e,l,d),t=c(n);o.set(t,i[d]=hl(t,n))}return{c(){for(n=_("section"),(t=_("h3")).textContent="Points",r=I(),s=_("ul"),d=0;d<i.length;d+=1)i[d].c();A(t,"class","title is-4"),A(n,"class","points svelte-xj6mxc")},m(e,o){for(w(e,n,o),b(n,t),b(n,r),b(n,s),d=0;d<i.length;d+=1)i[d].m(s,null);a=!0},p(e,n){const t=n.$sessionStudents;de(),i=ye(i,e,c,1,n,t,o,s,we,hl,null,fl),ue()},i(e){if(!a){for(var n=0;n<l.length;n+=1)pe(i[n]);a=!0}},o(e){for(d=0;d<i.length;d+=1)me(i[d]);a=!1},d(e){for(e&&y(n),d=0;d<i.length;d+=1)i[d].d()}}}function vl(e,n,t){let r;l(e,Po,e=>{t("$sessionStudents",r=e)});let{sessionId:s}=n;return e.$set=e=>{"sessionId"in e&&t("sessionId",s=e.sessionId)},{sessionId:s,$sessionStudents:r}}class bl extends Ce{constructor(e){super(),Ie(this,e,vl,$l,o,["sessionId"])}}function wl(e,n,t){const r=Object.create(e);return r.student=n[t],r}function yl(e){var n,t,r,s,a,i,o,l,c,d=e.$pointsLog[0].value,u=e.$pointsLog[0].value-1?"s":"",p=e.$pointsLog[0].student.englishName||e.$pointsLog[0].student.chineseName;return{c(){n=_("button"),t=_("i"),r=D("\n    Undo "),s=D(d),a=D(" point"),i=D(u),o=D(" for "),l=D(p),A(t,"class","fas fa-undo"),A(n,"class","button is-white"),c=M(n,"click",e.click_handler)},m(e,c){w(e,n,c),b(n,t),b(n,r),b(n,s),b(n,a),b(n,i),b(n,o),b(n,l)},p(e,n){e.$pointsLog&&d!==(d=n.$pointsLog[0].value)&&N(s,d),e.$pointsLog&&u!==(u=n.$pointsLog[0].value-1?"s":"")&&N(i,u),e.$pointsLog&&p!==(p=n.$pointsLog[0].student.englishName||n.$pointsLog[0].student.chineseName)&&N(l,p)},d(e){e&&y(n),c()}}}function xl(e){var n,t,r,s=new bl({props:{sessionId:e.$session.id}}),a=e.absentStudents&&e.absentStudents.length&&kl(e);return{c(){s.$$.fragment.c(),n=I(),a&&a.c(),t=C()},m(e,i){_e(s,e,i),w(e,n,i),a&&a.m(e,i),w(e,t,i),r=!0},p(e,n){var r={};e.$session&&(r.sessionId=n.$session.id),s.$set(r),n.absentStudents&&n.absentStudents.length?a?(a.p(e,n),pe(a,1)):((a=kl(n)).c(),pe(a,1),a.m(t.parentNode,t)):a&&(de(),me(a,1,1,()=>{a=null}),ue())},i(e){r||(pe(s.$$.fragment,e),pe(a),r=!0)},o(e){me(s.$$.fragment,e),me(a),r=!1},d(e){Se(s,e),e&&y(n),a&&a.d(e),e&&y(t)}}}function kl(e){var n,t,r,s,a=[],i=new Map,o=e.absentStudents;const l=e=>e.student.id;for(var c=0;c<o.length;c+=1){let n=wl(e,o,c),t=l(n);i.set(t,a[c]=_l(t,n))}return{c(){for(n=_("section"),(t=_("h3")).textContent="Absent",r=I(),c=0;c<a.length;c+=1)a[c].c();A(t,"class","title is-4"),A(n,"class","absent svelte-1kn2bdy")},m(e,i){for(w(e,n,i),b(n,t),b(n,r),c=0;c<a.length;c+=1)a[c].m(n,null);s=!0},p(e,t){const r=t.absentStudents;de(),a=ye(a,e,l,1,t,r,i,n,we,_l,null,wl),ue()},i(e){if(!s){for(var n=0;n<o.length;n+=1)pe(a[n]);s=!0}},o(e){for(c=0;c<a.length;c+=1)me(a[c]);s=!1},d(e){for(e&&y(n),c=0;c<a.length;c+=1)a[c].d()}}}function _l(e,n){var t,r,s=new Fo({props:{student:n.student,sessionId:n.$session.id,started:"true"}});return{key:e,first:null,c(){t=C(),s.$$.fragment.c(),this.first=t},m(e,n){w(e,t,n),_e(s,e,n),r=!0},p(e,n){var t={};e.absentStudents&&(t.student=n.student),e.$session&&(t.sessionId=n.$session.id),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&y(t),Se(s,e)}}}function Sl(e){var n,t;function r(t){e.confirmendsession_open_binding.call(null,t),n=!0,re(()=>n=!1)}let s={};void 0!==e.showEndModal&&(s.open=e.showEndModal);var a=new ol({props:s});return J.push(()=>ke(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){_e(a,e,n),t=!0},p(e,t){var r={};!n&&e.showEndModal&&(r.open=t.showEndModal),a.$set(r)},i(e){t||(pe(a.$$.fragment,e),t=!0)},o(e){me(a.$$.fragment,e),t=!1},d(e){Se(a,e)}}}function Dl(e){var n,t,r=e.showEndModal&&Sl(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.showEndModal?r?(r.p(e,t),pe(r,1)):((r=Sl(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function Il(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k=e.$pointsLog&&e.$pointsLog.length&&yl(e),S=e.$sessionStudents&&xl(e);function C(n){e.modal_open_binding.call(null,n),$=!0,re(()=>$=!1)}let T={$$slots:{default:[Dl]},$$scope:{ctx:e}};void 0!==e.showEndModal&&(T.open=e.showEndModal);var E=new kn({props:T});return J.push(()=>ke(E,"open",C)),{c(){n=I(),t=_("p"),r=_("span"),s=D("Started: "),a=D(e.startedAt),i=I(),o=_("br"),l=I(),c=_("span"),d=D("Scheduled End: "),u=D(e.endsAt),p=I(),k&&k.c(),m=I(),S&&S.c(),f=I(),(g=_("button")).innerHTML='<i class="fas fa-hourglass-end"></i>\n\t\t\t  End class\n\t\t\t',h=I(),E.$$.fragment.c(),document.title="Started Session",A(r,"class","start"),A(c,"class","end svelte-1kn2bdy"),P(c,"late",e.$session.endsAt<e.$time.toJSON()),A(t,"class","subtitle"),A(g,"class","button is-primary end svelte-1kn2bdy"),x=M(g,"click",e.click_handler_1)},m(e,$){w(e,n,$),w(e,t,$),b(t,r),b(r,s),b(r,a),b(t,i),b(t,o),b(t,l),b(t,c),b(c,d),b(c,u),w(e,p,$),k&&k.m(e,$),w(e,m,$),S&&S.m(e,$),w(e,f,$),w(e,g,$),w(e,h,$),_e(E,e,$),v=!0},p(e,n){v&&!e.startedAt||N(a,n.startedAt),v&&!e.endsAt||N(u,n.endsAt),(e.$session||e.$time)&&P(c,"late",n.$session.endsAt<n.$time.toJSON()),n.$pointsLog&&n.$pointsLog.length?k?k.p(e,n):((k=yl(n)).c(),k.m(m.parentNode,m)):k&&(k.d(1),k=null),n.$sessionStudents?S?(S.p(e,n),pe(S,1)):((S=xl(n)).c(),pe(S,1),S.m(f.parentNode,f)):S&&(de(),me(S,1,1,()=>{S=null}),ue());var t={};(e.$$scope||e.showEndModal)&&(t.$$scope={changed:e,ctx:n}),!$&&e.showEndModal&&(t.open=n.showEndModal),E.$set(t)},i(e){v||(pe(S),pe(E.$$.fragment,e),v=!0)},o(e){me(S),me(E.$$.fragment,e),v=!1},d(e){e&&(y(n),y(t),y(p)),k&&k.d(e),e&&y(m),S&&S.d(e),e&&(y(f),y(g),y(h)),Se(E,e),x()}}}function Cl(e,n,t){let r,s,a,i;l(e,Lo,e=>{t("$session",r=e)}),l(e,Po,e=>{t("$sessionStudents",s=e)}),l(e,Hs,e=>{t("$time",a=e)}),l(e,Ro,e=>{t("$pointsLog",i=e)});let o,c,d,u=!1;return e.$$.update=(e={$session:1,$sessionStudents:1})=>{e.$session&&t("startedAt",o=Xa(new Date(r.startedAt),new Date,{addSuffix:!0})),e.$session&&t("endsAt",c=Xa(new Date(r.endsAt),new Date,{addSuffix:!0})),e.$sessionStudents&&t("absentStudents",d=s&&s.filter(e=>e.attendance&&"Absent"===e.attendance.status))},{showEndModal:u,startedAt:o,$session:r,endsAt:c,absentStudents:d,$sessionStudents:s,$time:a,$pointsLog:i,click_handler:function(){return jo.undo(i[0].id)},click_handler_1:function(){t("showEndModal",u=!0)},confirmendsession_open_binding:function(e){t("showEndModal",u=e)},modal_open_binding:function(e){t("showEndModal",u=e)}}}class Ml extends Ce{constructor(e){super(),Ie(this,e,Cl,Il,o,[])}}function Tl(n){var t,r,s,a;return{c(){t=_("span"),r=_("i"),s=D("×"),a=D(n.pointsTally),A(r,"class","fas fa-star"),A(t,"class","stars")},m(e,n){w(e,t,n),b(t,r),b(t,s),b(t,a)},p:e,d(e){e&&y(t)}}}function Al(e){var n,t=e.result.status;return{c(){n=D(t)},m(e,t){w(e,n,t)},p(e,r){e.result&&t!==(t=r.result.status)&&N(n,t)},d(e){e&&y(n)}}}function Nl(n){var t,r,s,a,i,o,l=n.result.student.englishName||n.result.student.chineseName,c="Absent"!==n.result.status&&Tl(n),d="Present"!==n.result.status&&Al(n);return{c(){t=_("li"),c&&c.c(),r=I(),s=_("span"),a=D(l),i=I(),o=_("span"),d&&d.c(),A(s,"class","name"),A(o,"class","status svelte-1r4n15n"),A(t,"class","svelte-1r4n15n"),P(t,"absent","Absent"===n.result.status)},m(e,n){w(e,t,n),c&&c.m(t,null),b(t,r),b(t,s),b(s,a),b(t,i),b(t,o),d&&d.m(o,null)},p(e,n){"Absent"!==n.result.status?c?c.p(e,n):((c=Tl(n)).c(),c.m(t,r)):c&&(c.d(1),c=null),e.result&&l!==(l=n.result.student.englishName||n.result.student.chineseName)&&N(a,l),"Present"!==n.result.status?d?d.p(e,n):((d=Al(n)).c(),d.m(o,null)):d&&(d.d(1),d=null),e.result&&P(t,"absent","Absent"===n.result.status)},i:e,o:e,d(e){e&&y(t),c&&c.d(),d&&d.d()}}}function El(e,n,t){let{result:r={}}=n;const s=("0"+r.pointsTally).slice(-2);return e.$set=e=>{"result"in e&&t("result",r=e.result)},{result:r,pointsTally:s}}class Ol extends Ce{constructor(e){super(),Ie(this,e,El,Nl,o,["result"])}}function Ll(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k=new hn({props:{errors:e.errors}});function S(n){e.input0_value_binding.call(null,n),i=!0,re(()=>i=!1)}let D={label:"Scheduled start",type:"datetime-local",required:!0};void 0!==e.startsAt&&(D.value=e.startsAt);var C=new qn({props:D});function N(n){e.input1_value_binding.call(null,n),l=!0,re(()=>l=!1)}J.push(()=>ke(C,"value",S));let E={label:"Actual start",type:"datetime-local",required:!0};void 0!==e.startedAt&&(E.value=e.startedAt);var O=new qn({props:E});function L(n){e.input2_value_binding.call(null,n),d=!0,re(()=>d=!1)}J.push(()=>ke(O,"value",N));let P={label:"Scheduled end",type:"datetime-local",required:!0};void 0!==e.endsAt&&(P.value=e.endsAt);var R=new qn({props:P});function j(n){e.input3_value_binding.call(null,n),p=!0,re(()=>p=!1)}J.push(()=>ke(R,"value",L));let z={label:"Actual end",type:"datetime-local",required:!0};void 0!==e.endedAt&&(z.value=e.endedAt);var q=new qn({props:z});return J.push(()=>ke(q,"value",j)),{c(){(n=_("h2")).textContent="Edit session times",t=I(),k.$$.fragment.c(),r=I(),s=_("form"),C.$$.fragment.c(),o=I(),O.$$.fragment.c(),c=I(),R.$$.fragment.c(),u=I(),q.$$.fragment.c(),m=I(),f=_("div"),(g=_("button")).textContent="Save",h=I(),$=_("input"),A(n,"class","title"),A(g,"class","button is-primary"),A(g,"type","submit"),A($,"class","button"),A($,"type","reset"),$.value="Cancel",A(f,"class","buttons"),s.noValidate=!0,x=[M(s,"submit",T(e.handleSubmit)),M(s,"reset",e.reset_handler)]},m(a,i){w(a,n,i),w(a,t,i),_e(k,a,i),w(a,r,i),w(a,s,i),_e(C,s,null),b(s,o),_e(O,s,null),b(s,c),_e(R,s,null),b(s,u),_e(q,s,null),b(s,m),b(s,f),b(f,g),e.button_binding(g),b(f,h),b(f,$),e.form_1_binding(s),v=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),k.$set(t);var r={};!i&&e.startsAt&&(r.value=n.startsAt),C.$set(r);var s={};!l&&e.startedAt&&(s.value=n.startedAt),O.$set(s);var a={};!d&&e.endsAt&&(a.value=n.endsAt),R.$set(a);var o={};!p&&e.endedAt&&(o.value=n.endedAt),q.$set(o)},i(e){v||(pe(k.$$.fragment,e),pe(C.$$.fragment,e),pe(O.$$.fragment,e),pe(R.$$.fragment,e),pe(q.$$.fragment,e),v=!0)},o(e){me(k.$$.fragment,e),me(C.$$.fragment,e),me(O.$$.fragment,e),me(R.$$.fragment,e),me(q.$$.fragment,e),v=!1},d(i){i&&(y(n),y(t)),Se(k,i),i&&(y(r),y(s)),Se(C),Se(O),Se(R),Se(q),e.button_binding(null),e.form_1_binding(null),a(x)}}}function Pl(e,n,t){const r=G();let s,a,{errors:i,loading:o=!1}=n,{startsAt:l="",endsAt:c="",startedAt:d="",endedAt:u=""}=n;return e.$set=e=>{"errors"in e&&t("errors",i=e.errors),"loading"in e&&t("loading",o=e.loading),"startsAt"in e&&t("startsAt",l=e.startsAt),"endsAt"in e&&t("endsAt",c=e.endsAt),"startedAt"in e&&t("startedAt",d=e.startedAt),"endedAt"in e&&t("endedAt",u=e.endedAt)},{errors:i,loading:o,form:s,saveButton:a,startsAt:l,endsAt:c,startedAt:d,endedAt:u,handleSubmit:()=>{s.checkValidity()?r("submit",{startsAt:l,endsAt:c,startedAt:d,endedAt:u}):Ee.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){Z(e,n)},input0_value_binding:function(e){t("startsAt",l=e)},input1_value_binding:function(e){t("startedAt",d=e)},input2_value_binding:function(e){t("endsAt",c=e)},input3_value_binding:function(e){t("endedAt",u=e)},button_binding:function(e){J[e?"unshift":"push"](()=>{t("saveButton",a=e)})},form_1_binding:function(e){J[e?"unshift":"push"](()=>{t("form",s=e)})}}}class Rl extends Ce{constructor(e){super(),Ie(this,e,Pl,Ll,o,["errors","loading","startsAt","endsAt","startedAt","endedAt"])}}function jl(e){var n,t=new Rl({props:{startsAt:e.localTime(e.$session.startsAt),endsAt:e.localTime(e.$session.endsAt),startedAt:e.localTime(e.$session.startedAt),endedAt:e.localTime(e.$session.endedAt),loading:e.loading,errors:e.errors}});return t.$on("submit",e.save),t.$on("reset",e.reset),{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};(e.localTime||e.$session)&&(r.startsAt=n.localTime(n.$session.startsAt)),(e.localTime||e.$session)&&(r.endsAt=n.localTime(n.$session.endsAt)),(e.localTime||e.$session)&&(r.startedAt=n.localTime(n.$session.startedAt)),(e.localTime||e.$session)&&(r.endedAt=n.localTime(n.$session.endedAt)),e.loading&&(r.loading=n.loading),e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function zl(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,re(()=>r=!1)}let o={$$slots:{default:[jl]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new kn({props:o});return J.push(()=>ke(l,"open",i)),{c(){(n=_("button")).textContent="edit times",t=I(),l.$$.fragment.c(),A(n,"class","button svelte-1ih8yvt"),a=M(n,"click",e.click_handler)},m(e,r){w(e,n,r),w(e,t,r),_e(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.$session||e.loading||e.errors)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||(pe(l.$$.fragment,e),s=!0)},o(e){me(l.$$.fragment,e),s=!1},d(e){e&&(y(n),y(t)),Se(l,e),a()}}}function ql(e,n,t){let r;l(e,Lo,e=>{t("$session",r=e)});let s=!1,a="",i=!1;const o=()=>{t("open",s=!1),t("errors",a="")};return{open:s,errors:a,loading:i,reset:o,save:async({detail:e})=>{t("loading",i=!0),e.startsAt=new Date(e.startsAt).toISOString(),e.endsAt=new Date(e.endsAt).toISOString(),e.startedAt=new Date(e.startedAt).toISOString(),e.endedAt=new Date(e.endedAt).toISOString();try{const n=await Rs.patch(r.id,e),s=ni(new Date(e.startsAt),new Date,{addSuffix:!0});Ee.add({text:`Updated session to ${s} with ${n.group.name} class`,type:"success"}),o()}catch(e){t("errors",a=e),Ee.add({text:"Couldn't save changes to session",type:"danger"})}finally{t("loading",i=!1)}},localTime:e=>Ba(new Date(e),"yyyy-MM-dd'T'HH:mm"),$session:r,click_handler:function(){t("open",s=!0)},modal_open_binding:function(e){t("open",s=e)}}}class Hl extends Ce{constructor(e){super(),Ie(this,e,ql,zl,o,[])}}function Fl(e){var n,t;function r(t){e.lessonselect_lessonId_binding.call(null,t),n=!0,re(()=>n=!1)}let s={};void 0!==e.lessonId&&(s.lessonId=e.lessonId);var a=new Ai({props:s});return J.push(()=>ke(a,"lessonId",r)),{c(){a.$$.fragment.c()},m(e,n){_e(a,e,n),t=!0},p(e,t){var r={};!n&&e.lessonId&&(r.lessonId=t.lessonId),a.$set(r)},i(e){t||(pe(a.$$.fragment,e),t=!0)},o(e){me(a.$$.fragment,e),t=!1},d(e){Se(a,e)}}}function Wl(e,n,t){let r,{id:s}=n;let a;return e.$set=e=>{"id"in e&&t("id",s=e.id)},e.$$.update=(e={lessonId:1})=>{e.lessonId&&(a=(async()=>{if(!r)return;await Ze(Eo,{id:s,lessonId:r})})())},{lessonId:r,id:s,lessonselect_lessonId_binding:function(e){t("lessonId",r=e)}}}class Yl extends Ce{constructor(e){super(),Ie(this,e,Wl,Fl,o,["id"])}}const Bl="\n mutation CreateReport($classSessionId: ID!) {\n   createReport(classSessionId: $classSessionId) {\n     id\n   }\n }";function Ul(n){var t,r;return{c(){(t=_("button")).textContent="Create report",A(t,"class","button svelte-1ih8yvt"),r=M(t,"click",n.create)},m(e,n){w(e,t,n)},p:e,i:e,o:e,d(e){e&&y(t),r()}}}function Gl(e,n,t){let{classSessionId:r}=n;return e.$set=e=>{"classSessionId"in e&&t("classSessionId",r=e.classSessionId)},{classSessionId:r,create:async()=>{await Ze(Bl,{classSessionId:r})}}}class Zl extends Ce{constructor(e){super(),Ie(this,e,Gl,Ul,o,["classSessionId"])}}var Vl=Hn(function(e,n){!function(n){var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:h,table:h,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};function r(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||x.defaults,this.rules=t.normal,this.options.pedantic?this.rules=t.pedantic:this.options.gfm&&(this.rules=t.gfm)}t._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,t._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,t.def=p(t.def).replace("label",t._label).replace("title",t._title).getRegex(),t.bullet=/(?:[*+-]|\d{1,9}\.)/,t.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,t.item=p(t.item,"gm").replace(/bull/g,t.bullet).getRegex(),t.list=p(t.list).replace(/bull/g,t.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+t.def.source+")").getRegex(),t._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",t._comment=/<!--(?!-?>)[\s\S]*?-->/,t.html=p(t.html,"i").replace("comment",t._comment).replace("tag",t._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),t.paragraph=p(t._paragraph).replace("hr",t.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",t._tag).getRegex(),t.blockquote=p(t.blockquote).replace("paragraph",t.paragraph).getRegex(),t.normal=$({},t),t.gfm=$({},t.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),t.pedantic=$({},t.normal,{html:p("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",t._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:h,paragraph:p(t.normal._paragraph).replace("hr",t.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",t.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),r.rules=t,r.lex=function(e,n){return new r(n).lex(e)},r.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},r.prototype.token=function(e,n){var r,s,a,i,o,l,c,u,p,m,f,g,h,$,w,y;for(e=e.replace(/^ +$/gm,"");e;)if((a=this.rules.newline.exec(e))&&(e=e.substring(a[0].length),a[0].length>1&&this.tokens.push({type:"space"})),a=this.rules.code.exec(e)){var x=this.tokens[this.tokens.length-1];e=e.substring(a[0].length),x&&"paragraph"===x.type?x.text+="\n"+a[0].trimRight():(a=a[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?a:b(a,"\n")}))}else if(a=this.rules.fences.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"code",lang:a[2]?a[2].trim():a[2],text:a[3]||""});else if(a=this.rules.heading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:a[1].length,text:a[2]});else if((a=this.rules.nptable.exec(e))&&(l={type:"table",header:v(a[1].replace(/^ *| *\| *$/g,"")),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3]?a[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(a[0].length),f=0;f<l.align.length;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(f=0;f<l.cells.length;f++)l.cells[f]=v(l.cells[f],l.header.length);this.tokens.push(l)}else if(a=this.rules.hr.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"hr"});else if(a=this.rules.blockquote.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"blockquote_start"}),a=a[0].replace(/^ *> ?/gm,""),this.token(a,n),this.tokens.push({type:"blockquote_end"});else if(a=this.rules.list.exec(e)){for(e=e.substring(a[0].length),c={type:"list_start",ordered:$=(i=a[2]).length>1,start:$?+i:"",loose:!1},this.tokens.push(c),u=[],r=!1,h=(a=a[0].match(this.rules.item)).length,f=0;f<h;f++)m=(l=a[f]).length,~(l=l.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(m-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+m+"}","gm"),"")),f!==h-1&&(o=t.bullet.exec(a[f+1])[0],(i.length>1?1===o.length:o.length>1||this.options.smartLists&&o!==i)&&(e=a.slice(f+1).join("\n")+e,f=h-1)),s=r||/\n\n(?!\s*$)/.test(l),f!==h-1&&(r="\n"===l.charAt(l.length-1),s||(s=r)),s&&(c.loose=!0),y=void 0,(w=/^\[[ xX]\] /.test(l))&&(y=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),p={type:"list_item_start",task:w,checked:y,loose:s},u.push(p),this.tokens.push(p),this.token(l,!1),this.tokens.push({type:"list_item_end"});if(c.loose)for(h=u.length,f=0;f<h;f++)u[f].loose=!0;this.tokens.push({type:"list_end"})}else if(a=this.rules.html.exec(e))e=e.substring(a[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===a[1]||"script"===a[1]||"style"===a[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):d(a[0]):a[0]});else if(n&&(a=this.rules.def.exec(e)))e=e.substring(a[0].length),a[3]&&(a[3]=a[3].substring(1,a[3].length-1)),g=a[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[g]||(this.tokens.links[g]={href:a[2],title:a[3]});else if((a=this.rules.table.exec(e))&&(l={type:"table",header:v(a[1].replace(/^ *| *\| *$/g,"")),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3]?a[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(a[0].length),f=0;f<l.align.length;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(f=0;f<l.cells.length;f++)l.cells[f]=v(l.cells[f].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(a=this.rules.lheading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:"="===a[2].charAt(0)?1:2,text:a[1]});else if(n&&(a=this.rules.paragraph.exec(e)))e=e.substring(a[0].length),this.tokens.push({type:"paragraph",text:"\n"===a[1].charAt(a[1].length-1)?a[1].slice(0,-1):a[1]});else if(a=this.rules.text.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"text",text:a[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var s={escape:/^\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:h,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:h,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function a(e,n){if(this.options=n||x.defaults,this.links=e,this.rules=s.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=s.pedantic:this.options.gfm&&(this.options.breaks?this.rules=s.breaks:this.rules=s.gfm)}function i(e){this.options=e||x.defaults}function o(){}function l(e){this.tokens=[],this.token=null,this.options=e||x.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new c}function c(){this.seen={}}function d(e,n){if(n){if(d.escapeTest.test(e))return e.replace(d.escapeReplace,function(e){return d.replacements[e]})}else if(d.escapeTestNoEncode.test(e))return e.replace(d.escapeReplaceNoEncode,function(e){return d.replacements[e]});return e}function u(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,n){return"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""})}function p(e,n){return e=e.source||e,n=n||"",{replace:function(n,t){return t=(t=t.source||t).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(n,t),this},getRegex:function(){return new RegExp(e,n)}}}function m(e,n,t){if(e){try{var r=decodeURIComponent(u(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}n&&!g.test(t)&&(t=function(e,n){f[" "+e]||(/^[^:]+:\/*[^\/]*$/.test(e)?f[" "+e]=e+"/":f[" "+e]=b(e,"/",!0));return e=f[" "+e],"//"===n.slice(0,2)?e.replace(/:[\s\S]*/,":")+n:"/"===n.charAt(0)?e.replace(/(:\/*[^\/]*)[\s\S]*/,"$1")+n:e+n}(n,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch(e){return null}return t}s._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",s.em=p(s.em).replace(/punctuation/g,s._punctuation).getRegex(),s._escapes=/\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/g,s._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,s._email=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,s.autolink=p(s.autolink).replace("scheme",s._scheme).replace("email",s._email).getRegex(),s._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,s.tag=p(s.tag).replace("comment",t._comment).replace("attribute",s._attribute).getRegex(),s._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,s._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,s._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,s.link=p(s.link).replace("label",s._label).replace("href",s._href).replace("title",s._title).getRegex(),s.reflink=p(s.reflink).replace("label",s._label).getRegex(),s.normal=$({},s),s.pedantic=$({},s.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:p(/^!?\[(label)\]\((.*?)\)/).replace("label",s._label).getRegex(),reflink:p(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",s._label).getRegex()}),s.gfm=$({},s.normal,{escape:p(s.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),s.gfm.url=p(s.gfm.url,"i").replace("email",s.gfm._extended_email).getRegex(),s.breaks=$({},s.gfm,{br:p(s.br).replace("{2,}","*").getRegex(),text:p(s.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),a.rules=s,a.output=function(e,n,t){return new a(n,t).output(e)},a.prototype.output=function(e){for(var n,t,r,s,i,o,l="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),l+=d(i[1]);else if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.inRawBlock=!1),e=e.substring(i[0].length),l+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):d(i[0]):i[0];else if(i=this.rules.link.exec(e)){var c=w(i[2],"()");if(c>-1){var u=4+i[1].length+c;i[2]=i[2].substring(0,c),i[0]=i[0].substring(0,u).trim(),i[3]=""}e=e.substring(i[0].length),this.inLink=!0,r=i[2],this.options.pedantic?(n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=n[1],s=n[3]):s="":s=i[3]?i[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),l+=this.outputLink(i,{href:a.escapes(r),title:a.escapes(s)}),this.inLink=!1}else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),n=(i[2]||i[1]).replace(/\s+/g," "),!(n=this.links[n.toLowerCase()])||!n.href){l+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,l+=this.outputLink(i,n),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),l+=this.renderer.strong(this.output(i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),l+=this.renderer.em(this.output(i[6]||i[5]||i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),l+=this.renderer.codespan(d(i[2].trim(),!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),l+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),l+=this.renderer.del(this.output(i[1]));else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),r="@"===i[2]?"mailto:"+(t=d(this.mangle(i[1]))):t=d(i[1]),l+=this.renderer.link(r,null,t);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.inRawBlock?l+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):d(i[0]):i[0]):l+=this.renderer.text(d(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===i[2])r="mailto:"+(t=d(i[0]));else{do{o=i[0],i[0]=this.rules._backpedal.exec(i[0])[0]}while(o!==i[0]);t=d(i[0]),r="www."===i[1]?"http://"+t:t}e=e.substring(i[0].length),l+=this.renderer.link(r,null,t)}return l},a.escapes=function(e){return e?e.replace(a.rules._escapes,"$1"):e},a.prototype.outputLink=function(e,n){var t=n.href,r=n.title?d(n.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(t,r,this.output(e[1])):this.renderer.image(t,r,d(e[1]))},a.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},a.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var n,t="",r=e.length,s=0;s<r;s++)n=e.charCodeAt(s),Math.random()>.5&&(n="x"+n.toString(16)),t+="&#"+n+";";return t},i.prototype.code=function(e,n,t){var r=(n||"").match(/\S*/)[0];if(this.options.highlight){var s=this.options.highlight(e,r);null!=s&&s!==e&&(t=!0,e=s)}return r?'<pre><code class="'+this.options.langPrefix+d(r,!0)+'">'+(t?e:d(e,!0))+"</code></pre>\n":"<pre><code>"+(t?e:d(e,!0))+"</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.html=function(e){return e},i.prototype.heading=function(e,n,t,r){return this.options.headerIds?"<h"+n+' id="'+this.options.headerPrefix+r.slug(t)+'">'+e+"</h"+n+">\n":"<h"+n+">"+e+"</h"+n+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,n,t){var r=n?"ol":"ul";return"<"+r+(n&&1!==t?' start="'+t+'"':"")+">\n"+e+"</"+r+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,n){return n&&(n="<tbody>"+n+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+n+"</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,n){var t=n.header?"th":"td";return(n.align?"<"+t+' align="'+n.align+'">':"<"+t+">")+e+"</"+t+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,n,t){if(null===(e=m(this.options.sanitize,this.options.baseUrl,e)))return t;var r='<a href="'+d(e)+'"';return n&&(r+=' title="'+n+'"'),r+=">"+t+"</a>"},i.prototype.image=function(e,n,t){if(null===(e=m(this.options.sanitize,this.options.baseUrl,e)))return t;var r='<img src="'+e+'" alt="'+t+'"';return n&&(r+=' title="'+n+'"'),r+=this.options.xhtml?"/>":">"},i.prototype.text=function(e){return e},o.prototype.strong=o.prototype.em=o.prototype.codespan=o.prototype.del=o.prototype.text=function(e){return e},o.prototype.link=o.prototype.image=function(e,n,t){return""+t},o.prototype.br=function(){return""},l.parse=function(e,n){return new l(n).parse(e)},l.prototype.parse=function(e){this.inline=new a(e.links,this.options),this.inlineText=new a(e.links,$({},this.options,{renderer:new o})),this.tokens=e.reverse();for(var n="";this.next();)n+=this.tok();return n},l.prototype.next=function(){return this.token=this.tokens.pop(),this.token},l.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},l.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},l.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,u(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,n,t,r,s="",a="";for(t="",e=0;e<this.token.header.length;e++)t+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(s+=this.renderer.tablerow(t),e=0;e<this.token.cells.length;e++){for(n=this.token.cells[e],t="",r=0;r<n.length;r++)t+=this.renderer.tablecell(this.inline.output(n[r]),{header:!1,align:this.token.align[r]});a+=this.renderer.tablerow(t)}return this.renderer.table(s,a);case"blockquote_start":for(a="";"blockquote_end"!==this.next().type;)a+=this.tok();return this.renderer.blockquote(a);case"list_start":a="";for(var i=this.token.ordered,o=this.token.start;"list_end"!==this.next().type;)a+=this.tok();return this.renderer.list(a,i,o);case"list_item_start":a="";var l=this.token.loose,c=this.token.checked,d=this.token.task;for(this.token.task&&(a+=this.renderer.checkbox(c));"list_item_end"!==this.next().type;)a+=l||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(a,d,c);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var p='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(p);console.log(p)}},c.prototype.slug=function(e){var n=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,.\/:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(n)){var t=n;do{this.seen[t]++,n=t+"-"+this.seen[t]}while(this.seen.hasOwnProperty(n))}return this.seen[n]=0,n},d.escapeTest=/[&<>"']/,d.escapeReplace=/[&<>"']/g,d.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},d.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,d.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var f={},g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function h(){}function $(e){for(var n,t,r=1;r<arguments.length;r++)for(t in n=arguments[r])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}function v(e,n){var t=e.replace(/\|/g,function(e,n,t){for(var r=!1,s=n;--s>=0&&"\\"===t[s];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(t.length>n)t.splice(n);else for(;t.length<n;)t.push("");for(;r<t.length;r++)t[r]=t[r].trim().replace(/\\\|/g,"|");return t}function b(e,n,t){if(0===e.length)return"";for(var r=0;r<e.length;){var s=e.charAt(e.length-r-1);if(s!==n||t){if(s===n||!t)break;r++}else r++}return e.substr(0,e.length-r)}function w(e,n){if(-1===e.indexOf(n[1]))return-1;for(var t=0,r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===n[0])t++;else if(e[r]===n[1]&&--t<0)return r;return-1}function y(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function x(e,n,t){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(t||"function"==typeof n){t||(t=n,n=null),y(n=$({},x.defaults,n||{}));var s,a,i=n.highlight,o=0;try{s=r.lex(e,n)}catch(e){return t(e)}a=s.length;var c=function(e){if(e)return n.highlight=i,t(e);var r;try{r=l.parse(s,n)}catch(n){e=n}return n.highlight=i,e?t(e):t(null,r)};if(!i||i.length<3)return c();if(delete n.highlight,!a)return c();for(;o<s.length;o++)!function(e){"code"!==e.type?--a||c():i(e.text,e.lang,function(n,t){return n?c(n):null==t||t===e.text?--a||c():(e.text=t,e.escaped=!0,void(--a||c()))})}(s[o])}else try{return n&&(n=$({},x.defaults,n)),y(n),l.parse(r.lex(e,n),n)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(n||x.defaults).silent)return"<p>An error occurred:</p><pre>"+d(e.message+"",!0)+"</pre>";throw e}}h.exec=h,x.options=x.setOptions=function(e){return $(x.defaults,e),x},x.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new i,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}},x.defaults=x.getDefaults(),x.Parser=l,x.parser=l.parse,x.Renderer=i,x.TextRenderer=o,x.Lexer=r,x.lexer=r.lex,x.InlineLexer=a,x.inlineLexer=a.output,x.Slugger=c,x.parse=x,e.exports=x}()});function Jl(e){var n,t;return{c(){(n=_("button")).innerHTML='<i class="fas fa-edit"></i>Edit',A(n,"class","button"),t=M(n,"click",e.toggleEdit)},m(e,t){w(e,n,t)},d(e){e&&y(n),t()}}}function Xl(e){var n,t;return{c(){(n=_("button")).innerHTML='<i class="fas fa-eye"></i>Preview',A(n,"class","button"),t=M(n,"click",e.toggleEdit)},m(e,t){w(e,n,t)},d(e){e&&y(n),t()}}}function Ql(e){var n,t,r,s;return{c(){(n=_("button")).innerHTML='<i class="fas fa-history"></i>Discard changes',t=I(),(r=_("button")).innerHTML='<i class="fas fa-save"></i>Save changes',A(n,"class","button is-danger"),A(r,"class","button is-primary"),P(r,"is-loading",e.loading),s=[M(n,"click",e.discardChanges),M(r,"click",e.save)]},m(e,s){w(e,n,s),w(e,t,s),w(e,r,s)},p(e,n){e.loading&&P(r,"is-loading",n.loading)},d(e){e&&(y(n),y(t),y(r)),a(s)}}}function Kl(e){var n,t,r=Vl(e.text,{breaks:!0});return{c(){n=_("noscript"),t=_("noscript")},m(e,s){w(e,n,s),n.insertAdjacentHTML("afterend",r),w(e,t,s)},p(e,s){e.text&&r!==(r=Vl(s.text,{breaks:!0}))&&(x(n,t),n.insertAdjacentHTML("afterend",r))},d(e){e&&(x(n,t),y(n),y(t))}}}function ec(e){var n,t;return{c(){A(n=_("textarea"),"class","textarea svelte-18mnnh3"),t=[M(n,"input",e.textarea_input_handler),M(n,"input",e.inputHandler)]},m(t,r){w(t,n,r),n.value=e.text,e.textarea_binding(n)},p(e,t){e.text&&(n.value=t.text)},d(r){r&&y(n),e.textarea_binding(null),a(t)}}}function nc(n){var t,r,s,a;function i(e){return e.edit?Xl:Jl}var o=i(n),l=o(n),c=n.text!==n.original&&Ql(n);function d(e){return e.edit?ec:Kl}var u=d(n),p=u(n);return{c(){t=_("div"),l.c(),r=I(),c&&c.c(),s=I(),p.c(),a=C(),A(t,"class","buttons")},m(e,n){w(e,t,n),l.m(t,null),b(t,r),c&&c.m(t,null),w(e,s,n),p.m(e,n),w(e,a,n)},p(e,n){o!==(o=i(n))&&(l.d(1),(l=o(n))&&(l.c(),l.m(t,r))),n.text!==n.original?c?c.p(e,n):((c=Ql(n)).c(),c.m(t,null)):c&&(c.d(1),c=null),u===(u=d(n))&&p?p.p(e,n):(p.d(1),(p=u(n))&&(p.c(),p.m(a.parentNode,a)))},i:e,o:e,d(e){e&&y(t),l.d(),c&&c.d(),e&&y(s),p.d(e),e&&y(a)}}}function tc(e,n,t){let r;l(e,Lo,e=>{t("$session",r=e)});let s,{text:a=""}=n,i=a&&a.slice(0),{key:o=""}=n,c=!0,d=!1,u=!1,p="";const m=e=>{s.style.height="auto",t("input",s),s.style.height=s.scrollHeight+"px",t("input",s)};return e.$set=e=>{"text"in e&&t("text",a=e.text),"key"in e&&t("key",o=e.key)},e.$$.update=(e={alreadySet:1,input:1})=>{(e.alreadySet||e.input)&&!d&&s&&(m(),t("alreadySet",d=!0))},{text:a,original:i,key:o,input:s,edit:c,loading:u,inputHandler:m,save:async()=>{t("loading",u=!0);const e={report:{update:{[o]:a}}};try{await Rs.patch(r.id,e),Ee.add({text:"Successfuly saved changes",type:"success"}),p="",t("original",i=a.slice(0))}catch(e){p=e,Ee.add({text:"Couldn't save changes",type:"danger"})}finally{t("loading",u=!1)}},toggleEdit:()=>{t("edit",c=!c),c&&t("alreadySet",d=!1)},discardChanges:()=>{t("text",a=i.slice(0))},textarea_input_handler:function(){a=this.value,t("text",a)},textarea_binding:function(e){J[e?"unshift":"push"](()=>{t("input",s=e)})}}}class rc extends Ce{constructor(e){super(),Ie(this,e,tc,nc,o,["text","key"])}}function sc(n){var t,r;return{c(){A(t=_("button"),"class","delete"),r=M(t,"click",n.remove)},m(e,n){w(e,t,n)},p:e,i:e,o:e,d(e){e&&y(t),r()}}}function ac(e,n,t){let{wordId:r,classSessionId:s}=n;return e.$set=e=>{"wordId"in e&&t("wordId",r=e.wordId),"classSessionId"in e&&t("classSessionId",s=e.classSessionId)},{wordId:r,classSessionId:s,remove:async()=>{const e={report:{update:{words:{disconnect:{id:r}}}}};try{await Rs.patch(s,e),Ee.add({text:"Removed word from report",type:"success"})}catch(e){console.error(e)}}}}class ic extends Ce{constructor(e){super(),Ie(this,e,ac,sc,o,["wordId","classSessionId"])}}const oc="\n  fragment WordFields on Word {\n    id\n    english\n    chinese\n    audio\n    lessons {\n      id\n      name\n    }\n    tags {\n      id\n      name\n    }\n  }",lc=`\n query Words ($orderBy: WordOrderByInput, $where: WordWhereInput){\n   words (orderBy: $orderBy, where:$where){\n     ...WordFields\n   }\n }\n ${oc}`,cc=`\nquery Word ($id: ID!){\n  word (id: $id){\n    ...WordFields\n  }\n}\n${oc}`,dc=`\n mutation CreateWord ($input: WordCreateInput!){\n   createWord (input: $input) {\n     ...WordFields\n   }\n }\n ${oc}`,uc=`\nmutation UpdateWord ($input: WordUpdateInput!, $id: ID!){\n  updateWord (input: $input, id:$id) {\n    ...WordFields\n  }\n}\n${oc}`,pc=(()=>{const{subscribe:e,set:n,update:t}=Ae();return{subscribe:e,get:async(e={})=>{const t=await Ze(lc,{orderBy:e.orderBy,where:e.where});n(t.words)},create:async e=>{const n=await Ze(dc,{input:e});t(e=>e?[...e,n.createWord]:[n.createWord])},remove:async e=>{await Ze("\nmutation DeleteWord ($id: ID!){\n  deleteWord (id:$id) {\n    id\n  }\n}",{id:e}),t(n=>n&&n.filter(n=>n.id!==e)),mc.update(n=>n&&n.id===e?null:n)},patch:async({input:e,id:n})=>{const r=await Ze(uc,{id:n,input:e});t(e=>e?e.map(e=>e.id!==n?e:r.updateWord):[r.updateWord]),mc.update(e=>e&&e.id===n?r.updateWord:e)}}})(),mc=(()=>{const{subscribe:e,set:n,update:t}=Ae();return{subscribe:e,update:t,patch:pc.patch,get:async e=>{const t=await Ze(cc,{id:e});null===t.word&&nn(`/not-found/word/${e}`),n(t.word)}}})();function fc(n){var t,r,s,a,i,o,l,c,d,u,p=n.word.english,m=n.word.chinese;return{c(){t=_("li"),r=_("label"),s=_("i"),i=I(),o=D(p),l=D(" ("),c=D(m),d=D(")"),A(s,"class",a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12"),A(r,"class","checkbox"),A(t,"class","svelte-12hcy12"),u=M(t,"click",n.toggle)},m(e,n){w(e,t,n),b(t,r),b(r,s),b(r,i),b(r,o),b(r,l),b(r,c),b(r,d)},p(e,n){e.isAdded&&a!==(a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12")&&A(s,"class",a),e.word&&p!==(p=n.word.english)&&N(o,p),e.word&&m!==(m=n.word.chinese)&&N(c,m)},i:e,o:e,d(e){e&&y(t),u()}}}function gc(e,n,t){let r;l(e,Lo,e=>{t("$session",r=e)});let{word:s}=n;let a;return e.$set=e=>{"word"in e&&t("word",s=e.word)},e.$$.update=(e={$session:1,word:1})=>{(e.$session||e.word)&&t("isAdded",a=!!r.report.words.find(e=>e.id===s.id))},{word:s,toggle:async()=>{const e={report:{update:{}}};let n="Removed word session vocabulary";a?e.report.update.words={disconnect:{id:s.id}}:(n="Added word to session vocabulary",e.report.update.words={connect:{id:s.id}});try{await Rs.patch(r.id,e),Ee.add({text:n,type:"success"})}catch(e){console.error(e)}},isAdded:a}}class hc extends Ce{constructor(e){super(),Ie(this,e,gc,fc,o,["word"])}}function $c(e,n,t){const r=Object.create(e);return r.word=n[t],r}function vc(e){var n,t,r,s,a,i,o=e.$words.length,l=[],c=new Map,d=e.$words;const u=e=>e.word.id;for(var p=0;p<d.length;p+=1){let n=$c(e,d,p),t=u(n);c.set(t,l[p]=bc(t,n))}return{c(){for(n=_("p"),t=D(o),r=D(" matches:"),s=I(),p=0;p<l.length;p+=1)l[p].c();a=C()},m(e,o){for(w(e,n,o),b(n,t),b(n,r),w(e,s,o),p=0;p<l.length;p+=1)l[p].m(e,o);w(e,a,o),i=!0},p(e,n){i&&!e.$words||o===(o=n.$words.length)||N(t,o);const r=n.$words;de(),l=ye(l,e,u,1,n,r,c,a.parentNode,we,bc,a,$c),ue()},i(e){if(!i){for(var n=0;n<d.length;n+=1)pe(l[n]);i=!0}},o(e){for(p=0;p<l.length;p+=1)me(l[p]);i=!1},d(e){for(e&&(y(n),y(s)),p=0;p<l.length;p+=1)l[p].d(e);e&&y(a)}}}function bc(e,n){var t,r,s=new hc({props:{word:n.word}});return{key:e,first:null,c(){t=C(),s.$$.fragment.c(),this.first=t},m(e,n){w(e,t,n),_e(s,e,n),r=!0},p(e,n){var t={};e.$words&&(t.word=n.word),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&y(t),Se(s,e)}}}function wc(e){var n,t,r,s,a,i,o,l,c,d,u=new _i({props:{store:pc,searchParams:["english","chinese"]}}),p=new hn({props:{errors:e.errors}}),m=e.$words&&vc(e);return{c(){(n=_("h2")).textContent="Add word to session vocabulary",t=I(),u.$$.fragment.c(),r=I(),p.$$.fragment.c(),s=I(),a=_("div"),m&&m.c(),i=I(),o=_("div"),(l=_("button")).textContent="Exit",A(n,"class","title is-4"),A(a,"class","results"),A(l,"class","button"),A(o,"class","buttons svelte-1yabmim"),d=M(l,"click",e.click_handler_1)},m(e,d){w(e,n,d),w(e,t,d),_e(u,e,d),w(e,r,d),_e(p,e,d),w(e,s,d),w(e,a,d),m&&m.m(a,null),w(e,i,d),w(e,o,d),b(o,l),c=!0},p(e,n){var t={};e.words&&(t.store=pc),u.$set(t);var r={};e.errors&&(r.errors=n.errors),p.$set(r),n.$words?m?(m.p(e,n),pe(m,1)):((m=vc(n)).c(),pe(m,1),m.m(a,null)):m&&(de(),me(m,1,1,()=>{m=null}),ue())},i(e){c||(pe(u.$$.fragment,e),pe(p.$$.fragment,e),pe(m),c=!0)},o(e){me(u.$$.fragment,e),me(p.$$.fragment,e),me(m),c=!1},d(e){e&&(y(n),y(t)),Se(u,e),e&&y(r),Se(p,e),e&&(y(s),y(a)),m&&m.d(),e&&(y(i),y(o)),d()}}}function yc(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,re(()=>r=!1)}let o={$$slots:{default:[wc]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new kn({props:o});return J.push(()=>ke(l,"open",i)),{c(){(n=_("button")).innerHTML='<i class="fas fa-plus"></i>add words',t=I(),l.$$.fragment.c(),A(n,"class","button add svelte-1yabmim"),a=M(n,"click",e.click_handler)},m(e,r){w(e,n,r),w(e,t,r),_e(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.$words||e.errors)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||(pe(l.$$.fragment,e),s=!0)},o(e){me(l.$$.fragment,e),s=!1},d(e){e&&(y(n),y(t)),Se(l,e),a()}}}function xc(e,n,t){let r;l(e,pc,e=>{t("$words",r=e)});let s=!1,a="";return B(async()=>{try{await pc.get()}catch(e){t("errors",a=e)}}),{open:s,errors:a,$words:r,click_handler:function(){t("open",s=!0)},click_handler_1:function(){t("open",s=!1)},modal_open_binding:function(e){t("open",s=e)}}}class kc extends Ce{constructor(e){super(),Ie(this,e,xc,yc,o,[])}}function _c(n){var t,r;return{c(){A(t=_("button"),"class","delete"),r=M(t,"click",n.remove)},m(e,n){w(e,t,n)},p:e,i:e,o:e,d(e){e&&y(t),r()}}}function Sc(e,n,t){let{materialId:r,classSessionId:s}=n;return e.$set=e=>{"materialId"in e&&t("materialId",r=e.materialId),"classSessionId"in e&&t("classSessionId",s=e.classSessionId)},{materialId:r,classSessionId:s,remove:async()=>{const e={report:{update:{materials:{disconnect:{id:r}}}}};try{await Rs.patch(s,e),Ee.add({text:"Removed material from session report",type:"success"})}catch(e){console.error(e)}}}}class Dc extends Ce{constructor(e){super(),Ie(this,e,Sc,_c,o,["materialId","classSessionId"])}}const Ic="\n  fragment MaterialFields on Material {\n    id\n    type\n    url\n    title\n    notes\n    tags {\n       id\n       name\n    }\n  }",Cc=`\n  query Materials($orderBy: MaterialOrderByInput, $where: MaterialWhereInput) {\n    materials (orderBy: $orderBy, where:$where) {\n      ...MaterialFields\n    }\n  }\n  ${Ic}`,Mc=`\n  query Material($id: ID!){\n    material(id: $id) {\n      ...MaterialFields\n    }\n  }\n  ${Ic}`,Tc=`\n mutation CreateMaterial($input: MaterialCreateInput!) {\n   createMaterial(input: $input) {\n     ...MaterialFields\n   }\n }\n ${Ic}`,Ac=`\nmutation UpdateMaterial($input: MaterialUpdateInput!, $id:ID!) {\n  updateMaterial(input: $input, id: $id) {\n    ...MaterialFields\n  }\n}\n${Ic}`,Nc=(()=>{const{subscribe:e,set:n,update:t}=Ae();return{subscribe:e,update:t,get:async(e={})=>{const{orderBy:t,where:r}=e,s=await Ze(Cc,{orderBy:t,where:r});n(s.materials)},create:async e=>{const n=await Ze(Tc,{input:e});t(e=>e?[...e,n.createMaterial]:[n.createMaterial])},remove:async e=>{await Ze("\nmutation DeleteMaterial($id:ID!) {\n  deleteMaterial(id: $id) {\n    id\n  }\n}",{id:e}),t(n=>n&&n.filter(n=>n.id!==e)),Ec.update(n=>n&&n.id===e?null:n)},patch:async({input:e,id:n})=>{const r=await Ze(Ac,{id:n,input:e});t(e=>e?e.map(e=>e.id!==n?e:r.updateMaterial):[r.updateMaterial]),Ec.update(e=>e&&e.id===n?r.updateMaterial:e)}}})(),Ec=(()=>{const{subscribe:e,set:n,update:t}=Ae();return{subscribe:e,update:t,patch:Nc.patch,get:async e=>{const t=await Ze(Mc,{id:e});n(t.material)}}})();function Oc(n){var t,r,s,a,i,o,l,c,d,u=n.material.title,p=n.material.type;return{c(){t=_("li"),r=_("label"),s=_("i"),i=I(),o=D(u),l=D(" - "),c=D(p),A(s,"class",a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12"),A(r,"class","checkbox"),A(t,"class","svelte-12hcy12"),d=M(t,"click",n.toggle)},m(e,n){w(e,t,n),b(t,r),b(r,s),b(r,i),b(r,o),b(r,l),b(r,c)},p(e,n){e.isAdded&&a!==(a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12")&&A(s,"class",a),e.material&&u!==(u=n.material.title)&&N(o,u),e.material&&p!==(p=n.material.type)&&N(c,p)},i:e,o:e,d(e){e&&y(t),d()}}}function Lc(e,n,t){let r;l(e,Lo,e=>{t("$session",r=e)});let{material:s}=n;let a;return e.$set=e=>{"material"in e&&t("material",s=e.material)},e.$$.update=(e={$session:1,material:1})=>{(e.$session||e.material)&&t("isAdded",a=!!r.report.materials.find(e=>e.id===s.id))},{material:s,toggle:async()=>{const e={report:{update:{}}};let n="Removed material from report";a?e.report.update.materials={disconnect:{id:s.id}}:(n="Added material to report",e.report.update.materials={connect:{id:s.id}});try{await Rs.patch(r.id,e),Ee.add({text:n,type:"success"})}catch(e){console.error(e)}},isAdded:a}}class Pc extends Ce{constructor(e){super(),Ie(this,e,Lc,Oc,o,["material"])}}function Rc(e,n,t){const r=Object.create(e);return r.material=n[t],r}function jc(e){var n,t,r,s,a,i,o=e.$materials.length,l=[],c=new Map,d=e.$materials;const u=e=>e.material.id;for(var p=0;p<d.length;p+=1){let n=Rc(e,d,p),t=u(n);c.set(t,l[p]=zc(t,n))}return{c(){for(n=_("p"),t=D(o),r=D(" matches:"),s=I(),p=0;p<l.length;p+=1)l[p].c();a=C()},m(e,o){for(w(e,n,o),b(n,t),b(n,r),w(e,s,o),p=0;p<l.length;p+=1)l[p].m(e,o);w(e,a,o),i=!0},p(e,n){i&&!e.$materials||o===(o=n.$materials.length)||N(t,o);const r=n.$materials;de(),l=ye(l,e,u,1,n,r,c,a.parentNode,we,zc,a,Rc),ue()},i(e){if(!i){for(var n=0;n<d.length;n+=1)pe(l[n]);i=!0}},o(e){for(p=0;p<l.length;p+=1)me(l[p]);i=!1},d(e){for(e&&(y(n),y(s)),p=0;p<l.length;p+=1)l[p].d(e);e&&y(a)}}}function zc(e,n){var t,r,s=new Pc({props:{material:n.material}});return{key:e,first:null,c(){t=C(),s.$$.fragment.c(),this.first=t},m(e,n){w(e,t,n),_e(s,e,n),r=!0},p(e,n){var t={};e.$materials&&(t.material=n.material),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&y(t),Se(s,e)}}}function qc(e){var n,t,r,s,a,i,o,l,c,d,u=new _i({props:{store:Nc,searchParams:"title"}}),p=new hn({props:{errors:e.errors}}),m=e.$materials&&jc(e);return{c(){(n=_("h2")).textContent="Add material to session report",t=I(),u.$$.fragment.c(),r=I(),p.$$.fragment.c(),s=I(),a=_("div"),m&&m.c(),i=I(),o=_("div"),(l=_("button")).textContent="Exit",A(n,"class","title is-4"),A(a,"class","results"),A(l,"class","button"),A(o,"class","buttons svelte-1yabmim"),d=M(l,"click",e.click_handler_1)},m(e,d){w(e,n,d),w(e,t,d),_e(u,e,d),w(e,r,d),_e(p,e,d),w(e,s,d),w(e,a,d),m&&m.m(a,null),w(e,i,d),w(e,o,d),b(o,l),c=!0},p(e,n){var t={};e.materials&&(t.store=Nc),u.$set(t);var r={};e.errors&&(r.errors=n.errors),p.$set(r),n.$materials?m?(m.p(e,n),pe(m,1)):((m=jc(n)).c(),pe(m,1),m.m(a,null)):m&&(de(),me(m,1,1,()=>{m=null}),ue())},i(e){c||(pe(u.$$.fragment,e),pe(p.$$.fragment,e),pe(m),c=!0)},o(e){me(u.$$.fragment,e),me(p.$$.fragment,e),me(m),c=!1},d(e){e&&(y(n),y(t)),Se(u,e),e&&y(r),Se(p,e),e&&(y(s),y(a)),m&&m.d(),e&&(y(i),y(o)),d()}}}function Hc(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,re(()=>r=!1)}let o={$$slots:{default:[qc]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new kn({props:o});return J.push(()=>ke(l,"open",i)),{c(){(n=_("button")).innerHTML='<i class="fas fa-plus"></i>add material',t=I(),l.$$.fragment.c(),A(n,"class","button add svelte-1yabmim"),a=M(n,"click",e.click_handler)},m(e,r){w(e,n,r),w(e,t,r),_e(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.$materials||e.errors)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||(pe(l.$$.fragment,e),s=!0)},o(e){me(l.$$.fragment,e),s=!1},d(e){e&&(y(n),y(t)),Se(l,e),a()}}}function Fc(e,n,t){let r;l(e,Nc,e=>{t("$materials",r=e)});let s=!1,a="";return B(async()=>{try{await Nc.get()}catch(e){t("errors",a=e)}}),{open:s,errors:a,$materials:r,click_handler:function(){t("open",s=!0)},click_handler_1:function(){t("open",s=!1)},modal_open_binding:function(e){t("open",s=e)}}}class Wc extends Ce{constructor(e){super(),Ie(this,e,Fc,Hc,o,[])}}function Yc(e,n,t){const r=Object.create(e);return r.material=n[t],r}function Bc(e,n,t){const r=Object.create(e);return r.word=n[t],r}function Uc(e){var n,t,r=[],s=new Map,a=e.report.words;const i=e=>e.word.id;for(var o=0;o<a.length;o+=1){let n=Bc(e,a,o),t=i(n);s.set(t,r[o]=Gc(t,n))}return{c(){for(n=_("ul"),o=0;o<r.length;o+=1)r[o].c();A(n,"class","words-list")},m(e,s){for(w(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=t.report.words;de(),r=ye(r,e,i,1,t,a,s,n,we,Gc,null,Bc),ue()},i(e){if(!t){for(var n=0;n<a.length;n+=1)pe(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)me(r[o]);t=!1},d(e){for(e&&y(n),o=0;o<r.length;o+=1)r[o].d()}}}function Gc(e,n){var t,r,s,a,i,o,l,c,d,u,p=n.word.english,m=n.word.chinese,f=new ic({props:{wordId:n.word.id,classSessionId:n.classSessionId}});return{key:e,first:null,c(){t=_("li"),r=_("a"),s=D(p),a=D(" ("),i=D(m),o=D(")"),c=I(),f.$$.fragment.c(),d=I(),A(r,"href",l="#/word/"+n.word.id),this.first=t},m(e,n){w(e,t,n),b(t,r),b(r,s),b(r,a),b(r,i),b(r,o),b(t,c),_e(f,t,null),b(t,d),u=!0},p(e,n){u&&!e.report||p===(p=n.word.english)||N(s,p),u&&!e.report||m===(m=n.word.chinese)||N(i,m),u&&!e.report||l===(l="#/word/"+n.word.id)||A(r,"href",l);var t={};e.report&&(t.wordId=n.word.id),e.classSessionId&&(t.classSessionId=n.classSessionId),f.$set(t)},i(e){u||(pe(f.$$.fragment,e),u=!0)},o(e){me(f.$$.fragment,e),u=!1},d(e){e&&y(t),Se(f)}}}function Zc(e){var n,t,r=[],s=new Map,a=e.report.materials;const i=e=>e.material.id;for(var o=0;o<a.length;o+=1){let n=Yc(e,a,o),t=i(n);s.set(t,r[o]=Vc(t,n))}return{c(){for(n=_("ul"),o=0;o<r.length;o+=1)r[o].c();A(n,"class","materials-list")},m(e,s){for(w(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=t.report.materials;de(),r=ye(r,e,i,1,t,a,s,n,we,Vc,null,Yc),ue()},i(e){if(!t){for(var n=0;n<a.length;n+=1)pe(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)me(r[o]);t=!1},d(e){for(e&&y(n),o=0;o<r.length;o+=1)r[o].d()}}}function Vc(e,n){var t,r,s,a,i,o,l,c,d,u=n.material.title,p=n.material.type,m=new Dc({props:{materialId:n.material.id,classSessionId:n.classSessionId}});return{key:e,first:null,c(){t=_("li"),r=_("a"),s=D(u),i=D("\n         - "),o=D(p),l=I(),m.$$.fragment.c(),c=I(),A(r,"href",a="#/material/"+n.material.id),this.first=t},m(e,n){w(e,t,n),b(t,r),b(r,s),b(t,i),b(t,o),b(t,l),_e(m,t,null),b(t,c),d=!0},p(e,n){d&&!e.report||u===(u=n.material.title)||N(s,u),d&&!e.report||a===(a="#/material/"+n.material.id)||A(r,"href",a),d&&!e.report||p===(p=n.material.type)||N(o,p);var t={};e.report&&(t.materialId=n.material.id),e.classSessionId&&(t.classSessionId=n.classSessionId),m.$set(t)},i(e){d||(pe(m.$$.fragment,e),d=!0)},o(e){me(m.$$.fragment,e),d=!1},d(e){e&&y(t),Se(m)}}}function Jc(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k,S,D,C,M,T,N,E,O,L,P,R=new rc({props:{text:e.report.summaryEN,key:"summaryEN"}}),j=new rc({props:{text:e.report.homeworkEN,key:"homeworkEN"}}),z=new rc({props:{text:e.report.summaryZH,key:"summaryZH"}}),q=new rc({props:{text:e.report.homeworkZH,key:"homeworkZH"}}),H=new rc({props:{text:e.report.performance,key:"performance"}}),F=e.report.words&&e.report.words.length>0&&Uc(e),W=new kc({}),Y=e.report.materials&&e.report.materials.length>0&&Zc(e),B=new Wc({});return{c(){n=_("section"),(t=_("h3")).textContent="Summary (English)",r=I(),R.$$.fragment.c(),s=I(),a=_("section"),(i=_("h3")).textContent="Homework (English)",o=I(),j.$$.fragment.c(),l=I(),c=_("section"),(d=_("h3")).textContent="Summary (Chinese)",u=I(),z.$$.fragment.c(),p=I(),m=_("section"),(f=_("h3")).textContent="Homework (Chinese)",g=I(),q.$$.fragment.c(),h=I(),$=_("section"),(v=_("h3")).textContent="Performance",x=I(),H.$$.fragment.c(),k=I(),S=_("section"),(D=_("h3")).textContent="Vocabulary",C=I(),F&&F.c(),M=I(),W.$$.fragment.c(),T=I(),N=_("section"),(E=_("h3")).textContent="Materials",O=I(),Y&&Y.c(),L=I(),B.$$.fragment.c(),A(t,"class","title is-5 svelte-l1zkq1"),A(n,"class","svelte-l1zkq1"),A(i,"class","title is-5 svelte-l1zkq1"),A(a,"class","svelte-l1zkq1"),A(d,"class","title is-5 svelte-l1zkq1"),A(c,"class","svelte-l1zkq1"),A(f,"class","title is-5 svelte-l1zkq1"),A(m,"class","svelte-l1zkq1"),A(v,"class","title is-5 svelte-l1zkq1"),A($,"class","svelte-l1zkq1"),A(D,"class","title is-5 svelte-l1zkq1"),A(S,"class","svelte-l1zkq1"),A(E,"class","title is-5 svelte-l1zkq1"),A(N,"class","svelte-l1zkq1")},m(e,y){w(e,n,y),b(n,t),b(n,r),_e(R,n,null),w(e,s,y),w(e,a,y),b(a,i),b(a,o),_e(j,a,null),w(e,l,y),w(e,c,y),b(c,d),b(c,u),_e(z,c,null),w(e,p,y),w(e,m,y),b(m,f),b(m,g),_e(q,m,null),w(e,h,y),w(e,$,y),b($,v),b($,x),_e(H,$,null),w(e,k,y),w(e,S,y),b(S,D),b(S,C),F&&F.m(S,null),b(S,M),_e(W,S,null),w(e,T,y),w(e,N,y),b(N,E),b(N,O),Y&&Y.m(N,null),b(N,L),_e(B,N,null),P=!0},p(e,n){var t={};e.report&&(t.text=n.report.summaryEN),R.$set(t);var r={};e.report&&(r.text=n.report.homeworkEN),j.$set(r);var s={};e.report&&(s.text=n.report.summaryZH),z.$set(s);var a={};e.report&&(a.text=n.report.homeworkZH),q.$set(a);var i={};e.report&&(i.text=n.report.performance),H.$set(i),n.report.words&&n.report.words.length>0?F?(F.p(e,n),pe(F,1)):((F=Uc(n)).c(),pe(F,1),F.m(S,M)):F&&(de(),me(F,1,1,()=>{F=null}),ue()),n.report.materials&&n.report.materials.length>0?Y?(Y.p(e,n),pe(Y,1)):((Y=Zc(n)).c(),pe(Y,1),Y.m(N,L)):Y&&(de(),me(Y,1,1,()=>{Y=null}),ue())},i(e){P||(pe(R.$$.fragment,e),pe(j.$$.fragment,e),pe(z.$$.fragment,e),pe(q.$$.fragment,e),pe(H.$$.fragment,e),pe(F),pe(W.$$.fragment,e),pe(Y),pe(B.$$.fragment,e),P=!0)},o(e){me(R.$$.fragment,e),me(j.$$.fragment,e),me(z.$$.fragment,e),me(q.$$.fragment,e),me(H.$$.fragment,e),me(F),me(W.$$.fragment,e),me(Y),me(B.$$.fragment,e),P=!1},d(e){e&&y(n),Se(R),e&&(y(s),y(a)),Se(j),e&&(y(l),y(c)),Se(z),e&&(y(p),y(m)),Se(q),e&&(y(h),y($)),Se(H),e&&(y(k),y(S)),F&&F.d(),Se(W),e&&(y(T),y(N)),Y&&Y.d(),Se(B)}}}function Xc(e,n,t){let{report:r,classSessionId:s}=n;return e.$set=e=>{"report"in e&&t("report",r=e.report),"classSessionId"in e&&t("classSessionId",s=e.classSessionId)},{report:r,classSessionId:s}}class Qc extends Ce{constructor(e){super(),Ie(this,e,Xc,Jc,o,["report","classSessionId"])}}function Kc(e){var n,t;return{c(){(n=_("button")).innerHTML='<i class="fas fa-paper-plane"></i>\n\t\t\t    Publish report\n\t\t\t  ',A(n,"class","button is-primary"),P(n,"is-loading",e.loading),t=M(n,"click",e.click_handler_1)},m(e,t){w(e,n,t)},p(e,t){e.loading&&P(n,"is-loading",t.loading)},d(e){e&&y(n),t()}}}function ed(e){var n,t;return{c(){(n=_("button")).innerHTML='<i class="fas fa-eye-slash"></i>\n\t\t\t    Unpublish report\n\t\t\t  ',A(n,"class","button is-primary"),P(n,"is-loading",e.loading),t=M(n,"click",e.click_handler)},m(e,t){w(e,n,t)},p(e,t){e.loading&&P(n,"is-loading",t.loading)},d(e){e&&y(n),t()}}}function nd(e){var n,t,r,s=new hn({props:{errors:e.errors}});function a(e){return e.$session&&e.$session.report.published?ed:e.$session.report.published?void 0:Kc}var i=a(e),o=i&&i(e);return{c(){s.$$.fragment.c(),n=I(),o&&o.c(),t=C()},m(e,a){_e(s,e,a),w(e,n,a),o&&o.m(e,a),w(e,t,a),r=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),s.$set(r),i===(i=a(n))&&o?o.p(e,n):(o&&o.d(1),(o=i&&i(n))&&(o.c(),o.m(t.parentNode,t)))},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){Se(s,e),e&&y(n),o&&o.d(e),e&&y(t)}}}function td(e,n,t){let r;l(e,Lo,e=>{t("$session",r=e)});let s="",a=!1,{classSessionId:i}=n;const o=async e=>{t("loading",a=!0);const n=e?"publish":"unpublish",r={report:{update:{published:e}}};try{await Rs.patch(i,r),Ee.add({text:`${n.charAt(0).toUpperCase()+n.slice(1)}ed session report`,type:"success"}),t("errors",s="")}catch(e){t("errors",s=e),Ee.add({text:`Couldn't ${n} session report`,type:"danger"})}finally{t("loading",a=!1)}};return e.$set=e=>{"classSessionId"in e&&t("classSessionId",i=e.classSessionId)},{errors:s,loading:a,classSessionId:i,togglePublish:o,$session:r,click_handler:function(){return o(!1)},click_handler_1:function(){return o(!0)}}}class rd extends Ce{constructor(e){super(),Ie(this,e,td,nd,o,["classSessionId"])}}function sd(e){var n,t,r=new rd({props:{classSessionId:e.$session.id}}),s=new Qc({props:{report:e.$session.report,classSessionId:e.$session.id}});return{c(){r.$$.fragment.c(),n=I(),s.$$.fragment.c()},m(e,a){_e(r,e,a),w(e,n,a),_e(s,e,a),t=!0},p(e,n){var t={};e.$session&&(t.classSessionId=n.$session.id),r.$set(t);var a={};e.$session&&(a.report=n.$session.report),e.$session&&(a.classSessionId=n.$session.id),s.$set(a)},i(e){t||(pe(r.$$.fragment,e),pe(s.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),me(s.$$.fragment,e),t=!1},d(e){Se(r,e),e&&y(n),Se(s,e)}}}function ad(e){var n,t,r,s=new Zl({props:{classSessionId:e.$session.id}});return{c(){(n=_("p")).textContent="No report exists for this session.",t=I(),s.$$.fragment.c()},m(e,a){w(e,n,a),w(e,t,a),_e(s,e,a),r=!0},p(e,n){var t={};e.$session&&(t.classSessionId=n.$session.id),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&(y(n),y(t)),Se(s,e)}}}function id(n){var t;return{c(){(t=_("p")).textContent="A lesson must be added before a report can be created."},m(e,n){w(e,t,n)},p:e,i:e,o:e,d(e){e&&y(t)}}}function od(e){var n,t,r,s,a,i,o=[id,ad,sd],l=[];function c(e){return e.$session.lesson?e.$session&&!e.$session.report?1:2:0}return s=c(e),a=l[s]=o[s](e),{c(){n=_("section"),(t=_("h3")).textContent="Report",r=I(),a.c(),A(t,"class","title is-4"),A(n,"class","report svelte-xj6mxc")},m(e,a){w(e,n,a),b(n,t),b(n,r),l[s].m(n,null),i=!0},p(e,t){var r=s;(s=c(t))===r?l[s].p(e,t):(de(),me(l[r],1,1,()=>{l[r]=null}),ue(),(a=l[s])||(a=l[s]=o[s](t)).c(),pe(a,1),a.m(n,null))},i(e){i||(pe(a),i=!0)},o(e){me(a),i=!1},d(e){e&&y(n),l[s].d()}}}function ld(e,n,t){let r;return l(e,Lo,e=>{t("$session",r=e)}),{$session:r}}class cd extends Ce{constructor(e){super(),Ie(this,e,ld,od,o,[])}}function dd(e,n,t){const r=Object.create(e);return r.result=n[t],r}function ud(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k=e.formatTime(e.$session.startsAt),S=e.formatTime(e.$session.startedAt),C=e.formatTime(e.$session.endsAt),M=e.formatTime(e.$session.endedAt);return{c(){(n=_("dt")).textContent="Schedule start:",t=I(),r=_("dd"),s=D(k),a=I(),(i=_("dt")).textContent="Actual start:",o=I(),l=_("dd"),c=D(S),d=I(),(u=_("dt")).textContent="Schedule end:",p=I(),m=_("dd"),f=D(C),g=I(),(h=_("dt")).textContent="Actual end:",$=I(),v=_("dd"),x=D(M)},m(e,y){w(e,n,y),w(e,t,y),w(e,r,y),b(r,s),w(e,a,y),w(e,i,y),w(e,o,y),w(e,l,y),b(l,c),w(e,d,y),w(e,u,y),w(e,p,y),w(e,m,y),b(m,f),w(e,g,y),w(e,h,y),w(e,$,y),w(e,v,y),b(v,x)},p(e,n){e.$session&&k!==(k=n.formatTime(n.$session.startsAt))&&N(s,k),e.$session&&S!==(S=n.formatTime(n.$session.startedAt))&&N(c,S),e.$session&&C!==(C=n.formatTime(n.$session.endsAt))&&N(f,C),e.$session&&M!==(M=n.formatTime(n.$session.endedAt))&&N(x,M)},d(e){e&&(y(n),y(t),y(r),y(a),y(i),y(o),y(l),y(d),y(u),y(p),y(m),y(g),y(h),y($),y(v))}}}function pd(e){var n,t=new hn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};(e.getResults||e.id)&&(r.errors=n.errors),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function md(e){var n,t,r,s,a,i=[],o=new Map,l=e.results;const c=e=>e.result.id;for(var d=0;d<l.length;d+=1){let n=dd(e,l,d),t=c(n);o.set(t,i[d]=fd(t,n))}return{c(){for(n=_("section"),(t=_("h3")).textContent="Results",r=I(),s=_("ul"),d=0;d<i.length;d+=1)i[d].c();A(t,"class","title is-4"),A(n,"class","results svelte-xj6mxc")},m(e,o){for(w(e,n,o),b(n,t),b(n,r),b(n,s),d=0;d<i.length;d+=1)i[d].m(s,null);a=!0},p(e,n){const t=n.results;de(),i=ye(i,e,c,1,n,t,o,s,we,fd,null,dd),ue()},i(e){if(!a){for(var n=0;n<l.length;n+=1)pe(i[n]);a=!0}},o(e){for(d=0;d<i.length;d+=1)me(i[d]);a=!1},d(e){for(e&&y(n),d=0;d<i.length;d+=1)i[d].d()}}}function fd(e,n){var t,r,s=new Ol({props:{result:n.result}});return{key:e,first:null,c(){t=C(),s.$$.fragment.c(),this.first=t},m(e,n){w(e,t,n),_e(s,e,n),r=!0},p(e,n){var t={};(e.getResults||e.id)&&(t.result=n.result),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&y(t),Se(s,e)}}}function gd(n){var t,r=new vt({props:{what:"results"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function hd(n){var t,r,s=n.$session.lesson.name;return{c(){t=_("p"),r=D(s)},m(e,n){w(e,t,n),b(t,r)},p(e,n){e.$session&&s!==(s=n.$session.lesson.name)&&N(r,s)},i:e,o:e,d(e){e&&y(t)}}}function $d(e){var n,t,r,s=new Yl({props:{id:e.$session.id}});return{c(){(n=_("p")).textContent="No lesson has been selected yet.",t=I(),s.$$.fragment.c()},m(e,a){w(e,n,a),w(e,t,a),_e(s,e,a),r=!0},p(e,n){var t={};e.$session&&(t.id=n.$session.id),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&(y(n),y(t)),Se(s,e)}}}function vd(e){var n,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$,v=new ir({props:{$$slots:{default:[ud]},$$scope:{ctx:e}}}),x=new Hl({});let k={ctx:e,current:null,token:null,pending:gd,then:md,catch:pd,value:"results",error:"errors",blocks:[,,,]};$e(c=zo(e.id),k);var S=[$d,hd],C=[];function M(e){return e.$session.lesson?1:0}f=M(e),g=C[f]=S[f](e);var T=new cd({});return{c(){n=I(),r=_("p"),s=D("Ended "),a=D(e.endedDistance),i=I(),v.$$.fragment.c(),o=I(),x.$$.fragment.c(),l=I(),k.block.c(),d=I(),u=_("setion"),(p=_("h3")).textContent="Lesson",m=I(),g.c(),h=I(),T.$$.fragment.c(),document.title="Ended Session",A(r,"class","subtitle"),A(p,"class","title is-4"),A(u,"class","lesson")},m(e,t){w(e,n,t),w(e,r,t),b(r,s),b(r,a),w(e,i,t),_e(v,e,t),w(e,o,t),_e(x,e,t),w(e,l,t),k.block.m(e,k.anchor=t),k.mount=()=>d.parentNode,k.anchor=d,w(e,d,t),w(e,u,t),b(u,p),b(u,m),C[f].m(u,null),w(e,h,t),_e(T,e,t),$=!0},p(n,r){e=r,$&&!n.endedDistance||N(a,e.endedDistance);var s={};(n.$$scope||n.$session)&&(s.$$scope={changed:n,ctx:e}),v.$set(s),k.ctx=e,"id"in n&&c!==(c=zo(e.id))&&$e(c,k)||k.block.p(n,t(t({},e),k.resolved));var i=f;(f=M(e))===i?C[f].p(n,e):(de(),me(C[i],1,1,()=>{C[i]=null}),ue(),(g=C[f])||(g=C[f]=S[f](e)).c(),pe(g,1),g.m(u,null))},i(e){$||(pe(v.$$.fragment,e),pe(x.$$.fragment,e),pe(k.block),pe(g),pe(T.$$.fragment,e),$=!0)},o(e){me(v.$$.fragment,e),me(x.$$.fragment,e);for(let e=0;e<3;e+=1){me(k.blocks[e])}me(g),me(T.$$.fragment,e),$=!1},d(e){e&&(y(n),y(r),y(i)),Se(v,e),e&&y(o),Se(x,e),e&&y(l),k.block.d(e),k.token=null,k=null,e&&(y(d),y(u)),C[f].d(),e&&y(h),Se(T,e)}}}function bd(e,n,t){let r,s;l(e,Lo,e=>{t("$session",r=e)}),l(e,Hs,e=>{t("$time",s=e)});let{id:a}=n;let i;return e.$set=e=>{"id"in e&&t("id",a=e.id)},e.$$.update=(e={$session:1,$time:1})=>{(e.$session||e.$time)&&t("endedDistance",i=Xa(new Date(r.endedAt),new Date(s),{addSuffix:!0}))},{id:a,formatTime:e=>{if(!e)return;const n=new Date(e);return 0===n.getMinutes()?Ba(n,"h b"):Ba(n,"p")},endedDistance:i,$session:r}}class wd extends Ce{constructor(e){super(),Ie(this,e,bd,vd,o,["id"])}}function yd(n){var t,r=new vt({props:{what:"class session"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function xd(n){var t,r=new dn({});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function kd(e){var n,t,r,s,a,i,o,l,c,d=e.$session.group.name,u=e.$session.number,p=[Id,Dd,Sd,_d],m=[];function f(e){return"Inactive"===e.$session.stage?0:"Active"===e.$session.stage?1:"Started"===e.$session.stage?2:"Ended"===e.$session.stage?3:-1}return~(i=f(e))&&(o=m[i]=p[i](e)),{c(){n=_("h2"),t=D(d),r=D(" class lesson "),s=D(u),a=I(),o&&o.c(),l=C(),A(n,"class","title")},m(e,o){w(e,n,o),b(n,t),b(n,r),b(n,s),w(e,a,o),~i&&m[i].m(e,o),w(e,l,o),c=!0},p(e,n){c&&!e.$session||d===(d=n.$session.group.name)||N(t,d),c&&!e.$session||u===(u=n.$session.number)||N(s,u);var r=i;(i=f(n))===r?~i&&m[i].p(e,n):(o&&(de(),me(m[r],1,1,()=>{m[r]=null}),ue()),~i?((o=m[i])||(o=m[i]=p[i](n)).c(),pe(o,1),o.m(l.parentNode,l)):o=null)},i(e){c||(pe(o),c=!0)},o(e){me(o),c=!1},d(e){e&&(y(n),y(a)),~i&&m[i].d(e),e&&y(l)}}}function _d(e){var n,t=new wd({props:{id:e.params.id}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.params&&(r.id=n.params.id),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function Sd(n){var t,r=new Ml({});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function Dd(n){var t,r=new el({});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function Id(e){var n,t=new rl({props:{id:e.params.id}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.params&&(r.id=n.params.id),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function Cd(e){var n,t,r,s,a=[kd,xd,yd],i=[];function o(e){return e.$session?0:e.$session&&null===e.$session.classSession?1:2}return n=o(e),t=i[n]=a[n](e),{c(){t.c(),r=C()},m(e,t){i[n].m(e,t),w(e,r,t),s=!0},p(e,s){var l=n;(n=o(s))===l?i[n].p(e,s):(de(),me(i[l],1,1,()=>{i[l]=null}),ue(),(t=i[n])||(t=i[n]=a[n](s)).c(),pe(t,1),t.m(r.parentNode,r))},i(e){s||(pe(t),s=!0)},o(e){me(t),s=!1},d(e){i[n].d(e),e&&y(r)}}}function Md(e,n,t){let r;l(e,Lo,e=>{t("$session",r=e)});let{params:s={}}=n;return Oo.set(s.id),U(()=>{Oo.set(null)}),e.$set=e=>{"params"in e&&t("params",s=e.params)},{params:s,$session:r}}function Td(e,n,t){const r=Object.create(e);return r.tag=n[t],r}function Ad(e,n,t){const r=Object.create(e);return r.lesson=n[t],r}function Nd(e){var n,t,r,s,a,i=e.$lessons.length,o=e.$lessons.length>0&&Ed(e);return{c(){n=_("p"),t=D(i),r=D(" matching lessons found:"),s=I(),o&&o.c(),a=C()},m(e,i){w(e,n,i),b(n,t),b(n,r),w(e,s,i),o&&o.m(e,i),w(e,a,i)},p(e,n){e.$lessons&&i!==(i=n.$lessons.length)&&N(t,i),n.$lessons.length>0?o?o.p(e,n):((o=Ed(n)).c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},d(e){e&&(y(n),y(s)),o&&o.d(e),e&&y(a)}}}function Ed(e){var n,t=[],r=new Map,s=e.$lessons;const a=e=>e.lesson.id;for(var i=0;i<s.length;i+=1){let n=Ad(e,s,i),o=a(n);r.set(o,t[i]=Pd(o,n))}return{c(){for(i=0;i<t.length;i+=1)t[i].c();n=C()},m(e,r){for(i=0;i<t.length;i+=1)t[i].m(e,r);w(e,n,r)},p(e,s){const i=s.$lessons;t=ye(t,e,a,1,s,i,r,n.parentNode,be,Pd,n,Ad)},d(e){for(i=0;i<t.length;i+=1)t[i].d(e);e&&y(n)}}}function Od(e){var n,t=[],r=new Map,s=e.lesson.tags;const a=e=>e.tag.id;for(var i=0;i<s.length;i+=1){let n=Td(e,s,i),o=a(n);r.set(o,t[i]=Ld(o,n))}return{c(){for(n=_("div"),i=0;i<t.length;i+=1)t[i].c();A(n,"class","tags svelte-4s8ccd")},m(e,r){for(w(e,n,r),i=0;i<t.length;i+=1)t[i].m(n,null)},p(e,s){const i=s.lesson.tags;t=ye(t,e,a,1,s,i,r,n,be,Ld,null,Td)},d(e){for(e&&y(n),i=0;i<t.length;i+=1)t[i].d()}}}function Ld(e,n){var t,r,s=n.tag.name;return{key:e,first:null,c(){t=_("span"),r=D(s),A(t,"class","tag is-dark"),this.first=t},m(e,n){w(e,t,n),b(t,r)},p(e,n){e.$lessons&&s!==(s=n.tag.name)&&N(r,s)},d(e){e&&y(t)}}}function Pd(e,n){var t,r,s,a,i,o,l=n.lesson.name,c=n.lesson.tags.length>0&&Od(n);return{key:e,first:null,c(){t=_("li"),r=_("a"),s=D(l),i=I(),c&&c.c(),o=I(),A(r,"href",a="#/lesson/"+n.lesson.id),A(t,"class","svelte-4s8ccd"),this.first=t},m(e,n){w(e,t,n),b(t,r),b(r,s),b(t,i),c&&c.m(t,null),b(t,o)},p(e,n){e.$lessons&&l!==(l=n.lesson.name)&&N(s,l),e.$lessons&&a!==(a="#/lesson/"+n.lesson.id)&&A(r,"href",a),n.lesson.tags.length>0?c?c.p(e,n):((c=Od(n)).c(),c.m(t,o)):c&&(c.d(1),c=null)},d(e){e&&y(t),c&&c.d()}}}function Rd(n){var t,r=n.$lessons&&Nd(n);return{c(){t=_("section"),r&&r.c(),A(t,"class","lesson-list svelte-4s8ccd")},m(e,n){w(e,t,n),r&&r.m(t,null)},p(e,n){n.$lessons?r?r.p(e,n):((r=Nd(n)).c(),r.m(t,null)):r&&(r.d(1),r=null)},i:e,o:e,d(e){e&&y(t),r&&r.d()}}}function jd(e,n,t){let r;return l(e,$i,e=>{t("$lessons",r=e)}),{$lessons:r}}class zd extends Ce{constructor(e){super(),Ie(this,e,jd,Rd,o,[])}}function qd(e){var n,t=new vt({props:{what:"lessons"}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function Hd(e){var n,t=new zd({});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function Fd(e){var n,t,r,s,a,i,o,l,c,d,u,p=new hn({props:{errors:e.errors}}),m=new _i({props:{searchParams:"name",store:$i}}),f=[Hd,qd],g=[];function h(e){return e.$lessons?0:e.errors?-1:1}return~(l=h(e))&&(c=g[l]=f[l](e)),{c(){n=I(),(t=_("h1")).textContent="Lessons",r=I(),p.$$.fragment.c(),s=I(),(a=_("a")).innerHTML='<i class="fas fa-plus"></i>Create new lesson\n\t\t\t',i=I(),m.$$.fragment.c(),o=I(),c&&c.c(),d=C(),document.title="Lessons",A(t,"class","title"),A(a,"href","#/new-lesson"),A(a,"class","button is-primary create-lesson")},m(e,c){w(e,n,c),w(e,t,c),w(e,r,c),_e(p,e,c),w(e,s,c),w(e,a,c),w(e,i,c),_e(m,e,c),w(e,o,c),~l&&g[l].m(e,c),w(e,d,c),u=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),p.$set(t);var r={};e.lessons&&(r.store=$i),m.$set(r);var s=l;(l=h(n))!==s&&(c&&(de(),me(g[s],1,1,()=>{g[s]=null}),ue()),~l?((c=g[l])||(c=g[l]=f[l](n)).c(),pe(c,1),c.m(d.parentNode,d)):c=null)},i(e){u||(pe(p.$$.fragment,e),pe(m.$$.fragment,e),pe(c),u=!0)},o(e){me(p.$$.fragment,e),me(m.$$.fragment,e),me(c),u=!1},d(e){e&&(y(n),y(t),y(r)),Se(p,e),e&&(y(s),y(a),y(i)),Se(m,e),e&&y(o),~l&&g[l].d(e),e&&y(d)}}}function Wd(e,n,t){let r;l(e,$i,e=>{t("$lessons",r=e)});let s="";return B(async()=>{try{await $i.get()}catch(e){t("errors",s=e),Ee.add({text:"Couldn't get lessons from server.",type:"danger"})}}),{errors:s,$lessons:r}}const Yd=(()=>{const{subscribe:e,set:n,update:t}=Ae();return{subscribe:e,get:async()=>{const e=(await Ze("\n {\n   tags {\n     id\n     name\n     connections\n   }\n }")).tags.sort((e,n)=>e.connections-n.connections);n(e)},remove:async e=>{await Ze("\n mutation DeleteTag ($id: ID!) {\n   deleteTag(id:$id) {\n     id\n   }\n }",{id:e}),t(n=>n&&n.filter(n=>e!==n.id))},create:async e=>{const n=await Ze("\n mutation CreateTag($name: String!) {\n   createTag(name:$name) {\n     id\n     name\n     connections\n   }\n }",{name:e});t(e=>e?[...e,n.createTag]:[n.createTag])},patch:async({id:e,input:n})=>{const r=await Ze("\n  mutation UpdateTag($id: ID!, $input: TagUpdateInput!) {\n    updateTag(id: $id, input:$input) {\n      id\n      name\n      connections\n    }\n  }",{id:e,input:n});return t(n=>n?n.map(n=>n.id!==e?n:r.updateTag):[r.updateTag]),r.updateTag}}})(),Bd=(()=>{const{subscribe:e,set:n}=Ae();return{subscribe:e,get:async e=>{const t=await Ze("\n query ($id: ID!){\n   tag (id: $id) {\n     id\n     name\n     materials {\n       id\n       title\n     }\n    words {\n      id\n      english\n    }\n    lessons {\n      id\n      name\n    }\n   }\n }",{id:e});n(t.tag)}}})();function Ud(e,n,t){const r=Object.create(e);return r.tag=n[t],r}function Gd(e){var n,t,r,s,i=[],o=new Map,l=e.otherTags;const c=e=>e.tag.id;for(var d=0;d<l.length;d+=1){let n=Ud(e,l,d),t=c(n);o.set(t,i[d]=Zd(t,n))}return{c(){for(n=_("div"),t=_("select"),(r=_("option")).textContent="Add existing tag",d=0;d<i.length;d+=1)i[d].c();r.__value="",r.value=r.__value,void 0===e.toAdd&&te(()=>e.select_change_handler.call(t)),A(n,"class","select svelte-16yzrx7"),s=[M(t,"change",e.select_change_handler),M(t,"change",e.add)]},m(s,a){for(w(s,n,a),b(n,t),b(t,r),d=0;d<i.length;d+=1)i[d].m(t,null);O(t,e.toAdd)},p(e,n){const r=n.otherTags;i=ye(i,e,c,1,n,r,o,t,be,Zd,null,Ud),e.toAdd&&O(t,n.toAdd)},d(e){for(e&&y(n),d=0;d<i.length;d+=1)i[d].d();a(s)}}}function Zd(e,n){var t,r,s,a=n.tag.name;return{key:e,first:null,c(){t=_("option"),r=D(a),t.__value=s=n.tag.id,t.value=t.__value,this.first=t},m(e,n){w(e,t,n),b(t,r)},p(e,n){e.otherTags&&a!==(a=n.tag.name)&&N(r,a),e.otherTags&&s!==(s=n.tag.id)&&(t.__value=s),t.value=t.__value},d(e){e&&y(t)}}}function Vd(n){var t,r,s,i,o,l,c,d,u,p=n.otherTags&&Gd(n);return{c(){p&&p.c(),t=I(),r=_("div"),s=_("div"),i=_("input"),o=I(),(l=_("span")).innerHTML='<i class="fas fa-tag"></i>',c=I(),(d=_("button")).textContent="add",A(i,"class","input svelte-16yzrx7"),A(i,"type","text"),A(i,"placeholder","new tag"),A(l,"class","icon is-small is-left"),A(s,"class","control new has-icons-left"),A(d,"class","button is-success svelte-16yzrx7"),A(r,"class","field has-addons svelte-16yzrx7"),u=[M(i,"input",n.input_input_handler),M(i,"change",n.change_handler),M(d,"change",n.change_handler_1)]},m(e,a){p&&p.m(e,a),w(e,t,a),w(e,r,a),b(r,s),b(s,i),i.value=n.newTag,b(s,o),b(s,l),b(r,c),b(r,d)},p(e,n){n.otherTags?p?p.p(e,n):((p=Gd(n)).c(),p.m(t.parentNode,t)):p&&(p.d(1),p=null),e.newTag&&i.value!==n.newTag&&(i.value=n.newTag)},i:e,o:e,d(e){p&&p.d(e),e&&(y(t),y(r)),a(u)}}}function Jd(e,n,t){let r;l(e,Yd,e=>{t("$tags",r=e)});let s,{item:a,store:i,type:o=""}=n,c="";B(async()=>{r||await Yd.get()});const d=async e=>{const n={};if("new"===e){if(!c)return;n.tags={create:{name:c}}}else{if(!s)return;n.tags={connect:{id:s}}}try{await i.patch({input:n,id:a.id}),Ee.add({text:"Added tag to item",type:"success"}),t("newTag",c=""),t("toAdd",s="")}catch(e){console.error(e),Ee.add({text:"Couldn't add tag to item",type:"danger"})}};let u,p;return e.$set=e=>{"item"in e&&t("item",a=e.item),"store"in e&&t("store",i=e.store),"type"in e&&t("type",o=e.type)},e.$$.update=(e={item:1,$tags:1,currentTags:1})=>{e.item&&t("currentTags",u=a.tags.length>0?a.tags.map(e=>e.id):[]),(e.$tags||e.currentTags)&&t("otherTags",p=r&&r.length>0?r.filter(e=>!u.includes(e.id)):[])},{item:a,store:i,type:o,newTag:c,toAdd:s,add:d,otherTags:p,select_change_handler:function(){s=L(this),t("toAdd",s),t("otherTags",p),t("$tags",r),t("currentTags",u),t("item",a)},input_input_handler:function(){c=this.value,t("newTag",c)},change_handler:function(){return d("new")},change_handler_1:function(){return d("new")}}}class Xd extends Ce{constructor(e){super(),Ie(this,e,Jd,Vd,o,["item","store","type"])}}function Qd(n){var t,r,s,a,i,o=n.tag.name;return{c(){t=_("span"),r=D(o),s=I(),A(a=_("button"),"class","delete is-small"),A(t,"class","tag is-dark"),i=M(a,"click",n.remove)},m(e,n){w(e,t,n),b(t,r),b(t,s),b(t,a)},p(e,n){e.tag&&o!==(o=n.tag.name)&&N(r,o)},i:e,o:e,d(e){e&&y(t),i()}}}function Kd(e,n,t){let{tag:r,store:s,type:a,itemId:i}=n;return e.$set=e=>{"tag"in e&&t("tag",r=e.tag),"store"in e&&t("store",s=e.store),"type"in e&&t("type",a=e.type),"itemId"in e&&t("itemId",i=e.itemId)},{tag:r,store:s,type:a,itemId:i,remove:async()=>{const e={tags:{disconnect:{id:r.id}}};try{await s.patch({input:e,id:i}),Ee.add({text:`Removed tag '${r.name}' from the item`,type:"success"})}catch(e){console.error(e),Ee.add({text:`Could not remove tag '${r.name}'`,type:"danger"})}}}}class eu extends Ce{constructor(e){super(),Ie(this,e,Kd,Qd,o,["tag","store","type","itemId"])}}function nu(e,n,t){const r=Object.create(e);return r.tag=n[t],r}function tu(e){var n,t,r=[],s=new Map,a=e.item.tags;const i=e=>e.tag.id;for(var o=0;o<a.length;o+=1){let n=nu(e,a,o),t=i(n);s.set(t,r[o]=ru(t,n))}return{c(){for(n=_("div"),o=0;o<r.length;o+=1)r[o].c();A(n,"class","tags")},m(e,s){for(w(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=t.item.tags;de(),r=ye(r,e,i,1,t,a,s,n,we,ru,null,nu),ue()},i(e){if(!t){for(var n=0;n<a.length;n+=1)pe(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)me(r[o]);t=!1},d(e){for(e&&y(n),o=0;o<r.length;o+=1)r[o].d()}}}function ru(e,n){var t,r,s=new eu({props:{tag:n.tag,itemId:n.item.id,store:n.store,type:n.type}});return{key:e,first:null,c(){t=C(),s.$$.fragment.c(),this.first=t},m(e,n){w(e,t,n),_e(s,e,n),r=!0},p(e,n){var t={};e.item&&(t.tag=n.tag),e.item&&(t.itemId=n.item.id),e.store&&(t.store=n.store),e.type&&(t.type=n.type),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&y(t),Se(s,e)}}}function su(e){var n,t,r,s=e.item.tags&&e.item.tags.length>0&&tu(e),a=new Xd({props:{item:e.item,type:e.type,store:e.store}});return{c(){s&&s.c(),n=I(),t=_("div"),a.$$.fragment.c(),A(t,"class","tag-inputs svelte-eil3r6")},m(e,i){s&&s.m(e,i),w(e,n,i),w(e,t,i),_e(a,t,null),r=!0},p(e,t){t.item.tags&&t.item.tags.length>0?s?(s.p(e,t),pe(s,1)):((s=tu(t)).c(),pe(s,1),s.m(n.parentNode,n)):s&&(de(),me(s,1,1,()=>{s=null}),ue());var r={};e.item&&(r.item=t.item),e.type&&(r.type=t.type),e.store&&(r.store=t.store),a.$set(r)},i(e){r||(pe(s),pe(a.$$.fragment,e),r=!0)},o(e){me(s),me(a.$$.fragment,e),r=!1},d(e){s&&s.d(e),e&&(y(n),y(t)),Se(a)}}}function au(e,n,t){let{item:r,store:s,type:a}=n;return e.$set=e=>{"item"in e&&t("item",r=e.item),"store"in e&&t("store",s=e.store),"type"in e&&t("type",a=e.type)},{item:r,store:s,type:a}}class iu extends Ce{constructor(e){super(),Ie(this,e,au,su,o,["item","store","type"])}}function ou(n){var t,r,s,a,i,o,l,c,d,u=n.material.title,p=n.material.type;return{c(){t=_("li"),r=_("label"),s=_("i"),i=I(),o=D(u),l=D(" - "),c=D(p),A(s,"class",a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12"),A(r,"class","checkbox"),A(t,"class","svelte-12hcy12"),d=M(t,"click",n.toggle)},m(e,n){w(e,t,n),b(t,r),b(r,s),b(r,i),b(r,o),b(r,l),b(r,c)},p(e,n){e.isAdded&&a!==(a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12")&&A(s,"class",a),e.material&&u!==(u=n.material.title)&&N(o,u),e.material&&p!==(p=n.material.type)&&N(c,p)},i:e,o:e,d(e){e&&y(t),d()}}}function lu(e,n,t){let r;l(e,vi,e=>{t("$lesson",r=e)});let{material:s}=n;let a;return e.$set=e=>{"material"in e&&t("material",s=e.material)},e.$$.update=(e={$lesson:1,material:1})=>{(e.$lesson||e.material)&&t("isAdded",a=!!r.materials.find(e=>e.id===s.id))},{material:s,toggle:async()=>{const e={};let n="Removed material from lesson";a?e.materials={disconnect:{id:s.id}}:(n="Added material to lesson",e.materials={connect:{id:s.id}});try{await vi.patch({id:r.id,input:e}),Ee.add({text:n,type:"success"})}catch(e){console.error(e)}},isAdded:a}}class cu extends Ce{constructor(e){super(),Ie(this,e,lu,ou,o,["material"])}}function du(e,n,t){const r=Object.create(e);return r.material=n[t],r}function uu(e){var n,t,r,s,a,i,o=e.$materials.length,l=[],c=new Map,d=e.$materials;const u=e=>e.material.id;for(var p=0;p<d.length;p+=1){let n=du(e,d,p),t=u(n);c.set(t,l[p]=pu(t,n))}return{c(){for(n=_("p"),t=D(o),r=D(" matches:"),s=I(),p=0;p<l.length;p+=1)l[p].c();a=C()},m(e,o){for(w(e,n,o),b(n,t),b(n,r),w(e,s,o),p=0;p<l.length;p+=1)l[p].m(e,o);w(e,a,o),i=!0},p(e,n){i&&!e.$materials||o===(o=n.$materials.length)||N(t,o);const r=n.$materials;de(),l=ye(l,e,u,1,n,r,c,a.parentNode,we,pu,a,du),ue()},i(e){if(!i){for(var n=0;n<d.length;n+=1)pe(l[n]);i=!0}},o(e){for(p=0;p<l.length;p+=1)me(l[p]);i=!1},d(e){for(e&&(y(n),y(s)),p=0;p<l.length;p+=1)l[p].d(e);e&&y(a)}}}function pu(e,n){var t,r,s=new cu({props:{material:n.material}});return{key:e,first:null,c(){t=C(),s.$$.fragment.c(),this.first=t},m(e,n){w(e,t,n),_e(s,e,n),r=!0},p(e,n){var t={};e.$materials&&(t.material=n.material),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&y(t),Se(s,e)}}}function mu(e){var n,t,r,s,a,i,o,l,c,d,u=new _i({props:{store:Nc,searchParams:"title"}}),p=new hn({props:{errors:e.errors}}),m=e.$materials&&uu(e);return{c(){(n=_("h2")).textContent="Add material to lesson",t=I(),u.$$.fragment.c(),r=I(),p.$$.fragment.c(),s=I(),a=_("div"),m&&m.c(),i=I(),o=_("div"),(l=_("button")).textContent="Exit",A(n,"class","title is-4"),A(a,"class","results"),A(l,"class","button"),A(o,"class","buttons svelte-jsaq7t"),d=M(l,"click",e.click_handler_1)},m(e,d){w(e,n,d),w(e,t,d),_e(u,e,d),w(e,r,d),_e(p,e,d),w(e,s,d),w(e,a,d),m&&m.m(a,null),w(e,i,d),w(e,o,d),b(o,l),c=!0},p(e,n){var t={};e.materials&&(t.store=Nc),u.$set(t);var r={};e.errors&&(r.errors=n.errors),p.$set(r),n.$materials?m?(m.p(e,n),pe(m,1)):((m=uu(n)).c(),pe(m,1),m.m(a,null)):m&&(de(),me(m,1,1,()=>{m=null}),ue())},i(e){c||(pe(u.$$.fragment,e),pe(p.$$.fragment,e),pe(m),c=!0)},o(e){me(u.$$.fragment,e),me(p.$$.fragment,e),me(m),c=!1},d(e){e&&(y(n),y(t)),Se(u,e),e&&y(r),Se(p,e),e&&(y(s),y(a)),m&&m.d(),e&&(y(i),y(o)),d()}}}function fu(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,re(()=>r=!1)}let o={$$slots:{default:[mu]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new kn({props:o});return J.push(()=>ke(l,"open",i)),{c(){(n=_("button")).textContent="add material",t=I(),l.$$.fragment.c(),A(n,"class","button"),a=M(n,"click",e.click_handler)},m(e,r){w(e,n,r),w(e,t,r),_e(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.$materials||e.errors)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||(pe(l.$$.fragment,e),s=!0)},o(e){me(l.$$.fragment,e),s=!1},d(e){e&&(y(n),y(t)),Se(l,e),a()}}}function gu(e,n,t){let r;l(e,Nc,e=>{t("$materials",r=e)});let{lesson:s}=n,a=!1,i="";return B(async()=>{try{await Nc.get()}catch(e){t("errors",i=e)}}),e.$set=e=>{"lesson"in e&&t("lesson",s=e.lesson)},{lesson:s,open:a,errors:i,$materials:r,click_handler:function(){t("open",a=!0)},click_handler_1:function(){t("open",a=!1)},modal_open_binding:function(e){t("open",a=e)}}}class hu extends Ce{constructor(e){super(),Ie(this,e,gu,fu,o,["lesson"])}}function $u(n){var t,r,s,a,i,o,l,c,d,u,p=n.word.english,m=n.word.chinese;return{c(){t=_("li"),r=_("label"),s=_("i"),i=I(),o=D(p),l=D(" ("),c=D(m),d=D(")"),A(s,"class",a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12"),A(r,"class","checkbox"),A(t,"class","svelte-12hcy12"),u=M(t,"click",n.toggle)},m(e,n){w(e,t,n),b(t,r),b(r,s),b(r,i),b(r,o),b(r,l),b(r,c),b(r,d)},p(e,n){e.isAdded&&a!==(a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12")&&A(s,"class",a),e.word&&p!==(p=n.word.english)&&N(o,p),e.word&&m!==(m=n.word.chinese)&&N(c,m)},i:e,o:e,d(e){e&&y(t),u()}}}function vu(e,n,t){let r;l(e,vi,e=>{t("$lesson",r=e)});let{word:s}=n;let a;return e.$set=e=>{"word"in e&&t("word",s=e.word)},e.$$.update=(e={$lesson:1,word:1})=>{(e.$lesson||e.word)&&t("isAdded",a=!!r.words.find(e=>e.id===s.id))},{word:s,toggle:async()=>{const e={};let n="Removed word from lesson";a?e.words={disconnect:{id:s.id}}:(n="Added word to lesson",e.words={connect:{id:s.id}});try{await vi.patch({id:r.id,input:e}),Ee.add({text:n,type:"success"})}catch(e){console.error(e)}},isAdded:a}}class bu extends Ce{constructor(e){super(),Ie(this,e,vu,$u,o,["word"])}}function wu(e,n,t){const r=Object.create(e);return r.word=n[t],r}function yu(e){var n,t,r,s,a,i,o=e.$words.length,l=[],c=new Map,d=e.$words;const u=e=>e.word.id;for(var p=0;p<d.length;p+=1){let n=wu(e,d,p),t=u(n);c.set(t,l[p]=xu(t,n))}return{c(){for(n=_("p"),t=D(o),r=D(" matches:"),s=I(),p=0;p<l.length;p+=1)l[p].c();a=C()},m(e,o){for(w(e,n,o),b(n,t),b(n,r),w(e,s,o),p=0;p<l.length;p+=1)l[p].m(e,o);w(e,a,o),i=!0},p(e,n){i&&!e.$words||o===(o=n.$words.length)||N(t,o);const r=n.$words;de(),l=ye(l,e,u,1,n,r,c,a.parentNode,we,xu,a,wu),ue()},i(e){if(!i){for(var n=0;n<d.length;n+=1)pe(l[n]);i=!0}},o(e){for(p=0;p<l.length;p+=1)me(l[p]);i=!1},d(e){for(e&&(y(n),y(s)),p=0;p<l.length;p+=1)l[p].d(e);e&&y(a)}}}function xu(e,n){var t,r,s=new bu({props:{word:n.word}});return{key:e,first:null,c(){t=C(),s.$$.fragment.c(),this.first=t},m(e,n){w(e,t,n),_e(s,e,n),r=!0},p(e,n){var t={};e.$words&&(t.word=n.word),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&y(t),Se(s,e)}}}function ku(e){var n,t,r,s,a,i,o,l,c,d,u=new _i({props:{store:pc,searchParams:["english","chinese"]}}),p=new hn({props:{errors:e.errors}}),m=e.$words&&yu(e);return{c(){(n=_("h2")).textContent="Add word to lesson",t=I(),u.$$.fragment.c(),r=I(),p.$$.fragment.c(),s=I(),a=_("div"),m&&m.c(),i=I(),o=_("div"),(l=_("button")).textContent="Exit",A(n,"class","title is-4"),A(a,"class","results"),A(l,"class","button"),A(o,"class","buttons svelte-1yabmim"),d=M(l,"click",e.click_handler_1)},m(e,d){w(e,n,d),w(e,t,d),_e(u,e,d),w(e,r,d),_e(p,e,d),w(e,s,d),w(e,a,d),m&&m.m(a,null),w(e,i,d),w(e,o,d),b(o,l),c=!0},p(e,n){var t={};e.words&&(t.store=pc),u.$set(t);var r={};e.errors&&(r.errors=n.errors),p.$set(r),n.$words?m?(m.p(e,n),pe(m,1)):((m=yu(n)).c(),pe(m,1),m.m(a,null)):m&&(de(),me(m,1,1,()=>{m=null}),ue())},i(e){c||(pe(u.$$.fragment,e),pe(p.$$.fragment,e),pe(m),c=!0)},o(e){me(u.$$.fragment,e),me(p.$$.fragment,e),me(m),c=!1},d(e){e&&(y(n),y(t)),Se(u,e),e&&y(r),Se(p,e),e&&(y(s),y(a)),m&&m.d(),e&&(y(i),y(o)),d()}}}function _u(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,re(()=>r=!1)}let o={$$slots:{default:[ku]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new kn({props:o});return J.push(()=>ke(l,"open",i)),{c(){(n=_("button")).textContent="add words",t=I(),l.$$.fragment.c(),A(n,"class","button add svelte-1yabmim"),a=M(n,"click",e.click_handler)},m(e,r){w(e,n,r),w(e,t,r),_e(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.$words||e.errors)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||(pe(l.$$.fragment,e),s=!0)},o(e){me(l.$$.fragment,e),s=!1},d(e){e&&(y(n),y(t)),Se(l,e),a()}}}function Su(e,n,t){let r;l(e,pc,e=>{t("$words",r=e)});let s=!1,a="";return B(async()=>{try{await pc.get()}catch(e){t("errors",a=e)}}),{open:s,errors:a,$words:r,click_handler:function(){t("open",s=!0)},click_handler_1:function(){t("open",s=!1)},modal_open_binding:function(e){t("open",s=e)}}}class Du extends Ce{constructor(e){super(),Ie(this,e,Su,_u,o,[])}}function Iu(n){var t,r;return{c(){A(t=_("button"),"class","delete"),r=M(t,"click",n.remove)},m(e,n){w(e,t,n)},p:e,i:e,o:e,d(e){e&&y(t),r()}}}function Cu(e,n,t){let r;l(e,vi,e=>{t("$lesson",r=e)});let{materialId:s}=n;return e.$set=e=>{"materialId"in e&&t("materialId",s=e.materialId)},{materialId:s,remove:async()=>{const e={materials:{disconnect:{id:s}}};try{await vi.patch({id:r.id,input:e}),Ee.add({text:"Removed material from lesson",type:"success"})}catch(e){console.error(e)}}}}class Mu extends Ce{constructor(e){super(),Ie(this,e,Cu,Iu,o,["materialId"])}}function Tu(n){var t,r;return{c(){A(t=_("button"),"class","delete"),r=M(t,"click",n.remove)},m(e,n){w(e,t,n)},p:e,i:e,o:e,d(e){e&&y(t),r()}}}function Au(e,n,t){let r;l(e,vi,e=>{t("$lesson",r=e)});let{wordId:s}=n;return e.$set=e=>{"wordId"in e&&t("wordId",s=e.wordId)},{wordId:s,remove:async()=>{const e={words:{disconnect:{id:s}}};try{await vi.patch({id:r.id,input:e}),Ee.add({text:"Removed word from lesson",type:"success"})}catch(e){console.error(e)}}}}class Nu extends Ce{constructor(e){super(),Ie(this,e,Au,Tu,o,["wordId"])}}function Eu(e,n,t){const r=Object.create(e);return r.word=n[t],r}function Ou(e,n,t){const r=Object.create(e);return r.material=n[t],r}function Lu(e){var n,t=new hn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function Pu(n){var t,r=new vt({props:{what:"Lesson"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function Ru(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$,v,k,S,C,T,E,O,L,P,R,j,z,q,H,F,W,Y,B,U,G,Z,V,X,Q,K,ee,ne,te,se,ae,ie,oe,le,ce,fe,ge,he,$e,ve,be=e.$lesson.name,we=Vl(e.$lesson.summaryEN,{breaks:!0}),ye=Vl(e.$lesson.homeworkEN,{breaks:!0}),xe=Vl(e.$lesson.summaryZH,{breaks:!0}),De=Vl(e.$lesson.homeworkZH,{breaks:!0}),Ie=new iu({props:{item:e.$lesson,type:"lessons",store:vi}}),Ce=e.$lesson.materials&&e.$lesson.materials.length>0&&ju(e),Me=new hu({props:{lesson:e.$lesson}}),Te=e.$lesson.words&&e.$lesson.words.length>0&&qu(e),Ae=new Du({});function Ne(n){e.deleteitem_open_binding.call(null,n),he=!0,re(()=>he=!1)}let Ee={id:e.$lesson.id,store:$i,type:"lesson",name:e.$lesson.title};void 0!==e.showDelete&&(Ee.open=e.showDelete);var Oe=new Mn({props:Ee});return J.push(()=>ke(Oe,"open",Ne)),{c(){n=_("h1"),t=D(be),r=I(),Ie.$$.fragment.c(),s=I(),a=_("section"),(i=_("h2")).textContent="Lesson Summary",o=I(),(l=_("h3")).textContent="English",c=I(),d=_("noscript"),u=_("noscript"),p=I(),(m=_("h2")).textContent="Homework",f=I(),(g=_("h3")).textContent="English",h=I(),$=_("noscript"),v=_("noscript"),k=I(),(S=_("h2")).textContent="Lesson Summary",C=I(),(T=_("h3")).textContent="Chinese",E=I(),O=_("noscript"),L=_("noscript"),P=I(),(R=_("h2")).textContent="Homework",j=I(),(z=_("h3")).textContent="Chinese",q=I(),H=_("noscript"),F=I(),W=_("section"),(Y=_("h2")).textContent="Materials",B=I(),Ce&&Ce.c(),U=I(),Me.$$.fragment.c(),G=I(),Z=_("section"),(V=_("h2")).textContent="Words",X=I(),Te&&Te.c(),Q=I(),Ae.$$.fragment.c(),K=I(),ee=_("section"),(ne=_("h2")).textContent="Lesson actions",te=I(),se=_("div"),ae=_("a"),ie=_("i"),oe=D("Edit"),ce=I(),(fe=_("button")).innerHTML='<i class="fas fa-trash"></i>Delete',ge=I(),Oe.$$.fragment.c(),A(n,"class","title"),A(i,"class","title is-4 svelte-1cb6t0j"),A(l,"class","subtitle"),A(m,"class","title is-4 svelte-1cb6t0j"),A(g,"class","subtitle"),A(S,"class","title is-4 svelte-1cb6t0j"),A(T,"class","subtitle"),A(R,"class","title is-4 svelte-1cb6t0j"),A(z,"class","subtitle"),A(a,"class","summaries svelte-1cb6t0j"),A(Y,"class","title is-4 svelte-1cb6t0j"),A(W,"class","materials svelte-1cb6t0j"),A(V,"class","title is-4 svelte-1cb6t0j"),A(Z,"class","words svelte-1cb6t0j"),A(ne,"class","title is-4 svelte-1cb6t0j"),A(ie,"class","fas fa-edit"),A(ae,"class","button is-primary"),A(ae,"href",le="#/edit-lesson/"+e.$lesson.id),A(fe,"class","button is-danger"),A(se,"class","buttons"),A(ee,"class","actions svelte-1cb6t0j"),ve=M(fe,"click",e.click_handler)},m(e,y){w(e,n,y),b(n,t),w(e,r,y),_e(Ie,e,y),w(e,s,y),w(e,a,y),b(a,i),b(a,o),b(a,l),b(a,c),b(a,d),d.insertAdjacentHTML("afterend",we),b(a,u),b(a,p),b(a,m),b(a,f),b(a,g),b(a,h),b(a,$),$.insertAdjacentHTML("afterend",ye),b(a,v),b(a,k),b(a,S),b(a,C),b(a,T),b(a,E),b(a,O),O.insertAdjacentHTML("afterend",xe),b(a,L),b(a,P),b(a,R),b(a,j),b(a,z),b(a,q),b(a,H),H.insertAdjacentHTML("afterend",De),w(e,F,y),w(e,W,y),b(W,Y),b(W,B),Ce&&Ce.m(W,null),b(W,U),_e(Me,W,null),w(e,G,y),w(e,Z,y),b(Z,V),b(Z,X),Te&&Te.m(Z,null),b(Z,Q),_e(Ae,Z,null),w(e,K,y),w(e,ee,y),b(ee,ne),b(ee,te),b(ee,se),b(se,ae),b(ae,ie),b(ae,oe),b(se,ce),b(se,fe),b(se,ge),_e(Oe,se,null),$e=!0},p(e,n){$e&&!e.$lesson||be===(be=n.$lesson.name)||N(t,be);var r={};e.$lesson&&(r.item=n.$lesson),e.lesson&&(r.store=vi),Ie.$set(r),$e&&!e.$lesson||we===(we=Vl(n.$lesson.summaryEN,{breaks:!0}))||(x(d,u),d.insertAdjacentHTML("afterend",we)),$e&&!e.$lesson||ye===(ye=Vl(n.$lesson.homeworkEN,{breaks:!0}))||(x($,v),$.insertAdjacentHTML("afterend",ye)),$e&&!e.$lesson||xe===(xe=Vl(n.$lesson.summaryZH,{breaks:!0}))||(x(O,L),O.insertAdjacentHTML("afterend",xe)),$e&&!e.$lesson||De===(De=Vl(n.$lesson.homeworkZH,{breaks:!0}))||(!function(e){for(;e.nextSibling;)e.parentNode.removeChild(e.nextSibling)}(H),H.insertAdjacentHTML("afterend",De)),n.$lesson.materials&&n.$lesson.materials.length>0?Ce?(Ce.p(e,n),pe(Ce,1)):((Ce=ju(n)).c(),pe(Ce,1),Ce.m(W,U)):Ce&&(de(),me(Ce,1,1,()=>{Ce=null}),ue());var s={};e.$lesson&&(s.lesson=n.$lesson),Me.$set(s),n.$lesson.words&&n.$lesson.words.length>0?Te?(Te.p(e,n),pe(Te,1)):((Te=qu(n)).c(),pe(Te,1),Te.m(Z,Q)):Te&&(de(),me(Te,1,1,()=>{Te=null}),ue()),$e&&!e.$lesson||le===(le="#/edit-lesson/"+n.$lesson.id)||A(ae,"href",le);var a={};e.$lesson&&(a.id=n.$lesson.id),e.lessons&&(a.store=$i),e.$lesson&&(a.name=n.$lesson.title),!he&&e.showDelete&&(a.open=n.showDelete),Oe.$set(a)},i(e){$e||(pe(Ie.$$.fragment,e),pe(Ce),pe(Me.$$.fragment,e),pe(Te),pe(Ae.$$.fragment,e),pe(Oe.$$.fragment,e),$e=!0)},o(e){me(Ie.$$.fragment,e),me(Ce),me(Me.$$.fragment,e),me(Te),me(Ae.$$.fragment,e),me(Oe.$$.fragment,e),$e=!1},d(e){e&&(y(n),y(r)),Se(Ie,e),e&&(y(s),y(a),y(F),y(W)),Ce&&Ce.d(),Se(Me),e&&(y(G),y(Z)),Te&&Te.d(),Se(Ae),e&&(y(K),y(ee)),Se(Oe),ve()}}}function ju(e){var n,t,r=[],s=new Map,a=e.$lesson.materials;const i=e=>e.material.id;for(var o=0;o<a.length;o+=1){let n=Ou(e,a,o),t=i(n);s.set(t,r[o]=zu(t,n))}return{c(){for(n=_("ul"),o=0;o<r.length;o+=1)r[o].c();A(n,"class","materials-list svelte-1cb6t0j")},m(e,s){for(w(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=t.$lesson.materials;de(),r=ye(r,e,i,1,t,a,s,n,we,zu,null,Ou),ue()},i(e){if(!t){for(var n=0;n<a.length;n+=1)pe(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)me(r[o]);t=!1},d(e){for(e&&y(n),o=0;o<r.length;o+=1)r[o].d()}}}function zu(e,n){var t,r,s,a,i,o,l,c,d,u=n.material.title,p=n.material.type,m=new Mu({props:{materialId:n.material.id}});return{key:e,first:null,c(){t=_("li"),r=_("a"),s=D(u),i=D("\n           - "),o=D(p),l=I(),m.$$.fragment.c(),c=I(),A(r,"href",a="#/material/"+n.material.id),this.first=t},m(e,n){w(e,t,n),b(t,r),b(r,s),b(t,i),b(t,o),b(t,l),_e(m,t,null),b(t,c),d=!0},p(e,n){d&&!e.$lesson||u===(u=n.material.title)||N(s,u),d&&!e.$lesson||a===(a="#/material/"+n.material.id)||A(r,"href",a),d&&!e.$lesson||p===(p=n.material.type)||N(o,p);var t={};e.$lesson&&(t.materialId=n.material.id),m.$set(t)},i(e){d||(pe(m.$$.fragment,e),d=!0)},o(e){me(m.$$.fragment,e),d=!1},d(e){e&&y(t),Se(m)}}}function qu(e){var n,t,r=[],s=new Map,a=e.$lesson.words;const i=e=>e.word.id;for(var o=0;o<a.length;o+=1){let n=Eu(e,a,o),t=i(n);s.set(t,r[o]=Hu(t,n))}return{c(){for(n=_("ul"),o=0;o<r.length;o+=1)r[o].c();A(n,"class","words-list")},m(e,s){for(w(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=t.$lesson.words;de(),r=ye(r,e,i,1,t,a,s,n,we,Hu,null,Eu),ue()},i(e){if(!t){for(var n=0;n<a.length;n+=1)pe(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)me(r[o]);t=!1},d(e){for(e&&y(n),o=0;o<r.length;o+=1)r[o].d()}}}function Hu(e,n){var t,r,s,a,i,o,l,c,d,u,p=n.word.english,m=n.word.chinese,f=new Nu({props:{wordId:n.word.id}});return{key:e,first:null,c(){t=_("li"),r=_("a"),s=D(p),a=D(" ("),i=D(m),o=D(")"),c=I(),f.$$.fragment.c(),d=I(),A(r,"href",l="#/word/"+n.word.id),this.first=t},m(e,n){w(e,t,n),b(t,r),b(r,s),b(r,a),b(r,i),b(r,o),b(t,c),_e(f,t,null),b(t,d),u=!0},p(e,n){u&&!e.$lesson||p===(p=n.word.english)||N(s,p),u&&!e.$lesson||m===(m=n.word.chinese)||N(i,m),u&&!e.$lesson||l===(l="#/word/"+n.word.id)||A(r,"href",l);var t={};e.$lesson&&(t.wordId=n.word.id),f.$set(t)},i(e){u||(pe(f.$$.fragment,e),u=!0)},o(e){me(f.$$.fragment,e),u=!1},d(e){e&&y(t),Se(f)}}}function Fu(e){var n,t,r,s,a,i,o=e.errors&&Lu(e),l=[Ru,Pu],c=[];function d(e){return e.$lesson&&e.$lesson.id===e.params.id?0:e.errors?-1:1}return~(r=d(e))&&(s=c[r]=l[r](e)),{c(){n=I(),o&&o.c(),t=I(),s&&s.c(),a=C(),document.title="Lesson Details"},m(e,s){w(e,n,s),o&&o.m(e,s),w(e,t,s),~r&&c[r].m(e,s),w(e,a,s),i=!0},p(e,n){n.errors?o?(o.p(e,n),pe(o,1)):((o=Lu(n)).c(),pe(o,1),o.m(t.parentNode,t)):o&&(de(),me(o,1,1,()=>{o=null}),ue());var i=r;(r=d(n))===i?~r&&c[r].p(e,n):(s&&(de(),me(c[i],1,1,()=>{c[i]=null}),ue()),~r?((s=c[r])||(s=c[r]=l[r](n)).c(),pe(s,1),s.m(a.parentNode,a)):s=null)},i(e){i||(pe(o),pe(s),i=!0)},o(e){me(o),me(s),i=!1},d(e){e&&y(n),o&&o.d(e),e&&y(t),~r&&c[r].d(e),e&&y(a)}}}function Wu(e,n,t){let r;l(e,vi,e=>{t("$lesson",r=e)});let{params:s={}}=n,a="",i=!1;return B(async()=>{if(!r||r.id!==s.id)try{await vi.get(s.id)}catch(e){t("errors",a=e),Ee.add({text:"Could not fetch lesson from the server",type:"danger"})}}),e.$set=e=>{"params"in e&&t("params",s=e.params)},{params:s,errors:a,showDelete:i,$lesson:r,click_handler:function(){t("showDelete",i=!0)},deleteitem_open_binding:function(e){t("showDelete",i=e)}}}function Yu(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k,S,D,C,N,E,O,L,R,j,z,q,H,F=new hn({props:{errors:e.errors}});function W(n){e.input0_value_binding.call(null,n),s=!0,re(()=>s=!1)}let Y={label:"Name",placeholder:"i.e. 'My Body part 3'",required:!0};void 0!==e.name&&(Y.value=e.name);var B=new qn({props:Y});return J.push(()=>ke(B,"value",W)),{c(){n=_("form"),F.$$.fragment.c(),t=I(),r=_("div"),B.$$.fragment.c(),i=I(),o=_("div"),(l=_("label")).textContent="Summary in English",c=I(),d=_("textarea"),u=I(),p=_("div"),(m=_("label")).textContent="Homework in English",f=I(),g=_("textarea"),h=I(),$=_("div"),(v=_("label")).textContent="Summary in Chinese",x=I(),k=_("textarea"),S=I(),D=_("div"),(C=_("label")).textContent="Homework in Chinese",N=I(),E=_("textarea"),O=I(),L=_("div"),(R=_("button")).textContent="Save\n      lesson",j=I(),z=_("input"),A(r,"class","field svelte-14t3m6a"),A(l,"class","label"),A(d,"class","textarea is-primary"),A(o,"class","field svelte-14t3m6a"),A(m,"class","label"),A(g,"class","textarea is-primary"),A(p,"class","field svelte-14t3m6a"),A(v,"class","label"),A(k,"class","textarea is-info"),A($,"class","field svelte-14t3m6a"),A(C,"class","label"),A(E,"class","textarea is-info"),A(D,"class","field svelte-14t3m6a"),A(R,"type","submit"),A(R,"class","button is-primary"),P(R,"is-loading",e.loading),A(z,"type","reset"),A(z,"class","button"),z.value="Cancel",A(L,"class","buttons svelte-14t3m6a"),n.noValidate=!0,H=[M(d,"input",e.textarea0_input_handler),M(g,"input",e.textarea1_input_handler),M(k,"input",e.textarea2_input_handler),M(E,"input",e.textarea3_input_handler),M(n,"submit",T(e.handleSubmit)),M(n,"reset",e.reset_handler)]},m(s,a){w(s,n,a),_e(F,n,null),b(n,t),b(n,r),_e(B,r,null),b(n,i),b(n,o),b(o,l),b(o,c),b(o,d),d.value=e.summaryEN,b(n,u),b(n,p),b(p,m),b(p,f),b(p,g),g.value=e.homeworkEN,b(n,h),b(n,$),b($,v),b($,x),b($,k),k.value=e.summaryZH,b(n,S),b(n,D),b(D,C),b(D,N),b(D,E),E.value=e.homeworkZH,b(n,O),b(n,L),b(L,R),e.button_binding(R),b(L,j),b(L,z),e.form_1_binding(n),q=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),F.$set(t);var r={};!s&&e.name&&(r.value=n.name),B.$set(r),e.summaryEN&&(d.value=n.summaryEN),e.homeworkEN&&(g.value=n.homeworkEN),e.summaryZH&&(k.value=n.summaryZH),e.homeworkZH&&(E.value=n.homeworkZH),e.loading&&P(R,"is-loading",n.loading)},i(e){q||(pe(F.$$.fragment,e),pe(B.$$.fragment,e),q=!0)},o(e){me(F.$$.fragment,e),me(B.$$.fragment,e),q=!1},d(t){t&&y(n),Se(F),Se(B),e.button_binding(null),e.form_1_binding(null),a(H)}}}function Bu(e,n,t){let r,s,{errors:a,loading:i,name:o="",summaryEN:l="",homeworkEN:c="",homeworkZH:d="",summaryZH:u="",id:p="",tags:m=[]}=n;const f=G();return e.$set=e=>{"errors"in e&&t("errors",a=e.errors),"loading"in e&&t("loading",i=e.loading),"name"in e&&t("name",o=e.name),"summaryEN"in e&&t("summaryEN",l=e.summaryEN),"homeworkEN"in e&&t("homeworkEN",c=e.homeworkEN),"homeworkZH"in e&&t("homeworkZH",d=e.homeworkZH),"summaryZH"in e&&t("summaryZH",u=e.summaryZH),"id"in e&&t("id",p=e.id),"tags"in e&&t("tags",m=e.tags)},e.$$.update=(e={saveButton:1,loading:1})=>{(e.saveButton||e.loading)&&r&&(r.disabled=i,t("saveButton",r),t("loading",i))},{saveButton:r,form:s,errors:a,loading:i,name:o,summaryEN:l,homeworkEN:c,homeworkZH:d,summaryZH:u,id:p,tags:m,handleSubmit:()=>{s.checkValidity()?f("submit",{name:o,summaryEN:l,summaryZH:u,homeworkEN:c,homeworkZH:d}):Ee.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){Z(e,n)},input0_value_binding:function(e){t("name",o=e)},textarea0_input_handler:function(){l=this.value,t("summaryEN",l)},textarea1_input_handler:function(){c=this.value,t("homeworkEN",c)},textarea2_input_handler:function(){u=this.value,t("summaryZH",u)},textarea3_input_handler:function(){d=this.value,t("homeworkZH",d)},button_binding:function(e){J[e?"unshift":"push"](()=>{t("saveButton",r=e)})},form_1_binding:function(e){J[e?"unshift":"push"](()=>{t("form",s=e)})}}}class Uu extends Ce{constructor(e){super(),Ie(this,e,Bu,Yu,o,["errors","loading","name","summaryEN","homeworkEN","homeworkZH","summaryZH","id","tags"])}}function Gu(n){var t,r=new vt({props:{what:"lesson"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function Zu(e){var n,r=[{errors:e.errors},{loading:e.loading},e.$lesson,{id:e.params.id}];let s={};for(var a=0;a<r.length;a+=1)s=t(s,r[a]);var i=new Uu({props:s});return i.$on("reset",e.reset),i.$on("submit",e.save),{c(){i.$$.fragment.c()},m(e,t){_e(i,e,t),n=!0},p(e,n){var t=e.errors||e.loading||e.$lesson||e.params?xe(r,[e.errors&&{errors:n.errors},e.loading&&{loading:n.loading},e.$lesson&&n.$lesson,e.params&&{id:n.params.id}]):{};i.$set(t)},i(e){n||(pe(i.$$.fragment,e),n=!0)},o(e){me(i.$$.fragment,e),n=!1},d(e){Se(i,e)}}}function Vu(e){var n,t,r,s,a,i,o,l=[Zu,Gu],c=[];function d(e){return vi?0:1}return s=d(),a=c[s]=l[s](e),{c(){n=I(),(t=_("h1")).textContent="Edit a Lesson",r=I(),a.c(),i=C(),document.title="New Lesson",A(t,"class","title")},m(e,a){w(e,n,a),w(e,t,a),w(e,r,a),c[s].m(e,a),w(e,i,a),o=!0},p(e,n){var t=s;(s=d())===t?c[s].p(e,n):(de(),me(c[t],1,1,()=>{c[t]=null}),ue(),(a=c[s])||(a=c[s]=l[s](n)).c(),pe(a,1),a.m(i.parentNode,i))},i(e){o||(pe(a),o=!0)},o(e){me(a),o=!1},d(e){e&&(y(n),y(t),y(r)),c[s].d(e),e&&y(i)}}}function Ju(e,n,t){let r;l(e,vi,e=>{t("$lesson",r=e)});let s=!1,a="",{params:i={}}=n;B(async()=>{if(!r||r.id===i.id)try{await vi.get(i.id)}catch(e){t("errors",a=e),Ee.add({text:"Could not fetch lesson from the server",type:"danger"})}});const o=()=>{t("errors",a=""),nn(`/lesson/${i.id}`)};return e.$set=e=>{"params"in e&&t("params",i=e.params)},{loading:s,errors:a,params:i,reset:o,save:async({detail:e})=>{console.log(e),t("loading",s=!0);try{await $i.patch(e,i.id),Ee.add({text:`Saved edits to lesson '${e.name}'`,type:"success"}),o()}catch(e){t("errors",a=e),Ee.add({text:"Could not save lesson.",type:"danger"})}finally{t("loading",s=!1)}},$lesson:r}}function Xu(e){var n,t,r,s,a=new Uu({props:{errors:e.errors,loading:e.loading}});return a.$on("reset",e.reset),a.$on("submit",e.save),{c(){n=I(),(t=_("h1")).textContent="New Lesson",r=I(),a.$$.fragment.c(),document.title="New Lesson",A(t,"class","title")},m(e,i){w(e,n,i),w(e,t,i),w(e,r,i),_e(a,e,i),s=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),e.loading&&(t.loading=n.loading),a.$set(t)},i(e){s||(pe(a.$$.fragment,e),s=!0)},o(e){me(a.$$.fragment,e),s=!1},d(e){e&&(y(n),y(t),y(r)),Se(a,e)}}}function Qu(e,n,t){let r=!1,s="";const a=()=>{t("errors",s=""),nn("/lessons")};return{loading:r,errors:s,reset:a,save:async({detail:e})=>{t("loading",r=!0);try{await $i.create(e),Ee.add({text:`Saved new lesson '${e.name}'`,type:"success"}),a()}catch(e){t("errors",s=e),Ee.add({text:"Could not save new lesson.",type:"danger"})}finally{t("loading",r=!1)}}}}function Ku(e,n,t){const r=Object.create(e);return r.tag=n[t],r}function ep(e,n,t){const r=Object.create(e);return r.material=n[t],r}function np(e){var n,t,r,s,a,i=e.materials.length,o=[],l=new Map,c=e.materials;const d=e=>e.material.id;for(var u=0;u<c.length;u+=1){let n=ep(e,c,u),t=d(n);l.set(t,o[u]=sp(t,n))}return{c(){for(n=_("p"),t=D(i),r=D(" matching materials found:"),s=I(),u=0;u<o.length;u+=1)o[u].c();a=C()},m(e,i){for(w(e,n,i),b(n,t),b(n,r),w(e,s,i),u=0;u<o.length;u+=1)o[u].m(e,i);w(e,a,i)},p(e,n){e.materials&&i!==(i=n.materials.length)&&N(t,i);const r=n.materials;o=ye(o,e,d,1,n,r,l,a.parentNode,be,sp,a,ep)},d(e){for(e&&(y(n),y(s)),u=0;u<o.length;u+=1)o[u].d(e);e&&y(a)}}}function tp(e){var n,t=[],r=new Map,s=e.material.tags;const a=e=>e.tag.id;for(var i=0;i<s.length;i+=1){let n=Ku(e,s,i),o=a(n);r.set(o,t[i]=rp(o,n))}return{c(){for(n=_("div"),i=0;i<t.length;i+=1)t[i].c();A(n,"class","tags")},m(e,r){for(w(e,n,r),i=0;i<t.length;i+=1)t[i].m(n,null)},p(e,s){const i=s.material.tags;t=ye(t,e,a,1,s,i,r,n,be,rp,null,Ku)},d(e){for(e&&y(n),i=0;i<t.length;i+=1)t[i].d()}}}function rp(e,n){var t,r,s=n.tag.name;return{key:e,first:null,c(){t=_("span"),r=D(s),A(t,"class","tag is-dark"),this.first=t},m(e,n){w(e,t,n),b(t,r)},p(e,n){e.materials&&s!==(s=n.tag.name)&&N(r,s)},d(e){e&&y(t)}}}function sp(e,n){var t,r,s,a,i,o,l,c,d,u=n.material.title,p=n.material.type,m=n.material.tags&&n.material.tags.length>0&&tp(n);return{key:e,first:null,c(){t=_("li"),r=_("a"),s=D(u),i=I(),o=_("span"),l=D(p),c=I(),m&&m.c(),d=I(),A(r,"href",a="#/material/"+n.material.id),A(o,"class","type svelte-wyy114"),A(t,"class","svelte-wyy114"),this.first=t},m(e,n){w(e,t,n),b(t,r),b(r,s),b(t,i),b(t,o),b(o,l),b(t,c),m&&m.m(t,null),b(t,d)},p(e,n){e.materials&&u!==(u=n.material.title)&&N(s,u),e.materials&&a!==(a="#/material/"+n.material.id)&&A(r,"href",a),e.materials&&p!==(p=n.material.type)&&N(l,p),n.material.tags&&n.material.tags.length>0?m?m.p(e,n):((m=tp(n)).c(),m.m(t,d)):m&&(m.d(1),m=null)},d(e){e&&y(t),m&&m.d()}}}function ap(n){var t,r=n.materials&&np(n);return{c(){t=_("section"),r&&r.c(),A(t,"class","materials-list svelte-wyy114")},m(e,n){w(e,t,n),r&&r.m(t,null)},p(e,n){n.materials?r?r.p(e,n):((r=np(n)).c(),r.m(t,null)):r&&(r.d(1),r=null)},i:e,o:e,d(e){e&&y(t),r&&r.d()}}}function ip(e,n,t){let{materials:r}=n;return e.$set=e=>{"materials"in e&&t("materials",r=e.materials)},{materials:r}}class op extends Ce{constructor(e){super(),Ie(this,e,ip,ap,o,["materials"])}}function lp(e){var n;return{c(){n=D("Create")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function cp(e){var n;return{c(){n=D("Edit")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function dp(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k;function S(e){return e.id?cp:lp}var C=S(e),N=C(e),E=new hn({props:{errors:e.errors}});function O(n){e.input0_value_binding.call(null,n),o=!0,re(()=>o=!1)}let L={label:"Title",placeholder:"e.g. 'Song: Teacher on the bookcase'",required:!0};void 0!==e.title&&(L.value=e.title);var R=new qn({props:L});function j(n){e.input1_value_binding.call(null,n),c=!0,re(()=>c=!1)}J.push(()=>ke(R,"value",O));let z={label:"Complete URL",required:!0};void 0!==e.url&&(z.value=e.url);var q=new qn({props:z});function H(n){e.input2_value_binding.call(null,n),u=!0,re(()=>u=!1)}J.push(()=>ke(q,"value",j));let F={label:"Filetype",placeholder:"e.g. 'audio/mp3'",required:!0};void 0!==e.type&&(F.value=e.type);var W=new qn({props:F});return J.push(()=>ke(W,"value",H)),{c(){n=_("h1"),N.c(),t=D(" material"),r=I(),s=_("form"),E.$$.fragment.c(),i=I(),R.$$.fragment.c(),l=I(),q.$$.fragment.c(),d=I(),W.$$.fragment.c(),p=I(),m=_("textarea"),f=I(),g=_("div"),(h=_("button")).textContent="Save material",$=I(),v=_("input"),A(n,"class","title"),A(m,"class","textarea"),A(h,"type","submit"),A(h,"class","button is-primary"),P(h,"is-loading",e.loading),A(v,"type","reset"),A(v,"class","button"),v.value="Cancel",A(g,"class","buttons svelte-oih4d0"),s.noValidate=!0,A(s,"class","svelte-oih4d0"),k=[M(m,"input",e.textarea_input_handler),M(s,"submit",T(e.handleSubmit)),M(s,"reset",e.reset_handler)]},m(a,o){w(a,n,o),N.m(n,null),b(n,t),w(a,r,o),w(a,s,o),_e(E,s,null),b(s,i),_e(R,s,null),b(s,l),_e(q,s,null),b(s,d),_e(W,s,null),b(s,p),b(s,m),m.value=e.notes,b(s,f),b(s,g),b(g,h),e.button_binding(h),b(g,$),b(g,v),e.form_1_binding(s),x=!0},p(e,r){C!==(C=S(r))&&(N.d(1),(N=C(r))&&(N.c(),N.m(n,t)));var s={};e.errors&&(s.errors=r.errors),E.$set(s);var a={};!o&&e.title&&(a.value=r.title),R.$set(a);var i={};!c&&e.url&&(i.value=r.url),q.$set(i);var l={};!u&&e.type&&(l.value=r.type),W.$set(l),e.notes&&(m.value=r.notes),e.loading&&P(h,"is-loading",r.loading)},i(e){x||(pe(E.$$.fragment,e),pe(R.$$.fragment,e),pe(q.$$.fragment,e),pe(W.$$.fragment,e),x=!0)},o(e){me(E.$$.fragment,e),me(R.$$.fragment,e),me(q.$$.fragment,e),me(W.$$.fragment,e),x=!1},d(t){t&&y(n),N.d(),t&&(y(r),y(s)),Se(E),Se(R),Se(q),Se(W),e.button_binding(null),e.form_1_binding(null),a(k)}}}function up(e,n,t){let r,s,{title:a="",url:i="",notes:o="",type:l="",id:c,errors:d,loading:u}=n;const p=G();return e.$set=e=>{"title"in e&&t("title",a=e.title),"url"in e&&t("url",i=e.url),"notes"in e&&t("notes",o=e.notes),"type"in e&&t("type",l=e.type),"id"in e&&t("id",c=e.id),"errors"in e&&t("errors",d=e.errors),"loading"in e&&t("loading",u=e.loading)},e.$$.update=(e={saveButton:1,loading:1})=>{(e.saveButton||e.loading)&&r&&(r.disabled=u,t("saveButton",r),t("loading",u))},{title:a,url:i,notes:o,type:l,id:c,errors:d,loading:u,saveButton:r,form:s,handleSubmit:()=>{s.checkValidity()?p("submit",{title:a,url:i,notes:o,type:l}):Ee.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){Z(e,n)},input0_value_binding:function(e){t("title",a=e)},input1_value_binding:function(e){t("url",i=e)},input2_value_binding:function(e){t("type",l=e)},textarea_input_handler:function(){o=this.value,t("notes",o)},button_binding:function(e){J[e?"unshift":"push"](()=>{t("saveButton",r=e)})},form_1_binding:function(e){J[e?"unshift":"push"](()=>{t("form",s=e)})}}}class pp extends Ce{constructor(e){super(),Ie(this,e,up,dp,o,["title","url","notes","type","id","errors","loading"])}}function mp(e){var n,t=new pp({props:{errors:e.errors,loading:e.loading}});return t.$on("reset",e.reset),t.$on("submit",e.save),{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function fp(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,re(()=>r=!1)}let o={$$slots:{default:[mp]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new kn({props:o});return J.push(()=>ke(l,"open",i)),{c(){(n=_("button")).innerHTML='<i class="fas fa-plus"></i>Add material',t=I(),l.$$.fragment.c(),A(n,"class","button is-primary"),a=M(n,"click",e.click_handler)},m(e,r){w(e,n,r),w(e,t,r),_e(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||(pe(l.$$.fragment,e),s=!0)},o(e){me(l.$$.fragment,e),s=!1},d(e){e&&(y(n),y(t)),Se(l,e),a()}}}function gp(e,n,t){let r=!1,s="",a=!1;const i=()=>{t("errors",s=""),t("open",a=!1)};return{loading:r,errors:s,open:a,reset:i,save:async({detail:e})=>{t("loading",r=!0);try{await Nc.create(e),Ee.add({text:`Saved new material '${e.title}'`,type:"success"}),i()}catch(e){t("errors",s=e),Ee.add({text:"Could not save new material.",type:"danger"})}finally{t("loading",r=!1)}},click_handler:function(){t("open",a=!0)},modal_open_binding:function(e){t("open",a=e)}}}class hp extends Ce{constructor(e){super(),Ie(this,e,gp,fp,o,[])}}function $p(n){var t,r=new vt({props:{what:"materials"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function vp(e){var n,t=new op({props:{materials:e.$materials}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.$materials&&(r.materials=n.$materials),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function bp(e){var n,t,r,s,a,i,o,l,c,d,u=new hn({props:{errors:e.errors}}),p=new hp({}),m=new _i({props:{searchParams:"title",store:Nc}}),f=[vp,$p],g=[];function h(e){return e.$materials?0:e.errors?-1:1}return~(o=h(e))&&(l=g[o]=f[o](e)),{c(){n=I(),(t=_("h1")).textContent="Materials",r=I(),u.$$.fragment.c(),s=I(),p.$$.fragment.c(),a=I(),m.$$.fragment.c(),i=I(),l&&l.c(),c=C(),document.title="Materials",A(t,"class","title")},m(e,l){w(e,n,l),w(e,t,l),w(e,r,l),_e(u,e,l),w(e,s,l),_e(p,e,l),w(e,a,l),_e(m,e,l),w(e,i,l),~o&&g[o].m(e,l),w(e,c,l),d=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),u.$set(t);var r={};e.materials&&(r.store=Nc),m.$set(r);var s=o;(o=h(n))===s?~o&&g[o].p(e,n):(l&&(de(),me(g[s],1,1,()=>{g[s]=null}),ue()),~o?((l=g[o])||(l=g[o]=f[o](n)).c(),pe(l,1),l.m(c.parentNode,c)):l=null)},i(e){d||(pe(u.$$.fragment,e),pe(p.$$.fragment,e),pe(m.$$.fragment,e),pe(l),d=!0)},o(e){me(u.$$.fragment,e),me(p.$$.fragment,e),me(m.$$.fragment,e),me(l),d=!1},d(e){e&&(y(n),y(t),y(r)),Se(u,e),e&&y(s),Se(p,e),e&&y(a),Se(m,e),e&&y(i),~o&&g[o].d(e),e&&y(c)}}}function wp(e,n,t){let r;l(e,Nc,e=>{t("$materials",r=e)});let s="";return B(async()=>{try{await Nc.get({})}catch(e){t("errors",s=e),Ee.add({text:"Couldn't get materials from server.",type:"danger"})}}),{errors:s,$materials:r}}function yp(e){var n,t=new pp({props:{title:e.material.title,url:e.material.url,id:e.material.id,type:e.material.type,notes:e.material.notes,errors:e.errors,loading:e.loading}});return t.$on("submit",e.save),t.$on("reset",e.reset),{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.material&&(r.title=n.material.title),e.material&&(r.url=n.material.url),e.material&&(r.id=n.material.id),e.material&&(r.type=n.material.type),e.material&&(r.notes=n.material.notes),e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function xp(e){var n,t,r=e.open&&yp(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.open?r?(r.p(e,t),pe(r,1)):((r=yp(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function kp(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,re(()=>r=!1)}let o={$$slots:{default:[xp]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new kn({props:o});return J.push(()=>ke(l,"open",i)),{c(){(n=_("button")).innerHTML='<i class="fas fa-edit"></i>Edit\n\t\t\t',t=I(),l.$$.fragment.c(),A(n,"class","button is-primary"),a=M(n,"click",e.click_handler)},m(e,r){w(e,n,r),w(e,t,r),_e(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.open||e.material||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||(pe(l.$$.fragment,e),s=!0)},o(e){me(l.$$.fragment,e),s=!1},d(e){e&&(y(n),y(t)),Se(l,e),a()}}}function _p(e,n,t){let r=!1,s="",a=!1,{material:i}=n;const o=()=>{t("errors",s=""),t("open",a=!1)};return e.$set=e=>{"material"in e&&t("material",i=e.material)},{loading:r,errors:s,open:a,material:i,reset:o,save:async({detail:e})=>{t("loading",r=!0);try{await Nc.patch({input:e,id:i.id}),Ee.add({text:`Saved edits to material '${e.title}'`,type:"success"}),o()}catch(e){t("errors",s=e),Ee.add({text:"Could not save edits to material.",type:"danger"})}finally{t("loading",r=!1)}},click_handler:function(){t("open",a=!0)},modal_open_binding:function(e){t("open",a=e)}}}class Sp extends Ce{constructor(e){super(),Ie(this,e,_p,kp,o,["material"])}}function Dp(e){var n,t=new hn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function Ip(n){var t,r=new vt({props:{what:"Material"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function Cp(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k,S=e.$material.title,C=e.truncate(e.$material.url),T=new iu({props:{item:e.$material,type:"materials",store:Ec}}),E=new Sp({props:{material:e.$material}});function O(n){e.deleteitem_open_binding.call(null,n),v=!0,re(()=>v=!1)}let L={id:e.$material.id,store:Nc,type:"material",name:e.$material.title};void 0!==e.showDelete&&(L.open=e.showDelete);var P=new Mn({props:L});return J.push(()=>ke(P,"open",O)),{c(){n=_("h1"),t=D(S),r=I(),T.$$.fragment.c(),s=I(),a=_("section"),(i=_("h2")).textContent="Material Details",o=I(),l=_("p"),c=D("URL: "),d=_("a"),u=D(C),m=I(),f=_("section"),E.$$.fragment.c(),g=I(),(h=_("button")).innerHTML='<i class="fas fa-trash"></i>Delete',$=I(),P.$$.fragment.c(),A(n,"class","title"),A(i,"class","title is-4 svelte-3e59po"),A(d,"href",p=e.$material.url),A(a,"class","details svelte-3e59po"),A(h,"class","button is-danger"),A(f,"class","buttons svelte-3e59po"),k=M(h,"click",e.click_handler)},m(e,p){w(e,n,p),b(n,t),w(e,r,p),_e(T,e,p),w(e,s,p),w(e,a,p),b(a,i),b(a,o),b(a,l),b(l,c),b(l,d),b(d,u),w(e,m,p),w(e,f,p),_e(E,f,null),b(f,g),b(f,h),b(f,$),_e(P,f,null),x=!0},p(e,n){x&&!e.$material||S===(S=n.$material.title)||N(t,S);var r={};e.$material&&(r.item=n.$material),e.material&&(r.store=Ec),T.$set(r),x&&!e.$material||C===(C=n.truncate(n.$material.url))||N(u,C),x&&!e.$material||p===(p=n.$material.url)||A(d,"href",p);var s={};e.$material&&(s.material=n.$material),E.$set(s);var a={};e.$material&&(a.id=n.$material.id),e.materials&&(a.store=Nc),e.$material&&(a.name=n.$material.title),!v&&e.showDelete&&(a.open=n.showDelete),P.$set(a)},i(e){x||(pe(T.$$.fragment,e),pe(E.$$.fragment,e),pe(P.$$.fragment,e),x=!0)},o(e){me(T.$$.fragment,e),me(E.$$.fragment,e),me(P.$$.fragment,e),x=!1},d(e){e&&(y(n),y(r)),Se(T,e),e&&(y(s),y(a),y(m),y(f)),Se(E),Se(P),k()}}}function Mp(e){var n,t,r,s,a,i,o=e.errors&&Dp(e),l=[Cp,Ip],c=[];function d(e){return e.$material&&e.$material.id===e.params.id?0:e.errors?-1:1}return~(r=d(e))&&(s=c[r]=l[r](e)),{c(){n=I(),o&&o.c(),t=I(),s&&s.c(),a=C(),document.title="Material Details"},m(e,s){w(e,n,s),o&&o.m(e,s),w(e,t,s),~r&&c[r].m(e,s),w(e,a,s),i=!0},p(e,n){n.errors?o?(o.p(e,n),pe(o,1)):((o=Dp(n)).c(),pe(o,1),o.m(t.parentNode,t)):o&&(de(),me(o,1,1,()=>{o=null}),ue());var i=r;(r=d(n))===i?~r&&c[r].p(e,n):(s&&(de(),me(c[i],1,1,()=>{c[i]=null}),ue()),~r?((s=c[r])||(s=c[r]=l[r](n)).c(),pe(s,1),s.m(a.parentNode,a)):s=null)},i(e){i||(pe(o),pe(s),i=!0)},o(e){me(o),me(s),i=!1},d(e){e&&y(n),o&&o.d(e),e&&y(t),~r&&c[r].d(e),e&&y(a)}}}function Tp(e,n,t){let r;l(e,Ec,e=>{t("$material",r=e)});let{params:s={}}=n,a="",i=!1;B(async()=>{if(!r||r.id!==s.id)try{await Ec.get(s.id),null===r&&nn(`/not-found/material/${s.id}`)}catch(e){t("errors",a=e),Ee.add({text:"Could not fetch material from the server",type:"danger"})}});return e.$set=e=>{"params"in e&&t("params",s=e.params)},{params:s,errors:a,showDelete:i,truncate:e=>{if(e.length>80)return e.substring(0,77)+"..."},$material:r,click_handler:function(){t("showDelete",i=!0)},deleteitem_open_binding:function(e){t("showDelete",i=e)}}}function Ap(e,n,t){const r=Object.create(e);return r.tag=n[t],r}function Np(e,n,t){const r=Object.create(e);return r.word=n[t],r}function Ep(e){var n,t,r,s,a,i=e.words.length,o=[],l=new Map,c=e.words;const d=e=>e.word.id;for(var u=0;u<c.length;u+=1){let n=Np(e,c,u),t=d(n);l.set(t,o[u]=Pp(t,n))}return{c(){for(n=_("p"),t=D(i),r=D(" words found:"),s=I(),u=0;u<o.length;u+=1)o[u].c();a=C()},m(e,i){for(w(e,n,i),b(n,t),b(n,r),w(e,s,i),u=0;u<o.length;u+=1)o[u].m(e,i);w(e,a,i)},p(e,n){e.words&&i!==(i=n.words.length)&&N(t,i);const r=n.words;o=ye(o,e,d,1,n,r,l,a.parentNode,be,Pp,a,Np)},d(e){for(e&&(y(n),y(s)),u=0;u<o.length;u+=1)o[u].d(e);e&&y(a)}}}function Op(e){var n,t=[],r=new Map,s=e.word.tags;const a=e=>e.tag.id;for(var i=0;i<s.length;i+=1){let n=Ap(e,s,i),o=a(n);r.set(o,t[i]=Lp(o,n))}return{c(){for(n=_("div"),i=0;i<t.length;i+=1)t[i].c();A(n,"class","tags svelte-4s8ccd")},m(e,r){for(w(e,n,r),i=0;i<t.length;i+=1)t[i].m(n,null)},p(e,s){const i=s.word.tags;t=ye(t,e,a,1,s,i,r,n,be,Lp,null,Ap)},d(e){for(e&&y(n),i=0;i<t.length;i+=1)t[i].d()}}}function Lp(e,n){var t,r,s=n.tag.name;return{key:e,first:null,c(){t=_("span"),r=D(s),A(t,"class","tag is-dark"),this.first=t},m(e,n){w(e,t,n),b(t,r)},p(e,n){e.words&&s!==(s=n.tag.name)&&N(r,s)},d(e){e&&y(t)}}}function Pp(e,n){var t,r,s,a,i,o,l,c,d,u=n.word.english,p=n.word.chinese,m=n.word.tags&&n.word.tags.length>0&&Op(n);return{key:e,first:null,c(){t=_("li"),r=_("a"),s=D(u),a=D(" ("),i=D(p),o=D(")"),c=I(),m&&m.c(),d=I(),A(r,"href",l="#/word/"+n.word.id),A(t,"class","svelte-4s8ccd"),this.first=t},m(e,n){w(e,t,n),b(t,r),b(r,s),b(r,a),b(r,i),b(r,o),b(t,c),m&&m.m(t,null),b(t,d)},p(e,n){e.words&&u!==(u=n.word.english)&&N(s,u),e.words&&p!==(p=n.word.chinese)&&N(i,p),e.words&&l!==(l="#/word/"+n.word.id)&&A(r,"href",l),n.word.tags&&n.word.tags.length>0?m?m.p(e,n):((m=Op(n)).c(),m.m(t,d)):m&&(m.d(1),m=null)},d(e){e&&y(t),m&&m.d()}}}function Rp(n){var t,r=n.words.length>0&&Ep(n);return{c(){t=_("section"),r&&r.c(),A(t,"class","word-list svelte-4s8ccd")},m(e,n){w(e,t,n),r&&r.m(t,null)},p(e,n){n.words.length>0?r?r.p(e,n):((r=Ep(n)).c(),r.m(t,null)):r&&(r.d(1),r=null)},i:e,o:e,d(e){e&&y(t),r&&r.d()}}}function jp(e,n,t){let{words:r=[]}=n;return e.$set=e=>{"words"in e&&t("words",r=e.words)},{words:r}}class zp extends Ce{constructor(e){super(),Ie(this,e,jp,Rp,o,["words"])}}function qp(e){var n;return{c(){n=D("Create")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function Hp(e){var n;return{c(){n=D("Edit")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function Fp(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v;function x(e){return e.id?Hp:qp}var k=x(e),S=k(e),C=new hn({props:{errors:e.errors}});function N(n){e.input0_value_binding.call(null,n),o=!0,re(()=>o=!1)}let E={label:"English",placeholder:"e.g. 'bookcase'",required:!0};void 0!==e.english&&(E.value=e.english);var O=new qn({props:E});function L(n){e.input1_value_binding.call(null,n),c=!0,re(()=>c=!1)}J.push(()=>ke(O,"value",N));let R={label:"Chinese",placeholder:"e.g. '书柜'"};void 0!==e.chinese&&(R.value=e.chinese);var j=new qn({props:R});function z(n){e.input2_value_binding.call(null,n),u=!0,re(()=>u=!1)}J.push(()=>ke(j,"value",L));let q={label:"URL of audio"};void 0!==e.audio&&(q.value=e.audio);var H=new qn({props:q});return J.push(()=>ke(H,"value",z)),{c(){n=_("h1"),S.c(),t=D(" word"),r=I(),s=_("form"),C.$$.fragment.c(),i=I(),O.$$.fragment.c(),l=I(),j.$$.fragment.c(),d=I(),H.$$.fragment.c(),p=I(),m=_("div"),(f=_("button")).textContent="Save word",g=I(),h=_("input"),A(n,"class","title"),A(f,"type","submit"),A(f,"class","button is-primary"),P(f,"is-loading",e.loading),A(h,"type","reset"),A(h,"class","button"),h.value="Cancel",A(m,"class","buttons svelte-oih4d0"),s.noValidate=!0,A(s,"class","svelte-oih4d0"),v=[M(s,"submit",T(e.handleSubmit)),M(s,"reset",e.reset_handler)]},m(a,o){w(a,n,o),S.m(n,null),b(n,t),w(a,r,o),w(a,s,o),_e(C,s,null),b(s,i),_e(O,s,null),b(s,l),_e(j,s,null),b(s,d),_e(H,s,null),b(s,p),b(s,m),b(m,f),e.button_binding(f),b(m,g),b(m,h),e.form_1_binding(s),$=!0},p(e,r){k!==(k=x(r))&&(S.d(1),(S=k(r))&&(S.c(),S.m(n,t)));var s={};e.errors&&(s.errors=r.errors),C.$set(s);var a={};!o&&e.english&&(a.value=r.english),O.$set(a);var i={};!c&&e.chinese&&(i.value=r.chinese),j.$set(i);var l={};!u&&e.audio&&(l.value=r.audio),H.$set(l),e.loading&&P(f,"is-loading",r.loading)},i(e){$||(pe(C.$$.fragment,e),pe(O.$$.fragment,e),pe(j.$$.fragment,e),pe(H.$$.fragment,e),$=!0)},o(e){me(C.$$.fragment,e),me(O.$$.fragment,e),me(j.$$.fragment,e),me(H.$$.fragment,e),$=!1},d(t){t&&y(n),S.d(),t&&(y(r),y(s)),Se(C),Se(O),Se(j),Se(H),e.button_binding(null),e.form_1_binding(null),a(v)}}}function Wp(e,n,t){let r,s,{english:a="",chinese:i="",audio:o="",id:l=null,errors:c,loading:d}=n;const u=G();return e.$set=e=>{"english"in e&&t("english",a=e.english),"chinese"in e&&t("chinese",i=e.chinese),"audio"in e&&t("audio",o=e.audio),"id"in e&&t("id",l=e.id),"errors"in e&&t("errors",c=e.errors),"loading"in e&&t("loading",d=e.loading)},e.$$.update=(e={saveButton:1,loading:1})=>{(e.saveButton||e.loading)&&r&&(r.disabled=d,t("saveButton",r),t("loading",d))},{english:a,chinese:i,audio:o,id:l,errors:c,loading:d,saveButton:r,form:s,handleSubmit:()=>{s.checkValidity()?u("submit",{english:a,chinese:i,audio:o}):Ee.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){Z(e,n)},input0_value_binding:function(e){t("english",a=e)},input1_value_binding:function(e){t("chinese",i=e)},input2_value_binding:function(e){t("audio",o=e)},button_binding:function(e){J[e?"unshift":"push"](()=>{t("saveButton",r=e)})},form_1_binding:function(e){J[e?"unshift":"push"](()=>{t("form",s=e)})}}}class Yp extends Ce{constructor(e){super(),Ie(this,e,Wp,Fp,o,["english","chinese","audio","id","errors","loading"])}}function Bp(e){var n,t=new Yp({props:{errors:e.errors,loading:e.loading}});return t.$on("reset",e.reset),t.$on("submit",e.save),{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function Up(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,re(()=>r=!1)}let o={$$slots:{default:[Bp]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new kn({props:o});return J.push(()=>ke(l,"open",i)),{c(){(n=_("button")).innerHTML='<i class="fas fa-plus"></i>Add word',t=I(),l.$$.fragment.c(),A(n,"class","button is-primary"),a=M(n,"click",e.click_handler)},m(e,r){w(e,n,r),w(e,t,r),_e(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||(pe(l.$$.fragment,e),s=!0)},o(e){me(l.$$.fragment,e),s=!1},d(e){e&&(y(n),y(t)),Se(l,e),a()}}}function Gp(e,n,t){let r=!1,s="",a=!1;const i=()=>{t("errors",s=""),t("open",a=!1)};return{loading:r,errors:s,open:a,reset:i,save:async({detail:e})=>{t("loading",r=!0);try{await pc.create(e),Ee.add({text:`Saved new word '${e.english}'`,type:"success"}),i()}catch(e){t("errors",s=e),Ee.add({text:"Could not save new word.",type:"danger"})}finally{t("loading",r=!1)}},click_handler:function(){t("open",a=!0)},modal_open_binding:function(e){t("open",a=e)}}}class Zp extends Ce{constructor(e){super(),Ie(this,e,Gp,Up,o,[])}}function Vp(n){var t,r=new vt({props:{what:"words"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function Jp(e){var n,t=new zp({props:{words:e.$words}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.$words&&(r.words=n.$words),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function Xp(e){var n,t,r,s,a,i,o,l,c,d,u=new hn({props:{errors:e.errors}}),p=new Zp({}),m=new _i({props:{searchParams:["english","chinese"],store:pc}}),f=[Jp,Vp],g=[];function h(e){return e.$words?0:e.errors?-1:1}return~(o=h(e))&&(l=g[o]=f[o](e)),{c(){n=I(),(t=_("h1")).textContent="Words",r=I(),u.$$.fragment.c(),s=I(),p.$$.fragment.c(),a=I(),m.$$.fragment.c(),i=I(),l&&l.c(),c=C(),document.title="Words",A(t,"class","title")},m(e,l){w(e,n,l),w(e,t,l),w(e,r,l),_e(u,e,l),w(e,s,l),_e(p,e,l),w(e,a,l),_e(m,e,l),w(e,i,l),~o&&g[o].m(e,l),w(e,c,l),d=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),u.$set(t);var r={};e.words&&(r.store=pc),m.$set(r);var s=o;(o=h(n))===s?~o&&g[o].p(e,n):(l&&(de(),me(g[s],1,1,()=>{g[s]=null}),ue()),~o?((l=g[o])||(l=g[o]=f[o](n)).c(),pe(l,1),l.m(c.parentNode,c)):l=null)},i(e){d||(pe(u.$$.fragment,e),pe(p.$$.fragment,e),pe(m.$$.fragment,e),pe(l),d=!0)},o(e){me(u.$$.fragment,e),me(p.$$.fragment,e),me(m.$$.fragment,e),me(l),d=!1},d(e){e&&(y(n),y(t),y(r)),Se(u,e),e&&y(s),Se(p,e),e&&y(a),Se(m,e),e&&y(i),~o&&g[o].d(e),e&&y(c)}}}function Qp(e,n,t){let r;l(e,pc,e=>{t("$words",r=e)});let s="";return B(async()=>{try{await pc.get()}catch(e){t("errors",s=e),Ee.add({text:"Couldn't get words from server.",type:"danger"})}}),{errors:s,$words:r}}function Kp(e){var n,t=new Yp({props:{english:e.word.english,audio:e.word.audio,chinese:e.word.chinese,errors:e.errors,loading:e.loading}});return t.$on("submit",e.save),t.$on("reset",e.reset),{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.word&&(r.english=n.word.english),e.word&&(r.audio=n.word.audio),e.word&&(r.chinese=n.word.chinese),e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function em(e){var n,t,r=e.open&&Kp(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.open?r?(r.p(e,t),pe(r,1)):((r=Kp(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function nm(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,re(()=>r=!1)}let o={$$slots:{default:[em]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new kn({props:o});return J.push(()=>ke(l,"open",i)),{c(){(n=_("button")).innerHTML='<i class="fas fa-edit"></i>Edit\n\t\t\t',t=I(),l.$$.fragment.c(),A(n,"class","button is-primary"),a=M(n,"click",e.click_handler)},m(e,r){w(e,n,r),w(e,t,r),_e(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.open||e.word||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||(pe(l.$$.fragment,e),s=!0)},o(e){me(l.$$.fragment,e),s=!1},d(e){e&&(y(n),y(t)),Se(l,e),a()}}}function tm(e,n,t){let r=!1,s="",a=!1,{word:i}=n;const o=()=>{t("errors",s=""),t("open",a=!1)};return e.$set=e=>{"word"in e&&t("word",i=e.word)},{loading:r,errors:s,open:a,word:i,reset:o,save:async({detail:e})=>{t("loading",r=!0);try{await pc.patch({input:e,id:i.id}),Ee.add({text:`Saved edits to word '${e.english}'`,type:"success"}),o()}catch(e){t("errors",s=e),Ee.add({text:"Could not save word.",type:"danger"})}finally{t("loading",r=!1)}},click_handler:function(){t("open",a=!0)},modal_open_binding:function(e){t("open",a=e)}}}class rm extends Ce{constructor(e){super(),Ie(this,e,tm,nm,o,["word"])}}function sm(e,n,t){const r=Object.create(e);return r.lesson=n[t],r}function am(e){var n,t=new hn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function im(n){var t,r=new vt({props:{what:"word"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function om(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k,S,C,T,E,O,L,P,R,j,z,q=e.$word.english,H=e.$word.chinese,F=e.$word.audio||"none",W=e.$word.lessons.length,Y=new iu({props:{type:"words",item:e.$word,store:pc}}),B=e.$word.lessons&&e.$word.lessons.length>0&&lm(e),U=new rm({props:{word:e.$word}});function G(n){e.deleteitem_open_binding.call(null,n),R=!0,re(()=>R=!1)}let Z={id:e.$word.id,store:pc,type:"word",name:e.$word.english};void 0!==e.showDelete&&(Z.open=e.showDelete);var V=new Mn({props:Z});return J.push(()=>ke(V,"open",G)),{c(){n=_("h1"),t=D(q),r=I(),Y.$$.fragment.c(),s=I(),a=_("section"),(i=_("h2")).textContent="Details",o=I(),l=_("p"),(c=_("strong")).textContent="Chinese",d=D(": "),u=D(H),p=I(),m=_("p"),(f=_("strong")).textContent="Audio",g=D(": "),h=D(F),$=I(),v=_("h2"),x=D("Used in "),k=D(W),S=D(" Lessons"),C=I(),B&&B.c(),T=I(),E=_("section"),U.$$.fragment.c(),O=I(),(L=_("button")).innerHTML='<i class="fas fa-trash"></i>Delete',P=I(),V.$$.fragment.c(),A(n,"class","title"),A(i,"class","title is-4"),A(v,"class","title is-4"),A(a,"class","details svelte-xj6mxc"),A(L,"class","button is-danger"),A(E,"class","buttons svelte-xj6mxc"),z=M(L,"click",e.click_handler)},m(e,y){w(e,n,y),b(n,t),w(e,r,y),_e(Y,e,y),w(e,s,y),w(e,a,y),b(a,i),b(a,o),b(a,l),b(l,c),b(l,d),b(l,u),b(a,p),b(a,m),b(m,f),b(m,g),b(m,h),b(a,$),b(a,v),b(v,x),b(v,k),b(v,S),b(a,C),B&&B.m(a,null),w(e,T,y),w(e,E,y),_e(U,E,null),b(E,O),b(E,L),b(E,P),_e(V,E,null),j=!0},p(e,n){j&&!e.$word||q===(q=n.$word.english)||N(t,q);var r={};e.$word&&(r.item=n.$word),e.words&&(r.store=pc),Y.$set(r),j&&!e.$word||H===(H=n.$word.chinese)||N(u,H),j&&!e.$word||F===(F=n.$word.audio||"none")||N(h,F),j&&!e.$word||W===(W=n.$word.lessons.length)||N(k,W),n.$word.lessons&&n.$word.lessons.length>0?B?B.p(e,n):((B=lm(n)).c(),B.m(a,null)):B&&(B.d(1),B=null);var s={};e.$word&&(s.word=n.$word),U.$set(s);var i={};e.$word&&(i.id=n.$word.id),e.words&&(i.store=pc),e.$word&&(i.name=n.$word.english),!R&&e.showDelete&&(i.open=n.showDelete),V.$set(i)},i(e){j||(pe(Y.$$.fragment,e),pe(U.$$.fragment,e),pe(V.$$.fragment,e),j=!0)},o(e){me(Y.$$.fragment,e),me(U.$$.fragment,e),me(V.$$.fragment,e),j=!1},d(e){e&&(y(n),y(r)),Se(Y,e),e&&(y(s),y(a)),B&&B.d(),e&&(y(T),y(E)),Se(U),Se(V),z()}}}function lm(e){var n,t=[],r=new Map,s=e.$word.lessons;const a=e=>e.lesson.id;for(var i=0;i<s.length;i+=1){let n=sm(e,s,i),o=a(n);r.set(o,t[i]=cm(o,n))}return{c(){for(i=0;i<t.length;i+=1)t[i].c();n=C()},m(e,r){for(i=0;i<t.length;i+=1)t[i].m(e,r);w(e,n,r)},p(e,s){const i=s.$word.lessons;t=ye(t,e,a,1,s,i,r,n.parentNode,be,cm,n,sm)},d(e){for(i=0;i<t.length;i+=1)t[i].d(e);e&&y(n)}}}function cm(e,n){var t,r,s,a,i=n.lesson.name;return{key:e,first:null,c(){t=_("li"),r=_("a"),s=D(i),A(r,"href",a="#/lesson/"+n.lesson.id),this.first=t},m(e,n){w(e,t,n),b(t,r),b(r,s)},p(e,n){e.$word&&i!==(i=n.lesson.name)&&N(s,i),e.$word&&a!==(a="#/lesson/"+n.lesson.id)&&A(r,"href",a)},d(e){e&&y(t)}}}function dm(e){var n,t,r,s,a,i,o=e.errors&&am(e),l=[om,im],c=[];function d(e){return e.$word&&e.$word.id===e.params.id?0:e.errors?-1:1}return~(r=d(e))&&(s=c[r]=l[r](e)),{c(){n=I(),o&&o.c(),t=I(),s&&s.c(),a=C(),document.title="Word Details"},m(e,s){w(e,n,s),o&&o.m(e,s),w(e,t,s),~r&&c[r].m(e,s),w(e,a,s),i=!0},p(e,n){n.errors?o?(o.p(e,n),pe(o,1)):((o=am(n)).c(),pe(o,1),o.m(t.parentNode,t)):o&&(de(),me(o,1,1,()=>{o=null}),ue());var i=r;(r=d(n))===i?~r&&c[r].p(e,n):(s&&(de(),me(c[i],1,1,()=>{c[i]=null}),ue()),~r?((s=c[r])||(s=c[r]=l[r](n)).c(),pe(s,1),s.m(a.parentNode,a)):s=null)},i(e){i||(pe(o),pe(s),i=!0)},o(e){me(o),me(s),i=!1},d(e){e&&y(n),o&&o.d(e),e&&y(t),~r&&c[r].d(e),e&&y(a)}}}function um(e,n,t){let r;l(e,mc,e=>{t("$word",r=e)});let{params:s={}}=n,a="",i=!1;return B(async()=>{if(!r||r.id!==s.id)try{await mc.get(s.id),null===r&&nn(`/not-found/material/${s.id}`)}catch(e){t("errors",a=e),Ee.add({text:"Could not fetch word from the server",type:"danger"})}}),e.$set=e=>{"params"in e&&t("params",s=e.params)},{params:s,errors:a,showDelete:i,$word:r,click_handler:function(){t("showDelete",i=!0)},deleteitem_open_binding:function(e){t("showDelete",i=e)}}}function pm(e){var n,t=new hn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function mm(e){var n,t,r,s,i,o,l,c,d,u,p=e.errors&&pm(e);function m(n){e.input0_value_binding.call(null,n),r=!0,re(()=>r=!1)}let f={type:"text",label:e.id?"Name":"New tag name"};void 0!==e.name&&(f.value=e.name);var g=new qn({props:f});return J.push(()=>ke(g,"value",m)),{c(){n=_("form"),p&&p.c(),t=I(),g.$$.fragment.c(),s=I(),i=_("div"),(o=_("button")).textContent="Save Tag",l=I(),c=_("input"),A(o,"type","submit"),A(o,"class","button is-primary"),P(o,"is-loading",e.loading),A(c,"type","reset"),A(c,"class","button"),c.value="Cancel",A(i,"class","buttons svelte-i7r75e"),n.noValidate=!0,u=[M(n,"submit",T(e.handleSubmit)),M(n,"reset",e.reset_handler)]},m(r,a){w(r,n,a),p&&p.m(n,null),b(n,t),_e(g,n,null),b(n,s),b(n,i),b(i,o),e.button_binding(o),b(i,l),b(i,c),e.form_1_binding(n),d=!0},p(e,s){s.errors?p?(p.p(e,s),pe(p,1)):((p=pm(s)).c(),pe(p,1),p.m(n,t)):p&&(de(),me(p,1,1,()=>{p=null}),ue());var a={};e.id&&(a.label=s.id?"Name":"New tag name"),!r&&e.name&&(a.value=s.name),g.$set(a),e.loading&&P(o,"is-loading",s.loading)},i(e){d||(pe(p),pe(g.$$.fragment,e),d=!0)},o(e){me(p),me(g.$$.fragment,e),d=!1},d(t){t&&y(n),p&&p.d(),Se(g),e.button_binding(null),e.form_1_binding(null),a(u)}}}function fm(e,n,t){const r=G();let s,a,{name:i="",id:o=null,loading:l=!1,errors:c,connections:d=null}=n;return e.$set=e=>{"name"in e&&t("name",i=e.name),"id"in e&&t("id",o=e.id),"loading"in e&&t("loading",l=e.loading),"errors"in e&&t("errors",c=e.errors),"connections"in e&&t("connections",d=e.connections)},{name:i,id:o,loading:l,errors:c,connections:d,form:s,saveButton:a,handleSubmit:()=>{s.checkValidity()?r("submit",{id:o,name:i}):Ee.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){Z(e,n)},input0_value_binding:function(e){t("name",i=e)},button_binding:function(e){J[e?"unshift":"push"](()=>{t("saveButton",a=e)})},form_1_binding:function(e){J[e?"unshift":"push"](()=>{t("form",s=e)})}}}class gm extends Ce{constructor(e){super(),Ie(this,e,fm,mm,o,["name","id","loading","errors","connections"])}}function hm(e){var n,t;function r(t){e.tagform_name_binding.call(null,t),n=!0,re(()=>n=!1)}let s={errors:e.errors,loading:e.loading};void 0!==e.name&&(s.name=e.name);var a=new gm({props:s});return J.push(()=>ke(a,"name",r)),a.$on("submit",e.handleSubmit),a.$on("reset",e.reset),{c(){a.$$.fragment.c()},m(e,n){_e(a,e,n),t=!0},p(e,t){var r={};e.errors&&(r.errors=t.errors),e.loading&&(r.loading=t.loading),!n&&e.name&&(r.name=t.name),a.$set(r)},i(e){t||(pe(a.$$.fragment,e),t=!0)},o(e){me(a.$$.fragment,e),t=!1},d(e){Se(a,e)}}}function $m(e,n,t){let r;l(e,Yd,e=>{t("$tags",r=e)});let s="",a="",i=!1;const o=()=>{t("errors",a=""),t("name",s="")};return{name:s,errors:a,loading:i,reset:o,handleSubmit:async({detail:e})=>{if(e.name){t("loading",i=!0);try{if(r&&r.find(n=>n.name===e.name))throw new hn(`The tag '${e.name}' already exists.`);await Yd.create(e.name),Ee.add({text:`Saved new tag '${e.name}'`,type:"success"}),o()}catch(e){t("errors",a=e),Ee.add({text:"Could not save new tag.",type:"danger"})}finally{t("loading",i=!1)}}},tagform_name_binding:function(e){t("name",s=e)}}}class vm extends Ce{constructor(e){super(),Ie(this,e,$m,hm,o,[])}}function bm(e,n,t){const r=Object.create(e);return r.word=n[t],r}function wm(e,n,t){const r=Object.create(e);return r.lesson=n[t],r}function ym(e,n,t){const r=Object.create(e);return r.material=n[t],r}function xm(n){var t,r=new vt({props:{what:"connections"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function km(n){var t,r,s,a=n.$tag.materials.length>0&&_m(n),i=n.$tag.lessons.length>0&&Dm(n),o=n.$tag.words.length>0&&Cm(n);return{c(){a&&a.c(),t=I(),i&&i.c(),r=I(),o&&o.c(),s=C()},m(e,n){a&&a.m(e,n),w(e,t,n),i&&i.m(e,n),w(e,r,n),o&&o.m(e,n),w(e,s,n)},p(e,n){n.$tag.materials.length>0?a?a.p(e,n):((a=_m(n)).c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),n.$tag.lessons.length>0?i?i.p(e,n):((i=Dm(n)).c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null),n.$tag.words.length>0?o?o.p(e,n):((o=Cm(n)).c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},i:e,o:e,d(e){a&&a.d(e),e&&y(t),i&&i.d(e),e&&y(r),o&&o.d(e),e&&y(s)}}}function _m(e){var n,t,r,s=[],a=new Map,i=e.$tag.materials;const o=e=>e.material.id;for(var l=0;l<i.length;l+=1){let n=ym(e,i,l),t=o(n);a.set(t,s[l]=Sm(t,n))}return{c(){for(n=_("section"),(t=_("h2")).textContent="Materials",r=I(),l=0;l<s.length;l+=1)s[l].c();A(t,"class","title is-4"),A(n,"class","materials svelte-189pca3")},m(e,a){for(w(e,n,a),b(n,t),b(n,r),l=0;l<s.length;l+=1)s[l].m(n,null)},p(e,t){const r=t.$tag.materials;s=ye(s,e,o,1,t,r,a,n,be,Sm,null,ym)},d(e){for(e&&y(n),l=0;l<s.length;l+=1)s[l].d()}}}function Sm(e,n){var t,r,s,a=n.material.title;return{key:e,first:null,c(){t=_("a"),r=D(a),A(t,"href",s="#/material/"+n.material.id),this.first=t},m(e,n){w(e,t,n),b(t,r)},p(e,n){e.$tag&&a!==(a=n.material.title)&&N(r,a),e.$tag&&s!==(s="#/material/"+n.material.id)&&A(t,"href",s)},d(e){e&&y(t)}}}function Dm(e){var n,t,r,s=[],a=new Map,i=e.$tag.lessons;const o=e=>e.lesson.id;for(var l=0;l<i.length;l+=1){let n=wm(e,i,l),t=o(n);a.set(t,s[l]=Im(t,n))}return{c(){for(n=_("section"),(t=_("h2")).textContent="Lessons",r=I(),l=0;l<s.length;l+=1)s[l].c();A(t,"class","title is-4"),A(n,"class","lessons svelte-189pca3")},m(e,a){for(w(e,n,a),b(n,t),b(n,r),l=0;l<s.length;l+=1)s[l].m(n,null)},p(e,t){const r=t.$tag.lessons;s=ye(s,e,o,1,t,r,a,n,be,Im,null,wm)},d(e){for(e&&y(n),l=0;l<s.length;l+=1)s[l].d()}}}function Im(e,n){var t,r,s,a=n.lesson.name;return{key:e,first:null,c(){t=_("a"),r=D(a),A(t,"href",s="#/lesson/"+n.lesson.id),this.first=t},m(e,n){w(e,t,n),b(t,r)},p(e,n){e.$tag&&a!==(a=n.lesson.name)&&N(r,a),e.$tag&&s!==(s="#/lesson/"+n.lesson.id)&&A(t,"href",s)},d(e){e&&y(t)}}}function Cm(e){var n,t,r,s=[],a=new Map,i=e.$tag.words;const o=e=>e.word.id;for(var l=0;l<i.length;l+=1){let n=bm(e,i,l),t=o(n);a.set(t,s[l]=Mm(t,n))}return{c(){for(n=_("section"),(t=_("h2")).textContent="Words",r=I(),l=0;l<s.length;l+=1)s[l].c();A(t,"class","title is-4"),A(n,"class","words svelte-189pca3")},m(e,a){for(w(e,n,a),b(n,t),b(n,r),l=0;l<s.length;l+=1)s[l].m(n,null)},p(e,t){const r=t.$tag.words;s=ye(s,e,o,1,t,r,a,n,be,Mm,null,bm)},d(e){for(e&&y(n),l=0;l<s.length;l+=1)s[l].d()}}}function Mm(e,n){var t,r,s,a=n.word.english;return{key:e,first:null,c(){t=_("a"),r=D(a),A(t,"href",s="#/word/"+n.word.id),this.first=t},m(e,n){w(e,t,n),b(t,r)},p(e,n){e.$tag&&a!==(a=n.word.english)&&N(r,a),e.$tag&&s!==(s="#/word/"+n.word.id)&&A(t,"href",s)},d(e){e&&y(t)}}}function Tm(e){var n,t,r,s,a,i,o=new hn({props:{errors:e.errors}}),l=[km,xm],c=[];function d(e){return e.$tag&&e.$tag.id===e.id?0:e.errors?-1:1}return~(r=d(e))&&(s=c[r]=l[r](e)),{c(){n=_("section"),o.$$.fragment.c(),t=I(),s&&s.c(),a=C(),A(n,"class","errors svelte-189pca3")},m(e,s){w(e,n,s),_e(o,n,null),w(e,t,s),~r&&c[r].m(e,s),w(e,a,s),i=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),o.$set(t);var i=r;(r=d(n))===i?~r&&c[r].p(e,n):(s&&(de(),me(c[i],1,1,()=>{c[i]=null}),ue()),~r?((s=c[r])||(s=c[r]=l[r](n)).c(),pe(s,1),s.m(a.parentNode,a)):s=null)},i(e){i||(pe(o.$$.fragment,e),pe(s),i=!0)},o(e){me(o.$$.fragment,e),me(s),i=!1},d(e){e&&y(n),Se(o),e&&y(t),~r&&c[r].d(e),e&&y(a)}}}function Am(e,n,t){let r;l(e,Bd,e=>{t("$tag",r=e)});let{id:s}=n,a="";return B(async()=>{if(!r||r.id!==s)try{await Bd.get(s)}catch(e){t("errors",a=e),Ee.add({text:"Could not get related items from server",type:"danger"})}}),e.$set=e=>{"id"in e&&t("id",s=e.id)},{id:s,errors:a,$tag:r}}class Nm extends Ce{constructor(e){super(),Ie(this,e,Am,Tm,o,["id"])}}function Em(e){var n,t=new Nm({props:{id:e.openTag.id}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.openTag&&(r.id=n.openTag.id),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function Om(e){var n,r,s,a,i,o=[{errors:e.errors},{loading:e.loading},e.openTag];let l={};for(var c=0;c<o.length;c+=1)l=t(l,o[c]);var d=new gm({props:l});d.$on("submit",e.handleSubmit),d.$on("reset",e.reset);var u=e.openTag.connections&&Em(e);return{c(){(n=_("h2")).textContent="Tag details",r=I(),d.$$.fragment.c(),s=I(),u&&u.c(),a=C(),A(n,"class","title")},m(e,t){w(e,n,t),w(e,r,t),_e(d,e,t),w(e,s,t),u&&u.m(e,t),w(e,a,t),i=!0},p(e,n){var t=e.errors||e.loading||e.openTag?xe(o,[e.errors&&{errors:n.errors},e.loading&&{loading:n.loading},e.openTag&&n.openTag]):{};d.$set(t),n.openTag.connections?u?(u.p(e,n),pe(u,1)):((u=Em(n)).c(),pe(u,1),u.m(a.parentNode,a)):u&&(de(),me(u,1,1,()=>{u=null}),ue())},i(e){i||(pe(d.$$.fragment,e),pe(u),i=!0)},o(e){me(d.$$.fragment,e),me(u),i=!1},d(e){e&&(y(n),y(r)),Se(d,e),e&&y(s),u&&u.d(e),e&&y(a)}}}function Lm(e,n,t){let r;l(e,Yd,e=>{t("$tags",r=e)});let{openTag:s}=n,a="",i=!1;const o=()=>{t("errors",a=""),t("openTag",s=!1)};return e.$set=e=>{"openTag"in e&&t("openTag",s=e.openTag)},{openTag:s,errors:a,loading:i,reset:o,handleSubmit:async({detail:e})=>{t("loading",i=!0);try{if(r&&r.find(n=>n.name===e.name))throw new Error(`The tag '${e.name}' already exists.`);await Yd.patch({id:e.id,input:{name:e.name}}),Ee.add({text:`Updated tag to '${e.name}'`,type:"success"}),o()}catch(e){t("errors",a=e),Ee.add({text:"Could not update tag.",type:"danger"})}finally{t("loading",i=!1)}}}}class Pm extends Ce{constructor(e){super(),Ie(this,e,Lm,Om,o,["openTag"])}}function Rm(e,n,t){const r=Object.create(e);return r.tag=n[t],r}function jm(e){var n,t,r,s,a,i=e.$tags.length,o=[],l=new Map,c=e.$tags;const d=e=>e.tag.id;for(var u=0;u<c.length;u+=1){let n=Rm(e,c,u),t=d(n);l.set(t,o[u]=Hm(t,n))}return{c(){for(n=_("h2"),t=D(i),r=D(" tags. Click to edit."),s=I(),a=_("div"),u=0;u<o.length;u+=1)o[u].c();A(n,"class","title is-4"),A(a,"class","field is-grouped is-grouped-multiline")},m(e,i){for(w(e,n,i),b(n,t),b(n,r),w(e,s,i),w(e,a,i),u=0;u<o.length;u+=1)o[u].m(a,null)},p(e,n){e.$tags&&i!==(i=n.$tags.length)&&N(t,i);const r=n.$tags;o=ye(o,e,d,1,n,r,l,a,be,Hm,null,Rm)},d(e){for(e&&(y(n),y(s),y(a)),u=0;u<o.length;u+=1)o[u].d()}}}function zm(e){var n,t,r=e.tag.connections;return{c(){n=_("span"),t=D(r),A(n,"class","tag svelte-xf633j")},m(e,r){w(e,n,r),b(n,t)},p(e,n){e.$tags&&r!==(r=n.tag.connections)&&N(t,r)},d(e){e&&y(n)}}}function qm(e){var n,t;function r(){return e.click_handler_1(e)}return{c(){A(n=_("span"),"class","tag is-delete svelte-xf633j"),t=M(n,"click",r)},m(e,t){w(e,n,t)},p(n,t){e=t},d(e){e&&y(n),t()}}}function Hm(e,n){var t,r,s,a,i,o,l,c=n.tag.name;function d(){return n.click_handler(n)}function u(e){return 0===e.tag.connections?qm:zm}var p=u(n),m=p(n);return{key:e,first:null,c(){t=_("div"),r=_("div"),s=_("span"),a=D(c),i=I(),m.c(),o=I(),A(s,"class","tag is-dark svelte-xf633j"),A(r,"class","tags has-addons"),A(t,"class","control"),l=M(s,"click",d),this.first=t},m(e,n){w(e,t,n),b(t,r),b(r,s),b(s,a),b(r,i),m.m(r,null),b(t,o)},p(e,t){n=t,e.$tags&&c!==(c=n.tag.name)&&N(a,c),p===(p=u(n))&&m?m.p(e,n):(m.d(1),(m=p(n))&&(m.c(),m.m(r,null)))},d(e){e&&y(t),m.d(),l()}}}function Fm(e){var n,t;function r(t){e.edittag_openTag_binding.call(null,t),n=!0,re(()=>n=!1)}let s={};void 0!==e.openTag&&(s.openTag=e.openTag);var a=new Pm({props:s});return J.push(()=>ke(a,"openTag",r)),{c(){a.$$.fragment.c()},m(e,n){_e(a,e,n),t=!0},p(e,t){var r={};!n&&e.openTag&&(r.openTag=t.openTag),a.$set(r)},i(e){t||(pe(a.$$.fragment,e),t=!0)},o(e){me(a.$$.fragment,e),t=!1},d(e){Se(a,e)}}}function Wm(e){var n,t,r=e.openTag&&Fm(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.openTag?r?(r.p(e,t),pe(r,1)):((r=Fm(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function Ym(e){var n,t;function r(t){e.deleteitem_open_binding.call(null,t),n=!0,re(()=>n=!1)}let s={id:e.deleteTag.id,store:Yd,type:"tag",name:e.deleteTag.name,next:"/tags"};void 0!==e.deleteTag&&(s.open=e.deleteTag);var a=new Mn({props:s});return J.push(()=>ke(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){_e(a,e,n),t=!0},p(e,t){var r={};e.deleteTag&&(r.id=t.deleteTag.id),e.tags&&(r.store=Yd),e.deleteTag&&(r.name=t.deleteTag.name),!n&&e.deleteTag&&(r.open=t.deleteTag),a.$set(r)},i(e){t||(pe(a.$$.fragment,e),t=!0)},o(e){me(a.$$.fragment,e),t=!1},d(e){Se(a,e)}}}function Bm(e){var n,t,r,s,a,i,o,l,c,d,u,p=new vm({}),m=new hn({props:{errors:e.errors}}),f=e.$tags&&e.$tags.length>0&&jm(e);function g(n){e.modal_open_binding.call(null,n),l=!0,re(()=>l=!1)}let h={$$slots:{default:[Wm]},$$scope:{ctx:e}};void 0!==e.openTag&&(h.open=e.openTag);var $=new kn({props:h});J.push(()=>ke($,"open",g));var v=e.deleteTag&&Ym(e);return{c(){n=I(),(t=_("h1")).textContent="Tags",r=I(),p.$$.fragment.c(),s=I(),m.$$.fragment.c(),a=I(),i=_("div"),f&&f.c(),o=I(),$.$$.fragment.c(),c=I(),v&&v.c(),d=C(),document.title="Tags",A(t,"class","title"),A(i,"class","tag-list svelte-xf633j")},m(e,l){w(e,n,l),w(e,t,l),w(e,r,l),_e(p,e,l),w(e,s,l),_e(m,e,l),w(e,a,l),w(e,i,l),f&&f.m(i,null),w(e,o,l),_e($,e,l),w(e,c,l),v&&v.m(e,l),w(e,d,l),u=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),m.$set(t),n.$tags&&n.$tags.length>0?f?f.p(e,n):((f=jm(n)).c(),f.m(i,null)):f&&(f.d(1),f=null);var r={};(e.$$scope||e.openTag)&&(r.$$scope={changed:e,ctx:n}),!l&&e.openTag&&(r.open=n.openTag),$.$set(r),n.deleteTag?v?(v.p(e,n),pe(v,1)):((v=Ym(n)).c(),pe(v,1),v.m(d.parentNode,d)):v&&(de(),me(v,1,1,()=>{v=null}),ue())},i(e){u||(pe(p.$$.fragment,e),pe(m.$$.fragment,e),pe($.$$.fragment,e),pe(v),u=!0)},o(e){me(p.$$.fragment,e),me(m.$$.fragment,e),me($.$$.fragment,e),me(v),u=!1},d(e){e&&(y(n),y(t),y(r)),Se(p,e),e&&y(s),Se(m,e),e&&(y(a),y(i)),f&&f.d(),e&&y(o),Se($,e),e&&y(c),v&&v.d(e),e&&y(d)}}}function Um(e,n,t){let r;l(e,Yd,e=>{t("$tags",r=e)});let s,a,i="";return B(async()=>{try{await Yd.get()}catch(e){t("errors",i=e),Ee.add({text:"Coudn't load tags from server",type:"danger"})}}),{errors:i,openTag:s,deleteTag:a,$tags:r,click_handler:function({tag:e}){t("openTag",s=e)},click_handler_1:function({tag:e}){t("deleteTag",a=e)},edittag_openTag_binding:function(e){t("openTag",s=e)},modal_open_binding:function(e){t("openTag",s=e)},deleteitem_open_binding:function(e){t("deleteTag",a=e)}}}const Gm=(()=>{const{subscribe:e,set:n}=Ae();return{subscribe:e,get:async()=>{const e=await Ze("\n{\n  me {\n    id\n    username\n  }\n}\n");n(e.me)}}})();function Zm(n){var t,r=new vt({props:{what:"user"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function Vm(e){var n,t=new ir({props:{$$slots:{default:[Jm]},$$scope:{ctx:e}}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};(e.$$scope||e.$me)&&(r.$$scope={changed:e,ctx:n}),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function Jm(e){var n,t,r,s,a,i,o,l,c,d=e.$me.username,u=e.$me.id;return{c(){(n=_("dt")).textContent="Username:",t=I(),r=_("dd"),s=D(d),a=I(),(i=_("dt")).textContent="ID:",o=I(),l=_("dd"),c=D(u)},m(e,d){w(e,n,d),w(e,t,d),w(e,r,d),b(r,s),w(e,a,d),w(e,i,d),w(e,o,d),w(e,l,d),b(l,c)},p(e,n){e.$me&&d!==(d=n.$me.username)&&N(s,d),e.$me&&u!==(u=n.$me.id)&&N(c,u)},d(e){e&&(y(n),y(t),y(r),y(a),y(i),y(o),y(l))}}}function Xm(e){var n,t,r,s,a,i,o=[Vm,Zm],l=[];function c(e){return e.$me?0:1}return r=c(e),s=l[r]=o[r](e),{c(){(n=_("h1")).textContent="User Profile",t=I(),s.c(),a=C(),A(n,"class","title")},m(e,s){w(e,n,s),w(e,t,s),l[r].m(e,s),w(e,a,s),i=!0},p(e,n){var t=r;(r=c(n))===t?l[r].p(e,n):(de(),me(l[t],1,1,()=>{l[t]=null}),ue(),(s=l[r])||(s=l[r]=o[r](n)).c(),pe(s,1),s.m(a.parentNode,a))},i(e){i||(pe(s),i=!0)},o(e){me(s),i=!1},d(e){e&&(y(n),y(t)),l[r].d(e),e&&y(a)}}}function Qm(e,n,t){let r;return l(e,Gm,e=>{t("$me",r=e)}),B(async()=>{Gm.get()}),{$me:r}}const Km="\n{\n  classSessions(where: {stage_in: [Active, Started]}) {\n    id\n    stage\n    startsAt\n    startedAt\n    endsAt\n    group {\n      id\n    }\n  }\n}\n",ef="\nsubscription {\n  classSessions(where: { node: {stage_in: [Active, Started]}}) {\n    node {\n      id\n      stage\n      startsAt\n      startedAt\n      endsAt\n      group {\n        id\n      }\n    } \n  }\n}\n";function nf(n){var t,r,s;return{c(){t=_("div"),r=_("p"),s=D(n.text),E(r,"font-size",n.fontSize+"px"),A(t,"class","wrapper svelte-1e7xmbk")},m(e,a){w(e,t,a),b(t,r),b(r,s),n.p_binding(r)},p(e,n){e.text&&N(s,n.text),e.fontSize&&E(r,"font-size",n.fontSize+"px")},i:e,o:e,d(e){e&&y(t),n.p_binding(null)}}}function tf(e,n,t){let r,{text:s="this is stretchy",padding:a=5}=n,i=14,{minSize:o=14,maxSize:l=512}=n;return e.$set=e=>{"text"in e&&t("text",s=e.text),"padding"in e&&t("padding",a=e.padding),"minSize"in e&&t("minSize",o=e.minSize),"maxSize"in e&&t("maxSize",l=e.maxSize)},e.$$.update=(e={span:1,minSize:1,fontSize:1,maxSize:1})=>{if((e.span||e.minSize||e.fontSize||e.maxSize)&&r){const e=r.parentNode.clientWidth,n=r.scrollWidth;t("fontSize",i=Math.min(Math.max(o,(e-2*i)/n*i),l))}},{span:r,text:s,padding:a,fontSize:i,minSize:o,maxSize:l,p_binding:function(e){J[e?"unshift":"push"](()=>{t("span",r=e)})}}}class rf extends Ce{constructor(e){super(),Ie(this,e,tf,nf,o,["text","padding","minSize","maxSize"])}}function sf(e){var n,t=new rf({props:{text:"waiting on "+e.absentStudents,minSize:"32",maxSize:"156"}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.absentStudents&&(r.text="waiting on "+n.absentStudents),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function af(e){var n,t,r,s,a,i=new rf({props:{text:e.$session.group.name+" class lesson "+e.$session.number,maxSize:"300"}}),o=new rf({props:{text:(e.timeDirection(e.$session.startsAt,e.$time)>0?"starts":"scheduled to start")+"\n        "+e.timeToStart(e.$session.startsAt,e.$time)}}),l=e.absentStudents&&sf(e);return{c(){n=_("main"),i.$$.fragment.c(),t=I(),r=_("div"),o.$$.fragment.c(),s=I(),l&&l.c(),A(r,"class","svelte-1ofj9ck"),P(r,"late",e.timeDirection(e.$session.startsAt,e.$time)<0),A(n,"class","svelte-1ofj9ck")},m(e,c){w(e,n,c),_e(i,n,null),b(n,t),b(n,r),_e(o,r,null),b(n,s),l&&l.m(n,null),a=!0},p(e,t){var s={};e.$session&&(s.text=t.$session.group.name+" class lesson "+t.$session.number),i.$set(s);var a={};(e.timeDirection||e.$session||e.$time||e.timeToStart)&&(a.text=(t.timeDirection(t.$session.startsAt,t.$time)>0?"starts":"scheduled to start")+"\n        "+t.timeToStart(t.$session.startsAt,t.$time)),o.$set(a),(e.timeDirection||e.$session||e.$time)&&P(r,"late",t.timeDirection(t.$session.startsAt,t.$time)<0),t.absentStudents?l?(l.p(e,t),pe(l,1)):((l=sf(t)).c(),pe(l,1),l.m(n,null)):l&&(de(),me(l,1,1,()=>{l=null}),ue())},i(e){a||(pe(i.$$.fragment,e),pe(o.$$.fragment,e),pe(l),a=!0)},o(e){me(i.$$.fragment,e),me(o.$$.fragment,e),me(l),a=!1},d(e){e&&y(n),Se(i),Se(o),l&&l.d()}}}function of(e,n,t){let r,s,a;l(e,Po,e=>{t("$sessionStudents",r=e)}),l(e,Lo,e=>{t("$session",s=e)}),l(e,Hs,e=>{t("$time",a=e)});let i;return e.$$.update=(e={$sessionStudents:1})=>{e.$sessionStudents&&t("absentStudents",i=r&&r.filter(e=>!e.attendance||"Present"!==e.attendance.status).map(e=>e.englishName||e.chineseName).join(", "))},{timeToStart:(e,n)=>(function(e,n,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=t||{},s=r.locale||sa;if(!s.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var a=Zs(e,n);if(isNaN(a))throw new RangeError("Invalid time value");var i,o,l=Ua(r);l.addSuffix=Boolean(r.addSuffix),l.comparison=a,a>0?(i=Fs(n),o=Fs(e)):(i=Fs(e),o=Fs(n));var c,d=null==r.roundingMethod?"round":String(r.roundingMethod);if("floor"===d)c=Math.floor;else if("ceil"===d)c=Math.ceil;else{if("round"!==d)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");c=Math.round}var u,p=Js(o,i),m=c((p-(Bs(o)-Bs(i))/1e3)/60);if("second"===(u=null==r.unit?m<1?"second":m<60?"minute":m<Qa?"hour":m<Ka?"day":m<ei?"month":"year":String(r.unit)))return s.formatDistance("xSeconds",p,l);if("minute"===u)return s.formatDistance("xMinutes",m,l);if("hour"===u){var f=c(m/60);return s.formatDistance("xHours",f,l)}if("day"===u){var g=c(m/Qa);return s.formatDistance("xDays",g,l)}if("month"===u){var h=c(m/Ka);return s.formatDistance("xMonths",h,l)}if("year"===u){var $=c(m/ei);return s.formatDistance("xYears",$,l)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")})(new Date(e),n,{addSuffix:!0}),timeDirection:(e,n)=>new Date(e)-n,absentStudents:i,$session:s,$time:a}}class lf extends Ce{constructor(e){super(),Ie(this,e,of,af,o,[])}}const cf=(()=>{const{subscribe:e,update:n}=Ae(null,e=>{const n=Lo.subscribe(n=>{n&&Ze(So,{classSessionId:n.id}).then(n=>{e(n.points)})});return()=>n()});return{subscribe:e,update:n}})();function df(e){var n,t;return{c(){n=S("text"),t=D(e.number),A(n,"x","50%"),A(n,"y","60%"),A(n,"dominant-baseline","middle"),A(n,"text-anchor","middle"),A(n,"fill","black"),A(n,"font-size","0.8rem")},m(e,r){w(e,n,r),b(n,t)},p(e,n){e.number&&N(t,n.number)},d(e){e&&y(n)}}}function uf(n){var t,r,s=n.number&&df(n);return{c(){t=S("svg"),r=S("path"),s&&s.c(),A(r,"d","M32.143 12.403c-.494-1.545-3.213-1.898-6.092-2.279-1.578-.207-3.371-.441-3.912-.842-.545-.398-1.305-2.035-1.977-3.482C18.94 3.169 17.783.687 16.165.683l-.03-.005c-1.604.027-2.773 2.479-4.016 5.082-.685 1.439-1.464 3.07-2.007 3.465-.549.391-2.342.611-3.925.803-2.876.35-5.599.678-6.107 2.215s1.479 3.426 3.585 5.422c1.156 1.098 2.465 2.342 2.671 2.982s-.143 2.416-.448 3.977c-.558 2.844-1.085 5.537.219 6.5.312.223.704.336 1.167.326 1.331-.021 3.246-1.057 5.097-2.061 1.387-.758 2.96-1.613 3.66-1.621.677 0 2.255.879 3.647 1.654 1.893 1.051 3.852 2.139 5.185 2.117.416-.006.771-.113 1.061-.322 1.312-.945.812-3.637.285-6.492-.29-1.564-.615-3.344-.41-3.984.212-.637 1.536-1.865 2.703-2.955 2.125-1.977 4.131-3.838 3.641-5.383z"),A(t,"class","star svelte-i1zisd"),A(t,"xmlns","http://www.w3.org/2000/svg"),E(t,"--hue",n.hue(n.index)),E(t,"--size",n.size),A(t,"viewBox","0 0 32.218 32.218"),P(t,"group",n.group)},m(e,n){w(e,t,n),b(t,r),s&&s.m(t,null)},p(e,n){n.number?s?s.p(e,n):((s=df(n)).c(),s.m(t,null)):s&&(s.d(1),s=null),(e.hue||e.index)&&E(t,"--hue",n.hue(n.index)),e.size&&E(t,"--size",n.size),e.group&&P(t,"group",n.group)},i:e,o:e,d(e){e&&y(t),s&&s.d()}}}function pf(e,n,t){let{size:r="8rem",group:s=!1,index:a=0,number:i=a+1}=n;return e.$set=e=>{"size"in e&&t("size",r=e.size),"group"in e&&t("group",s=e.group),"index"in e&&t("index",a=e.index),"number"in e&&t("number",i=e.number)},{size:r,group:s,index:a,number:i,hue:e=>30*e}}class mf extends Ce{constructor(e){super(),Ie(this,e,pf,uf,o,["size","group","index","number"])}}function ff(e,n,t){const r=Object.create(e);return r.point=n[t],r.i=t,r}function gf(e){for(var n,t,r={length:e.pointsTally},s=[],a=0;a<r.length;a+=1)s[a]=hf(ff(e,r,a));const i=e=>me(s[e],1,1,()=>{s[e]=null});return{c(){for(var e=0;e<s.length;e+=1)s[e].c();n=C()},m(e,r){for(var a=0;a<s.length;a+=1)s[a].m(e,r);w(e,n,r),t=!0},p(e,t){if(e.pointsTally){r={length:t.pointsTally};for(var a=0;a<r.length;a+=1){const i=ff(t,r,a);s[a]?(s[a].p(e,i),pe(s[a],1)):(s[a]=hf(i),s[a].c(),pe(s[a],1),s[a].m(n.parentNode,n))}for(de(),a=r.length;a<s.length;a+=1)i(a);ue()}},i(e){if(!t){for(var n=0;n<r.length;n+=1)pe(s[n]);t=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)me(s[e]);t=!1},d(e){k(s,e),e&&y(n)}}}function hf(n){var t,r,s,a,i,o=new mf({props:{index:n.i,size:"5rem"}});return{c(){t=_("div"),o.$$.fragment.c(),r=I()},m(e,n){w(e,t,n),_e(o,t,null),b(t,r),i=!0},p:e,i(e){i||(pe(o.$$.fragment,e),te(()=>{a&&a.end(1),s||(s=fe(t,Pe,{x:-400})),s.start()}),i=!0)},o(e){me(o.$$.fragment,e),s&&s.invalidate(),a=ge(t,Le,{}),i=!1},d(e){e&&y(t),Se(o),e&&a&&a.end()}}}function $f(e){var n,t,r,s,a,i,o,l,c=e.student.englishName||e.student.chineseName,d=e.student.attendance&&"Absent"!==e.student.attendance.status&&gf(e);return{c(){n=_("li"),t=_("div"),r=_("span"),s=D(c),a=I(),d&&d.c(),i=I(),o=_("div"),A(r,"class","name svelte-qiqagm"),P(r,"glow",e.glow),P(r,"absent",!e.student.attendance||"Absent"===e.student.attendance.status),A(t,"class","content svelte-qiqagm"),A(o,"class","bg svelte-qiqagm"),P(o,"glow",e.glow),A(n,"class","svelte-qiqagm")},m(e,c){w(e,n,c),b(n,t),b(t,r),b(r,s),b(t,a),d&&d.m(t,null),b(n,i),b(n,o),l=!0},p(e,n){l&&!e.student||c===(c=n.student.englishName||n.student.chineseName)||N(s,c),e.glow&&P(r,"glow",n.glow),e.student&&P(r,"absent",!n.student.attendance||"Absent"===n.student.attendance.status),n.student.attendance&&"Absent"!==n.student.attendance.status?d?(d.p(e,n),pe(d,1)):((d=gf(n)).c(),pe(d,1),d.m(t,null)):d&&(de(),me(d,1,1,()=>{d=null}),ue()),e.glow&&P(o,"glow",n.glow)},i(e){l||(pe(d),l=!0)},o(e){me(d),l=!1},d(e){e&&y(n),d&&d.d()}}}function vf(e,n,t){let r;l(e,cf,e=>{t("$points",r=e)});let s,{student:a,sessionId:i,glow:o=!1}=n;return e.$set=e=>{"student"in e&&t("student",a=e.student),"sessionId"in e&&t("sessionId",i=e.sessionId),"glow"in e&&t("glow",o=e.glow)},e.$$.update=(e={$points:1,student:1})=>{(e.$points||e.student)&&t("pointsTally",s=r?r.reduce((e,n)=>n.student.id!==a.id?e:e+n.value,0):0)},{student:a,sessionId:i,glow:o,pointsTally:s}}class bf extends Ce{constructor(e){super(),Ie(this,e,vf,$f,o,["student","sessionId","glow"])}}function wf(e,n,t){const r=Object.create(e);return r.student=n[t],r}function yf(e){var n,t,r,s=[],a=new Map,i=e.$sessionStudents;const o=e=>e.student.id;for(var l=0;l<i.length;l+=1){let n=wf(e,i,l),t=o(n);a.set(t,s[l]=xf(t,n))}return{c(){for(n=_("section"),t=_("ul"),l=0;l<s.length;l+=1)s[l].c();A(t,"class","svelte-qpkq6m"),A(n,"class","scoreboard svelte-qpkq6m")},m(e,a){for(w(e,n,a),b(n,t),l=0;l<s.length;l+=1)s[l].m(t,null);r=!0},p(e,n){const r=n.$sessionStudents;de(),s=ye(s,e,o,1,n,r,a,t,we,xf,null,wf),ue()},i(e){if(!r){for(var n=0;n<i.length;n+=1)pe(s[n]);r=!0}},o(e){for(l=0;l<s.length;l+=1)me(s[l]);r=!1},d(e){for(e&&y(n),l=0;l<s.length;l+=1)s[l].d()}}}function xf(e,n){var t,r,s=new bf({props:{student:n.student,sessionId:n.$sessionId,glow:n.newPoint&&n.newPoint.student.id===n.student.id}});return{key:e,first:null,c(){t=C(),s.$$.fragment.c(),this.first=t},m(e,n){w(e,t,n),_e(s,e,n),r=!0},p(e,n){var t={};e.$sessionStudents&&(t.student=n.student),e.$sessionId&&(t.sessionId=n.$sessionId),(e.newPoint||e.$sessionStudents)&&(t.glow=n.newPoint&&n.newPoint.student.id===n.student.id),s.$set(t)},i(e){r||(pe(s.$$.fragment,e),r=!0)},o(e){me(s.$$.fragment,e),r=!1},d(e){e&&y(t),Se(s,e)}}}function kf(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f=e.$session.group.name,g=e.$session.number,h=e.$sessionStudents&&yf(e);return{c(){(n=_("audio")).innerHTML='<source type="audio/wav" src="sounds/ui-confirmation-alert-a5min.wav">',t=I(),(r=_("audio")).innerHTML='<source type="audio/mp3" src="sounds/gamelan_glissando_upward_002_538.mp3">',s=I(),(a=_("audio")).innerHTML='<source type="audio/wav" src="sounds/quick-fart.wav">',i=I(),o=_("h2"),l=D(f),c=D(" class lesson "),d=D(g),u=I(),h&&h.c(),p=C(),A(n,"preload",""),A(r,"preload",""),A(a,"preload",""),A(o,"class","title")},m(e,f){w(e,n,f),w(e,t,f),w(e,r,f),w(e,s,f),w(e,a,f),w(e,i,f),w(e,o,f),b(o,l),b(o,c),b(o,d),w(e,u,f),h&&h.m(e,f),w(e,p,f),m=!0},p(e,n){m&&!e.$session||f===(f=n.$session.group.name)||N(l,f),m&&!e.$session||g===(g=n.$session.number)||N(d,g),n.$sessionStudents?h?(h.p(e,n),pe(h,1)):((h=yf(n)).c(),pe(h,1),h.m(p.parentNode,p)):h&&(de(),me(h,1,1,()=>{h=null}),ue())},i(e){m||(pe(h),m=!0)},o(e){me(h),m=!1},d(e){e&&(y(n),y(t),y(r),y(s),y(a),y(i),y(o),y(u)),h&&h.d(e),e&&y(p)}}}function _f(e,n,t){let r,s,a;l(e,Lo,e=>{t("$session",r=e)}),l(e,Po,e=>{t("$sessionStudents",s=e)}),l(e,Oo,e=>{t("$sessionId",a=e)});let i=null;B(()=>{new Audio("sounds/gamelan_glissando_upward_002_538.mp3").play();const e=Os.request({query:Do,variables:{classSessionId:r.id}}).subscribe({next(e){if(e.data&&e.data.points){const{node:n,mutation:t,previousValues:r}=e.data.points;"CREATED"===t&&o(n),"DELETED"===t&&cf.update(e=>e.filter(e=>e.id!==r.id))}}});return()=>e&&e.unsubscribe()});const o=e=>{if((e=>{t("newPoint",i=e),setTimeout(()=>{t("newPoint",i=null)},1e3)})(e),e.value>0){new Audio("sounds/ui-confirmation-alert-a5min.wav").play()}else{new Audio("sounds/quick-fart.wav").play()}cf.update(n=>[e,...n])};return{newPoint:i,$session:r,$sessionStudents:s,$sessionId:a}}class Sf extends Ce{constructor(e){super(),Ie(this,e,_f,kf,o,[])}}const{Object:Df}=ve;function If(e,n,t){const r=Df.create(e);return r.group=n[t],r.i=t,r}function Cf(n){var t,r=new vt({props:{what:"results"}});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function Mf(n){var t,r=[],s=new Map,a=n.groupedResults;const i=e=>e.group.total;for(var o=0;o<a.length;o+=1){let e=If(n,a,o),t=i(e);s.set(t,r[o]=Nf(t,e))}return{c(){for(o=0;o<r.length;o+=1)r[o].c();t=C()},m(e,n){for(o=0;o<r.length;o+=1)r[o].m(e,n);w(e,t,n)},p(e,n){const a=n.groupedResults;r=ye(r,e,i,1,n,a,s,t.parentNode,be,Nf,t,If)},i:e,o:e,d(e){for(o=0;o<r.length;o+=1)r[o].d(e);e&&y(t)}}}function Tf(e){var n,t,r,s,a=e.group.total,i=e.listNames(e.group.students);return{c(){n=_("p"),t=D(a),r=D(" stars: "),s=D(i),A(n,"class","svelte-3ys7yi")},m(e,a){w(e,n,a),b(n,t),b(n,r),b(n,s)},p(e,n){e.groupedResults&&a!==(a=n.group.total)&&N(t,a),e.groupedResults&&i!==(i=n.listNames(n.group.students))&&N(s,i)},d(e){e&&y(n)}}}function Af(e){var n,t,r,s,a,i,o,l,c=e.group.total,d=e.listNames(e.group.students);return{c(){n=_("div"),t=_("p"),r=_("i"),s=D("×"),a=D(c),i=I(),o=D(d),l=I(),A(r,"class","fas fa-star bounce svelte-3ys7yi"),A(t,"class","big svelte-3ys7yi"),A(n,"class","winner svelte-3ys7yi")},m(e,c){w(e,n,c),b(n,t),b(t,r),b(t,s),b(t,a),b(t,i),b(t,o),b(n,l)},p(e,n){e.groupedResults&&c!==(c=n.group.total)&&N(a,c),e.groupedResults&&d!==(d=n.listNames(n.group.students))&&N(o,d)},d(e){e&&y(n)}}}function Nf(e,n){var t,r;function s(e){return 0===e.i?Af:Tf}var a=s(n),i=a(n);return{key:e,first:null,c(){t=C(),i.c(),r=C(),this.first=t},m(e,n){w(e,t,n),i.m(e,n),w(e,r,n)},p(e,n){a===(a=s(n))&&i?i.p(e,n):(i.d(1),(i=a(n))&&(i.c(),i.m(r.parentNode,r)))},d(e){e&&y(t),i.d(e),e&&y(r)}}}function Ef(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h=e.$session.group.name,$=e.$session.number,v=[Mf,Cf],x=[];function k(e){return e.results?0:1}return u=k(e),p=x[u]=v[u](e),{c(){(n=_("audio")).innerHTML='<source type="audio/mp3" src="sounds/gamelan_glissando_downward_004_536.mp3">',t=I(),r=_("h2"),s=D(h),a=D(" class lesson "),i=D($),o=D(" ended "),l=D(e.endedDistance),c=I(),d=_("section"),p.c(),m=I(),f=_("span"),A(n,"preload",""),n.autoplay=!0,A(r,"class","title"),A(d,"class","results svelte-3ys7yi"),A(f,"class","bounce")},m(e,p){w(e,n,p),w(e,t,p),w(e,r,p),b(r,s),b(r,a),b(r,i),b(r,o),b(r,l),w(e,c,p),w(e,d,p),x[u].m(d,null),w(e,m,p),w(e,f,p),g=!0},p(e,n){g&&!e.$session||h===(h=n.$session.group.name)||N(s,h),g&&!e.$session||$===($=n.$session.number)||N(i,$),g&&!e.endedDistance||N(l,n.endedDistance);var t=u;(u=k(n))===t?x[u].p(e,n):(de(),me(x[t],1,1,()=>{x[t]=null}),ue(),(p=x[u])||(p=x[u]=v[u](n)).c(),pe(p,1),p.m(d,null))},i(e){g||(pe(p),g=!0)},o(e){me(p),g=!1},d(e){e&&(y(n),y(t),y(r),y(c),y(d)),x[u].d(),e&&(y(m),y(f))}}}function Of(e,n,t){let r,s;l(e,Lo,e=>{t("$session",r=e)}),l(e,Hs,e=>{t("$time",s=e)});let a=null;B(async()=>{t("results",a=await zo(r.id))});let i,o;return e.$$.update=(e={$session:1,$time:1,results:1})=>{(e.$session||e.$time)&&t("endedDistance",i=Xa(new Date(r.endedAt),new Date(s),{addSuffix:!0})),e.results&&t("groupedResults",o=(e=>{if(!e||0===e.length)return[];const n=e.reduce((e,n)=>{const t=n.pointsTally;return e[t]=e[t]||[],e[t].push(n),e},{});return Object.keys(n).sort((e,n)=>n-e).map((e,t)=>({total:parseInt(e),students:n[e]}))})(a))},{results:a,listNames:e=>{const n=e.map(e=>e.student.englishName||e.student.chineseName);return[n.slice(0,-1).join(", "),n.slice(-1)[0]].join(n.length<2?"":" and ")},$session:r,endedDistance:i,groupedResults:o}}class Lf extends Ce{constructor(e){super(),Ie(this,e,Of,Ef,o,[])}}function Pf(e){var n,t=new Lf({});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function Rf(e){var n,t=new Sf({});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function jf(e){var n,t=new lf({});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function zf(e){var n,t=new vt({props:{what:"session"}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function qf(n){var t;return{c(){(t=_("h2")).textContent="No active session found",A(t,"class","title")},m(e,n){w(e,t,n)},i:e,o:e,d(e){e&&y(t)}}}function Hf(e){var n,t,r,s,a,i,o,l=[qf,zf,jf,Rf,Pf],c=[];function d(e){return e.$sessionId?e.$session?"Active"===e.$session.stage?2:"Started"===e.$session.stage?3:"Ended"===e.$session.stage?4:-1:1:0}return~(a=d(e))&&(i=c[a]=l[a](e)),{c(){n=_("link"),(t=_("style")).textContent="body {\n      background: black;\n    }",r=I(),s=_("div"),i&&i.c(),document.title="Viewer",A(n,"href","https://fonts.googleapis.com/css?family=Schoolbell"),A(n,"rel","stylesheet"),A(s,"class","svelte-11094u3")},m(e,i){b(document.head,n),b(document.head,t),w(e,r,i),w(e,s,i),~a&&c[a].m(s,null),o=!0},p(e,n){var t=a;(a=d(n))!==t&&(i&&(de(),me(c[t],1,1,()=>{c[t]=null}),ue()),~a?((i=c[a])||(i=c[a]=l[a](n)).c(),pe(i,1),i.m(s,null)):i=null)},i(e){o||(pe(i),o=!0)},o(e){me(i),o=!1},d(e){y(n),y(t),e&&(y(r),y(s)),~a&&c[a].d()}}}function Ff(e,n,t){let r,s;return l(e,Oo,e=>{t("$sessionId",r=e)}),l(e,Lo,e=>{t("$session",s=e)}),B(async()=>{const e=await Ze(Km);e.classSessions[0]&&Oo.set(e.classSessions[0].id);const n=Os.request({query:ef}).subscribe({next(e){e.data&&e.data.classSessions&&Oo.set(e.data.classSessions.node.id)}});return()=>{n&&n.unsubscribe()}}),{$sessionId:r,$session:s}}var Wf={"/":class extends Ce{constructor(e){super(),Ie(this,e,null,un,o,[])}},"/semesters":class extends Ce{constructor(e){super(),Ie(this,e,xt,yt,o,[])}},"/students":class extends Ce{constructor(e){super(),Ie(this,e,Rr,Pr,o,[])}},"/groups":class extends Ce{constructor(e){super(),Ie(this,e,Is,Ds,o,[])}},"/sessions":class extends Ce{constructor(e){super(),Ie(this,e,yo,wo,o,[])}},"/session/:id":class extends Ce{constructor(e){super(),Ie(this,e,Md,Cd,o,["params"])}},"/lessons":class extends Ce{constructor(e){super(),Ie(this,e,Wd,Fd,o,[])}},"/lesson/:id":class extends Ce{constructor(e){super(),Ie(this,e,Wu,Fu,o,["params"])}},"/edit-lesson/:id":class extends Ce{constructor(e){super(),Ie(this,e,Ju,Vu,o,["params"])}},"/new-lesson":class extends Ce{constructor(e){super(),Ie(this,e,Qu,Xu,o,[])}},"/materials":class extends Ce{constructor(e){super(),Ie(this,e,wp,bp,o,[])}},"/material/:id":class extends Ce{constructor(e){super(),Ie(this,e,Tp,Mp,o,["params"])}},"/words":class extends Ce{constructor(e){super(),Ie(this,e,Qp,Xp,o,[])}},"/word/:id":class extends Ce{constructor(e){super(),Ie(this,e,um,dm,o,["params"])}},"/tags":class extends Ce{constructor(e){super(),Ie(this,e,Um,Bm,o,[])}},"/me":class extends Ce{constructor(e){super(),Ie(this,e,Qm,Xm,o,[])}},"/viewer":class extends Ce{constructor(e){super(),Ie(this,e,Ff,Hf,o,[])}},"/not-found/:item/:id?":dn,"*":dn};function Yf(e){var n;return{c(){A(n=_("i"),"class","fas fa-eye-slash")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function Bf(e){var n;return{c(){A(n=_("i"),"class","fas fa-eye")},m(e,t){w(e,n,t)},d(e){e&&y(n)}}}function Uf(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,x,k,S,D,C,N,E,O,L,R,j=new hn({props:{errors:e.errors}});function z(n){e.input0_value_binding.call(null,n),u=!0,re(()=>u=!1)}let q={name:"usernameField",type:"text",label:"Username",required:!0,leftIcon:"user"};void 0!==e.username&&(q.value=e.username);var H=new qn({props:q});function F(e){return e.show?Bf:Yf}J.push(()=>ke(H,"value",z));var W=F(e),Y=W(e);return{c(){n=I(),t=_("div"),r=_("div"),(s=_("h1")).textContent="Login",i=I(),(o=_("h3")).textContent="gotta log in to continue.",l=I(),j.$$.fragment.c(),c=I(),d=_("form"),H.$$.fragment.c(),p=I(),(m=_("label")).textContent="Password",f=I(),g=_("div"),h=_("div"),$=_("input"),v=I(),(x=_("span")).innerHTML='<i class="fas fa-key"></i>',k=I(),S=_("div"),D=_("span"),Y.c(),C=I(),N=_("div"),E=_("div"),(O=_("button")).textContent="Let me in!",document.title="Login",A(s,"class","title"),A(o,"class","subtitle"),A(m,"class","label"),A(m,"for","passwordField"),A($,"class","input"),A($,"type","password"),$.required=!0,A(x,"class","icon is-small is-left"),A(h,"class","control has-icons-left"),A(D,"class","button is-white showhide svelte-1o7mwy6"),A(S,"class","control"),A(g,"class","field has-addons"),A(O,"type","submit"),A(O,"class","button is-primary is-loading"),P(O,"is-loading",e.loading),A(E,"class","control"),A(N,"class","field"),d.noValidate=!0,A(r,"class","login"),A(t,"class","container-centered svelte-1o7mwy6"),R=[M($,"input",e.input1_input_handler),M(D,"click",e.showPassword),M(d,"submit",T(e.login))]},m(a,u){w(a,n,u),w(a,t,u),b(t,r),b(r,s),b(r,i),b(r,o),b(r,l),_e(j,r,null),b(r,c),b(r,d),_e(H,d,null),b(d,p),b(d,m),b(d,f),b(d,g),b(g,h),b(h,$),$.value=e.password,e.input1_binding($),b(h,v),b(h,x),b(g,k),b(g,S),b(S,D),Y.m(D,null),b(d,C),b(d,N),b(N,E),b(E,O),e.button_binding(O),e.form_1_binding(d),L=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),j.$set(t);var r={};!u&&e.username&&(r.value=n.username),H.$set(r),e.password&&$.value!==n.password&&($.value=n.password),W!==(W=F(n))&&(Y.d(1),(Y=W(n))&&(Y.c(),Y.m(D,null))),e.loading&&P(O,"is-loading",n.loading)},i(e){L||(pe(j.$$.fragment,e),pe(H.$$.fragment,e),L=!0)},o(e){me(j.$$.fragment,e),me(H.$$.fragment,e),L=!1},d(r){r&&(y(n),y(t)),Se(j),Se(H),e.input1_binding(null),Y.d(),e.button_binding(null),e.form_1_binding(null),a(R)}}}function Gf(e,n,t){let r,s,a,i="",o="",l="",c=!1,d=!1;return{username:i,password:o,errors:l,loading:c,show:d,submit:r,passInput:s,form:a,login:async()=>{if(a.checkValidity()){t("loading",c=!0),r.disabled=!0,t("submit",r);try{await Je.login(i,o),Ee.add({text:`Logged in as '${i}'`,type:"success"})}catch(e){t("errors",l=e),Ee.add({text:"Login failed.",type:"danger"}),r.disabled=!1,t("submit",r)}finally{t("loading",c=!1)}}else Ee.add({text:"Please fix form errors first.",type:"danger"})},showPassword:()=>{s.type=d?"password":"text",t("passInput",s),t("show",d=!d)},input0_value_binding:function(e){t("username",i=e)},input1_input_handler:function(){o=this.value,t("password",o)},input1_binding:function(e){J[e?"unshift":"push"](()=>{t("passInput",s=e)})},button_binding:function(e){J[e?"unshift":"push"](()=>{t("submit",r=e)})},form_1_binding:function(e){J[e?"unshift":"push"](()=>{t("form",a=e)})}}}class Zf extends Ce{constructor(e){super(),Ie(this,e,Gf,Uf,o,[])}}function Vf(e){var n,t;return{c(){A(n=_("i"),"class",t="fas fa-"+e.icon+" svelte-fam8bh")},m(e,t){w(e,n,t)},p(e,r){e.icon&&t!==(t="fas fa-"+r.icon+" svelte-fam8bh")&&A(n,"class",t)},d(e){e&&y(n)}}}function Jf(n){var t,r,s,a,i=n.icon&&Vf(n);return{c(){t=_("a"),i&&i.c(),r=I(),s=D(n.text),A(t,"class","navbar-item svelte-fam8bh"),A(t,"href",a="#"+n.url),P(t,"is-active",n.$location===n.url)},m(e,n){w(e,t,n),i&&i.m(t,null),b(t,r),b(t,s)},p(e,n){n.icon?i?i.p(e,n):((i=Vf(n)).c(),i.m(t,r)):i&&(i.d(1),i=null),e.text&&N(s,n.text),e.url&&a!==(a="#"+n.url)&&A(t,"href",a),(e.$location||e.url)&&P(t,"is-active",n.$location===n.url)},i:e,o:e,d(e){e&&y(t),i&&i.d()}}}function Xf(e,n,t){let r;l(e,en,e=>{t("$location",r=e)});let{url:s="",text:a="",icon:i=null}=n;return e.$set=e=>{"url"in e&&t("url",s=e.url),"text"in e&&t("text",a=e.text),"icon"in e&&t("icon",i=e.icon)},{url:s,text:a,icon:i,$location:r}}class Qf extends Ce{constructor(e){super(),Ie(this,e,Xf,Jf,o,["url","text","icon"])}}function Kf(e){var n,t;return{c(){(n=_("div")).innerHTML='<span aria-hidden="true"></span> <span aria-hidden="true"></span> <span aria-hidden="true"></span>',A(n,"role","button"),A(n,"class","navbar-burger burger svelte-3cc10n"),A(n,"aria-label","menu"),A(n,"aria-expanded","false"),n.dataset.target="navmenu",P(n,"is-active",e.showMenu),t=M(n,"click",e.click_handler)},m(e,t){w(e,n,t)},p(e,t){e.showMenu&&P(n,"is-active",t.showMenu)},d(e){e&&y(n),t()}}}function eg(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h=new Qf({props:{url:"/",text:"Dashboard",icon:"chalkboard-teacher"}}),$=new Qf({props:{url:"/sessions",text:"Schedule",icon:"calendar-alt"}}),v=new Qf({props:{url:"/groups",text:"Groups",icon:"users"}}),x=new Qf({props:{url:"/students",text:"Students",icon:"address-card"}}),k=new Qf({props:{url:"/semesters",text:"Semesters",icon:"school"}}),S=new Qf({props:{url:"/lessons",text:"Lessons"}}),D=new Qf({props:{url:"/materials",text:"Materials"}}),C=new Qf({props:{url:"/words",text:"Words"}}),M=new Qf({props:{url:"/tags",text:"Tags"}});return{c(){h.$$.fragment.c(),n=I(),$.$$.fragment.c(),t=I(),v.$$.fragment.c(),r=I(),x.$$.fragment.c(),s=I(),k.$$.fragment.c(),a=I(),i=_("div"),(o=_("span")).innerHTML='<i class="fas fa-book svelte-3cc10n"></i>Contents\n\t\t\t          ',l=I(),c=_("div"),S.$$.fragment.c(),d=I(),D.$$.fragment.c(),u=I(),C.$$.fragment.c(),p=I(),m=_("hr"),f=I(),M.$$.fragment.c(),A(o,"class","navbar-link svelte-3cc10n"),A(m,"class","navbar-divider svelte-3cc10n"),A(c,"class","navbar-dropdown svelte-3cc10n"),A(i,"class","navbar-item has-dropdown is-hoverable svelte-3cc10n")},m(e,y){_e(h,e,y),w(e,n,y),_e($,e,y),w(e,t,y),_e(v,e,y),w(e,r,y),_e(x,e,y),w(e,s,y),_e(k,e,y),w(e,a,y),w(e,i,y),b(i,o),b(i,l),b(i,c),_e(S,c,null),b(c,d),_e(D,c,null),b(c,u),_e(C,c,null),b(c,p),b(c,m),b(c,f),_e(M,c,null),g=!0},i(e){g||(pe(h.$$.fragment,e),pe($.$$.fragment,e),pe(v.$$.fragment,e),pe(x.$$.fragment,e),pe(k.$$.fragment,e),pe(S.$$.fragment,e),pe(D.$$.fragment,e),pe(C.$$.fragment,e),pe(M.$$.fragment,e),g=!0)},o(e){me(h.$$.fragment,e),me($.$$.fragment,e),me(v.$$.fragment,e),me(x.$$.fragment,e),me(k.$$.fragment,e),me(S.$$.fragment,e),me(D.$$.fragment,e),me(C.$$.fragment,e),me(M.$$.fragment,e),g=!1},d(e){Se(h,e),e&&y(n),Se($,e),e&&y(t),Se(v,e),e&&y(r),Se(x,e),e&&y(s),Se(k,e),e&&(y(a),y(i)),Se(S),Se(D),Se(C),Se(M)}}}function ng(e){var n,t,r,s,a,i=new Qf({props:{url:"/me",icon:"user-circle",text:e.$auth.username}});return{c(){i.$$.fragment.c(),n=I(),t=_("div"),(r=_("button")).innerHTML="<strong>Log out</strong>",A(r,"class","button is-text"),A(t,"class","buttons"),a=M(r,"click",e.logout)},m(e,a){_e(i,e,a),w(e,n,a),w(e,t,a),b(t,r),s=!0},p(e,n){var t={};e.$auth&&(t.text=n.$auth.username),i.$set(t)},i(e){s||(pe(i.$$.fragment,e),s=!0)},o(e){me(i.$$.fragment,e),s=!1},d(e){Se(i,e),e&&(y(n),y(t)),a()}}}function tg(e){var n,t,r,s,a,i,o,l,c,d,u,p=e.$auth.username&&Kf(e),m=e.$auth.username&&eg(),f=e.$auth.username&&ng(e);return{c(){n=_("nav"),t=_("div"),(r=_("a")).innerHTML='<img class="logo svelte-3cc10n" src="kumu-logo.png" height="28" alt="levitation logo"> <span class="title is-4 appname svelte-3cc10n">Kumu</span>',s=I(),p&&p.c(),a=I(),i=_("div"),o=_("div"),m&&m.c(),l=I(),c=_("div"),f&&f.c(),A(r,"class","navbar-item svelte-3cc10n"),A(r,"href","#/"),A(t,"class","navbar-brand svelte-3cc10n"),A(o,"class","navbar-start svelte-3cc10n"),A(c,"class","navbar-end svelte-3cc10n"),A(i,"id","navmenu"),A(i,"class","navbar-menu svelte-3cc10n"),P(i,"is-active",e.showMenu),A(n,"class","navbar is-black svelte-3cc10n"),A(n,"role","navigation"),A(n,"aria-label","main navigation"),u=M(i,"click",e.click_handler_1)},m(e,u){w(e,n,u),b(n,t),b(t,r),b(t,s),p&&p.m(t,null),b(n,a),b(n,i),b(i,o),m&&m.m(o,null),b(i,l),b(i,c),f&&f.m(c,null),d=!0},p(e,n){n.$auth.username?p?p.p(e,n):((p=Kf(n)).c(),p.m(t,null)):p&&(p.d(1),p=null),n.$auth.username?m?pe(m,1):((m=eg()).c(),pe(m,1),m.m(o,null)):m&&(de(),me(m,1,1,()=>{m=null}),ue()),n.$auth.username?f?(f.p(e,n),pe(f,1)):((f=ng(n)).c(),pe(f,1),f.m(c,null)):f&&(de(),me(f,1,1,()=>{f=null}),ue()),e.showMenu&&P(i,"is-active",n.showMenu)},i(e){d||(pe(m),pe(f),d=!0)},o(e){me(m),me(f),d=!1},d(e){e&&y(n),p&&p.d(),m&&m.d(),f&&f.d(),u()}}}function rg(e,n,t){let r;l(e,Je,e=>{t("$auth",r=e)});let s=!1;return{showMenu:s,logout:async()=>{const e=await Je.logout();Ee.add({text:`Logged out user '${e}'`,type:"success"})},$auth:r,click_handler:function(){t("showMenu",s=!s)},click_handler_1:function(){t("showMenu",s=!s)}}}class sg extends Ce{constructor(e){super(),Ie(this,e,rg,tg,o,[])}}function ag(e){var n,t,r,s,a,i,o,l;const p=e.$$slots.default,m=c(p,e,null);return{c(){n=_("div"),t=_("p"),r=_("i"),s=I(),a=D(e.title),i=I(),o=_("section"),m&&m.c(),A(r,"class","fas fa-exclamation-triangle svelte-1ipf0fy"),A(t,"class","warning-message-header svelte-1ipf0fy"),A(o,"class","warning-message-body svelte-1ipf0fy"),A(n,"class","warning svelte-1ipf0fy")},l(e){m&&m.l(section_nodes)},m(e,c){w(e,n,c),b(n,t),b(t,r),b(t,s),b(t,a),b(n,i),b(n,o),m&&m.m(o,null),l=!0},p(e,n){l&&!e.title||N(a,n.title),m&&m.p&&e.$$scope&&m.p(u(p,n,e,null),d(p,n,null))},i(e){l||(pe(m,e),l=!0)},o(e){me(m,e),l=!1},d(e){e&&y(n),m&&m.d(e)}}}function ig(e,n,t){let{title:r="Warning"}=n,{$$slots:s={},$$scope:a}=n;return e.$set=e=>{"title"in e&&t("title",r=e.title),"$$scope"in e&&t("$$scope",a=e.$$scope)},{title:r,$$slots:s,$$scope:a}}class og extends Ce{constructor(e){super(),Ie(this,e,ig,ag,o,["title"])}}function lg(e){var n,t,r=e.uri!==`/session/${e.$todaysSessions.now.id}`&&cg(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.uri!==`/session/${t.$todaysSessions.now.id}`?r?(r.p(e,t),pe(r,1)):((r=cg(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function cg(e){var n,t=new og({props:{title:e.$todaysSessions.now.group.name+" class is on right now!",$$slots:{default:[ug]},$$scope:{ctx:e}}});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},p(e,n){var r={};e.$todaysSessions&&(r.title=n.$todaysSessions.now.group.name+" class is on right now!"),(e.$$scope||e.$todaysSessions)&&(r.$$scope={changed:e,ctx:n}),t.$set(r)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function dg(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g=e.dateString(e.$todaysSessions.now.startsAt),h=e.dateString(e.$todaysSessions.now.endsAt),$=e.$todaysSessions.now.stage;return{c(){(n=_("dt")).textContent="Started:",t=I(),r=_("dd"),s=D(g),a=I(),(i=_("dt")).textContent="Ends:",o=I(),l=_("dd"),c=D(h),d=I(),(u=_("dt")).textContent="Status:",p=I(),m=_("dd"),f=D($)},m(e,g){w(e,n,g),w(e,t,g),w(e,r,g),b(r,s),w(e,a,g),w(e,i,g),w(e,o,g),w(e,l,g),b(l,c),w(e,d,g),w(e,u,g),w(e,p,g),w(e,m,g),b(m,f)},p(e,n){e.$todaysSessions&&g!==(g=n.dateString(n.$todaysSessions.now.startsAt))&&N(s,g),e.$todaysSessions&&h!==(h=n.dateString(n.$todaysSessions.now.endsAt))&&N(c,h),e.$todaysSessions&&$!==($=n.$todaysSessions.now.stage)&&N(f,$)},d(e){e&&(y(n),y(t),y(r),y(a),y(i),y(o),y(l),y(d),y(u),y(p),y(m))}}}function ug(e){var n,t,r,s,a,i,o,l=new ir({props:{$$slots:{default:[dg]},$$scope:{ctx:e}}});return{c(){n=_("div"),l.$$.fragment.c(),t=I(),r=_("a"),s=_("i"),a=D("  Go now"),A(s,"class","fas fa-running"),A(r,"href",i="#/session/"+e.$todaysSessions.now.id),A(r,"class","button is-link svelte-1byku66"),A(n,"class","warning svelte-1byku66")},m(e,i){w(e,n,i),_e(l,n,null),b(n,t),b(n,r),b(r,s),b(r,a),o=!0},p(e,n){var t={};(e.$$scope||e.$todaysSessions)&&(t.$$scope={changed:e,ctx:n}),l.$set(t),o&&!e.$todaysSessions||i===(i="#/session/"+n.$todaysSessions.now.id)||A(r,"href",i)},i(e){o||(pe(l.$$.fragment,e),o=!0)},o(e){me(l.$$.fragment,e),o=!1},d(e){e&&y(n),Se(l)}}}function pg(e){var n,t,r=e.$todaysSessions&&e.$todaysSessions.now&&"Ended"!==e.$todaysSessions.now.stage&&lg(e);return{c(){r&&r.c(),n=C()},m(e,s){r&&r.m(e,s),w(e,n,s),t=!0},p(e,t){t.$todaysSessions&&t.$todaysSessions.now&&"Ended"!==t.$todaysSessions.now.stage?r?(r.p(e,t),pe(r,1)):((r=lg(t)).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue())},i(e){t||(pe(r),t=!0)},o(e){me(r),t=!1},d(e){r&&r.d(e),e&&y(n)}}}function mg(e,n,t){let r;l(e,qs,e=>{t("$todaysSessions",r=e)});let{active:s="/",uri:a=location.pathname}=n;return e.$set=e=>{"active"in e&&t("active",s=e.active),"uri"in e&&t("uri",a=e.uri)},{active:s,uri:a,dateString:e=>{return Xa(new Date(e),new Date,{addSuffix:!0})},$todaysSessions:r}}class fg extends Ce{constructor(e){super(),Ie(this,e,mg,pg,o,["active","uri"])}}function gg(e){var n,t=new sg({});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function hg(n){var t,r=new Zf({});return{c(){r.$$.fragment.c()},m(e,n){_e(r,e,n),t=!0},p:e,i(e){t||(pe(r.$$.fragment,e),t=!0)},o(e){me(r.$$.fragment,e),t=!1},d(e){Se(r,e)}}}function $g(e){var n,t,r="/viewer"!==e.$location&&vg(),s=new sn({props:{routes:Wf}});return{c(){r&&r.c(),n=I(),s.$$.fragment.c()},m(e,a){r&&r.m(e,a),w(e,n,a),_e(s,e,a),t=!0},p(e,t){"/viewer"!==t.$location?r?pe(r,1):((r=vg()).c(),pe(r,1),r.m(n.parentNode,n)):r&&(de(),me(r,1,1,()=>{r=null}),ue());var a={};e.routes&&(a.routes=Wf),s.$set(a)},i(e){t||(pe(r),pe(s.$$.fragment,e),t=!0)},o(e){me(r),me(s.$$.fragment,e),t=!1},d(e){r&&r.d(e),e&&y(n),Se(s,e)}}}function vg(e){var n,t=new fg({});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function bg(e){var n,t=new Ue({});return{c(){t.$$.fragment.c()},m(e,r){_e(t,e,r),n=!0},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){me(t.$$.fragment,e),n=!1},d(e){Se(t,e)}}}function wg(e){var n,t,r,s,a,i,o,l="/viewer"!==e.$location&&gg(),c=[$g,hg],d=[];function u(e){return e.$auth.username?0:1}r=u(e),s=d[r]=c[r](e);var p="/viewer"!==en&&bg();return{c(){l&&l.c(),n=I(),t=_("main"),s.c(),a=I(),p&&p.c(),i=C(),A(t,"class","svelte-3eevj6")},m(e,s){l&&l.m(e,s),w(e,n,s),w(e,t,s),d[r].m(t,null),w(e,a,s),p&&p.m(e,s),w(e,i,s),o=!0},p(e,a){"/viewer"!==a.$location?l?pe(l,1):((l=gg()).c(),pe(l,1),l.m(n.parentNode,n)):l&&(de(),me(l,1,1,()=>{l=null}),ue());var o=r;(r=u(a))===o?d[r].p(e,a):(de(),me(d[o],1,1,()=>{d[o]=null}),ue(),(s=d[r])||(s=d[r]=c[r](a)).c(),pe(s,1),s.m(t,null)),"/viewer"!==en?p?pe(p,1):((p=bg()).c(),pe(p,1),p.m(i.parentNode,i)):p&&(de(),me(p,1,1,()=>{p=null}),ue())},i(e){o||(pe(l),pe(s),pe(p),o=!0)},o(e){me(l),me(s),me(p),o=!1},d(e){l&&l.d(e),e&&(y(n),y(t)),d[r].d(),e&&y(a),p&&p.d(e),e&&y(i)}}}function yg(e,n,t){let r,s;return l(e,en,e=>{t("$location",r=e)}),l(e,Je,e=>{t("$auth",s=e)}),{$location:r,$auth:s}}return new class extends Ce{constructor(e){super(),Ie(this,e,yg,wg,o,[])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
