var app=function(){"use strict";function e(){}const n=e=>e;function t(e,n){for(const t in n)e[t]=n[t];return e}function r(e){return e()}function s(){return Object.create(null)}function a(e){e.forEach(r)}function i(e){return"function"==typeof e}function o(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}function l(e,n){const t=e.subscribe(n);return t.unsubscribe?()=>t.unsubscribe():t}function c(e){let n;return l(e,e=>n=e)(),n}function d(e,n,t){e.$$.on_destroy.push(l(n,t))}function u(e,n,t){if(e){const r=p(e,n,t);return e[0](r)}}function p(e,n,r){return e[1]?t({},t(n.$$scope.ctx,e[1](r?r(n):{}))):n.$$scope.ctx}function m(e,n,r,s){return e[1]?t({},t(n.$$scope.changed||{},e[1](s?s(r):{}))):n.$$scope.changed||{}}function f(e){return null==e?"":e}const g="undefined"!=typeof window;let h=g?()=>window.performance.now():()=>Date.now(),$=g?e=>requestAnimationFrame(e):e;const v=new Set;let b,w=!1;function y(){v.forEach(e=>{e[0](h())||(v.delete(e),e[1]())}),(w=v.size>0)&&$(y)}function x(e){let n;return w||(w=!0,$(y)),{promise:new Promise(t=>{v.add(n=[e,t])}),abort(){v.delete(n)}}}function k(e,n){e.appendChild(n)}function _(e,n,t){e.insertBefore(n,t||null)}function D(e){e.parentNode.removeChild(e)}function S(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}function I(e){return document.createElement(e)}function C(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function M(e){return document.createTextNode(e)}function T(){return M(" ")}function A(){return M("")}function N(e,n,t,r){return e.addEventListener(n,t,r),()=>e.removeEventListener(n,t,r)}function E(e){return function(n){return n.preventDefault(),e.call(this,n)}}function O(e,n,t){null==t?e.removeAttribute(n):e.setAttribute(n,t)}function L(e,n){n=""+n,e.data!==n&&(e.data=n)}function P(e,n){(null!=n||e.value)&&(e.value=n)}function R(e,n,t,r){e.style.setProperty(n,t,r?"important":"")}function z(e,n){for(let t=0;t<e.options.length;t+=1){const r=e.options[t];if(r.__value===n)return void(r.selected=!0)}}function j(e){const n=e.querySelector(":checked")||e.options[0];return n&&n.__value}function q(e,n,t){e.classList[t?"add":"remove"](n)}function H(e,n){const t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,n),t}class F{constructor(e,n=null){this.e=I("div"),this.a=n,this.u(e)}m(e,n=null){for(let t=0;t<this.n.length;t+=1)_(e,this.n[t],n);this.t=e}u(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}p(e){this.d(),this.u(e),this.m(this.t,this.a)}d(){this.n.forEach(D)}}let W,Y=0,U={};function B(e,n,t,r,s,a,i,o=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=n+(t-n)*a(e);c+=100*e+`%{${i(r,1-r)}}\n`}const d=c+`100% {${i(t,1-t)}}\n}`,u=`__svelte_${function(e){let n=5381,t=e.length;for(;t--;)n=(n<<5)-n^e.charCodeAt(t);return n>>>0}(d)}_${o}`;if(!U[u]){if(!b){const e=I("style");document.head.appendChild(e),b=e.sheet}U[u]=!0,b.insertRule(`@keyframes ${u} ${d}`,b.cssRules.length)}const p=e.style.animation||"";return e.style.animation=`${p?`${p}, `:""}${u} ${r}ms linear ${s}ms 1 both`,Y+=1,u}function G(e,n){e.style.animation=(e.style.animation||"").split(", ").filter(n?e=>e.indexOf(n)<0:e=>-1===e.indexOf("__svelte")).join(", "),n&&!--Y&&$(()=>{if(Y)return;let e=b.cssRules.length;for(;e--;)b.deleteRule(e);U={}})}function Z(e){W=e}function V(){if(!W)throw new Error("Function called outside component initialization");return W}function J(e){V().$$.on_mount.push(e)}function X(e){V().$$.on_destroy.push(e)}function Q(){const e=W;return(n,t)=>{const r=e.$$.callbacks[n];if(r){const s=H(n,t);r.slice().forEach(n=>{n.call(e,s)})}}}function K(e,n){const t=e.$$.callbacks[n.type];t&&t.slice().forEach(e=>e(n))}const ee=[],ne=[],te=[],re=[],se=Promise.resolve();let ae,ie=!1;function oe(e){te.push(e)}function le(e){re.push(e)}function ce(){const e=new Set;do{for(;ee.length;){const e=ee.shift();Z(e),de(e.$$)}for(;ne.length;)ne.pop()();for(let n=0;n<te.length;n+=1){const t=te[n];e.has(t)||(t(),e.add(t))}te.length=0}while(ee.length);for(;re.length;)re.pop()();ie=!1}function de(e){e.fragment&&(e.update(e.dirty),a(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(oe))}function ue(){return ae||(ae=Promise.resolve()).then(()=>{ae=null}),ae}function pe(e,n,t){e.dispatchEvent(H(`${n?"intro":"outro"}${t}`))}const me=new Set;let fe;function ge(){fe={r:0,c:[],p:fe}}function he(){fe.r||a(fe.c),fe=fe.p}function $e(e,n){e&&e.i&&(me.delete(e),e.i(n))}function ve(e,n,t,r){if(e&&e.o){if(me.has(e))return;me.add(e),fe.c.push(()=>{me.delete(e),r&&(t&&e.d(1),r())}),e.o(n)}}const be={duration:0};function we(t,r,s){let a,o,l=r(t,s),c=!1,d=0;function u(){a&&G(t,a)}function p(){const{delay:r=0,duration:s=300,easing:i=n,tick:p=e,css:m}=l||be;m&&(a=B(t,0,1,s,r,i,m,d++)),p(0,1);const f=h()+r,g=f+s;o&&o.abort(),c=!0,oe(()=>pe(t,!0,"start")),o=x(e=>{if(c){if(e>=g)return p(1,0),pe(t,!0,"end"),u(),c=!1;if(e>=f){const n=i((e-f)/s);p(n,1-n)}}return c})}let m=!1;return{start(){m||(G(t),i(l)?(l=l(),ue().then(p)):p())},invalidate(){m=!1},end(){c&&(u(),c=!1)}}}function ye(t,r,s){let o,l=r(t,s),c=!0;const d=fe;function u(){const{delay:r=0,duration:s=300,easing:i=n,tick:u=e,css:p}=l||be;p&&(o=B(t,1,0,s,r,i,p));const m=h()+r,f=m+s;oe(()=>pe(t,!1,"start")),x(e=>{if(c){if(e>=f)return u(0,1),pe(t,!1,"end"),--d.r||a(d.c),!1;if(e>=m){const n=i((e-m)/s);u(1-n,n)}}return c})}return d.r+=1,i(l)?ue().then(()=>{l=l(),u()}):u(),{end(e){e&&l.tick&&l.tick(1,0),c&&(o&&G(t,o),c=!1)}}}function xe(t,r,s,o){let l=r(t,s),c=o?0:1,d=null,u=null,p=null;function m(){p&&G(t,p)}function f(e,n){const t=e.b-c;return n*=Math.abs(t),{a:c,b:e.b,d:t,duration:n,start:e.start,end:e.start+n,group:e.group}}function g(r){const{delay:s=0,duration:i=300,easing:o=n,tick:g=e,css:$}=l||be,v={start:h()+s,b:r};r||(v.group=fe,fe.r+=1),d?u=v:($&&(m(),p=B(t,c,r,i,s,o,$)),r&&g(0,1),d=f(v,i),oe(()=>pe(t,r,"start")),x(e=>{if(u&&e>u.start&&(d=f(u,i),u=null,pe(t,d.b,"start"),$&&(m(),p=B(t,c,d.b,d.duration,0,o,l.css))),d)if(e>=d.end)g(c=d.b,1-c),pe(t,d.b,"end"),u||(d.b?m():--d.group.r||a(d.group.c)),d=null;else if(e>=d.start){const n=e-d.start;c=d.a+d.d*o(n/d.duration),g(c,1-c)}return!(!d&&!u)}))}return{run(e){i(l)?ue().then(()=>{l=l(),g(e)}):g(e)},end(){m(),d=u=null}}}function ke(e,n){const r=n.token={};function s(e,s,a,i){if(n.token!==r)return;n.resolved=a&&{[a]:i};const o=t(t({},n.ctx),n.resolved),l=e&&(n.current=e)(o);n.block&&(n.blocks?n.blocks.forEach((e,t)=>{t!==s&&e&&(ge(),ve(e,1,1,()=>{n.blocks[t]=null}),he())}):n.block.d(1),l.c(),$e(l,1),l.m(n.mount(),n.anchor),ce()),n.block=l,n.blocks&&(n.blocks[s]=l)}if((a=e)&&"object"==typeof a&&"function"==typeof a.then){const t=V();if(e.then(e=>{Z(t),s(n.then,1,n.value,e),Z(null)},e=>{Z(t),s(n.catch,2,n.error,e),Z(null)}),n.current!==n.pending)return s(n.pending,0),!0}else{if(n.current!==n.then)return s(n.then,1,n.value,e),!0;n.resolved={[n.value]:e}}var a}const _e="undefined"!=typeof window?window:global;function De(e,n){e.d(1),n.delete(e.key)}function Se(e,n){ve(e,1,1,()=>{n.delete(e.key)})}function Ie(e,n,t,r,s,a,i,o,l,c,d,u){let p=e.length,m=a.length,f=p;const g={};for(;f--;)g[e[f].key]=f;const h=[],$=new Map,v=new Map;for(f=m;f--;){const e=u(s,a,f),o=t(e);let l=i.get(o);l?r&&l.p(n,e):(l=c(o,e)).c(),$.set(o,h[f]=l),o in g&&v.set(o,Math.abs(f-g[o]))}const b=new Set,w=new Set;function y(e){$e(e,1),e.m(o,d),i.set(e.key,e),d=e.first,m--}for(;p&&m;){const n=h[m-1],t=e[p-1],r=n.key,s=t.key;n===t?(d=n.first,p--,m--):$.has(s)?!i.has(r)||b.has(r)?y(n):w.has(s)?p--:v.get(r)>v.get(s)?(w.add(r),y(n)):(b.add(s),p--):(l(t,i),p--)}for(;p--;){const n=e[p];$.has(n.key)||l(n,i)}for(;m;)y(h[m-1]);return h}function Ce(e,n){const t={},r={},s={$$scope:1};let a=e.length;for(;a--;){const i=e[a],o=n[a];if(o){for(const e in i)e in o||(r[e]=1);for(const e in o)s[e]||(t[e]=o[e],s[e]=1);e[a]=o}else for(const e in i)s[e]=1}for(const e in r)e in t||(t[e]=void 0);return t}function Me(e,n,t){-1!==e.$$.props.indexOf(n)&&(e.$$.bound[n]=t,t(e.$$.ctx[n]))}function Te(e,n,t){const{fragment:s,on_mount:o,on_destroy:l,after_update:c}=e.$$;s.m(n,t),oe(()=>{const n=o.map(r).filter(i);l?l.push(...n):a(n),e.$$.on_mount=[]}),c.forEach(oe)}function Ae(e,n){e.$$.fragment&&(a(e.$$.on_destroy),e.$$.fragment.d(n),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function Ne(e,n){e.$$.dirty||(ee.push(e),ie||(ie=!0,se.then(ce)),e.$$.dirty=s()),e.$$.dirty[n]=!0}function Ee(n,t,r,i,o,l){const c=W;Z(n);const d=t.props||{},u=n.$$={fragment:null,ctx:null,props:l,update:e,not_equal:o,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:s(),dirty:null};let p=!1;u.ctx=r?r(n,d,(e,t)=>{u.ctx&&o(u.ctx[e],u.ctx[e]=t)&&(u.bound[e]&&u.bound[e](t),p&&Ne(n,e))}):d,u.update(),p=!0,a(u.before_update),u.fragment=i(u.ctx),t.target&&(t.hydrate?u.fragment.l(function(e){return Array.from(e.childNodes)}(t.target)):u.fragment.c(),t.intro&&$e(n.$$.fragment),Te(n,t.target,t.anchor),ce()),Z(c)}class Oe{$destroy(){Ae(this,1),this.$destroy=e}$on(e,n){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const e=t.indexOf(n);-1!==e&&t.splice(e,1)}}$set(){}}const Le=[];function Pe(e,n){return{subscribe:Re(e,n).subscribe}}function Re(n,t=e){let r;const s=[];function a(e){if(o(n,e)&&(n=e,r)){const e=!Le.length;for(let e=0;e<s.length;e+=1){const t=s[e];t[1](),Le.push(t,n)}if(e){for(let e=0;e<Le.length;e+=2)Le[e][0](Le[e+1]);Le.length=0}}}return{set:a,update:function(e){a(e(n))},subscribe:function(i,o=e){const l=[i,o];return s.push(l),1===s.length&&(r=t(a)||e),i(n),()=>{const e=s.indexOf(l);-1!==e&&s.splice(e,1),0===s.length&&(r(),r=null)}}}}function ze(n,t,r){const s=!Array.isArray(n),o=s?[n]:n,l=t.length<2;return Pe(r,n=>{let r=!1;const c=[];let d=0,u=e;const p=()=>{if(d)return;u();const r=t(s?c[0]:c,n);l?n(r):u=i(r)?r:e},m=o.map((e,n)=>e.subscribe(e=>{c[n]=e,d&=~(1<<n),r&&p()},()=>{d|=1<<n}));return r=!0,p(),function(){a(m),u()}})}const je=(()=>{const{subscribe:e,update:n}=Re({});return{subscribe:e,remove:e=>{n(n=>{const{[e]:t,...r}=n;return r})},add:function(e){const t=(()=>{const e=new Date,n=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e.toISOString()+n})();n(n=>({...n,[t]:e})),setTimeout(()=>{this.remove(t)},4e3)}}})();function qe(e){const n=e-1;return n*n*n+1}function He(e,{delay:n=0,duration:t=400}){const r=+getComputedStyle(e).opacity;return{delay:n,duration:t,css:e=>`opacity: ${e*r}`}}function Fe(e,{delay:n=0,duration:t=400,easing:r=qe,x:s=0,y:a=0,opacity:i=0}){const o=getComputedStyle(e),l=+o.opacity,c="none"===o.transform?"":o.transform,d=l*(1-i);return{delay:n,duration:t,easing:r,css:(e,n)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*s}px, ${(1-e)*a}px);\n\t\t\topacity: ${l-d*n}`}}function We(e,{delay:n=0,duration:t=400,easing:r=qe}){const s=getComputedStyle(e),a=+s.opacity,i=parseFloat(s.height),o=parseFloat(s.paddingTop),l=parseFloat(s.paddingBottom),c=parseFloat(s.marginTop),d=parseFloat(s.marginBottom),u=parseFloat(s.borderTopWidth),p=parseFloat(s.borderBottomWidth);return{delay:n,duration:t,easing:r,css:e=>"overflow: hidden;"+`opacity: ${Math.min(20*e,1)*a};`+`height: ${e*i}px;`+`padding-top: ${e*o}px;`+`padding-bottom: ${e*l}px;`+`margin-top: ${e*c}px;`+`margin-bottom: ${e*d}px;`+`border-top-width: ${e*u}px;`+`border-bottom-width: ${e*p}px;`}}function Ye(n){var t,r,s,a,i,o;return{c(){t=I("div"),r=I("button"),s=T(),a=M(n.text),O(r,"class","delete"),O(t,"class",i="notification is-"+n.type+" svelte-zww63w"),o=N(r,"click",n.remove)},m(e,n){_(e,t,n),k(t,r),k(t,s),k(t,a)},p(e,n){e.text&&L(a,n.text),e.type&&i!==(i="notification is-"+n.type+" svelte-zww63w")&&O(t,"class",i)},i:e,o:e,d(e){e&&D(t),o()}}}function Ue(e,n,t){let{id:r,message:s}=n;let a,i;return e.$set=e=>{"id"in e&&t("id",r=e.id),"message"in e&&t("message",s=e.message)},e.$$.update=(e={message:1})=>{e.message&&t("text",a=s&&"string"!=typeof s?s.text:s),e.message&&t("type",i=s&&"string"!=typeof s?s.type:"info")},{id:r,message:s,remove:()=>je.remove(r),text:a,type:i}}class Be extends Oe{constructor(e){super(),Ee(this,e,Ue,Ye,o,["id","message"])}}function Ge(e,n,t){const r=Object.create(e);return r.id=n[t][0],r.message=n[t][1],r}function Ze(e){var n,t,r=[],s=new Map,a=Object.entries(e.$notifications);const i=e=>e.id;for(var o=0;o<a.length;o+=1){let n=Ge(e,a,o),t=i(n);s.set(t,r[o]=Ve(t,n))}return{c(){for(n=I("div"),o=0;o<r.length;o+=1)r[o].c();O(n,"class","notification-list svelte-1t0onhw")},m(e,s){for(_(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=Object.entries(t.$notifications);ge(),r=Ie(r,e,i,1,t,a,s,n,Se,Ve,null,Ge),he()},i(e){if(!t){for(var n=0;n<a.length;n+=1)$e(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)ve(r[o]);t=!1},d(e){for(e&&D(n),o=0;o<r.length;o+=1)r[o].d()}}}function Ve(e,n){var t,r,s,a,i=new Be({props:{message:n.message,id:n.id}});return{key:e,first:null,c(){t=I("div"),i.$$.fragment.c(),r=T(),this.first=t},m(e,n){_(e,t,n),Te(i,t,null),k(t,r),a=!0},p(e,n){var t={};e.$notifications&&(t.message=n.message),e.$notifications&&(t.id=n.id),i.$set(t)},i(e){a||($e(i.$$.fragment,e),oe(()=>{s||(s=xe(t,Fe,{x:400},!0)),s.run(1)}),a=!0)},o(e){ve(i.$$.fragment,e),s||(s=xe(t,Fe,{x:400},!1)),s.run(0),a=!1},d(e){e&&D(t),Ae(i),e&&s&&s.end()}}}function Je(e){var n,t,r=e.$notifications&&Ze(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.$notifications?r?(r.p(e,t),$e(r,1)):((r=Ze(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function Xe(e,n,t){let r;return d(e,je,e=>{t("$notifications",r=e)}),{$notifications:r}}class Qe extends Oe{constructor(e){super(),Ee(this,e,Xe,Je,o,[])}}const Ke=window.fetch,en=async(e,n)=>{const t=window.localStorage.getItem("auth"),r=t?JSON.parse(t).token:null,s="function"==typeof e?e(n):JSON.stringify({query:e,variables:n}),a=await Ke("http://192.168.1.9:4000/api",{method:"post",headers:{"Content-Type":"application/json",Authorization:r||""},body:s}),i=a&&await a.json();if(a&&a.ok&&!i.errors&&i.data)return i.data;throw i.errors},nn=()=>{const e=window.localStorage.getItem("auth");return{user:e?JSON.parse(e).user:null,token:e?JSON.parse(e).token:null}},tn=(()=>{const{user:e,token:n}=nn(),{subscribe:t,set:r,update:s}=Re({...e,token:n});return{subscribe:t,login:async(e,n)=>{const t=await en("\n  mutation Login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      token\n      user {\n        id\n        username\n      }\n    }\n  }\n",{username:e,password:n});window.localStorage.setItem("auth",JSON.stringify(t.login)),s(e=>({...e,...t.login.user,token:t.login.token}))},logout:()=>{const{user:e}=nn();return window.localStorage.removeItem("auth"),r({}),e&&e.username}}})();function rn(e){var n,t,r=e.component;function s(e){return{props:{params:e.componentParams}}}if(r)var a=new r(s(e));return{c(){a&&a.$$.fragment.c(),n=A()},m(e,r){a&&Te(a,e,r),_(e,n,r),t=!0},p(e,t){var i={};if(e.componentParams&&(i.params=t.componentParams),r!==(r=t.component)){if(a){ge();const e=a;ve(e.$$.fragment,1,0,()=>{Ae(e,1)}),he()}r?((a=new r(s(t))).$$.fragment.c(),$e(a.$$.fragment,1),Te(a,n.parentNode,n)):a=null}else r&&a.$set(i)},i(e){t||(a&&$e(a.$$.fragment,e),t=!0)},o(e){a&&ve(a.$$.fragment,e),t=!1},d(e){e&&D(n),a&&Ae(a,e)}}}function sn(){const e=window.location.href.indexOf("#/");let n=e>-1?window.location.href.substr(e+1):"/";const t=n.indexOf("?");let r="";return t>-1&&(r=n.substr(t+1),n=n.substr(0,t)),{location:n,querystring:r}}const an=Pe(sn(),function(e){const n=()=>{e(sn())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}}),on=ze(an,e=>e.location);ze(an,e=>e.querystring);function ln(e){if(!e||e.length<1||"/"!=e.charAt(0))throw Error("Invalid parameter location");setTimeout(()=>{window.location.hash="#"+e},0)}function cn(){setTimeout(()=>{window.history.back()},0)}function dn(e,n,t){let r;d(e,an,e=>{t("$loc",r=e)});let{routes:s={}}=n;class a{constructor(e,n){if(!e||"string"==typeof e&&(e.length<1||"/"!=e.charAt(0)&&"*"!=e.charAt(0))||"object"==typeof e&&!(e instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:t,keys:r}=function(e,n){if(e instanceof RegExp)return{keys:!1,pattern:e};var t,r,s,a,i=[],o="",l=e.split("/");for(l[0]||l.shift();s=l.shift();)"*"===(t=s[0])?(i.push("wild"),o+="/(.*)"):":"===t?(r=s.indexOf("?",1),a=s.indexOf(".",1),i.push(s.substring(1,~r?r:~a?a:s.length)),o+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(o+=(~r?"?":"")+"\\"+s.substring(a))):o+="/"+s;return{keys:i,pattern:new RegExp("^"+o+(n?"(?=$|/)":"/?$"),"i")}}(e);this.path=e,this.component=n,this._pattern=t,this._keys=r}match(e){const n=this._pattern.exec(e);if(null===n)return null;if(!1===this._keys)return n;const t={};let r=0;for(;r<this._keys.length;)t[this._keys[r]]=n[++r]||null;return t}}const i=s instanceof Map?s:Object.entries(s),o=[];for(const[e,n]of i)o.push(new a(e,n));let l=null,c={};return e.$set=e=>{"routes"in e&&t("routes",s=e.routes)},e.$$.update=(e={component:1,$loc:1})=>{if(e.component||e.$loc){t("component",l=null);let e=0;for(;!l&&e<o.length;){const n=o[e].match(r.location);n&&(t("component",l=o[e].component),t("componentParams",c=n)),e++}}},{routes:s,component:l,componentParams:c}}class un extends Oe{constructor(e){super(),Ee(this,e,dn,rn,o,["routes"])}}function pn(e){var n,t,r,s;return{c(){n=I("p"),t=M("The path '"),r=M(e.$location),s=M("' leads nowhere")},m(e,a){_(e,n,a),k(n,t),k(n,r),k(n,s)},p(e,n){e.$location&&L(r,n.$location)},d(e){e&&D(n)}}}function mn(e){var n,t,r,s,a,i,o,l=e.params.item+"",c=e.params.id?`'${e.params.id}'`:"";return{c(){n=I("p"),t=M("The "),r=I("strong"),s=M(l),a=T(),i=M(c),o=M(" could not be found.")},m(e,l){_(e,n,l),k(n,t),k(n,r),k(r,s),k(n,a),k(n,i),k(n,o)},p(e,n){e.params&&l!==(l=n.params.item+"")&&L(s,l),e.params&&c!==(c=n.params.id?`'${n.params.id}'`:"")&&L(i,c)},d(e){e&&D(n)}}}function fn(n){var t,r,s,a,i,o,l,c,d,u,p;function m(e,n){return n.params.item?mn:pn}var f=m(0,n),g=f(n);return{c(){t=I("div"),r=I("section"),(s=I("h1")).innerHTML='<i class="fas fa-frown-open"></i> 404',a=T(),(i=I("h2")).textContent="resource not found",o=T(),g.c(),l=T(),(c=I("p")).innerHTML='It might be wise to return to the <a href="#/">main page</a>.',d=T(),(u=I("button")).innerHTML='<i class="fas fa-backward"></i> go back',O(s,"class","title is-1 primary svelte-vcg24b"),O(i,"class","subtitle is-3"),O(u,"class","button is-link svelte-vcg24b"),O(t,"class","container svelte-vcg24b"),p=N(u,"click",cn)},m(e,n){_(e,t,n),k(t,r),k(r,s),k(r,a),k(r,i),k(r,o),g.m(r,null),k(r,l),k(r,c),k(r,d),k(r,u)},p(e,n){f===(f=m(0,n))&&g?g.p(e,n):(g.d(1),(g=f(n))&&(g.c(),g.m(r,l)))},i:e,o:e,d(e){e&&D(t),g.d(),p()}}}function gn(e,n,t){let r;d(e,on,e=>{t("$location",r=e)});let{params:s={}}=n;return e.$set=e=>{"params"in e&&t("params",s=e.params)},{params:s,$location:r}}class hn extends Oe{constructor(e){super(),Ee(this,e,gn,fn,o,["params"])}}function $n(n){var t,r;return{c(){t=T(),(r=I("h1")).textContent="Dashboard",document.title="Dashboard",O(r,"class","title")},m(e,n){_(e,t,n),_(e,r,n)},p:e,i:e,o:e,d(e){e&&(D(t),D(r))}}}const vn=(()=>{const{subscribe:e,set:n,update:t}=Re();return{subscribe:e,get:async()=>{const e=await en("\n  {\n    semesters {\n      id\n      name\n      startDate\n      endDate\n      groups {\n        id\n        name\n      }\n    }\n  }\n");n(e.semesters)},remove:async e=>{const n=await en("\n  mutation deleteSemester($id: ID!) {\n    deleteSemester(id: $id) {\n      id\n      name\n    }\n  }\n",{id:e});t(e=>e.filter(e=>n.deleteSemester.id!==e.id))},create:async e=>{const n=await en("\n  mutation createSemester($input: SemesterInput!) {\n    createSemester(input: $input) {\n      name\n      id\n      startDate\n      endDate\n      groups {\n        id\n        name\n      }\n    }\n  }\n",{input:e});t(e=>[...e,n.createSemester])},patch:async(e,n)=>{const r=await en("\n  mutation updateSemester($id: ID!, $input: SemesterInput!) {\n  updateSemester(input: $input, id: $id) {\n    name\n      id\n      startDate\n      endDate\n      groups {\n        id\n        name\n      }\n  }\n}\n",{id:e,input:n});t(n=>n.map(n=>n.id!==e?n:r.updateSemester))}}})();function bn(e){var n,t,r,s,a,i,o=e.getMessage(e.errors)+"";return{c(){n=I("p"),t=I("span"),r=I("i"),(s=I("strong")).textContent="Error:",a=M(" "),i=M(o),O(r,"class","fas fa-exclamation-triangle svelte-sljdgk"),O(s,"class","svelte-sljdgk"),O(t,"class","error-message svelte-sljdgk"),O(n,"class","error svelte-sljdgk")},m(e,o){_(e,n,o),k(n,t),k(t,r),k(t,s),k(t,a),k(t,i)},p(e,n){e.errors&&o!==(o=n.getMessage(n.errors)+"")&&L(i,o)},d(e){e&&D(n)}}}function wn(n){var t,r=n.getMessage(n.errors),s=r&&bn(n);return{c(){s&&s.c(),t=A()},m(e,n){s&&s.m(e,n),_(e,t,n)},p(e,n){e.errors&&(r=n.getMessage(n.errors)),r?s?s.p(e,n):((s=bn(n)).c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},i:e,o:e,d(e){s&&s.d(e),e&&D(t)}}}function yn(e,n,t){let{errors:r=""}=n;return e.$set=e=>{"errors"in e&&t("errors",r=e.errors)},{errors:r,getMessage:e=>!!e&&(Array.isArray(e)?e.map(e=>e.message).join("\n"):e.message?e.message:e)}}class xn extends Oe{constructor(e){super(),Ee(this,e,yn,wn,o,["errors"])}}function kn(e){var n,t,r,s,i,o,l,c,d,f,g,h,$,v,b,w,y,x=new xn({props:{errors:e.errors}});const S=e.$$slots.default,C=u(S,e,null);return{c(){n=I("h1"),t=M("Delete "),r=M(e.name),s=T(),x.$$.fragment.c(),i=T(),o=I("p"),l=M("Permanently delete "),C||((c=I("span")).textContent="item"),C&&C.c(),d=M("\n  ?"),f=T(),g=I("div"),h=I("button"),$=M("Delete"),v=T(),(b=I("button")).textContent="Keep it",O(n,"class","title"),C||O(c,"class","placeholder"),O(h,"class","button is-primary"),h.disabled=e.loading,q(h,"is-loading",e.loading),O(b,"class","button"),O(g,"class","buttons svelte-5zwjdi"),y=[N(h,"click",e.handleDelete),N(b,"click",e.close)]},l(e){C&&C.l(p_nodes)},m(e,a){_(e,n,a),k(n,t),k(n,r),_(e,s,a),Te(x,e,a),_(e,i,a),_(e,o,a),k(o,l),C?C.m(o,null):k(o,c),k(o,d),_(e,f,a),_(e,g,a),k(g,h),k(h,$),k(g,v),k(g,b),w=!0},p(e,n){w&&!e.name||L(r,n.name);var t={};e.errors&&(t.errors=n.errors),x.$set(t),C&&C.p&&e.$$scope&&C.p(m(S,n,e,null),p(S,n,null)),w&&!e.loading||(h.disabled=n.loading),e.loading&&q(h,"is-loading",n.loading)},i(e){w||($e(x.$$.fragment,e),$e(C,e),w=!0)},o(e){ve(x.$$.fragment,e),ve(C,e),w=!1},d(e){e&&(D(n),D(s)),Ae(x,e),e&&(D(i),D(o)),C&&C.d(e),e&&(D(f),D(g)),a(y)}}}function _n(e,n,t){const r=Q();let{open:s=!1,loading:a=!1,errors:i="",name:o="item"}=n;let{$$slots:l={},$$scope:c}=n;return e.$set=e=>{"open"in e&&t("open",s=e.open),"loading"in e&&t("loading",a=e.loading),"errors"in e&&t("errors",i=e.errors),"name"in e&&t("name",o=e.name),"$$scope"in e&&t("$$scope",c=e.$$scope)},{open:s,loading:a,errors:i,name:o,handleDelete:async()=>{r("delete")},close:()=>{t("open",s=!1)},$$slots:l,$$scope:c}}class Dn extends Oe{constructor(e){super(),Ee(this,e,_n,kn,o,["open","loading","errors","name"])}}function Sn(e){var n,t,r,s,a,i,o,l,c,d;const f=e.$$slots.default,g=u(f,e,null);return{c(){n=I("div"),t=I("div"),s=T(),a=I("div"),i=I("section"),g&&g.c(),O(t,"class","modal-background"),O(i,"class","section svelte-1v8v78e"),O(a,"class","modal-content svelte-1v8v78e"),O(n,"class","modal is-active"),d=N(t,"click",e.close)},l(e){g&&g.l(section_nodes)},m(e,r){_(e,n,r),k(n,t),k(n,s),k(n,a),k(a,i),g&&g.m(i,null),c=!0},p(e,n){g&&g.p&&e.$$scope&&g.p(m(f,n,e,null),p(f,n,null))},i(e){c||(e&&oe(()=>{r||(r=xe(t,He,{duration:200},!0)),r.run(1)}),$e(g,e),oe(()=>{l&&l.end(1),o||(o=we(a,Fe,{duration:200,y:-300})),o.start()}),c=!0)},o(e){e&&(r||(r=xe(t,He,{duration:200},!1)),r.run(0)),ve(g,e),o&&o.invalidate(),l=ye(a,Fe,{duration:200,y:300}),c=!1},d(e){e&&(D(n),r&&r.end()),g&&g.d(e),e&&l&&l.end(),d()}}}function In(e){var n,t,r=e.open&&Sn(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.open?r?(r.p(e,t),$e(r,1)):((r=Sn(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function Cn(e,n,t){let{open:r=!1}=n;let{$$slots:s={},$$scope:a}=n;return e.$set=e=>{"open"in e&&t("open",r=e.open),"$$scope"in e&&t("$$scope",a=e.$$scope)},{open:r,close:()=>{t("open",r=!1)},$$slots:s,$$scope:a}}class Mn extends Oe{constructor(e){super(),Ee(this,e,Cn,In,o,["open"])}}function Tn(e){var n,t;function r(t){e.confirmdelete_open_binding.call(null,t),n=!0,le(()=>n=!1)}let s={name:e.type,errors:e.errors,loading:e.loading,$$slots:{default:[An]},$$scope:{ctx:e}};void 0!==e.open&&(s.open=e.open);var a=new Dn({props:s});return ne.push(()=>Me(a,"open",r)),a.$on("delete",e.handleDelete),{c(){a.$$.fragment.c()},m(e,n){Te(a,e,n),t=!0},p(e,t){var r={};e.type&&(r.name=t.type),e.errors&&(r.errors=t.errors),e.loading&&(r.loading=t.loading),(e.$$scope||e.name||e.type)&&(r.$$scope={changed:e,ctx:t}),!n&&e.open&&(r.open=t.open),a.$set(r)},i(e){t||($e(a.$$.fragment,e),t=!0)},o(e){ve(a.$$.fragment,e),t=!1},d(e){Ae(a,e)}}}function An(e){var n,t,r,s,a;return{c(){n=M("the "),t=M(e.type),r=M(" '"),s=M(e.name),a=M("'")},m(e,i){_(e,n,i),_(e,t,i),_(e,r,i),_(e,s,i),_(e,a,i)},p(e,n){e.type&&L(t,n.type),e.name&&L(s,n.name)},d(e){e&&(D(n),D(t),D(r),D(s),D(a))}}}function Nn(e){var n,t,r=e.open&&Tn(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.open?r?(r.p(e,t),$e(r,1)):((r=Tn(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function En(e){var n,t;function r(t){e.modal_open_binding.call(null,t),n=!0,le(()=>n=!1)}let s={$$slots:{default:[Nn]},$$scope:{ctx:e}};void 0!==e.open&&(s.open=e.open);var a=new Mn({props:s});return ne.push(()=>Me(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){Te(a,e,n),t=!0},p(e,t){var r={};(e.$$scope||e.open||e.type||e.errors||e.loading||e.name)&&(r.$$scope={changed:e,ctx:t}),!n&&e.open&&(r.open=t.open),a.$set(r)},i(e){t||($e(a.$$.fragment,e),t=!0)},o(e){ve(a.$$.fragment,e),t=!1},d(e){Ae(a,e)}}}function On(e,n,t){let{id:r,store:s,type:a="",name:i="",open:o=!1}=n,l="",c=!1,{next:d=""}=n;return e.$set=e=>{"id"in e&&t("id",r=e.id),"store"in e&&t("store",s=e.store),"type"in e&&t("type",a=e.type),"name"in e&&t("name",i=e.name),"open"in e&&t("open",o=e.open),"next"in e&&t("next",d=e.next)},{id:r,store:s,type:a,name:i,open:o,errors:l,loading:c,next:d,handleDelete:async()=>{t("loading",c=!0);try{await s.remove(r),d?ln(d):cn(),t("open",o=!1),je.add({text:`${a} '${i}' deleted`,type:"success"})}catch(e){t("errors",l=e),je.add({text:`Could not delete ${a} '${i}'`,type:"danger"})}finally{t("loading",c=!1)}},confirmdelete_open_binding:function(e){t("open",o=e)},modal_open_binding:function(e){t("open",o=e)}}}class Ln extends Oe{constructor(e){super(),Ee(this,e,On,En,o,["id","store","type","name","open","next"])}}function Pn(e){var n,t;return{c(){n=I("p"),t=M(e.description),O(n,"class","help is-info"),O(n,"id",e.descriptionId)},m(e,r){_(e,n,r),k(n,t)},p(e,r){e.description&&L(t,r.description),e.descriptionId&&O(n,"id",r.descriptionId)},d(e){e&&D(n)}}}function Rn(e){var n,t;return{c(){O(n=I("input"),"name",e.name),O(n,"class","input svelte-193htxd"),O(n,"type","text"),O(n,"pattern",e.pattern),O(n,"minlength",e.minlength),O(n,"maxlength",e.maxlength),n.required=e.required,O(n,"aria-describedby",e.descriptionId),O(n,"placeholder",e.placeholder),q(n,"error",e.error),t=[N(n,"input",e.input_1_input_handler),N(n,"input",e.checkValidity),N(n,"invalid",E(e.checkValidity))]},m(t,r){_(t,n,r),P(n,e.value),e.input_1_binding(n)},p(e,t){e.value&&n.value!==t.value&&P(n,t.value),e.name&&O(n,"name",t.name),e.pattern&&O(n,"pattern",t.pattern),e.minlength&&O(n,"minlength",t.minlength),e.maxlength&&O(n,"maxlength",t.maxlength),e.required&&(n.required=t.required),e.descriptionId&&O(n,"aria-describedby",t.descriptionId),e.placeholder&&O(n,"placeholder",t.placeholder),e.error&&q(n,"error",t.error)},d(r){r&&D(n),e.input_1_binding(null),a(t)}}}function zn(e){var n,t;return{c(){O(n=I("input"),"name",e.name),O(n,"class","input svelte-193htxd"),O(n,"type","password"),O(n,"pattern",e.pattern),O(n,"minlength",e.minlength),O(n,"maxlength",e.maxlength),n.required=e.required,O(n,"aria-describedby",e.descriptionId),O(n,"placeholder",e.placeholder),q(n,"error",e.error),t=[N(n,"input",e.input_1_input_handler_1),N(n,"input",e.checkValidity),N(n,"invalid",E(e.checkValidity))]},m(t,r){_(t,n,r),P(n,e.value),e.input_1_binding_1(n)},p(e,t){e.value&&n.value!==t.value&&P(n,t.value),e.name&&O(n,"name",t.name),e.pattern&&O(n,"pattern",t.pattern),e.minlength&&O(n,"minlength",t.minlength),e.maxlength&&O(n,"maxlength",t.maxlength),e.required&&(n.required=t.required),e.descriptionId&&O(n,"aria-describedby",t.descriptionId),e.placeholder&&O(n,"placeholder",t.placeholder),e.error&&q(n,"error",t.error)},d(r){r&&D(n),e.input_1_binding_1(null),a(t)}}}function jn(e){var n,t;return{c(){O(n=I("input"),"name",e.name),O(n,"class","input svelte-193htxd"),O(n,"type","date"),O(n,"pattern","^[0-9]4-(1[0-2]|0[1-9])-([1-3][0-9]|0[1-9])$"),n.required=e.required,O(n,"max",e.max),O(n,"aria-describedby",e.descriptionId),q(n,"error",e.error),t=[N(n,"input",e.input_1_input_handler_2),N(n,"input",e.checkValidity),N(n,"invalid",E(e.checkValidity))]},m(t,r){_(t,n,r),P(n,e.value),e.input_1_binding_2(n)},p(e,t){e.value&&P(n,t.value),e.name&&O(n,"name",t.name),e.required&&(n.required=t.required),e.max&&O(n,"max",t.max),e.descriptionId&&O(n,"aria-describedby",t.descriptionId),e.error&&q(n,"error",t.error)},d(r){r&&D(n),e.input_1_binding_2(null),a(t)}}}function qn(e){var n,t;return{c(){O(n=I("input"),"name",e.name),O(n,"class","input svelte-193htxd"),O(n,"type","datetime-local"),n.required=e.required,O(n,"max",e.max),O(n,"aria-describedby",e.descriptionId),q(n,"error",e.error),t=[N(n,"input",e.input_1_input_handler_3),N(n,"input",e.checkValidity),N(n,"invalid",E(e.checkValidity))]},m(t,r){_(t,n,r),P(n,e.value),e.input_1_binding_3(n)},p(e,t){e.value&&P(n,t.value),e.name&&O(n,"name",t.name),e.required&&(n.required=t.required),e.max&&O(n,"max",t.max),e.descriptionId&&O(n,"aria-describedby",t.descriptionId),e.error&&q(n,"error",t.error)},d(r){r&&D(n),e.input_1_binding_3(null),a(t)}}}function Hn(e){var n,t,r;return{c(){n=I("span"),O(t=I("i"),"class",r="fas fa-"+e.leftIcon),O(n,"class","icon is-small is-left")},m(e,r){_(e,n,r),k(n,t)},p(e,n){e.leftIcon&&r!==(r="fas fa-"+n.leftIcon)&&O(t,"class",r)},d(e){e&&D(n)}}}function Fn(e){var n,t,r;return{c(){n=I("span"),O(t=I("i"),"class",r="fas fa-"+e.rightIcon),O(n,"class","icon is-small is-right")},m(e,r){_(e,n,r),k(n,t)},p(e,n){e.rightIcon&&r!==(r="fas fa-"+n.rightIcon)&&O(t,"class",r)},d(e){e&&D(n)}}}function Wn(e){var n,t;return{c(){n=I("p"),t=M(e.error),O(n,"class","help is-danger")},m(e,r){_(e,n,r),k(n,t)},p(e,n){e.error&&L(t,n.error)},d(e){e&&D(n)}}}function Yn(n){var t,r,s,a,i,o,l,c,d,u,p,m,f,g=n.description&&Pn(n),h="text"===n.type&&Rn(n),$="password"===n.type&&zn(n),v="date"===n.type&&jn(n),b="datetime-local"===n.type&&qn(n),w=n.leftIcon&&Hn(n),y=n.rightIcon&&Fn(n),x=n.error&&Wn(n);return{c(){t=I("div"),r=I("label"),s=M(n.label),a=T(),g&&g.c(),i=T(),o=I("div"),l=I("div"),h&&h.c(),c=T(),$&&$.c(),d=T(),v&&v.c(),u=T(),b&&b.c(),p=T(),w&&w.c(),m=T(),y&&y.c(),f=T(),x&&x.c(),O(r,"class","label"),O(l,"class","control"),q(l,"has-icons-left",n.leftIcon),q(l,"has-icons-right",n.rightIcon),O(o,"class","field-body"),O(t,"class","field")},m(e,n){_(e,t,n),k(t,r),k(r,s),k(r,a),g&&g.m(r,null),k(t,i),k(t,o),k(o,l),h&&h.m(l,null),k(l,c),$&&$.m(l,null),k(l,d),v&&v.m(l,null),k(l,u),b&&b.m(l,null),k(l,p),w&&w.m(l,null),k(l,m),y&&y.m(l,null),k(l,f),x&&x.m(l,null)},p(e,n){e.label&&L(s,n.label),n.description?g?g.p(e,n):((g=Pn(n)).c(),g.m(r,null)):g&&(g.d(1),g=null),"text"===n.type?h?h.p(e,n):((h=Rn(n)).c(),h.m(l,c)):h&&(h.d(1),h=null),"password"===n.type?$?$.p(e,n):(($=zn(n)).c(),$.m(l,d)):$&&($.d(1),$=null),"date"===n.type?v?v.p(e,n):((v=jn(n)).c(),v.m(l,u)):v&&(v.d(1),v=null),"datetime-local"===n.type?b?b.p(e,n):((b=qn(n)).c(),b.m(l,p)):b&&(b.d(1),b=null),n.leftIcon?w?w.p(e,n):((w=Hn(n)).c(),w.m(l,m)):w&&(w.d(1),w=null),n.rightIcon?y?y.p(e,n):((y=Fn(n)).c(),y.m(l,f)):y&&(y.d(1),y=null),n.error?x?x.p(e,n):((x=Wn(n)).c(),x.m(l,null)):x&&(x.d(1),x=null),e.leftIcon&&q(l,"has-icons-left",n.leftIcon),e.rightIcon&&q(l,"has-icons-right",n.rightIcon)},i:e,o:e,d(e){e&&D(t),g&&g.d(),h&&h.d(),$&&$.d(),v&&v.d(),b&&b.d(),w&&w.d(),y&&y.d(),x&&x.d()}}}function Un(e,n,t){let r,s,a,{value:i,showDescription:o=!1,label:l=""}=n,c=!1,{required:d=!1,pattern:u="^.+$",minlength:p=1,maxlength:m=null,type:f="text",description:g="",width:h="40rem",min:$=null,max:v=null,rightIcon:b=null,leftIcon:w=null,placeholder:y=""}=n;return e.$set=e=>{"value"in e&&t("value",i=e.value),"showDescription"in e&&t("showDescription",o=e.showDescription),"label"in e&&t("label",l=e.label),"required"in e&&t("required",d=e.required),"pattern"in e&&t("pattern",u=e.pattern),"minlength"in e&&t("minlength",p=e.minlength),"maxlength"in e&&t("maxlength",m=e.maxlength),"type"in e&&t("type",f=e.type),"description"in e&&t("description",g=e.description),"width"in e&&t("width",h=e.width),"min"in e&&t("min",$=e.min),"max"in e&&t("max",v=e.max),"rightIcon"in e&&t("rightIcon",b=e.rightIcon),"leftIcon"in e&&t("leftIcon",w=e.leftIcon),"placeholder"in e&&t("placeholder",y=e.placeholder)},e.$$.update=(e={label:1,name:1})=>{e.label&&t("name",s=l.replace(/\W+(.)/g,(e,n)=>n.toUpperCase())),e.name&&t("descriptionId",a=`description${s}`)},{input:r,value:i,showDescription:o,label:l,error:c,required:d,pattern:u,minlength:p,maxlength:m,type:f,description:g,width:h,min:$,max:v,rightIcon:b,leftIcon:w,placeholder:y,checkValidity:function(){t("error",c=!r.validity.valid&&r.validationMessage?r.validationMessage:"")},name:s,descriptionId:a,input_1_input_handler:function(){i=this.value,t("value",i)},input_1_binding:function(e){ne[e?"unshift":"push"](()=>{t("input",r=e)})},input_1_input_handler_1:function(){i=this.value,t("value",i)},input_1_binding_1:function(e){ne[e?"unshift":"push"](()=>{t("input",r=e)})},input_1_input_handler_2:function(){i=this.value,t("value",i)},input_1_binding_2:function(e){ne[e?"unshift":"push"](()=>{t("input",r=e)})},input_1_input_handler_3:function(){i=this.value,t("value",i)},input_1_binding_3:function(e){ne[e?"unshift":"push"](()=>{t("input",r=e)})}}}class Bn extends Oe{constructor(e){super(),Ee(this,e,Un,Yn,o,["value","showDescription","label","required","pattern","minlength","maxlength","type","description","width","min","max","rightIcon","leftIcon","placeholder"])}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Gn(e,n){return e(n={exports:{}},n.exports),n.exports}var Zn=Gn(function(e,n){e.exports=function(){var e=function(){return(e=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var s in n=arguments[t])Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s]);return e}).apply(this,arguments)},n=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],t={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:function(e){return"undefined"!=typeof console&&console.warn(e)},getWeek:function(e){var n=new Date(e.getTime());n.setHours(0,0,0,0),n.setDate(n.getDate()+3-(n.getDay()+6)%7);var t=new Date(n.getFullYear(),0,4);return 1+Math.round(((n.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},r={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var n=e%100;if(n>3&&n<21)return"th";switch(n%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},s=function(e){return("0"+e).slice(-2)},a=function(e){return!0===e?1:0};function i(e,n,t){var r;return void 0===t&&(t=!1),function(){var s=this,a=arguments;null!==r&&clearTimeout(r),r=window.setTimeout(function(){r=null,t||e.apply(s,a)},n),t&&!r&&e.apply(s,a)}}var o=function(e){return e instanceof Array?e:[e]};function l(e,n,t){if(!0===t)return e.classList.add(n);e.classList.remove(n)}function c(e,n,t){var r=window.document.createElement(e);return n=n||"",t=t||"",r.className=n,void 0!==t&&(r.textContent=t),r}function d(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function u(e,n){var t=c("div","numInputWrapper"),r=c("input","numInput "+e),s=c("span","arrowUp"),a=c("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?r.type="number":(r.type="text",r.pattern="\\d*"),void 0!==n)for(var i in n)r.setAttribute(i,n[i]);return t.appendChild(r),t.appendChild(s),t.appendChild(a),t}var p=function(){},m=function(e,n,t){return t.months[n?"shorthand":"longhand"][e]},f={D:p,F:function(e,n,t){e.setMonth(t.months.longhand.indexOf(n))},G:function(e,n){e.setHours(parseFloat(n))},H:function(e,n){e.setHours(parseFloat(n))},J:function(e,n){e.setDate(parseFloat(n))},K:function(e,n,t){e.setHours(e.getHours()%12+12*a(new RegExp(t.amPM[1],"i").test(n)))},M:function(e,n,t){e.setMonth(t.months.shorthand.indexOf(n))},S:function(e,n){e.setSeconds(parseFloat(n))},U:function(e,n){return new Date(1e3*parseFloat(n))},W:function(e,n,t){var r=parseInt(n),s=new Date(e.getFullYear(),0,2+7*(r-1),0,0,0,0);return s.setDate(s.getDate()-s.getDay()+t.firstDayOfWeek),s},Y:function(e,n){e.setFullYear(parseFloat(n))},Z:function(e,n){return new Date(n)},d:function(e,n){e.setDate(parseFloat(n))},h:function(e,n){e.setHours(parseFloat(n))},i:function(e,n){e.setMinutes(parseFloat(n))},j:function(e,n){e.setDate(parseFloat(n))},l:p,m:function(e,n){e.setMonth(parseFloat(n)-1)},n:function(e,n){e.setMonth(parseFloat(n)-1)},s:function(e,n){e.setSeconds(parseFloat(n))},u:function(e,n){return new Date(parseFloat(n))},w:p,y:function(e,n){e.setFullYear(2e3+parseFloat(n))}},g={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},h={Z:function(e){return e.toISOString()},D:function(e,n,t){return n.weekdays.shorthand[h.w(e,n,t)]},F:function(e,n,t){return m(h.n(e,n,t)-1,!1,n)},G:function(e,n,t){return s(h.h(e,n,t))},H:function(e){return s(e.getHours())},J:function(e,n){return void 0!==n.ordinal?e.getDate()+n.ordinal(e.getDate()):e.getDate()},K:function(e,n){return n.amPM[a(e.getHours()>11)]},M:function(e,n){return m(e.getMonth(),!0,n)},S:function(e){return s(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,n,t){return t.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(e){return s(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return s(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,n){return n.weekdays.longhand[e.getDay()]},m:function(e){return s(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},$=function(e){var n=e.config,s=void 0===n?t:n,a=e.l10n,i=void 0===a?r:a;return function(e,n,t){var r=t||i;return void 0!==s.formatDate?s.formatDate(e,n,r):n.split("").map(function(n,t,a){return h[n]&&"\\"!==a[t-1]?h[n](e,r,s):"\\"!==n?n:""}).join("")}},v=function(e){var n=e.config,s=void 0===n?t:n,a=e.l10n,i=void 0===a?r:a;return function(e,n,r,a){if(0===e||e){var o,l=a||i,c=e;if(e instanceof Date)o=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)o=new Date(e);else if("string"==typeof e){var d=n||(s||t).dateFormat,u=String(e).trim();if("today"===u)o=new Date,r=!0;else if(/Z$/.test(u)||/GMT$/.test(u))o=new Date(e);else if(s&&s.parseDate)o=s.parseDate(e,d);else{o=s&&s.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var p=void 0,m=[],h=0,$=0,v="";h<d.length;h++){var b=d[h],w="\\"===b,y="\\"===d[h-1]||w;if(g[b]&&!y){v+=g[b];var x=new RegExp(v).exec(e);x&&(p=!0)&&m["Y"!==b?"push":"unshift"]({fn:f[b],val:x[++$]})}else w||(v+=".");m.forEach(function(e){var n=e.fn,t=e.val;return o=n(o,t,l)||o})}o=p?o:void 0}}if(o instanceof Date&&!isNaN(o.getTime()))return!0===r&&o.setHours(0,0,0,0),o;s.errorHandler(new Error("Invalid date provided: "+c))}}};function b(e,n,t){return void 0===t&&(t=!0),!1!==t?new Date(e.getTime()).setHours(0,0,0,0)-new Date(n.getTime()).setHours(0,0,0,0):e.getTime()-n.getTime()}var w=function(e,n,t){return e>Math.min(n,t)&&e<Math.max(n,t)},y={DAY:864e5};"function"!=typeof Object.assign&&(Object.assign=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var r=function(n){n&&Object.keys(n).forEach(function(t){return e[t]=n[t]})},s=0,a=n;s<a.length;s++){var i=a[s];r(i)}return e});var x=300;function k(p,f){var h={config:e({},t,D.defaultConfig),l10n:r};function k(e){return e.bind(h)}function _(){var e=h.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame(function(){if(void 0!==h.calendarContainer&&(h.calendarContainer.style.visibility="hidden",h.calendarContainer.style.display="block"),void 0!==h.daysContainer){var n=(h.days.offsetWidth+1)*e.showMonths;h.daysContainer.style.width=n+"px",h.calendarContainer.style.width=n+(void 0!==h.weekWrapper?h.weekWrapper.offsetWidth:0)+"px",h.calendarContainer.style.removeProperty("visibility"),h.calendarContainer.style.removeProperty("display")}})}function S(e){0===h.selectedDates.length&&se(),void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();var n="keydown"===e.type,t=e.target;void 0!==h.amPM&&e.target===h.amPM&&(h.amPM.textContent=h.l10n.amPM[a(h.amPM.textContent===h.l10n.amPM[0])]);var r=parseFloat(t.getAttribute("min")),i=parseFloat(t.getAttribute("max")),o=parseFloat(t.getAttribute("step")),l=parseInt(t.value,10),c=e.delta||(n?38===e.which?1:-1:0),d=l+o*c;if(void 0!==t.value&&2===t.value.length){var u=t===h.hourElement,p=t===h.minuteElement;d<r?(d=i+d+a(!u)+(a(u)&&a(!h.amPM)),p&&R(void 0,-1,h.hourElement)):d>i&&(d=t===h.hourElement?d-i-a(!h.amPM):r,p&&R(void 0,1,h.hourElement)),h.amPM&&u&&(1===o?d+l===23:Math.abs(d-l)>o)&&(h.amPM.textContent=h.l10n.amPM[a(h.amPM.textContent===h.l10n.amPM[0])]),t.value=s(d)}}(e);var n=h._input.value;I(),be(),h._input.value!==n&&h._debouncedChange()}function I(){if(void 0!==h.hourElement&&void 0!==h.minuteElement){var e,n,t=(parseInt(h.hourElement.value.slice(-2),10)||0)%24,r=(parseInt(h.minuteElement.value,10)||0)%60,s=void 0!==h.secondElement?(parseInt(h.secondElement.value,10)||0)%60:0;void 0!==h.amPM&&(e=t,n=h.amPM.textContent,t=e%12+12*a(n===h.l10n.amPM[1]));var i=void 0!==h.config.minTime||h.config.minDate&&h.minDateHasTime&&h.latestSelectedDateObj&&0===b(h.latestSelectedDateObj,h.config.minDate,!0);if(void 0!==h.config.maxTime||h.config.maxDate&&h.maxDateHasTime&&h.latestSelectedDateObj&&0===b(h.latestSelectedDateObj,h.config.maxDate,!0)){var o=void 0!==h.config.maxTime?h.config.maxTime:h.config.maxDate;(t=Math.min(t,o.getHours()))===o.getHours()&&(r=Math.min(r,o.getMinutes())),r===o.getMinutes()&&(s=Math.min(s,o.getSeconds()))}if(i){var l=void 0!==h.config.minTime?h.config.minTime:h.config.minDate;(t=Math.max(t,l.getHours()))===l.getHours()&&(r=Math.max(r,l.getMinutes())),r===l.getMinutes()&&(s=Math.max(s,l.getSeconds()))}T(t,r,s)}}function C(e){var n=e||h.latestSelectedDateObj;n&&T(n.getHours(),n.getMinutes(),n.getSeconds())}function M(){var e=h.config.defaultHour,n=h.config.defaultMinute,t=h.config.defaultSeconds;if(void 0!==h.config.minDate){var r=h.config.minDate.getHours(),s=h.config.minDate.getMinutes();(e=Math.max(e,r))===r&&(n=Math.max(s,n)),e===r&&n===s&&(t=h.config.minDate.getSeconds())}if(void 0!==h.config.maxDate){var a=h.config.maxDate.getHours(),i=h.config.maxDate.getMinutes();(e=Math.min(e,a))===a&&(n=Math.min(i,n)),e===a&&n===i&&(t=h.config.maxDate.getSeconds())}T(e,n,t)}function T(e,n,t){void 0!==h.latestSelectedDateObj&&h.latestSelectedDateObj.setHours(e%24,n,t||0,0),h.hourElement&&h.minuteElement&&!h.isMobile&&(h.hourElement.value=s(h.config.time_24hr?e:(12+e)%12+12*a(e%12==0)),h.minuteElement.value=s(n),void 0!==h.amPM&&(h.amPM.textContent=h.l10n.amPM[a(e>=12)]),void 0!==h.secondElement&&(h.secondElement.value=s(t)))}function A(e){var n=parseInt(e.target.value)+(e.delta||0);(n/1e3>1||"Enter"===e.key&&!/[^\d]/.test(n.toString()))&&Q(n)}function N(e,n,t,r){return n instanceof Array?n.forEach(function(n){return N(e,n,t,r)}):e instanceof Array?e.forEach(function(e){return N(e,n,t,r)}):(e.addEventListener(n,t,r),void h._handlers.push({element:e,event:n,handler:t,options:r}))}function E(e){return function(n){1===n.which&&e(n)}}function O(){fe("onChange")}function L(e,n){var t=void 0!==e?h.parseDate(e):h.latestSelectedDateObj||(h.config.minDate&&h.config.minDate>h.now?h.config.minDate:h.config.maxDate&&h.config.maxDate<h.now?h.config.maxDate:h.now),r=h.currentYear,s=h.currentMonth;try{void 0!==t&&(h.currentYear=t.getFullYear(),h.currentMonth=t.getMonth())}catch(e){e.message="Invalid date supplied: "+t,h.config.errorHandler(e)}n&&h.currentYear!==r&&(fe("onYearChange"),Y()),!n||h.currentYear===r&&h.currentMonth===s||fe("onMonthChange"),h.redraw()}function P(e){~e.target.className.indexOf("arrow")&&R(e,e.target.classList.contains("arrowUp")?1:-1)}function R(e,n,t){var r=e&&e.target,s=t||r&&r.parentNode&&r.parentNode.firstChild,a=ge("increment");a.delta=n,s&&s.dispatchEvent(a)}function z(e,n,t,r){var s=K(n,!0),a=c("span","flatpickr-day "+e,n.getDate().toString());return a.dateObj=n,a.$i=r,a.setAttribute("aria-label",h.formatDate(n,h.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===b(n,h.now)&&(h.todayDateElem=a,a.classList.add("today"),a.setAttribute("aria-current","date")),s?(a.tabIndex=-1,he(n)&&(a.classList.add("selected"),h.selectedDateElem=a,"range"===h.config.mode&&(l(a,"startRange",h.selectedDates[0]&&0===b(n,h.selectedDates[0],!0)),l(a,"endRange",h.selectedDates[1]&&0===b(n,h.selectedDates[1],!0)),"nextMonthDay"===e&&a.classList.add("inRange")))):a.classList.add("flatpickr-disabled"),"range"===h.config.mode&&function(e){return!("range"!==h.config.mode||h.selectedDates.length<2)&&b(e,h.selectedDates[0])>=0&&b(e,h.selectedDates[1])<=0}(n)&&!he(n)&&a.classList.add("inRange"),h.weekNumbers&&1===h.config.showMonths&&"prevMonthDay"!==e&&t%7==1&&h.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+h.config.getWeek(n)+"</span>"),fe("onDayCreate",a),a}function j(e){e.focus(),"range"===h.config.mode&&te(e)}function q(e){for(var n=e>0?0:h.config.showMonths-1,t=e>0?h.config.showMonths:-1,r=n;r!=t;r+=e)for(var s=h.daysContainer.children[r],a=e>0?0:s.children.length-1,i=e>0?s.children.length:-1,o=a;o!=i;o+=e){var l=s.children[o];if(-1===l.className.indexOf("hidden")&&K(l.dateObj))return l}}function H(e,n){var t=ee(document.activeElement||document.body),r=void 0!==e?e:t?document.activeElement:void 0!==h.selectedDateElem&&ee(h.selectedDateElem)?h.selectedDateElem:void 0!==h.todayDateElem&&ee(h.todayDateElem)?h.todayDateElem:q(n>0?1:-1);return void 0===r?h._input.focus():t?void function(e,n){for(var t=-1===e.className.indexOf("Month")?e.dateObj.getMonth():h.currentMonth,r=n>0?h.config.showMonths:-1,s=n>0?1:-1,a=t-h.currentMonth;a!=r;a+=s)for(var i=h.daysContainer.children[a],o=t-h.currentMonth===a?e.$i+n:n<0?i.children.length-1:0,l=i.children.length,c=o;c>=0&&c<l&&c!=(n>0?l:-1);c+=s){var d=i.children[c];if(-1===d.className.indexOf("hidden")&&K(d.dateObj)&&Math.abs(e.$i-c)>=Math.abs(n))return j(d)}h.changeMonth(s),H(q(s),0)}(r,n):j(r)}function F(e,n){for(var t=(new Date(e,n,1).getDay()-h.l10n.firstDayOfWeek+7)%7,r=h.utils.getDaysInMonth((n-1+12)%12),s=h.utils.getDaysInMonth(n),a=window.document.createDocumentFragment(),i=h.config.showMonths>1,o=i?"prevMonthDay hidden":"prevMonthDay",l=i?"nextMonthDay hidden":"nextMonthDay",d=r+1-t,u=0;d<=r;d++,u++)a.appendChild(z(o,new Date(e,n-1,d),d,u));for(d=1;d<=s;d++,u++)a.appendChild(z("",new Date(e,n,d),d,u));for(var p=s+1;p<=42-t&&(1===h.config.showMonths||u%7!=0);p++,u++)a.appendChild(z(l,new Date(e,n+1,p%s),p,u));var m=c("div","dayContainer");return m.appendChild(a),m}function W(){if(void 0!==h.daysContainer){d(h.daysContainer),h.weekNumbers&&d(h.weekNumbers);for(var e=document.createDocumentFragment(),n=0;n<h.config.showMonths;n++){var t=new Date(h.currentYear,h.currentMonth,1);t.setMonth(h.currentMonth+n),e.appendChild(F(t.getFullYear(),t.getMonth()))}h.daysContainer.appendChild(e),h.days=h.daysContainer.firstChild,"range"===h.config.mode&&1===h.selectedDates.length&&te()}}function Y(){if(!(h.config.showMonths>1||"dropdown"!==h.config.monthSelectorType)){var e=function(e){return!(void 0!==h.config.minDate&&h.currentYear===h.config.minDate.getFullYear()&&e<h.config.minDate.getMonth()||void 0!==h.config.maxDate&&h.currentYear===h.config.maxDate.getFullYear()&&e>h.config.maxDate.getMonth())};h.monthsDropdownContainer.tabIndex=-1,h.monthsDropdownContainer.innerHTML="";for(var n=0;n<12;n++)if(e(n)){var t=c("option","flatpickr-monthDropdown-month");t.value=new Date(h.currentYear,n).getMonth().toString(),t.textContent=m(n,h.config.shorthandCurrentMonth,h.l10n),t.tabIndex=-1,h.currentMonth===n&&(t.selected=!0),h.monthsDropdownContainer.appendChild(t)}}}function U(){var e,n=c("div","flatpickr-month"),t=window.document.createDocumentFragment();h.config.showMonths>1||"static"===h.config.monthSelectorType?e=c("span","cur-month"):(h.monthsDropdownContainer=c("select","flatpickr-monthDropdown-months"),N(h.monthsDropdownContainer,"change",function(e){var n=e.target,t=parseInt(n.value,10);h.changeMonth(t-h.currentMonth),fe("onMonthChange")}),Y(),e=h.monthsDropdownContainer);var r=u("cur-year",{tabindex:"-1"}),s=r.getElementsByTagName("input")[0];s.setAttribute("aria-label",h.l10n.yearAriaLabel),h.config.minDate&&s.setAttribute("min",h.config.minDate.getFullYear().toString()),h.config.maxDate&&(s.setAttribute("max",h.config.maxDate.getFullYear().toString()),s.disabled=!!h.config.minDate&&h.config.minDate.getFullYear()===h.config.maxDate.getFullYear());var a=c("div","flatpickr-current-month");return a.appendChild(e),a.appendChild(r),t.appendChild(a),n.appendChild(t),{container:n,yearElement:s,monthElement:e}}function B(){d(h.monthNav),h.monthNav.appendChild(h.prevMonthNav),h.config.showMonths&&(h.yearElements=[],h.monthElements=[]);for(var e=h.config.showMonths;e--;){var n=U();h.yearElements.push(n.yearElement),h.monthElements.push(n.monthElement),h.monthNav.appendChild(n.container)}h.monthNav.appendChild(h.nextMonthNav)}function G(){h.weekdayContainer?d(h.weekdayContainer):h.weekdayContainer=c("div","flatpickr-weekdays");for(var e=h.config.showMonths;e--;){var n=c("div","flatpickr-weekdaycontainer");h.weekdayContainer.appendChild(n)}return Z(),h.weekdayContainer}function Z(){var e=h.l10n.firstDayOfWeek,n=h.l10n.weekdays.shorthand.slice();e>0&&e<n.length&&(n=n.splice(e,n.length).concat(n.splice(0,e)));for(var t=h.config.showMonths;t--;)h.weekdayContainer.children[t].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+n.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}function V(e,n){void 0===n&&(n=!0);var t=n?e:e-h.currentMonth;t<0&&!0===h._hidePrevMonthArrow||t>0&&!0===h._hideNextMonthArrow||(h.currentMonth+=t,(h.currentMonth<0||h.currentMonth>11)&&(h.currentYear+=h.currentMonth>11?1:-1,h.currentMonth=(h.currentMonth+12)%12,fe("onYearChange"),Y()),W(),fe("onMonthChange"),$e())}function J(e){return!(!h.config.appendTo||!h.config.appendTo.contains(e))||h.calendarContainer.contains(e)}function X(e){if(h.isOpen&&!h.config.inline){var n="function"==typeof(i=e).composedPath?i.composedPath()[0]:i.target,t=J(n),r=n===h.input||n===h.altInput||h.element.contains(n)||e.path&&e.path.indexOf&&(~e.path.indexOf(h.input)||~e.path.indexOf(h.altInput)),s="blur"===e.type?r&&e.relatedTarget&&!J(e.relatedTarget):!r&&!t&&!J(e.relatedTarget),a=!h.config.ignoredFocusElements.some(function(e){return e.contains(n)});s&&a&&(h.close(),"range"===h.config.mode&&1===h.selectedDates.length&&(h.clear(!1),h.redraw()))}var i}function Q(e){if(!(!e||h.config.minDate&&e<h.config.minDate.getFullYear()||h.config.maxDate&&e>h.config.maxDate.getFullYear())){var n=e,t=h.currentYear!==n;h.currentYear=n||h.currentYear,h.config.maxDate&&h.currentYear===h.config.maxDate.getFullYear()?h.currentMonth=Math.min(h.config.maxDate.getMonth(),h.currentMonth):h.config.minDate&&h.currentYear===h.config.minDate.getFullYear()&&(h.currentMonth=Math.max(h.config.minDate.getMonth(),h.currentMonth)),t&&(h.redraw(),fe("onYearChange"),Y())}}function K(e,n){void 0===n&&(n=!0);var t=h.parseDate(e,void 0,n);if(h.config.minDate&&t&&b(t,h.config.minDate,void 0!==n?n:!h.minDateHasTime)<0||h.config.maxDate&&t&&b(t,h.config.maxDate,void 0!==n?n:!h.maxDateHasTime)>0)return!1;if(0===h.config.enable.length&&0===h.config.disable.length)return!0;if(void 0===t)return!1;for(var r=h.config.enable.length>0,s=r?h.config.enable:h.config.disable,a=0,i=void 0;a<s.length;a++){if("function"==typeof(i=s[a])&&i(t))return r;if(i instanceof Date&&void 0!==t&&i.getTime()===t.getTime())return r;if("string"==typeof i&&void 0!==t){var o=h.parseDate(i,void 0,!0);return o&&o.getTime()===t.getTime()?r:!r}if("object"==typeof i&&void 0!==t&&i.from&&i.to&&t.getTime()>=i.from.getTime()&&t.getTime()<=i.to.getTime())return r}return!r}function ee(e){return void 0!==h.daysContainer&&-1===e.className.indexOf("hidden")&&h.daysContainer.contains(e)}function ne(e){var n=e.target===h._input,t=h.config.allowInput,r=h.isOpen&&(!t||!n),s=h.config.inline&&n&&!t;if(13===e.keyCode&&n){if(t)return h.setDate(h._input.value,!0,e.target===h.altInput?h.config.altFormat:h.config.dateFormat),e.target.blur();h.open()}else if(J(e.target)||r||s){var a=!!h.timeContainer&&h.timeContainer.contains(e.target);switch(e.keyCode){case 13:a?(e.preventDefault(),S(),ce()):de(e);break;case 27:e.preventDefault(),ce();break;case 8:case 46:n&&!h.config.allowInput&&(e.preventDefault(),h.clear());break;case 37:case 39:if(a||n)h.hourElement&&h.hourElement.focus();else if(e.preventDefault(),void 0!==h.daysContainer&&(!1===t||document.activeElement&&ee(document.activeElement))){var i=39===e.keyCode?1:-1;e.ctrlKey?(e.stopPropagation(),V(i),H(q(1),0)):H(void 0,i)}break;case 38:case 40:e.preventDefault();var o=40===e.keyCode?1:-1;h.daysContainer&&void 0!==e.target.$i||e.target===h.input?e.ctrlKey?(e.stopPropagation(),Q(h.currentYear-o),H(q(1),0)):a||H(void 0,7*o):e.target===h.currentYearElement?Q(h.currentYear-o):h.config.enableTime&&(!a&&h.hourElement&&h.hourElement.focus(),S(e),h._debouncedChange());break;case 9:if(a){var l=[h.hourElement,h.minuteElement,h.secondElement,h.amPM].concat(h.pluginElements).filter(function(e){return e}),c=l.indexOf(e.target);if(-1!==c){var d=l[c+(e.shiftKey?-1:1)];e.preventDefault(),(d||h._input).focus()}}else!h.config.noCalendar&&h.daysContainer&&h.daysContainer.contains(e.target)&&e.shiftKey&&(e.preventDefault(),h._input.focus())}}if(void 0!==h.amPM&&e.target===h.amPM)switch(e.key){case h.l10n.amPM[0].charAt(0):case h.l10n.amPM[0].charAt(0).toLowerCase():h.amPM.textContent=h.l10n.amPM[0],I(),be();break;case h.l10n.amPM[1].charAt(0):case h.l10n.amPM[1].charAt(0).toLowerCase():h.amPM.textContent=h.l10n.amPM[1],I(),be()}(n||J(e.target))&&fe("onKeyDown",e)}function te(e){if(1===h.selectedDates.length&&(!e||e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled"))){for(var n=e?e.dateObj.getTime():h.days.firstElementChild.dateObj.getTime(),t=h.parseDate(h.selectedDates[0],void 0,!0).getTime(),r=Math.min(n,h.selectedDates[0].getTime()),s=Math.max(n,h.selectedDates[0].getTime()),a=!1,i=0,o=0,l=r;l<s;l+=y.DAY)K(new Date(l),!0)||(a=a||l>r&&l<s,l<t&&(!i||l>i)?i=l:l>t&&(!o||l<o)&&(o=l));for(var c=0;c<h.config.showMonths;c++)for(var d=h.daysContainer.children[c],u=function(r,s){var l=d.children[r],c=l.dateObj.getTime(),u=i>0&&c<i||o>0&&c>o;return u?(l.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){l.classList.remove(e)}),"continue"):a&&!u?"continue":(["startRange","inRange","endRange","notAllowed"].forEach(function(e){l.classList.remove(e)}),void(void 0!==e&&(e.classList.add(n<=h.selectedDates[0].getTime()?"startRange":"endRange"),t<n&&c===t?l.classList.add("startRange"):t>n&&c===t&&l.classList.add("endRange"),c>=i&&(0===o||c<=o)&&w(c,t,n)&&l.classList.add("inRange"))))},p=0,m=d.children.length;p<m;p++)u(p)}}function re(){!h.isOpen||h.config.static||h.config.inline||oe()}function se(){h.setDate(void 0!==h.config.minDate?new Date(h.config.minDate.getTime()):new Date,!0),M(),be()}function ae(e){return function(n){var t=h.config["_"+e+"Date"]=h.parseDate(n,h.config.dateFormat),r=h.config["_"+("min"===e?"max":"min")+"Date"];void 0!==t&&(h["min"===e?"minDateHasTime":"maxDateHasTime"]=t.getHours()>0||t.getMinutes()>0||t.getSeconds()>0),h.selectedDates&&(h.selectedDates=h.selectedDates.filter(function(e){return K(e)}),h.selectedDates.length||"min"!==e||C(t),be()),h.daysContainer&&(le(),void 0!==t?h.currentYearElement[e]=t.getFullYear().toString():h.currentYearElement.removeAttribute(e),h.currentYearElement.disabled=!!r&&void 0!==t&&r.getFullYear()===t.getFullYear())}}function ie(){"object"!=typeof h.config.locale&&void 0===D.l10ns[h.config.locale]&&h.config.errorHandler(new Error("flatpickr: invalid locale "+h.config.locale)),h.l10n=e({},D.l10ns.default,"object"==typeof h.config.locale?h.config.locale:"default"!==h.config.locale?D.l10ns[h.config.locale]:void 0),g.K="("+h.l10n.amPM[0]+"|"+h.l10n.amPM[1]+"|"+h.l10n.amPM[0].toLowerCase()+"|"+h.l10n.amPM[1].toLowerCase()+")",void 0===e({},f,JSON.parse(JSON.stringify(p.dataset||{}))).time_24hr&&void 0===D.defaultConfig.time_24hr&&(h.config.time_24hr=h.l10n.time_24hr),h.formatDate=$(h),h.parseDate=v({config:h.config,l10n:h.l10n})}function oe(e){if(void 0!==h.calendarContainer){fe("onPreCalendarPosition");var n=e||h._positionElement,t=Array.prototype.reduce.call(h.calendarContainer.children,function(e,n){return e+n.offsetHeight},0),r=h.calendarContainer.offsetWidth,s=h.config.position.split(" "),a=s[0],i=s.length>1?s[1]:null,o=n.getBoundingClientRect(),c=window.innerHeight-o.bottom,d="above"===a||"below"!==a&&c<t&&o.top>t,u=window.pageYOffset+o.top+(d?-t-2:n.offsetHeight+2);if(l(h.calendarContainer,"arrowTop",!d),l(h.calendarContainer,"arrowBottom",d),!h.config.inline){var p=window.pageXOffset+o.left-(null!=i&&"center"===i?(r-o.width)/2:0),m=window.document.body.offsetWidth-o.right,f=p+r>window.document.body.offsetWidth,g=m+r>window.document.body.offsetWidth;if(l(h.calendarContainer,"rightMost",f),!h.config.static)if(h.calendarContainer.style.top=u+"px",f)if(g){var $=document.styleSheets[0];if(void 0===$)return;var v=window.document.body.offsetWidth,b=Math.max(0,v/2-r/2),w=$.cssRules.length,y="{left:"+o.left+"px;right:auto;}";l(h.calendarContainer,"rightMost",!1),l(h.calendarContainer,"centerMost",!0),$.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+y,w),h.calendarContainer.style.left=b+"px",h.calendarContainer.style.right="auto"}else h.calendarContainer.style.left="auto",h.calendarContainer.style.right=m+"px";else h.calendarContainer.style.left=p+"px",h.calendarContainer.style.right="auto"}}}function le(){h.config.noCalendar||h.isMobile||($e(),W())}function ce(){h._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(h.close,0):h.close()}function de(e){e.preventDefault(),e.stopPropagation();var n=function e(n,t){return t(n)?n:n.parentNode?e(n.parentNode,t):void 0}(e.target,function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled")&&!e.classList.contains("notAllowed")});if(void 0!==n){var t=n,r=h.latestSelectedDateObj=new Date(t.dateObj.getTime()),s=(r.getMonth()<h.currentMonth||r.getMonth()>h.currentMonth+h.config.showMonths-1)&&"range"!==h.config.mode;if(h.selectedDateElem=t,"single"===h.config.mode)h.selectedDates=[r];else if("multiple"===h.config.mode){var a=he(r);a?h.selectedDates.splice(parseInt(a),1):h.selectedDates.push(r)}else"range"===h.config.mode&&(2===h.selectedDates.length&&h.clear(!1,!1),h.latestSelectedDateObj=r,h.selectedDates.push(r),0!==b(r,h.selectedDates[0],!0)&&h.selectedDates.sort(function(e,n){return e.getTime()-n.getTime()}));if(I(),s){var i=h.currentYear!==r.getFullYear();h.currentYear=r.getFullYear(),h.currentMonth=r.getMonth(),i&&(fe("onYearChange"),Y()),fe("onMonthChange")}if($e(),W(),be(),h.config.enableTime&&setTimeout(function(){return h.showTimeInput=!0},50),s||"range"===h.config.mode||1!==h.config.showMonths?void 0!==h.selectedDateElem&&void 0===h.hourElement&&h.selectedDateElem&&h.selectedDateElem.focus():j(t),void 0!==h.hourElement&&void 0!==h.hourElement&&h.hourElement.focus(),h.config.closeOnSelect){var o="single"===h.config.mode&&!h.config.enableTime,l="range"===h.config.mode&&2===h.selectedDates.length&&!h.config.enableTime;(o||l)&&ce()}O()}}h.parseDate=v({config:h.config,l10n:h.l10n}),h._handlers=[],h.pluginElements=[],h.loadedPlugins=[],h._bind=N,h._setHoursFromDate=C,h._positionCalendar=oe,h.changeMonth=V,h.changeYear=Q,h.clear=function(e,n){void 0===e&&(e=!0),void 0===n&&(n=!0),h.input.value="",void 0!==h.altInput&&(h.altInput.value=""),void 0!==h.mobileInput&&(h.mobileInput.value=""),h.selectedDates=[],h.latestSelectedDateObj=void 0,!0===n&&(h.currentYear=h._initialDate.getFullYear(),h.currentMonth=h._initialDate.getMonth()),h.showTimeInput=!1,!0===h.config.enableTime&&M(),h.redraw(),e&&fe("onChange")},h.close=function(){h.isOpen=!1,h.isMobile||(void 0!==h.calendarContainer&&h.calendarContainer.classList.remove("open"),void 0!==h._input&&h._input.classList.remove("active")),fe("onClose")},h._createElement=c,h.destroy=function(){void 0!==h.config&&fe("onDestroy");for(var e=h._handlers.length;e--;){var n=h._handlers[e];n.element.removeEventListener(n.event,n.handler,n.options)}if(h._handlers=[],h.mobileInput)h.mobileInput.parentNode&&h.mobileInput.parentNode.removeChild(h.mobileInput),h.mobileInput=void 0;else if(h.calendarContainer&&h.calendarContainer.parentNode)if(h.config.static&&h.calendarContainer.parentNode){var t=h.calendarContainer.parentNode;if(t.lastChild&&t.removeChild(t.lastChild),t.parentNode){for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}else h.calendarContainer.parentNode.removeChild(h.calendarContainer);h.altInput&&(h.input.type="text",h.altInput.parentNode&&h.altInput.parentNode.removeChild(h.altInput),delete h.altInput),h.input&&(h.input.type=h.input._type,h.input.classList.remove("flatpickr-input"),h.input.removeAttribute("readonly"),h.input.value=""),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(e){try{delete h[e]}catch(e){}})},h.isEnabled=K,h.jumpToDate=L,h.open=function(e,n){if(void 0===n&&(n=h._positionElement),!0===h.isMobile)return e&&(e.preventDefault(),e.target&&e.target.blur()),void 0!==h.mobileInput&&(h.mobileInput.focus(),h.mobileInput.click()),void fe("onOpen");if(!h._input.disabled&&!h.config.inline){var t=h.isOpen;h.isOpen=!0,t||(h.calendarContainer.classList.add("open"),h._input.classList.add("active"),fe("onOpen"),oe(n)),!0===h.config.enableTime&&!0===h.config.noCalendar&&(0===h.selectedDates.length&&se(),!1!==h.config.allowInput||void 0!==e&&h.timeContainer.contains(e.relatedTarget)||setTimeout(function(){return h.hourElement.select()},50))}},h.redraw=le,h.set=function(e,t){if(null!==e&&"object"==typeof e)for(var r in Object.assign(h.config,e),e)void 0!==ue[r]&&ue[r].forEach(function(e){return e()});else h.config[e]=t,void 0!==ue[e]?ue[e].forEach(function(e){return e()}):n.indexOf(e)>-1&&(h.config[e]=o(t));h.redraw(),be(!1)},h.setDate=function(e,n,t){if(void 0===n&&(n=!1),void 0===t&&(t=h.config.dateFormat),0!==e&&!e||e instanceof Array&&0===e.length)return h.clear(n);pe(e,t),h.showTimeInput=h.selectedDates.length>0,h.latestSelectedDateObj=h.selectedDates[h.selectedDates.length-1],h.redraw(),L(),C(),0===h.selectedDates.length&&h.clear(!1),be(n),n&&fe("onChange")},h.toggle=function(e){if(!0===h.isOpen)return h.close();h.open(e)};var ue={locale:[ie,Z],showMonths:[B,_,G],minDate:[L],maxDate:[L]};function pe(e,n){var t=[];if(e instanceof Array)t=e.map(function(e){return h.parseDate(e,n)});else if(e instanceof Date||"number"==typeof e)t=[h.parseDate(e,n)];else if("string"==typeof e)switch(h.config.mode){case"single":case"time":t=[h.parseDate(e,n)];break;case"multiple":t=e.split(h.config.conjunction).map(function(e){return h.parseDate(e,n)});break;case"range":t=e.split(h.l10n.rangeSeparator).map(function(e){return h.parseDate(e,n)})}else h.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));h.selectedDates=t.filter(function(e){return e instanceof Date&&K(e,!1)}),"range"===h.config.mode&&h.selectedDates.sort(function(e,n){return e.getTime()-n.getTime()})}function me(e){return e.slice().map(function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?h.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:h.parseDate(e.from,void 0),to:h.parseDate(e.to,void 0)}:e}).filter(function(e){return e})}function fe(e,n){if(void 0!==h.config){var t=h.config[e];if(void 0!==t&&t.length>0)for(var r=0;t[r]&&r<t.length;r++)t[r](h.selectedDates,h.input.value,h,n);"onChange"===e&&(h.input.dispatchEvent(ge("change")),h.input.dispatchEvent(ge("input")))}}function ge(e){var n=document.createEvent("Event");return n.initEvent(e,!0,!0),n}function he(e){for(var n=0;n<h.selectedDates.length;n++)if(0===b(h.selectedDates[n],e))return""+n;return!1}function $e(){h.config.noCalendar||h.isMobile||!h.monthNav||(h.yearElements.forEach(function(e,n){var t=new Date(h.currentYear,h.currentMonth,1);t.setMonth(h.currentMonth+n),h.config.showMonths>1||"static"===h.config.monthSelectorType?h.monthElements[n].textContent=m(t.getMonth(),h.config.shorthandCurrentMonth,h.l10n)+" ":h.monthsDropdownContainer.value=t.getMonth().toString(),e.value=t.getFullYear().toString()}),h._hidePrevMonthArrow=void 0!==h.config.minDate&&(h.currentYear===h.config.minDate.getFullYear()?h.currentMonth<=h.config.minDate.getMonth():h.currentYear<h.config.minDate.getFullYear()),h._hideNextMonthArrow=void 0!==h.config.maxDate&&(h.currentYear===h.config.maxDate.getFullYear()?h.currentMonth+1>h.config.maxDate.getMonth():h.currentYear>h.config.maxDate.getFullYear()))}function ve(e){return h.selectedDates.map(function(n){return h.formatDate(n,e)}).filter(function(e,n,t){return"range"!==h.config.mode||h.config.enableTime||t.indexOf(e)===n}).join("range"!==h.config.mode?h.config.conjunction:h.l10n.rangeSeparator)}function be(e){void 0===e&&(e=!0),void 0!==h.mobileInput&&h.mobileFormatStr&&(h.mobileInput.value=void 0!==h.latestSelectedDateObj?h.formatDate(h.latestSelectedDateObj,h.mobileFormatStr):""),h.input.value=ve(h.config.dateFormat),void 0!==h.altInput&&(h.altInput.value=ve(h.config.altFormat)),!1!==e&&fe("onValueUpdate")}function we(e){var n=h.prevMonthNav.contains(e.target),t=h.nextMonthNav.contains(e.target);n||t?V(n?-1:1):h.yearElements.indexOf(e.target)>=0?e.target.select():e.target.classList.contains("arrowUp")?h.changeYear(h.currentYear+1):e.target.classList.contains("arrowDown")&&h.changeYear(h.currentYear-1)}return function(){h.element=h.input=p,h.isOpen=!1,function(){var r=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],s=e({},f,JSON.parse(JSON.stringify(p.dataset||{}))),a={};h.config.parseDate=s.parseDate,h.config.formatDate=s.formatDate,Object.defineProperty(h.config,"enable",{get:function(){return h.config._enable},set:function(e){h.config._enable=me(e)}}),Object.defineProperty(h.config,"disable",{get:function(){return h.config._disable},set:function(e){h.config._disable=me(e)}});var i="time"===s.mode;if(!s.dateFormat&&(s.enableTime||i)){var l=D.defaultConfig.dateFormat||t.dateFormat;a.dateFormat=s.noCalendar||i?"H:i"+(s.enableSeconds?":S":""):l+" H:i"+(s.enableSeconds?":S":"")}if(s.altInput&&(s.enableTime||i)&&!s.altFormat){var c=D.defaultConfig.altFormat||t.altFormat;a.altFormat=s.noCalendar||i?"h:i"+(s.enableSeconds?":S K":" K"):c+" h:i"+(s.enableSeconds?":S":"")+" K"}s.altInputClass||(h.config.altInputClass=h.input.className+" "+h.config.altInputClass),Object.defineProperty(h.config,"minDate",{get:function(){return h.config._minDate},set:ae("min")}),Object.defineProperty(h.config,"maxDate",{get:function(){return h.config._maxDate},set:ae("max")});var d=function(e){return function(n){h.config["min"===e?"_minTime":"_maxTime"]=h.parseDate(n,"H:i")}};Object.defineProperty(h.config,"minTime",{get:function(){return h.config._minTime},set:d("min")}),Object.defineProperty(h.config,"maxTime",{get:function(){return h.config._maxTime},set:d("max")}),"time"===s.mode&&(h.config.noCalendar=!0,h.config.enableTime=!0),Object.assign(h.config,a,s);for(var u=0;u<r.length;u++)h.config[r[u]]=!0===h.config[r[u]]||"true"===h.config[r[u]];for(n.filter(function(e){return void 0!==h.config[e]}).forEach(function(e){h.config[e]=o(h.config[e]||[]).map(k)}),h.isMobile=!h.config.disableMobile&&!h.config.inline&&"single"===h.config.mode&&!h.config.disable.length&&!h.config.enable.length&&!h.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),u=0;u<h.config.plugins.length;u++){var m=h.config.plugins[u](h)||{};for(var g in m)n.indexOf(g)>-1?h.config[g]=o(m[g]).map(k).concat(h.config[g]):void 0===s[g]&&(h.config[g]=m[g])}fe("onParseConfig")}(),ie(),h.input=h.config.wrap?p.querySelector("[data-input]"):p,h.input?(h.input._type=h.input.type,h.input.type="text",h.input.classList.add("flatpickr-input"),h._input=h.input,h.config.altInput&&(h.altInput=c(h.input.nodeName,h.config.altInputClass),h._input=h.altInput,h.altInput.placeholder=h.input.placeholder,h.altInput.disabled=h.input.disabled,h.altInput.required=h.input.required,h.altInput.tabIndex=h.input.tabIndex,h.altInput.type="text",h.input.setAttribute("type","hidden"),!h.config.static&&h.input.parentNode&&h.input.parentNode.insertBefore(h.altInput,h.input.nextSibling)),h.config.allowInput||h._input.setAttribute("readonly","readonly"),h._positionElement=h.config.positionElement||h._input):h.config.errorHandler(new Error("Invalid input element specified")),function(){h.selectedDates=[],h.now=h.parseDate(h.config.now)||new Date;var e=h.config.defaultDate||("INPUT"!==h.input.nodeName&&"TEXTAREA"!==h.input.nodeName||!h.input.placeholder||h.input.value!==h.input.placeholder?h.input.value:null);e&&pe(e,h.config.dateFormat),h._initialDate=h.selectedDates.length>0?h.selectedDates[0]:h.config.minDate&&h.config.minDate.getTime()>h.now.getTime()?h.config.minDate:h.config.maxDate&&h.config.maxDate.getTime()<h.now.getTime()?h.config.maxDate:h.now,h.currentYear=h._initialDate.getFullYear(),h.currentMonth=h._initialDate.getMonth(),h.selectedDates.length>0&&(h.latestSelectedDateObj=h.selectedDates[0]),void 0!==h.config.minTime&&(h.config.minTime=h.parseDate(h.config.minTime,"H:i")),void 0!==h.config.maxTime&&(h.config.maxTime=h.parseDate(h.config.maxTime,"H:i")),h.minDateHasTime=!!h.config.minDate&&(h.config.minDate.getHours()>0||h.config.minDate.getMinutes()>0||h.config.minDate.getSeconds()>0),h.maxDateHasTime=!!h.config.maxDate&&(h.config.maxDate.getHours()>0||h.config.maxDate.getMinutes()>0||h.config.maxDate.getSeconds()>0),Object.defineProperty(h,"showTimeInput",{get:function(){return h._showTimeInput},set:function(e){h._showTimeInput=e,h.calendarContainer&&l(h.calendarContainer,"showTimeInput",e),h.isOpen&&oe()}})}(),h.utils={getDaysInMonth:function(e,n){return void 0===e&&(e=h.currentMonth),void 0===n&&(n=h.currentYear),1===e&&(n%4==0&&n%100!=0||n%400==0)?29:h.l10n.daysInMonth[e]}},h.isMobile||function(){var e=window.document.createDocumentFragment();if(h.calendarContainer=c("div","flatpickr-calendar"),h.calendarContainer.tabIndex=-1,!h.config.noCalendar){if(e.appendChild((h.monthNav=c("div","flatpickr-months"),h.yearElements=[],h.monthElements=[],h.prevMonthNav=c("span","flatpickr-prev-month"),h.prevMonthNav.innerHTML=h.config.prevArrow,h.nextMonthNav=c("span","flatpickr-next-month"),h.nextMonthNav.innerHTML=h.config.nextArrow,B(),Object.defineProperty(h,"_hidePrevMonthArrow",{get:function(){return h.__hidePrevMonthArrow},set:function(e){h.__hidePrevMonthArrow!==e&&(l(h.prevMonthNav,"flatpickr-disabled",e),h.__hidePrevMonthArrow=e)}}),Object.defineProperty(h,"_hideNextMonthArrow",{get:function(){return h.__hideNextMonthArrow},set:function(e){h.__hideNextMonthArrow!==e&&(l(h.nextMonthNav,"flatpickr-disabled",e),h.__hideNextMonthArrow=e)}}),h.currentYearElement=h.yearElements[0],$e(),h.monthNav)),h.innerContainer=c("div","flatpickr-innerContainer"),h.config.weekNumbers){var n=function(){h.calendarContainer.classList.add("hasWeeks");var e=c("div","flatpickr-weekwrapper");e.appendChild(c("span","flatpickr-weekday",h.l10n.weekAbbreviation));var n=c("div","flatpickr-weeks");return e.appendChild(n),{weekWrapper:e,weekNumbers:n}}(),t=n.weekWrapper,r=n.weekNumbers;h.innerContainer.appendChild(t),h.weekNumbers=r,h.weekWrapper=t}h.rContainer=c("div","flatpickr-rContainer"),h.rContainer.appendChild(G()),h.daysContainer||(h.daysContainer=c("div","flatpickr-days"),h.daysContainer.tabIndex=-1),W(),h.rContainer.appendChild(h.daysContainer),h.innerContainer.appendChild(h.rContainer),e.appendChild(h.innerContainer)}h.config.enableTime&&e.appendChild(function(){h.calendarContainer.classList.add("hasTime"),h.config.noCalendar&&h.calendarContainer.classList.add("noCalendar"),h.timeContainer=c("div","flatpickr-time"),h.timeContainer.tabIndex=-1;var e=c("span","flatpickr-time-separator",":"),n=u("flatpickr-hour",{"aria-label":h.l10n.hourAriaLabel});h.hourElement=n.getElementsByTagName("input")[0];var t=u("flatpickr-minute",{"aria-label":h.l10n.minuteAriaLabel});if(h.minuteElement=t.getElementsByTagName("input")[0],h.hourElement.tabIndex=h.minuteElement.tabIndex=-1,h.hourElement.value=s(h.latestSelectedDateObj?h.latestSelectedDateObj.getHours():h.config.time_24hr?h.config.defaultHour:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(h.config.defaultHour)),h.minuteElement.value=s(h.latestSelectedDateObj?h.latestSelectedDateObj.getMinutes():h.config.defaultMinute),h.hourElement.setAttribute("step",h.config.hourIncrement.toString()),h.minuteElement.setAttribute("step",h.config.minuteIncrement.toString()),h.hourElement.setAttribute("min",h.config.time_24hr?"0":"1"),h.hourElement.setAttribute("max",h.config.time_24hr?"23":"12"),h.minuteElement.setAttribute("min","0"),h.minuteElement.setAttribute("max","59"),h.timeContainer.appendChild(n),h.timeContainer.appendChild(e),h.timeContainer.appendChild(t),h.config.time_24hr&&h.timeContainer.classList.add("time24hr"),h.config.enableSeconds){h.timeContainer.classList.add("hasSeconds");var r=u("flatpickr-second");h.secondElement=r.getElementsByTagName("input")[0],h.secondElement.value=s(h.latestSelectedDateObj?h.latestSelectedDateObj.getSeconds():h.config.defaultSeconds),h.secondElement.setAttribute("step",h.minuteElement.getAttribute("step")),h.secondElement.setAttribute("min","0"),h.secondElement.setAttribute("max","59"),h.timeContainer.appendChild(c("span","flatpickr-time-separator",":")),h.timeContainer.appendChild(r)}return h.config.time_24hr||(h.amPM=c("span","flatpickr-am-pm",h.l10n.amPM[a((h.latestSelectedDateObj?h.hourElement.value:h.config.defaultHour)>11)]),h.amPM.title=h.l10n.toggleTitle,h.amPM.tabIndex=-1,h.timeContainer.appendChild(h.amPM)),h.timeContainer}()),l(h.calendarContainer,"rangeMode","range"===h.config.mode),l(h.calendarContainer,"animate",!0===h.config.animate),l(h.calendarContainer,"multiMonth",h.config.showMonths>1),h.calendarContainer.appendChild(e);var i=void 0!==h.config.appendTo&&void 0!==h.config.appendTo.nodeType;if((h.config.inline||h.config.static)&&(h.calendarContainer.classList.add(h.config.inline?"inline":"static"),h.config.inline&&(!i&&h.element.parentNode?h.element.parentNode.insertBefore(h.calendarContainer,h._input.nextSibling):void 0!==h.config.appendTo&&h.config.appendTo.appendChild(h.calendarContainer)),h.config.static)){var o=c("div","flatpickr-wrapper");h.element.parentNode&&h.element.parentNode.insertBefore(o,h.element),o.appendChild(h.element),h.altInput&&o.appendChild(h.altInput),o.appendChild(h.calendarContainer)}h.config.static||h.config.inline||(void 0!==h.config.appendTo?h.config.appendTo:window.document.body).appendChild(h.calendarContainer)}(),function(){if(h.config.wrap&&["open","close","toggle","clear"].forEach(function(e){Array.prototype.forEach.call(h.element.querySelectorAll("[data-"+e+"]"),function(n){return N(n,"click",h[e])})}),h.isMobile)!function(){var e=h.config.enableTime?h.config.noCalendar?"time":"datetime-local":"date";h.mobileInput=c("input",h.input.className+" flatpickr-mobile"),h.mobileInput.step=h.input.getAttribute("step")||"any",h.mobileInput.tabIndex=1,h.mobileInput.type=e,h.mobileInput.disabled=h.input.disabled,h.mobileInput.required=h.input.required,h.mobileInput.placeholder=h.input.placeholder,h.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",h.selectedDates.length>0&&(h.mobileInput.defaultValue=h.mobileInput.value=h.formatDate(h.selectedDates[0],h.mobileFormatStr)),h.config.minDate&&(h.mobileInput.min=h.formatDate(h.config.minDate,"Y-m-d")),h.config.maxDate&&(h.mobileInput.max=h.formatDate(h.config.maxDate,"Y-m-d")),h.input.type="hidden",void 0!==h.altInput&&(h.altInput.type="hidden");try{h.input.parentNode&&h.input.parentNode.insertBefore(h.mobileInput,h.input.nextSibling)}catch(e){}N(h.mobileInput,"change",function(e){h.setDate(e.target.value,!1,h.mobileFormatStr),fe("onChange"),fe("onClose")})}();else{var e=i(re,50);h._debouncedChange=i(O,x),h.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&N(h.daysContainer,"mouseover",function(e){"range"===h.config.mode&&te(e.target)}),N(window.document.body,"keydown",ne),h.config.inline||h.config.static||N(window,"resize",e),void 0!==window.ontouchstart?N(window.document,"touchstart",X):N(window.document,"mousedown",E(X)),N(window.document,"focus",X,{capture:!0}),!0===h.config.clickOpens&&(N(h._input,"focus",h.open),N(h._input,"mousedown",E(h.open))),void 0!==h.daysContainer&&(N(h.monthNav,"mousedown",E(we)),N(h.monthNav,["keyup","increment"],A),N(h.daysContainer,"mousedown",E(de))),void 0!==h.timeContainer&&void 0!==h.minuteElement&&void 0!==h.hourElement&&(N(h.timeContainer,["increment"],S),N(h.timeContainer,"blur",S,{capture:!0}),N(h.timeContainer,"mousedown",E(P)),N([h.hourElement,h.minuteElement],["focus","click"],function(e){return e.target.select()}),void 0!==h.secondElement&&N(h.secondElement,"focus",function(){return h.secondElement&&h.secondElement.select()}),void 0!==h.amPM&&N(h.amPM,"mousedown",E(function(e){S(e),O()})))}}(),(h.selectedDates.length||h.config.noCalendar)&&(h.config.enableTime&&C(h.config.noCalendar?h.latestSelectedDateObj||h.config.minDate:void 0),be(!1)),_(),h.showTimeInput=h.selectedDates.length>0||h.config.noCalendar;var r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!h.isMobile&&r&&oe(),fe("onReady")}(),h}function _(e,n){for(var t=Array.prototype.slice.call(e).filter(function(e){return e instanceof HTMLElement}),r=[],s=0;s<t.length;s++){var a=t[s];try{if(null!==a.getAttribute("data-fp-omit"))continue;void 0!==a._flatpickr&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=k(a,n||{}),r.push(a._flatpickr)}catch(e){console.error(e)}}return 1===r.length?r[0]:r}"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return _(this,e)},HTMLElement.prototype.flatpickr=function(e){return _([this],e)});var D=function(e,n){return"string"==typeof e?_(window.document.querySelectorAll(e),n):e instanceof Node?_([e],n):_(e,n)};return D.defaultConfig={},D.l10ns={en:e({},r),default:e({},r)},D.localize=function(n){D.l10ns.default=e({},D.l10ns.default,n)},D.setDefaults=function(n){D.defaultConfig=e({},D.defaultConfig,n)},D.parseDate=v({}),D.formatDate=$({}),D.compareDates=b,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(e){return _(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=D),D}()});function Vn(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===t&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}Vn('.flatpickr-calendar {\n  background: transparent;\n  opacity: 0;\n  display: none;\n  text-align: center;\n  visibility: hidden;\n  padding: 0;\n  -webkit-animation: none;\n          animation: none;\n  direction: ltr;\n  border: 0;\n  font-size: 14px;\n  line-height: 24px;\n  border-radius: 5px;\n  position: absolute;\n  width: 307.875px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  -ms-touch-action: manipulation;\n      touch-action: manipulation;\n  background: #fff;\n  -webkit-box-shadow: 1px 0 0 #e6e6e6, -1px 0 0 #e6e6e6, 0 1px 0 #e6e6e6, 0 -1px 0 #e6e6e6, 0 3px 13px rgba(0,0,0,0.08);\n          box-shadow: 1px 0 0 #e6e6e6, -1px 0 0 #e6e6e6, 0 1px 0 #e6e6e6, 0 -1px 0 #e6e6e6, 0 3px 13px rgba(0,0,0,0.08);\n}\n.flatpickr-calendar.open,\n.flatpickr-calendar.inline {\n  opacity: 1;\n  max-height: 640px;\n  visibility: visible;\n}\n.flatpickr-calendar.open {\n  display: inline-block;\n  z-index: 99999;\n}\n.flatpickr-calendar.animate.open {\n  -webkit-animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);\n          animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);\n}\n.flatpickr-calendar.inline {\n  display: block;\n  position: relative;\n  top: 2px;\n}\n.flatpickr-calendar.static {\n  position: absolute;\n  top: calc(100% + 2px);\n}\n.flatpickr-calendar.static.open {\n  z-index: 999;\n  display: block;\n}\n.flatpickr-calendar.multiMonth .flatpickr-days .dayContainer:nth-child(n+1) .flatpickr-day.inRange:nth-child(7n+7) {\n  -webkit-box-shadow: none !important;\n          box-shadow: none !important;\n}\n.flatpickr-calendar.multiMonth .flatpickr-days .dayContainer:nth-child(n+2) .flatpickr-day.inRange:nth-child(7n+1) {\n  -webkit-box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n          box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n}\n.flatpickr-calendar .hasWeeks .dayContainer,\n.flatpickr-calendar .hasTime .dayContainer {\n  border-bottom: 0;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.flatpickr-calendar .hasWeeks .dayContainer {\n  border-left: 0;\n}\n.flatpickr-calendar.showTimeInput.hasTime .flatpickr-time {\n  height: 40px;\n  border-top: 1px solid #e6e6e6;\n}\n.flatpickr-calendar.noCalendar.hasTime .flatpickr-time {\n  height: auto;\n}\n.flatpickr-calendar:before,\n.flatpickr-calendar:after {\n  position: absolute;\n  display: block;\n  pointer-events: none;\n  border: solid transparent;\n  content: \'\';\n  height: 0;\n  width: 0;\n  left: 22px;\n}\n.flatpickr-calendar.rightMost:before,\n.flatpickr-calendar.rightMost:after {\n  left: auto;\n  right: 22px;\n}\n.flatpickr-calendar:before {\n  border-width: 5px;\n  margin: 0 -5px;\n}\n.flatpickr-calendar:after {\n  border-width: 4px;\n  margin: 0 -4px;\n}\n.flatpickr-calendar.arrowTop:before,\n.flatpickr-calendar.arrowTop:after {\n  bottom: 100%;\n}\n.flatpickr-calendar.arrowTop:before {\n  border-bottom-color: #e6e6e6;\n}\n.flatpickr-calendar.arrowTop:after {\n  border-bottom-color: #fff;\n}\n.flatpickr-calendar.arrowBottom:before,\n.flatpickr-calendar.arrowBottom:after {\n  top: 100%;\n}\n.flatpickr-calendar.arrowBottom:before {\n  border-top-color: #e6e6e6;\n}\n.flatpickr-calendar.arrowBottom:after {\n  border-top-color: #fff;\n}\n.flatpickr-calendar:focus {\n  outline: 0;\n}\n.flatpickr-wrapper {\n  position: relative;\n  display: inline-block;\n}\n.flatpickr-months {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n.flatpickr-months .flatpickr-month {\n  background: transparent;\n  color: rgba(0,0,0,0.9);\n  fill: rgba(0,0,0,0.9);\n  height: 34px;\n  line-height: 1;\n  text-align: center;\n  position: relative;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  overflow: hidden;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\n.flatpickr-months .flatpickr-prev-month,\n.flatpickr-months .flatpickr-next-month {\n  text-decoration: none;\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  height: 34px;\n  padding: 10px;\n  z-index: 3;\n  color: rgba(0,0,0,0.9);\n  fill: rgba(0,0,0,0.9);\n}\n.flatpickr-months .flatpickr-prev-month.flatpickr-disabled,\n.flatpickr-months .flatpickr-next-month.flatpickr-disabled {\n  display: none;\n}\n.flatpickr-months .flatpickr-prev-month i,\n.flatpickr-months .flatpickr-next-month i {\n  position: relative;\n}\n.flatpickr-months .flatpickr-prev-month.flatpickr-prev-month,\n.flatpickr-months .flatpickr-next-month.flatpickr-prev-month {\n/*\n      /*rtl:begin:ignore*/\n/*\n      */\n  left: 0;\n/*\n      /*rtl:end:ignore*/\n/*\n      */\n}\n/*\n      /*rtl:begin:ignore*/\n/*\n      /*rtl:end:ignore*/\n.flatpickr-months .flatpickr-prev-month.flatpickr-next-month,\n.flatpickr-months .flatpickr-next-month.flatpickr-next-month {\n/*\n      /*rtl:begin:ignore*/\n/*\n      */\n  right: 0;\n/*\n      /*rtl:end:ignore*/\n/*\n      */\n}\n/*\n      /*rtl:begin:ignore*/\n/*\n      /*rtl:end:ignore*/\n.flatpickr-months .flatpickr-prev-month:hover,\n.flatpickr-months .flatpickr-next-month:hover {\n  color: #959ea9;\n}\n.flatpickr-months .flatpickr-prev-month:hover svg,\n.flatpickr-months .flatpickr-next-month:hover svg {\n  fill: #f64747;\n}\n.flatpickr-months .flatpickr-prev-month svg,\n.flatpickr-months .flatpickr-next-month svg {\n  width: 14px;\n  height: 14px;\n}\n.flatpickr-months .flatpickr-prev-month svg path,\n.flatpickr-months .flatpickr-next-month svg path {\n  -webkit-transition: fill 0.1s;\n  transition: fill 0.1s;\n  fill: inherit;\n}\n.numInputWrapper {\n  position: relative;\n  height: auto;\n}\n.numInputWrapper input,\n.numInputWrapper span {\n  display: inline-block;\n}\n.numInputWrapper input {\n  width: 100%;\n}\n.numInputWrapper input::-ms-clear {\n  display: none;\n}\n.numInputWrapper input::-webkit-outer-spin-button,\n.numInputWrapper input::-webkit-inner-spin-button {\n  margin: 0;\n  -webkit-appearance: none;\n}\n.numInputWrapper span {\n  position: absolute;\n  right: 0;\n  width: 14px;\n  padding: 0 4px 0 2px;\n  height: 50%;\n  line-height: 50%;\n  opacity: 0;\n  cursor: pointer;\n  border: 1px solid rgba(57,57,57,0.15);\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.numInputWrapper span:hover {\n  background: rgba(0,0,0,0.1);\n}\n.numInputWrapper span:active {\n  background: rgba(0,0,0,0.2);\n}\n.numInputWrapper span:after {\n  display: block;\n  content: "";\n  position: absolute;\n}\n.numInputWrapper span.arrowUp {\n  top: 0;\n  border-bottom: 0;\n}\n.numInputWrapper span.arrowUp:after {\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-bottom: 4px solid rgba(57,57,57,0.6);\n  top: 26%;\n}\n.numInputWrapper span.arrowDown {\n  top: 50%;\n}\n.numInputWrapper span.arrowDown:after {\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-top: 4px solid rgba(57,57,57,0.6);\n  top: 40%;\n}\n.numInputWrapper span svg {\n  width: inherit;\n  height: auto;\n}\n.numInputWrapper span svg path {\n  fill: rgba(0,0,0,0.5);\n}\n.numInputWrapper:hover {\n  background: rgba(0,0,0,0.05);\n}\n.numInputWrapper:hover span {\n  opacity: 1;\n}\n.flatpickr-current-month {\n  font-size: 135%;\n  line-height: inherit;\n  font-weight: 300;\n  color: inherit;\n  position: absolute;\n  width: 75%;\n  left: 12.5%;\n  padding: 7.48px 0 0 0;\n  line-height: 1;\n  height: 34px;\n  display: inline-block;\n  text-align: center;\n  -webkit-transform: translate3d(0px, 0px, 0px);\n          transform: translate3d(0px, 0px, 0px);\n}\n.flatpickr-current-month span.cur-month {\n  font-family: inherit;\n  font-weight: 700;\n  color: inherit;\n  display: inline-block;\n  margin-left: 0.5ch;\n  padding: 0;\n}\n.flatpickr-current-month span.cur-month:hover {\n  background: rgba(0,0,0,0.05);\n}\n.flatpickr-current-month .numInputWrapper {\n  width: 6ch;\n  width: 7ch\\0;\n  display: inline-block;\n}\n.flatpickr-current-month .numInputWrapper span.arrowUp:after {\n  border-bottom-color: rgba(0,0,0,0.9);\n}\n.flatpickr-current-month .numInputWrapper span.arrowDown:after {\n  border-top-color: rgba(0,0,0,0.9);\n}\n.flatpickr-current-month input.cur-year {\n  background: transparent;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: inherit;\n  cursor: text;\n  padding: 0 0 0 0.5ch;\n  margin: 0;\n  display: inline-block;\n  font-size: inherit;\n  font-family: inherit;\n  font-weight: 300;\n  line-height: inherit;\n  height: auto;\n  border: 0;\n  border-radius: 0;\n  vertical-align: initial;\n  -webkit-appearance: textfield;\n  -moz-appearance: textfield;\n  appearance: textfield;\n}\n.flatpickr-current-month input.cur-year:focus {\n  outline: 0;\n}\n.flatpickr-current-month input.cur-year[disabled],\n.flatpickr-current-month input.cur-year[disabled]:hover {\n  font-size: 100%;\n  color: rgba(0,0,0,0.5);\n  background: transparent;\n  pointer-events: none;\n}\n.flatpickr-current-month .flatpickr-monthDropdown-months {\n  appearance: menulist;\n  background: transparent;\n  border: none;\n  border-radius: 0;\n  box-sizing: border-box;\n  color: inherit;\n  cursor: pointer;\n  font-size: inherit;\n  font-family: inherit;\n  font-weight: 300;\n  height: auto;\n  line-height: inherit;\n  margin: -1px 0 0 0;\n  outline: none;\n  padding: 0 0 0 0.5ch;\n  position: relative;\n  vertical-align: initial;\n  -webkit-box-sizing: border-box;\n  -webkit-appearance: menulist;\n  -moz-appearance: menulist;\n  width: auto;\n}\n.flatpickr-current-month .flatpickr-monthDropdown-months:focus,\n.flatpickr-current-month .flatpickr-monthDropdown-months:active {\n  outline: none;\n}\n.flatpickr-current-month .flatpickr-monthDropdown-months:hover {\n  background: rgba(0,0,0,0.05);\n}\n.flatpickr-current-month .flatpickr-monthDropdown-months .flatpickr-monthDropdown-month {\n  background-color: transparent;\n  outline: none;\n  padding: 0;\n}\n.flatpickr-weekdays {\n  background: transparent;\n  text-align: center;\n  overflow: hidden;\n  width: 100%;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  height: 28px;\n}\n.flatpickr-weekdays .flatpickr-weekdaycontainer {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n}\nspan.flatpickr-weekday {\n  cursor: default;\n  font-size: 90%;\n  background: transparent;\n  color: rgba(0,0,0,0.54);\n  line-height: 1;\n  margin: 0;\n  text-align: center;\n  display: block;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  font-weight: bolder;\n}\n.dayContainer,\n.flatpickr-weeks {\n  padding: 1px 0 0 0;\n}\n.flatpickr-days {\n  position: relative;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: start;\n  -webkit-align-items: flex-start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n  width: 307.875px;\n}\n.flatpickr-days:focus {\n  outline: 0;\n}\n.dayContainer {\n  padding: 0;\n  outline: 0;\n  text-align: left;\n  width: 307.875px;\n  min-width: 307.875px;\n  max-width: 307.875px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  display: inline-block;\n  display: -ms-flexbox;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-wrap: wrap;\n          flex-wrap: wrap;\n  -ms-flex-wrap: wrap;\n  -ms-flex-pack: justify;\n  -webkit-justify-content: space-around;\n          justify-content: space-around;\n  -webkit-transform: translate3d(0px, 0px, 0px);\n          transform: translate3d(0px, 0px, 0px);\n  opacity: 1;\n}\n.dayContainer + .dayContainer {\n  -webkit-box-shadow: -1px 0 0 #e6e6e6;\n          box-shadow: -1px 0 0 #e6e6e6;\n}\n.flatpickr-day {\n  background: none;\n  border: 1px solid transparent;\n  border-radius: 150px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #393939;\n  cursor: pointer;\n  font-weight: 400;\n  width: 14.2857143%;\n  -webkit-flex-basis: 14.2857143%;\n      -ms-flex-preferred-size: 14.2857143%;\n          flex-basis: 14.2857143%;\n  max-width: 39px;\n  height: 39px;\n  line-height: 39px;\n  margin: 0;\n  display: inline-block;\n  position: relative;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  text-align: center;\n}\n.flatpickr-day.inRange,\n.flatpickr-day.prevMonthDay.inRange,\n.flatpickr-day.nextMonthDay.inRange,\n.flatpickr-day.today.inRange,\n.flatpickr-day.prevMonthDay.today.inRange,\n.flatpickr-day.nextMonthDay.today.inRange,\n.flatpickr-day:hover,\n.flatpickr-day.prevMonthDay:hover,\n.flatpickr-day.nextMonthDay:hover,\n.flatpickr-day:focus,\n.flatpickr-day.prevMonthDay:focus,\n.flatpickr-day.nextMonthDay:focus {\n  cursor: pointer;\n  outline: 0;\n  background: #e6e6e6;\n  border-color: #e6e6e6;\n}\n.flatpickr-day.today {\n  border-color: #959ea9;\n}\n.flatpickr-day.today:hover,\n.flatpickr-day.today:focus {\n  border-color: #959ea9;\n  background: #959ea9;\n  color: #fff;\n}\n.flatpickr-day.selected,\n.flatpickr-day.startRange,\n.flatpickr-day.endRange,\n.flatpickr-day.selected.inRange,\n.flatpickr-day.startRange.inRange,\n.flatpickr-day.endRange.inRange,\n.flatpickr-day.selected:focus,\n.flatpickr-day.startRange:focus,\n.flatpickr-day.endRange:focus,\n.flatpickr-day.selected:hover,\n.flatpickr-day.startRange:hover,\n.flatpickr-day.endRange:hover,\n.flatpickr-day.selected.prevMonthDay,\n.flatpickr-day.startRange.prevMonthDay,\n.flatpickr-day.endRange.prevMonthDay,\n.flatpickr-day.selected.nextMonthDay,\n.flatpickr-day.startRange.nextMonthDay,\n.flatpickr-day.endRange.nextMonthDay {\n  background: #569ff7;\n  -webkit-box-shadow: none;\n          box-shadow: none;\n  color: #fff;\n  border-color: #569ff7;\n}\n.flatpickr-day.selected.startRange,\n.flatpickr-day.startRange.startRange,\n.flatpickr-day.endRange.startRange {\n  border-radius: 50px 0 0 50px;\n}\n.flatpickr-day.selected.endRange,\n.flatpickr-day.startRange.endRange,\n.flatpickr-day.endRange.endRange {\n  border-radius: 0 50px 50px 0;\n}\n.flatpickr-day.selected.startRange + .endRange:not(:nth-child(7n+1)),\n.flatpickr-day.startRange.startRange + .endRange:not(:nth-child(7n+1)),\n.flatpickr-day.endRange.startRange + .endRange:not(:nth-child(7n+1)) {\n  -webkit-box-shadow: -10px 0 0 #569ff7;\n          box-shadow: -10px 0 0 #569ff7;\n}\n.flatpickr-day.selected.startRange.endRange,\n.flatpickr-day.startRange.startRange.endRange,\n.flatpickr-day.endRange.startRange.endRange {\n  border-radius: 50px;\n}\n.flatpickr-day.inRange {\n  border-radius: 0;\n  -webkit-box-shadow: -5px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n          box-shadow: -5px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n}\n.flatpickr-day.flatpickr-disabled,\n.flatpickr-day.flatpickr-disabled:hover,\n.flatpickr-day.prevMonthDay,\n.flatpickr-day.nextMonthDay,\n.flatpickr-day.notAllowed,\n.flatpickr-day.notAllowed.prevMonthDay,\n.flatpickr-day.notAllowed.nextMonthDay {\n  color: rgba(57,57,57,0.3);\n  background: transparent;\n  border-color: transparent;\n  cursor: default;\n}\n.flatpickr-day.flatpickr-disabled,\n.flatpickr-day.flatpickr-disabled:hover {\n  cursor: not-allowed;\n  color: rgba(57,57,57,0.1);\n}\n.flatpickr-day.week.selected {\n  border-radius: 0;\n  -webkit-box-shadow: -5px 0 0 #569ff7, 5px 0 0 #569ff7;\n          box-shadow: -5px 0 0 #569ff7, 5px 0 0 #569ff7;\n}\n.flatpickr-day.hidden {\n  visibility: hidden;\n}\n.rangeMode .flatpickr-day {\n  margin-top: 1px;\n}\n.flatpickr-weekwrapper {\n  float: left;\n}\n.flatpickr-weekwrapper .flatpickr-weeks {\n  padding: 0 12px;\n  -webkit-box-shadow: 1px 0 0 #e6e6e6;\n          box-shadow: 1px 0 0 #e6e6e6;\n}\n.flatpickr-weekwrapper .flatpickr-weekday {\n  float: none;\n  width: 100%;\n  line-height: 28px;\n}\n.flatpickr-weekwrapper span.flatpickr-day,\n.flatpickr-weekwrapper span.flatpickr-day:hover {\n  display: block;\n  width: 100%;\n  max-width: none;\n  color: rgba(57,57,57,0.3);\n  background: transparent;\n  cursor: default;\n  border: none;\n}\n.flatpickr-innerContainer {\n  display: block;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  overflow: hidden;\n}\n.flatpickr-rContainer {\n  display: inline-block;\n  padding: 0;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.flatpickr-time {\n  text-align: center;\n  outline: 0;\n  display: block;\n  height: 0;\n  line-height: 40px;\n  max-height: 40px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n.flatpickr-time:after {\n  content: "";\n  display: table;\n  clear: both;\n}\n.flatpickr-time .numInputWrapper {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n      -ms-flex: 1;\n          flex: 1;\n  width: 40%;\n  height: 40px;\n  float: left;\n}\n.flatpickr-time .numInputWrapper span.arrowUp:after {\n  border-bottom-color: #393939;\n}\n.flatpickr-time .numInputWrapper span.arrowDown:after {\n  border-top-color: #393939;\n}\n.flatpickr-time.hasSeconds .numInputWrapper {\n  width: 26%;\n}\n.flatpickr-time.time24hr .numInputWrapper {\n  width: 49%;\n}\n.flatpickr-time input {\n  background: transparent;\n  -webkit-box-shadow: none;\n          box-shadow: none;\n  border: 0;\n  border-radius: 0;\n  text-align: center;\n  margin: 0;\n  padding: 0;\n  height: inherit;\n  line-height: inherit;\n  color: #393939;\n  font-size: 14px;\n  position: relative;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  -webkit-appearance: textfield;\n  -moz-appearance: textfield;\n  appearance: textfield;\n}\n.flatpickr-time input.flatpickr-hour {\n  font-weight: bold;\n}\n.flatpickr-time input.flatpickr-minute,\n.flatpickr-time input.flatpickr-second {\n  font-weight: 400;\n}\n.flatpickr-time input:focus {\n  outline: 0;\n  border: 0;\n}\n.flatpickr-time .flatpickr-time-separator,\n.flatpickr-time .flatpickr-am-pm {\n  height: inherit;\n  float: left;\n  line-height: inherit;\n  color: #393939;\n  font-weight: bold;\n  width: 2%;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-align-self: center;\n      -ms-flex-item-align: center;\n          align-self: center;\n}\n.flatpickr-time .flatpickr-am-pm {\n  outline: 0;\n  width: 18%;\n  cursor: pointer;\n  text-align: center;\n  font-weight: 400;\n}\n.flatpickr-time input:hover,\n.flatpickr-time .flatpickr-am-pm:hover,\n.flatpickr-time input:focus,\n.flatpickr-time .flatpickr-am-pm:focus {\n  background: #eee;\n}\n.flatpickr-input[readonly] {\n  cursor: pointer;\n}\n@-webkit-keyframes fpFadeInDown {\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -20px, 0);\n            transform: translate3d(0, -20px, 0);\n  }\n  to {\n    opacity: 1;\n    -webkit-transform: translate3d(0, 0, 0);\n            transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes fpFadeInDown {\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -20px, 0);\n            transform: translate3d(0, -20px, 0);\n  }\n  to {\n    opacity: 1;\n    -webkit-transform: translate3d(0, 0, 0);\n            transform: translate3d(0, 0, 0);\n  }\n}\n');function Jn(n){var t,r;return{c(){O(t=I("input"),"type","date"),O(t,"class",f(n.className)+" svelte-4yoq4p"),O(t,"placeholder",n.placeholder),r=N(t,"input",n.input_input_handler)},m(e,r){_(e,t,r),P(t,n.value),n.input_binding(t)},p(e,n){e.value&&P(t,n.value),e.className&&O(t,"class",f(n.className)+" svelte-4yoq4p"),e.placeholder&&O(t,"placeholder",n.placeholder)},i:e,o:e,d(e){e&&D(t),n.input_binding(null),r()}}}function Xn(e,n,t){const r=Q();let s,a,{value:i,placeholder:o="",className:l="",options:c={}}=n;const d=new Set(["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"]);J(()=>{t("fp",a=Zn(s,u(c)))}),X(()=>{a&&"destroy"in a&&a.destroy()});const u=e=>{e=Object.assign({},e);for(let n of d){let t=(e,t,s)=>{r(m(n),[e,t,s])};n in e?(Array.isArray(e[n])||(e[n]=[e[n]]),e[n].push(t)):e[n]=[t]}return e.onChange&&!e.onChange.includes(p)&&e.onChange.push(p),e},p=e=>{Array.isArray(e)&&1===e.length&&(e=e[0]),t("value",i=e)},m=e=>e.charAt(2).toLowerCase()+e.substring(3);return e.$set=e=>{"value"in e&&t("value",i=e.value),"placeholder"in e&&t("placeholder",o=e.placeholder),"className"in e&&t("className",l=e.className),"options"in e&&t("options",c=e.options)},e.$$.update=(e={fp:1,value:1})=>{(e.fp||e.value)&&a&&i&&a.setDate(i)},{dateInput:s,value:i,placeholder:o,className:l,options:c,input_input_handler:function(){i=this.value,t("value",i)},input_binding:function(e){ne[e?"unshift":"push"](()=>{t("dateInput",s=e)})}}}Vn('.flatpickr-calendar {\n  opacity: 0;\n  display: none;\n  text-align: center;\n  visibility: hidden;\n  padding: 0;\n  -webkit-animation: none;\n  animation: none;\n  direction: ltr;\n  border: 0;\n  font-size: 14px;\n  line-height: 24px;\n  border-radius: 4px;\n  position: absolute;\n  width: 307.875px;\n  -webkit-box-shadow: none !important;\n  box-shadow: none !important;\n  background: rgba(0, 0, 0, 0.9);\n}\n.flatpickr-calendar.open,\n.flatpickr-calendar.inline {\n  opacity: 1;\n  max-height: 640px;\n  visibility: visible;\n}\n.flatpickr-calendar.open {\n  display: inline-block;\n  z-index: 99999;\n}\n.flatpickr-calendar.animate.open {\n  -webkit-animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);\n  animation: fpFadeInDown 300ms cubic-bezier(0.23, 1, 0.32, 1);\n}\n.flatpickr-calendar.inline {\n  display: block;\n  position: relative;\n  top: 4px;\n}\n.flatpickr-calendar.static {\n  position: absolute;\n  top: calc(100% + 4px);\n}\n.flatpickr-calendar.static.open {\n  z-index: 999;\n  display: block;\n}\n.flatpickr-calendar.multiMonth\n  .flatpickr-days\n  .dayContainer:nth-child(n + 1)\n  .flatpickr-day.inRange:nth-child(7n + 7) {\n  -webkit-box-shadow: none !important;\n  box-shadow: none !important;\n}\n.flatpickr-calendar.multiMonth\n  .flatpickr-days\n  .dayContainer:nth-child(n + 2)\n  .flatpickr-day.inRange:nth-child(7n + 1) {\n  -webkit-box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n  box-shadow: -2px 0 0 #e6e6e6, 5px 0 0 #e6e6e6;\n}\n.flatpickr-calendar .hasWeeks .dayContainer,\n.flatpickr-calendar .hasTime .dayContainer {\n  border-bottom: 0;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.flatpickr-calendar .hasWeeks .dayContainer {\n  border-left: 0;\n}\n.flatpickr-calendar.showTimeInput.hasTime .flatpickr-time {\n  height: 40px;\n  border-top: 1px solid #20222c;\n}\n.flatpickr-calendar.noCalendar.hasTime .flatpickr-time {\n  height: auto;\n}\n.flatpickr-calendar:before,\n.flatpickr-calendar:after {\n  position: absolute;\n  display: block;\n  pointer-events: none;\n  border: solid transparent;\n  content: "";\n  height: 0;\n  width: 0;\n  left: 22px;\n}\n.flatpickr-calendar.rightMost:before,\n.flatpickr-calendar.rightMost:after {\n  left: auto;\n  right: 22px;\n}\n.flatpickr-calendar:before {\n  border-width: 5px;\n  margin: 0 -5px;\n}\n.flatpickr-calendar:after {\n  border-width: 4px;\n  margin: 0 -4px;\n}\n.flatpickr-calendar.arrowTop:before,\n.flatpickr-calendar.arrowTop:after {\n  bottom: 100%;\n}\n.flatpickr-calendar.arrowTop:before {\n  border-bottom-color: #20222c;\n}\n.flatpickr-calendar.arrowTop:after {\n  border-bottom-color: #3f4458;\n}\n.flatpickr-calendar.arrowBottom:before,\n.flatpickr-calendar.arrowBottom:after {\n  top: 100%;\n}\n.flatpickr-calendar.arrowBottom:before {\n  border-top-color: #20222c;\n}\n.flatpickr-calendar.arrowBottom:after {\n  border-top-color: #3f4458;\n}\n.flatpickr-calendar:focus {\n  outline: 0;\n}\n.flatpickr-wrapper {\n  position: relative;\n  display: inline-block;\n}\n.flatpickr-months {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n.flatpickr-months .flatpickr-month {\n  background: transparent;\n  color: #fff;\n  fill: #fff;\n  height: 28px;\n  line-height: 1;\n  text-align: center;\n  position: relative;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  overflow: hidden;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n}\n.flatpickr-months .flatpickr-prev-month,\n.flatpickr-months .flatpickr-next-month {\n  text-decoration: none;\n  cursor: pointer;\n  position: absolute;\n  top: 0px;\n  line-height: 16px;\n  height: 28px;\n  padding: 10px;\n  z-index: 3;\n  color: #fff;\n  fill: #fff;\n}\n.flatpickr-months .flatpickr-prev-month.disabled,\n.flatpickr-months .flatpickr-next-month.disabled {\n  display: none;\n}\n.flatpickr-months .flatpickr-prev-month i,\n.flatpickr-months .flatpickr-next-month i {\n  position: relative;\n}\n.flatpickr-months .flatpickr-prev-month.flatpickr-prev-month,\n.flatpickr-months .flatpickr-next-month.flatpickr-prev-month {\n  /*\n      /*rtl:begin:ignore*/\n  /*\n      */\n  left: 0;\n  /*\n      /*rtl:end:ignore*/\n  /*\n      */\n}\n/*\n      /*rtl:begin:ignore*/\n/*\n      /*rtl:end:ignore*/\n.flatpickr-months .flatpickr-prev-month.flatpickr-next-month,\n.flatpickr-months .flatpickr-next-month.flatpickr-next-month {\n  /*\n      /*rtl:begin:ignore*/\n  /*\n      */\n  right: 0;\n  /*\n      /*rtl:end:ignore*/\n  /*\n      */\n}\n/*\n      /*rtl:begin:ignore*/\n/*\n      /*rtl:end:ignore*/\n.flatpickr-months .flatpickr-prev-month:hover,\n.flatpickr-months .flatpickr-next-month:hover {\n  color: #eee;\n}\n.flatpickr-months .flatpickr-prev-month:hover svg,\n.flatpickr-months .flatpickr-next-month:hover svg {\n  fill: #f64747;\n}\n.flatpickr-months .flatpickr-prev-month svg,\n.flatpickr-months .flatpickr-next-month svg {\n  width: 14px;\n  height: 14px;\n}\n.flatpickr-months .flatpickr-prev-month svg path,\n.flatpickr-months .flatpickr-next-month svg path {\n  -webkit-transition: fill 0.1s;\n  transition: fill 0.1s;\n  fill: inherit;\n}\n.numInputWrapper {\n  position: relative;\n  height: auto;\n}\n.numInputWrapper input,\n.numInputWrapper span {\n  display: inline-block;\n}\n.numInputWrapper input {\n  width: 100%;\n}\n.numInputWrapper input::-ms-clear {\n  display: none;\n}\n.numInputWrapper span {\n  position: absolute;\n  right: 0;\n  width: 14px;\n  padding: 0 4px 0 2px;\n  height: 50%;\n  line-height: 50%;\n  opacity: 0;\n  cursor: pointer;\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.numInputWrapper span:hover {\n  background: rgba(192, 187, 167, 0.1);\n}\n.numInputWrapper span:active {\n  background: rgba(192, 187, 167, 0.2);\n}\n.numInputWrapper span:after {\n  display: block;\n  content: "";\n  position: absolute;\n}\n.numInputWrapper span.arrowUp {\n  top: 0;\n  border-bottom: 0;\n}\n.numInputWrapper span.arrowUp:after {\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-bottom: 4px solid rgba(255, 255, 255, 0.6);\n  top: 26%;\n}\n.numInputWrapper span.arrowDown {\n  top: 50%;\n}\n.numInputWrapper span.arrowDown:after {\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-top: 4px solid rgba(255, 255, 255, 0.6);\n  top: 40%;\n}\n.numInputWrapper span svg {\n  width: inherit;\n  height: auto;\n}\n.numInputWrapper span svg path {\n  fill: rgba(255, 255, 255, 0.5);\n}\n.numInputWrapper:hover {\n  background: rgba(192, 187, 167, 0.05);\n}\n.numInputWrapper:hover span {\n  opacity: 1;\n}\n.flatpickr-current-month {\n  font-size: 135%;\n  line-height: inherit;\n  font-weight: 300;\n  color: inherit;\n  position: absolute;\n  width: 75%;\n  left: 12.5%;\n  padding: 6.16px 0 0 0;\n  line-height: 1;\n  height: 28px;\n  display: inline-block;\n  text-align: center;\n  -webkit-transform: translate3d(0px, 0px, 0px);\n  transform: translate3d(0px, 0px, 0px);\n}\n.flatpickr-current-month span.cur-month {\n  font-family: inherit;\n  font-weight: 700;\n  color: inherit;\n  display: inline-block;\n  margin-left: 0.5ch;\n  padding: 0;\n}\n.flatpickr-current-month span.cur-month:hover {\n  background: rgba(192, 187, 167, 0.05);\n}\n.flatpickr-current-month .numInputWrapper {\n  width: 6ch;\n  width: 7ch\\0;\n  display: inline-block;\n}\n.flatpickr-current-month .numInputWrapper span.arrowUp:after {\n  border-bottom-color: #fff;\n}\n.flatpickr-current-month .numInputWrapper span.arrowDown:after {\n  border-top-color: #fff;\n}\n.flatpickr-current-month input.cur-year {\n  background: transparent;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  color: inherit;\n  cursor: text;\n  padding: 0 0 0 0.5ch;\n  margin: 0;\n  display: inline-block;\n  font-size: inherit;\n  font-family: inherit;\n  font-weight: 300;\n  line-height: inherit;\n  height: auto;\n  border: 0;\n  border-radius: 0;\n  vertical-align: initial;\n}\n.flatpickr-current-month input.cur-year:focus {\n  outline: 0;\n}\n.flatpickr-current-month input.cur-year[disabled],\n.flatpickr-current-month input.cur-year[disabled]:hover {\n  font-size: 100%;\n  color: rgba(255, 255, 255, 0.5);\n  background: transparent;\n  pointer-events: none;\n}\n.flatpickr-weekdays {\n  background: transparent;\n  text-align: center;\n  overflow: hidden;\n  width: 100%;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n  -ms-flex-align: center;\n  align-items: center;\n  height: 28px;\n}\n.flatpickr-weekdays .flatpickr-weekdaycontainer {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n}\nspan.flatpickr-weekday {\n  cursor: default;\n  font-size: 90%;\n  background: transparent;\n  color: #fff;\n  line-height: 1;\n  margin: 0;\n  text-align: center;\n  display: block;\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  font-weight: bolder;\n}\n.dayContainer,\n.flatpickr-weeks {\n  padding: 1px 0 0 0;\n}\n.flatpickr-days {\n  position: relative;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: start;\n  -webkit-align-items: flex-start;\n  -ms-flex-align: start;\n  align-items: flex-start;\n  width: 307.875px;\n}\n.flatpickr-days:focus {\n  outline: 0;\n}\n.dayContainer {\n  padding: 0;\n  outline: 0;\n  text-align: left;\n  width: 307.875px;\n  min-width: 307.875px;\n  max-width: 307.875px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  display: inline-block;\n  display: -ms-flexbox;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-wrap: wrap;\n  flex-wrap: wrap;\n  -ms-flex-wrap: wrap;\n  -ms-flex-pack: justify;\n  -webkit-justify-content: space-around;\n  justify-content: space-around;\n  -webkit-transform: translate3d(0px, 0px, 0px);\n  transform: translate3d(0px, 0px, 0px);\n  opacity: 1;\n}\n.dayContainer + .dayContainer {\n  -webkit-box-shadow: -1px 0 0 #20222c;\n  box-shadow: -1px 0 0 #20222c;\n}\n.flatpickr-day {\n  background: none;\n  border: 1px solid transparent;\n  border-radius: 150px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  color: rgba(255, 255, 255, 0.95);\n  cursor: pointer;\n  font-weight: 400;\n  width: 14.2857143%;\n  -webkit-flex-basis: 14.2857143%;\n  -ms-flex-preferred-size: 14.2857143%;\n  flex-basis: 14.2857143%;\n  max-width: 39px;\n  height: 39px;\n  line-height: 39px;\n  margin: 0;\n  display: inline-block;\n  position: relative;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  text-align: center;\n}\n.flatpickr-day.inRange,\n.flatpickr-day.prevMonthDay.inRange,\n.flatpickr-day.nextMonthDay.inRange,\n.flatpickr-day.today.inRange,\n.flatpickr-day.prevMonthDay.today.inRange,\n.flatpickr-day.nextMonthDay.today.inRange,\n.flatpickr-day:hover,\n.flatpickr-day.prevMonthDay:hover,\n.flatpickr-day.nextMonthDay:hover,\n.flatpickr-day:focus,\n.flatpickr-day.prevMonthDay:focus,\n.flatpickr-day.nextMonthDay:focus {\n  cursor: pointer;\n  outline: 0;\n  background: #98003c;\n  border-color: #98003c;\n}\n.flatpickr-day.today {\n  border-color: #eee;\n}\n.flatpickr-day.today:hover,\n.flatpickr-day.today:focus {\n  border-color: #eee;\n  background: #eee;\n  color: #3f4458;\n}\n.flatpickr-day.selected,\n.flatpickr-day.startRange,\n.flatpickr-day.endRange,\n.flatpickr-day.selected.inRange,\n.flatpickr-day.startRange.inRange,\n.flatpickr-day.endRange.inRange,\n.flatpickr-day.selected:focus,\n.flatpickr-day.startRange:focus,\n.flatpickr-day.endRange:focus,\n.flatpickr-day.selected:hover,\n.flatpickr-day.startRange:hover,\n.flatpickr-day.endRange:hover,\n.flatpickr-day.selected.prevMonthDay,\n.flatpickr-day.startRange.prevMonthDay,\n.flatpickr-day.endRange.prevMonthDay,\n.flatpickr-day.selected.nextMonthDay,\n.flatpickr-day.startRange.nextMonthDay,\n.flatpickr-day.endRange.nextMonthDay {\n  background: #cb2d6f;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  color: #fff;\n  border-color: #cb2d6f;\n}\n.flatpickr-day.selected.startRange,\n.flatpickr-day.startRange.startRange,\n.flatpickr-day.endRange.startRange {\n  border-radius: 50px 0 0 50px;\n}\n.flatpickr-day.selected.endRange,\n.flatpickr-day.startRange.endRange,\n.flatpickr-day.endRange.endRange {\n  border-radius: 0 50px 50px 0;\n}\n.flatpickr-day.selected.startRange + .endRange:not(:nth-child(7n + 1)),\n.flatpickr-day.startRange.startRange + .endRange:not(:nth-child(7n + 1)),\n.flatpickr-day.endRange.startRange + .endRange:not(:nth-child(7n + 1)) {\n  -webkit-box-shadow: -10px 0 0 #98003c;\n  box-shadow: -10px 0 0 #98003c;\n}\n.flatpickr-day.selected.startRange.endRange,\n.flatpickr-day.startRange.startRange.endRange,\n.flatpickr-day.endRange.startRange.endRange {\n  border-radius: 50px;\n}\n.flatpickr-day.inRange {\n  border-radius: 0;\n  -webkit-box-shadow: -5px 0 0 #98003c, 5px 0 0 #98003c;\n  box-shadow: -5px 0 0 #98003c, 5px 0 0 #98003c;\n}\n.flatpickr-day.disabled,\n.flatpickr-day.disabled:hover,\n.flatpickr-day.prevMonthDay,\n.flatpickr-day.nextMonthDay,\n.flatpickr-day.notAllowed,\n.flatpickr-day.notAllowed.prevMonthDay,\n.flatpickr-day.notAllowed.nextMonthDay {\n  color: rgba(255, 255, 255, 0.3);\n  background: transparent;\n  border-color: transparent;\n  cursor: default;\n}\n.flatpickr-day.disabled,\n.flatpickr-day.disabled:hover {\n  cursor: not-allowed;\n  color: rgba(255, 255, 255, 0.1);\n}\n.flatpickr-day.week.selected {\n  border-radius: 0;\n  -webkit-box-shadow: -5px 0 0 #80cbc4, 5px 0 0 #80cbc4;\n  box-shadow: -5px 0 0 #80cbc4, 5px 0 0 #80cbc4;\n}\n.flatpickr-day.hidden {\n  visibility: hidden;\n}\n.rangeMode .flatpickr-day {\n  margin-top: 1px;\n}\n.flatpickr-weekwrapper {\n  display: inline-block;\n  float: left;\n}\n.flatpickr-weekwrapper .flatpickr-weeks {\n  padding: 0 12px;\n  -webkit-box-shadow: 1px 0 0 #20222c;\n  box-shadow: 1px 0 0 #20222c;\n}\n.flatpickr-weekwrapper .flatpickr-weekday {\n  float: none;\n  width: 100%;\n  line-height: 28px;\n}\n.flatpickr-weekwrapper span.flatpickr-day,\n.flatpickr-weekwrapper span.flatpickr-day:hover {\n  display: block;\n  width: 100%;\n  max-width: none;\n  color: rgba(255, 255, 255, 0.3);\n  background: transparent;\n  cursor: default;\n  border: none;\n}\n.flatpickr-innerContainer {\n  display: block;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n}\n.flatpickr-rContainer {\n  display: inline-block;\n  padding: 0;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.flatpickr-time {\n  text-align: center;\n  outline: 0;\n  display: block;\n  height: 0;\n  line-height: 40px;\n  max-height: 40px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n.flatpickr-time:after {\n  content: "";\n  display: table;\n  clear: both;\n}\n.flatpickr-time .numInputWrapper {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n  -ms-flex: 1;\n  flex: 1;\n  width: 40%;\n  height: 40px;\n  float: left;\n}\n.flatpickr-time .numInputWrapper span.arrowUp:after {\n  border-bottom-color: rgba(255, 255, 255, 0.95);\n}\n.flatpickr-time .numInputWrapper span.arrowDown:after {\n  border-top-color: rgba(255, 255, 255, 0.95);\n}\n.flatpickr-time.hasSeconds .numInputWrapper {\n  width: 26%;\n}\n.flatpickr-time.time24hr .numInputWrapper {\n  width: 49%;\n}\n.flatpickr-time input {\n  background: transparent;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  border: 0;\n  border-radius: 0;\n  text-align: center;\n  margin: 0;\n  padding: 0;\n  height: inherit;\n  line-height: inherit;\n  color: rgba(255, 255, 255, 0.95);\n  font-size: 14px;\n  position: relative;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n}\n.flatpickr-time input.flatpickr-hour {\n  font-weight: bold;\n}\n.flatpickr-time input.flatpickr-minute,\n.flatpickr-time input.flatpickr-second {\n  font-weight: 400;\n}\n.flatpickr-time input:focus {\n  outline: 0;\n  border: 0;\n}\n.flatpickr-time .flatpickr-time-separator,\n.flatpickr-time .flatpickr-am-pm {\n  height: inherit;\n  display: inline-block;\n  float: left;\n  line-height: inherit;\n  color: rgba(255, 255, 255, 0.95);\n  font-weight: bold;\n  width: 2%;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n  align-self: center;\n}\n.flatpickr-time .flatpickr-am-pm {\n  outline: 0;\n  width: 18%;\n  cursor: pointer;\n  text-align: center;\n  font-weight: 400;\n}\n.flatpickr-time input:hover,\n.flatpickr-time .flatpickr-am-pm:hover,\n.flatpickr-time input:focus,\n.flatpickr-time .flatpickr-am-pm:focus {\n  background: #707999;\n}\n.flatpickr-input[readonly] {\n  cursor: pointer;\n}\n@-webkit-keyframes fpFadeInDown {\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -20px, 0);\n    transform: translate3d(0, -20px, 0);\n  }\n  to {\n    opacity: 1;\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n}\n@keyframes fpFadeInDown {\n  from {\n    opacity: 0;\n    -webkit-transform: translate3d(0, -20px, 0);\n    transform: translate3d(0, -20px, 0);\n  }\n  to {\n    opacity: 1;\n    -webkit-transform: translate3d(0, 0, 0);\n    transform: translate3d(0, 0, 0);\n  }\n}\n');class Qn extends Oe{constructor(e){super(),Ee(this,e,Xn,Jn,o,["value","placeholder","className","options"])}}function Kn(e){var n;return{c(){n=M("Create")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function et(e){var n;return{c(){n=M("Edit")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function nt(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v;function b(e,n){return n.defaultDate?et:Kn}var w=b(0,e),y=w(e),x=new xn({props:{errors:e.errors}});function S(n){e.input0_value_binding.call(null,n),o=!0,le(()=>o=!1)}let C={label:"Name",placeholder:"i.e. 'Autumn 1978'",required:!0};void 0!==e.name&&(C.value=e.name);var A=new Bn({props:C});function L(n){e.datepicker_value_binding.call(null,n),u=!0,le(()=>u=!1)}ne.push(()=>Me(A,"value",S));let P={placeholder:"Pick two dates below",className:"input",options:e.options};void 0!==e.defaultDate&&(P.value=e.defaultDate);var R=new Qn({props:P});return ne.push(()=>Me(R,"value",L)),R.$on("change",e.change_handler),{c(){n=I("h1"),y.c(),t=M(" semester"),r=T(),s=I("form"),x.$$.fragment.c(),i=T(),A.$$.fragment.c(),l=T(),(c=I("label")).textContent="Start and end dates",d=T(),R.$$.fragment.c(),p=T(),m=I("div"),(f=I("button")).textContent="Save semester",g=T(),h=I("input"),O(n,"class","title"),O(c,"class","label"),O(f,"type","submit"),O(f,"class","button is-primary"),q(f,"is-loading",e.loading),O(h,"type","reset"),O(h,"class","button"),h.value="Cancel",O(m,"class","buttons svelte-oih4d0"),s.noValidate=!0,O(s,"class","svelte-oih4d0"),v=[N(s,"submit",E(e.handleSubmit)),N(s,"reset",e.reset_handler)]},m(a,o){_(a,n,o),y.m(n,null),k(n,t),_(a,r,o),_(a,s,o),Te(x,s,null),k(s,i),Te(A,s,null),k(s,l),k(s,c),k(s,d),Te(R,s,null),k(s,p),k(s,m),k(m,f),e.button_binding(f),k(m,g),k(m,h),e.form_1_binding(s),$=!0},p(e,r){w!==(w=b(0,r))&&(y.d(1),(y=w(r))&&(y.c(),y.m(n,t)));var s={};e.errors&&(s.errors=r.errors),x.$set(s);var a={};!o&&e.name&&(a.value=r.name),A.$set(a);var i={};e.options&&(i.options=r.options),!u&&e.defaultDate&&(i.value=r.defaultDate),R.$set(i),e.loading&&q(f,"is-loading",r.loading)},i(e){$||($e(x.$$.fragment,e),$e(A.$$.fragment,e),$e(R.$$.fragment,e),$=!0)},o(e){ve(x.$$.fragment,e),ve(A.$$.fragment,e),ve(R.$$.fragment,e),$=!1},d(t){t&&D(n),y.d(),t&&(D(r),D(s)),Ae(x),Ae(A),Ae(R),e.button_binding(null),e.form_1_binding(null),a(v)}}}function tt(e,n,t){let r,s,a,i,{errors:o,loading:l,name:c="",defaultDate:d=null}=n;const u=Q(),p=e=>{2===e.length&&(a=e[0].toISOString(),i=new Date(e[1].setHours(23,59,59,999)).toISOString())};return e.$set=e=>{"errors"in e&&t("errors",o=e.errors),"loading"in e&&t("loading",l=e.loading),"name"in e&&t("name",c=e.name),"defaultDate"in e&&t("defaultDate",d=e.defaultDate)},e.$$.update=(e={saveButton:1,loading:1})=>{(e.saveButton||e.loading)&&r&&(r.disabled=l,t("saveButton",r),t("loading",l))},{saveButton:r,form:s,errors:o,loading:l,name:c,defaultDate:d,options:{inline:!0,mode:"range",enableTime:!1,altInput:!0,altFormat:"M j, Y",dateFormat:"Y-m-d"},handleChange:p,handleSubmit:()=>{s.checkValidity()?u("submit",{name:c,startDate:a,endDate:i}):je.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){K(e,n)},input0_value_binding:function(e){t("name",c=e)},datepicker_value_binding:function(e){t("defaultDate",d=e)},change_handler:function(e){return p(...e.detail)},button_binding:function(e){ne[e?"unshift":"push"](()=>{t("saveButton",r=e)})},form_1_binding:function(e){ne[e?"unshift":"push"](()=>{t("form",s=e)})}}}class rt extends Oe{constructor(e){super(),Ee(this,e,tt,nt,o,["errors","loading","name","defaultDate"])}}function st(e){var n,t=new rt({props:{name:e.name,defaultDate:e.defaultDate,errors:e.errors,loading:e.loading}});return t.$on("reset",e.reset),t.$on("submit",e.save),{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.name&&(r.name=n.name),e.defaultDate&&(r.defaultDate=n.defaultDate),e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function at(e,n,t){let{id:r,open:s=!1,semester:a={},name:i="",startDate:o="",endDate:l=""}=n,c=!1,d="",u=null;J(()=>{t("defaultDate",u=o&&l?[o,l]:null)});const p=()=>{t("errors",d=""),t("open",s=!1)};return e.$set=e=>{"id"in e&&t("id",r=e.id),"open"in e&&t("open",s=e.open),"semester"in e&&t("semester",a=e.semester),"name"in e&&t("name",i=e.name),"startDate"in e&&t("startDate",o=e.startDate),"endDate"in e&&t("endDate",l=e.endDate)},{id:r,open:s,semester:a,name:i,startDate:o,endDate:l,loading:c,errors:d,defaultDate:u,reset:p,save:async({detail:e})=>{t("loading",c=!0);try{await vn.patch(r,e),je.add({text:`Saved semester '${e.name}'`,type:"success"}),p()}catch(e){t("errors",d=e),je.add({text:"Could not update semester.",type:"danger"})}finally{t("loading",c=!1)}}}}class it extends Oe{constructor(e){super(),Ee(this,e,at,st,o,["id","open","semester","name","startDate","endDate"])}}function ot(n){var t,r,s,a;return{c(){t=I("button"),O(r=I("i"),"class",s="fas fa-"+n.name+" svelte-1vxok5w"),R(r,"--color",n.color),t.disabled=n.disabled,O(t,"class","svelte-1vxok5w"),a=N(t,"click",n.click_handler)},m(e,n){_(e,t,n),k(t,r)},p(e,n){e.name&&s!==(s="fas fa-"+n.name+" svelte-1vxok5w")&&O(r,"class",s),e.color&&R(r,"--color",n.color),e.disabled&&(t.disabled=n.disabled)},i:e,o:e,d(e){e&&D(t),a()}}}function lt(e,n,t){let{name:r="",color:s="white",disabled:a=!1}=n;return e.$set=e=>{"name"in e&&t("name",r=e.name),"color"in e&&t("color",s=e.color),"disabled"in e&&t("disabled",a=e.disabled)},{name:r,color:s,disabled:a,click_handler:function(n){K(e,n)}}}class ct extends Oe{constructor(e){super(),Ee(this,e,lt,ot,o,["name","color","disabled"])}}function dt(e){var n,r,s=[e.semester];function a(t){e.editsemester_open_binding.call(null,t),n=!0,le(()=>n=!1)}let i={};for(var o=0;o<s.length;o+=1)i=t(i,s[o]);void 0!==e.showEdit&&(i.open=e.showEdit);var l=new it({props:i});return ne.push(()=>Me(l,"open",a)),{c(){l.$$.fragment.c()},m(e,n){Te(l,e,n),r=!0},p(e,t){var r=e.semester?Ce(s,[t.semester]):{};!n&&e.showEdit&&(r.open=t.showEdit),l.$set(r)},i(e){r||($e(l.$$.fragment,e),r=!0)},o(e){ve(l.$$.fragment,e),r=!1},d(e){Ae(l,e)}}}function ut(e){var n,t,r=e.showEdit&&dt(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.showEdit?r?(r.p(e,t),$e(r,1)):((r=dt(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function pt(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w=e.semester.name+"",y=new ct({props:{name:"minus"}});y.$on("click",e.showDeleteDialog);var x=new ct({props:{name:"edit"}});function S(n){e.deleteitem_open_binding.call(null,n),h=!0,le(()=>h=!1)}x.$on("click",e.click_handler);let C={id:e.semester.id,store:vn,type:"semester",name:e.semester.name};void 0!==e.confirmDelete&&(C.open=e.confirmDelete);var A=new Ln({props:C});function N(n){e.modal_open_binding.call(null,n),v=!0,le(()=>v=!1)}ne.push(()=>Me(A,"open",S));let E={$$slots:{default:[ut]},$$scope:{ctx:e}};void 0!==e.showEdit&&(E.open=e.showEdit);var P=new Mn({props:E});return ne.push(()=>Me(P,"open",N)),{c(){n=I("li"),t=I("div"),r=I("div"),s=I("span"),a=M(w),i=T(),o=I("span"),l=M(e.startDate),c=M(" to "),d=M(e.endDate),u=T(),p=I("div"),y.$$.fragment.c(),m=T(),x.$$.fragment.c(),f=T(),g=I("div"),A.$$.fragment.c(),$=T(),P.$$.fragment.c(),O(s,"class","name svelte-1aag63x"),O(o,"class","date svelte-1aag63x"),O(r,"class","info"),O(p,"class","buttons svelte-1aag63x"),O(t,"class","firstrow svelte-1aag63x"),O(g,"class","action"),O(n,"class","svelte-1aag63x")},m(e,h){_(e,n,h),k(n,t),k(t,r),k(r,s),k(s,a),k(r,i),k(r,o),k(o,l),k(o,c),k(o,d),k(t,u),k(t,p),Te(y,p,null),k(p,m),Te(x,p,null),k(n,f),k(n,g),Te(A,g,null),k(g,$),Te(P,g,null),b=!0},p(e,n){b&&!e.semester||w===(w=n.semester.name+"")||L(a,w),b&&!e.startDate||L(l,n.startDate),b&&!e.endDate||L(d,n.endDate);var t={};e.semester&&(t.id=n.semester.id),e.semesters&&(t.store=vn),e.semester&&(t.name=n.semester.name),!h&&e.confirmDelete&&(t.open=n.confirmDelete),A.$set(t);var r={};(e.$$scope||e.showEdit||e.semester)&&(r.$$scope={changed:e,ctx:n}),!v&&e.showEdit&&(r.open=n.showEdit),P.$set(r)},i(e){b||($e(y.$$.fragment,e),$e(x.$$.fragment,e),$e(A.$$.fragment,e),$e(P.$$.fragment,e),b=!0)},o(e){ve(y.$$.fragment,e),ve(x.$$.fragment,e),ve(A.$$.fragment,e),ve(P.$$.fragment,e),b=!1},d(e){e&&D(n),Ae(y),Ae(x),Ae(A),Ae(P)}}}function mt(e,n,t){let r=!1,s=!1,{semester:a={}}=n;let i,o;return e.$set=e=>{"semester"in e&&t("semester",a=e.semester)},e.$$.update=(e={semester:1})=>{e.semester&&t("startDate",i=new Date(a.startDate).toDateString()),e.semester&&t("endDate",o=new Date(a.endDate).toDateString())},{confirmDelete:r,showEdit:s,semester:a,showDeleteDialog:()=>{t("confirmDelete",r=!0)},startDate:i,endDate:o,click_handler:function(){t("showEdit",s=!0)},deleteitem_open_binding:function(e){t("confirmDelete",r=e)},editsemester_open_binding:function(e){t("showEdit",s=e)},modal_open_binding:function(e){t("showEdit",s=e)}}}class ft extends Oe{constructor(e){super(),Ee(this,e,mt,pt,o,["semester"])}}function gt(e,n,t){const r=Object.create(e);return r.semester=n[t],r}function ht(e){var n,t,r,s,a,i,o,l=e.$semesters.length+"",c=[],d=new Map,u=e.$semesters;const p=e=>e.semester.id;for(var m=0;m<u.length;m+=1){let n=gt(e,u,m),t=p(n);d.set(t,c[m]=$t(t,n))}return{c(){for(n=I("div"),t=I("p"),r=M("There are "),s=M(l),a=M(" semesters in the system."),i=T(),m=0;m<c.length;m+=1)c[m].c();O(t,"class","svelte-1ec7ahu"),O(n,"class","semester-list svelte-1ec7ahu")},m(e,l){for(_(e,n,l),k(n,t),k(t,r),k(t,s),k(t,a),k(n,i),m=0;m<c.length;m+=1)c[m].m(n,null);o=!0},p(e,t){o&&!e.$semesters||l===(l=t.$semesters.length+"")||L(s,l);const r=t.$semesters;ge(),c=Ie(c,e,p,1,t,r,d,n,Se,$t,null,gt),he()},i(e){if(!o){for(var n=0;n<u.length;n+=1)$e(c[n]);o=!0}},o(e){for(m=0;m<c.length;m+=1)ve(c[m]);o=!1},d(e){for(e&&D(n),m=0;m<c.length;m+=1)c[m].d()}}}function $t(e,n){var t,r,s=new ft({props:{semester:n.semester}});return{key:e,first:null,c(){t=A(),s.$$.fragment.c(),this.first=t},m(e,n){_(e,t,n),Te(s,e,n),r=!0},p(e,n){var t={};e.$semesters&&(t.semester=n.semester),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&D(t),Ae(s,e)}}}function vt(e){var n,t,r=e.$semesters&&e.$semesters.length&&ht(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.$semesters&&t.$semesters.length?r?(r.p(e,t),$e(r,1)):((r=ht(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function bt(e,n,t){let r;return d(e,vn,e=>{t("$semesters",r=e)}),{$semesters:r}}class wt extends Oe{constructor(e){super(),Ee(this,e,bt,vt,o,[])}}function yt(e){var n,t=new rt({props:{errors:e.errors,loading:e.loading}});return t.$on("reset",e.reset),t.$on("submit",e.save),{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function xt(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,le(()=>r=!1)}let o={$$slots:{default:[yt]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new Mn({props:o});return ne.push(()=>Me(l,"open",i)),{c(){(n=I("button")).textContent="Add semester",t=T(),l.$$.fragment.c(),O(n,"class","button is-primary"),a=N(n,"click",e.click_handler)},m(e,r){_(e,n,r),_(e,t,r),Te(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||($e(l.$$.fragment,e),s=!0)},o(e){ve(l.$$.fragment,e),s=!1},d(e){e&&(D(n),D(t)),Ae(l,e),a()}}}function kt(e,n,t){let r=!1,s="",a=!1;const i=()=>{t("errors",s=""),t("open",a=!1)};return{loading:r,errors:s,open:a,reset:i,save:async({detail:e})=>{t("loading",r=!0);try{await vn.create(e),je.add({text:`Saved new semester '${e.name}'`,type:"success"}),i()}catch(e){t("errors",s=e),je.add({text:"Could not save new semester.",type:"danger"})}finally{t("loading",r=!1)}},click_handler:function(){t("open",a=!0)},modal_open_binding:function(e){t("open",a=e)}}}class _t extends Oe{constructor(e){super(),Ee(this,e,kt,xt,o,[])}}function Dt(n){var t,r,s,a,i,o,l,c;return{c(){t=I("div"),r=C("svg"),s=C("path"),a=T(),i=I("p"),o=M("Loading "),l=M(n.what),c=M(" ..."),O(s,"fill","currentColor"),O(s,"d","M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z"),O(r,"aria-hidden","true"),O(r,"focusable","false"),O(r,"data-prefix","fas"),O(r,"data-icon","circle-notch"),O(r,"class","svg-inline--fa fa-circle-notch fa-w-16 fa-spin spinner svelte-16ssi7j"),O(r,"role","img"),O(r,"xmlns","http://www.w3.org/2000/svg"),O(r,"viewBox","0 0 512 512"),O(t,"class","svelte-16ssi7j")},m(e,n){_(e,t,n),k(t,r),k(r,s),k(t,a),k(t,i),k(i,o),k(i,l),k(i,c)},p(e,n){e.what&&L(l,n.what)},i:e,o:e,d(e){e&&D(t)}}}function St(e,n,t){let{what:r="things"}=n;return e.$set=e=>{"what"in e&&t("what",r=e.what)},{what:r}}class It extends Oe{constructor(e){super(),Ee(this,e,St,Dt,o,["what"])}}function Ct(e){var n,t=new It({props:{what:"semesters"}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Mt(e){var n,t,r=new _t({}),s=new wt({});return{c(){r.$$.fragment.c(),n=T(),s.$$.fragment.c()},m(e,a){Te(r,e,a),_(e,n,a),Te(s,e,a),t=!0},i(e){t||($e(r.$$.fragment,e),$e(s.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),ve(s.$$.fragment,e),t=!1},d(e){Ae(r,e),e&&D(n),Ae(s,e)}}}function Tt(e){var n,t,r,s,a,i,o,l,c=new xn({props:{errors:e.errors}}),d=[Mt,Ct],u=[];function p(e,n){return n.$semesters?0:n.errors?-1:1}return~(a=p(0,e))&&(i=u[a]=d[a](e)),{c(){n=T(),(t=I("h1")).textContent="Semesters",r=T(),c.$$.fragment.c(),s=T(),i&&i.c(),o=A(),document.title="Semesters",O(t,"class","title")},m(e,i){_(e,n,i),_(e,t,i),_(e,r,i),Te(c,e,i),_(e,s,i),~a&&u[a].m(e,i),_(e,o,i),l=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),c.$set(t);var r=a;(a=p(0,n))!==r&&(i&&(ge(),ve(u[r],1,1,()=>{u[r]=null}),he()),~a?((i=u[a])||(i=u[a]=d[a](n)).c(),$e(i,1),i.m(o.parentNode,o)):i=null)},i(e){l||($e(c.$$.fragment,e),$e(i),l=!0)},o(e){ve(c.$$.fragment,e),ve(i),l=!1},d(e){e&&(D(n),D(t),D(r)),Ae(c,e),e&&D(s),~a&&u[a].d(e),e&&D(o)}}}function At(e,n,t){let r;d(e,vn,e=>{t("$semesters",r=e)});let s="";return J(async()=>{try{await vn.get()}catch(e){t("errors",s=e),je.add({text:"Couldn't get semesters from server.",type:"danger"})}}),{errors:s,$semesters:r}}const Nt=(()=>{const{subscribe:e,set:n,update:t}=Re();return{subscribe:e,get:async(e,t)=>{const r=await en("\n  query getStudents ($orderBy: StudentOrderByInput, $searchString: String) {\n    students (orderBy: $orderBy, searchString: $searchString){\n      id\n      chineseName\n      pinyinName\n      englishName\n      gender\n      birthdate\n      pointsTally\n      groups {\n        id\n        name\n        semester {\n          id\n          name\n        }\n      }\n    }\n  }\n",{orderBy:e,searchString:t});n(r.students)},sort:(e,n)=>{t(t=>t.slice().sort((t,r)=>t[e]?t[e].localeCompare(r[e]||"")*n:1))},create:async(e,n)=>{const r=await en(" \nmutation createStudent($groupId: ID!, $input: StudentInput!) {\n  createStudent(input: $input, groupId: $groupId) {\n    id\n    chineseName\n    englishName\n    pinyinName\n    birthdate\n    gender\n    pointsTally\n    groups {\n      id\n      name\n      semester {\n        id\n        name\n      }\n    }\n  }\n}\n",{input:e,groupId:n});t(e=>e&&[...e,r.createStudent])},remove:async e=>{const n=await en(" \nmutation deleteStudent($id: ID!) {\n  deleteStudent(id:$id) {\n    id\n    chineseName\n    englishName\n  }\n}\n",{id:e});t(e=>e.filter(e=>n.deleteStudent.id!==e.id))},patch:async(e,n)=>{const r=await en("\nmutation updateStudent($id: ID!, $input: StudentInput!) {\n  updateStudent(input: $input, id: $id) {\n    id\n    chineseName\n    englishName\n    pinyinName\n    birthdate\n    gender\n    pointsTally\n    groups {\n      id\n      name\n      semester {\n        id\n        name\n      }\n    }\n  }\n}",{id:e,input:n});t(n=>n.map(n=>n.id!==e?n:r.updateStudent))},moveToDifferentGroup:async(e,n,r)=>{const s=await en("\nmutation moveStudentToDifferentGroup($oldGroupId: ID!, $newGroupId: ID!, $studentId: ID! ) {\n  moveStudentToDifferentGroup(studentId: $studentId, oldGroupId: $oldGroupId, newGroupId: $newGroupId) {\n    id\n    chineseName\n    englishName\n    pinyinName\n    birthdate\n    gender\n    pointsTally\n    groups {\n      id\n      name\n      semester {\n        id\n        name\n      }\n    }\n  }\n}\n",{studentId:e,oldGroupId:n,newGroupId:r});t(n=>n.map(n=>n.id!==e?n:s.moveStudentToDifferentGroup))},addStudentToGroup:async(e,n)=>{const r=await en("\nmutation addStudentToGroup($groupId: ID!, $studentId: ID! ) {\n  addStudentToGroup(studentId: $studentId, groupId: $groupId) {\n    id\n    chineseName\n    englishName\n    pinyinName\n    birthdate\n    gender\n    pointsTally\n    groups {\n      id\n      name\n      semester {\n        id\n        name\n      }\n    }\n  }\n}\n",{studentId:e,groupId:n});t(n=>n.map(n=>n.id!==e?n:r.addStudentToGroup))},removeStudentFromGroup:async(e,n)=>{const r=await en("\nmutation removeStudentFromGroup($groupId: ID!, $studentId: ID! ) {\n  removeStudentFromGroup(studentId: $studentId, groupId: $groupId) {\n    id\n    chineseName\n    englishName\n    pinyinName\n    birthdate\n    gender\n    pointsTally\n    groups {\n      id\n      name\n      semester {\n        id\n        name\n      }\n    }\n  }\n}\n",{studentId:e,groupId:n});t(n=>n.map(n=>n.id!==e?n:r.removeStudentFromGroup))}}})(),Et="\n{\n  activeGroups {\n    id\n    name\n    semester {\n      name\n    }\n  }\n}\n",Ot="\n{\n  currentSemester {\n    id\n    name\n    groups {\n      id\n      name\n    }\n  }\n  nextSemester {\n    id\n    name\n    groups {\n      id\n      name\n    }\n  }\n}\n";function Lt(e,n,t){const r=Object.create(e);return r.group=n[t],r}function Pt(n){var t;return{c(){(t=I("option")).textContent="Loading groups ...",t.__value="Loading groups ...",t.value=t.__value},m(e,n){_(e,t,n)},p:e,d(e){e&&D(t)}}}function Rt(e){var n;function t(e,n){return n.groups.length?jt:zt}var r=t(0,e),s=r(e);return{c(){s.c(),n=A()},m(e,t){s.m(e,t),_(e,n,t)},p(e,a){r===(r=t(0,a))&&s?s.p(e,a):(s.d(1),(s=r(a))&&(s.c(),s.m(n.parentNode,n)))},d(e){s.d(e),e&&D(n)}}}function zt(n){var t;return{c(){(t=I("option")).textContent="No active groups",t.__value="No active groups",t.value=t.__value},m(e,n){_(e,t,n)},p:e,d(e){e&&D(t)}}}function jt(e){for(var n,t,r=e.groups,s=[],a=0;a<r.length;a+=1)s[a]=qt(Lt(e,r,a));return{c(){(n=I("option")).textContent="Select group...";for(var e=0;e<s.length;e+=1)s[e].c();t=A(),n.__value="",n.value=n.__value},m(e,r){_(e,n,r);for(var a=0;a<s.length;a+=1)s[a].m(e,r);_(e,t,r)},p(e,n){if(e.groups){r=n.groups;for(var a=0;a<r.length;a+=1){const i=Lt(n,r,a);s[a]?s[a].p(e,i):(s[a]=qt(i),s[a].c(),s[a].m(t.parentNode,t))}for(;a<s.length;a+=1)s[a].d(1);s.length=r.length}},d(e){e&&D(n),S(s,e),e&&D(t)}}}function qt(e){var n,t,r,s,a,i=e.group.semester?e.group.semester.name+" ":"",o=e.group.name+"";return{c(){n=I("option"),t=M(i),r=M(o),s=M(" class"),n.__value=a=e.group.id,n.value=n.__value},m(e,a){_(e,n,a),k(n,t),k(n,r),k(n,s)},p(e,s){e.groups&&i!==(i=s.group.semester?s.group.semester.name+" ":"")&&L(t,i),e.groups&&o!==(o=s.group.name+"")&&L(r,o),e.groups&&a!==(a=s.group.id)&&(n.__value=a),n.value=n.__value},d(e){e&&D(n)}}}function Ht(e){var n,t,r=JSON.stringify(e.errors)+"";return{c(){n=I("p"),t=M(r),O(n,"class","help is-danger")},m(e,r){_(e,n,r),k(n,t)},p(e,n){e.errors&&r!==(r=JSON.stringify(n.errors)+"")&&L(t,r)},d(e){e&&D(n)}}}function Ft(n){var t,r,s,i,o;function l(e,n){return n.groups?Rt:Pt}var c=l(0,n),d=c(n),u=n.errors&&Ht(n);return{c(){t=I("div"),r=I("div"),s=I("select"),d.c(),i=T(),u&&u.c(),void 0===n.groupId&&oe(()=>n.select_change_handler.call(s)),s.required=n.required,q(s,"is-loading",!n.groups),O(r,"class","select"),O(t,"class","field svelte-16aen4b"),o=[N(s,"change",n.select_change_handler),N(s,"invalid",E(n.checkValidity))]},m(e,a){_(e,t,a),k(t,r),k(r,s),d.m(s,null),z(s,n.groupId),n.select_binding(s),k(t,i),u&&u.m(t,null)},p(e,n){c===(c=l(0,n))&&d?d.p(e,n):(d.d(1),(d=c(n))&&(d.c(),d.m(s,null))),e.groupId&&z(s,n.groupId),e.required&&(s.required=n.required),e.groups&&q(s,"is-loading",!n.groups),n.errors?u?u.p(e,n):((u=Ht(n)).c(),u.m(t,null)):u&&(u.d(1),u=null)},i:e,o:e,d(e){e&&D(t),d.d(),n.select_binding(null),u&&u.d(),a(o)}}}function Wt(e,n,t){let r,{groups:s=null}=n,a="",{groupId:i="",required:o=!1}=n;return J(async()=>{if(!s)try{const e=await en(Et);t("groups",s=e?e.activeGroups:[])}catch(e){t("errors",a=e)}}),e.$set=e=>{"groups"in e&&t("groups",s=e.groups),"groupId"in e&&t("groupId",i=e.groupId),"required"in e&&t("required",o=e.required)},{groups:s,selectElement:r,errors:a,groupId:i,required:o,checkValidity:function(){t("errors",a=!r.validity.valid&&r.validationMessage?r.validationMessage:"")},select_change_handler:function(){i=j(this),t("groupId",i)},select_binding:function(e){ne[e?"unshift":"push"](()=>{t("selectElement",r=e)})}}}class Yt extends Oe{constructor(e){super(),Ee(this,e,Wt,Ft,o,["groups","groupId","required"])}}function Ut(e){var n;return{c(){n=M("Add")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function Bt(e){var n;return{c(){n=M("Edit")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function Gt(e){var n,t=new xn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Zt(e){var n,t;function r(t){e.groupselect_groupId_binding.call(null,t),n=!0,le(()=>n=!1)}let s={};void 0!==e.groupId&&(s.groupId=e.groupId);var a=new Yt({props:s});return ne.push(()=>Me(a,"groupId",r)),{c(){a.$$.fragment.c()},m(e,n){Te(a,e,n),t=!0},p(e,t){var r={};!n&&e.groupId&&(r.groupId=t.groupId),a.$set(r)},i(e){t||($e(a.$$.fragment,e),t=!0)},o(e){ve(a.$$.fragment,e),t=!1},d(e){Ae(a,e)}}}function Vt(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w,y,x,S,C,A,L,P,R,z,j;function H(e,n){return n.id?Bt:Ut}var F=H(0,e),W=F(e),Y=e.errors&&Gt(e);function U(n){e.input0_value_binding.call(null,n),o=!0,le(()=>o=!1)}let B={label:"Chinese name",placeholder:"孙悟空"};void 0!==e.chineseName&&(B.value=e.chineseName);var G=new Bn({props:B});function Z(n){e.input1_value_binding.call(null,n),c=!0,le(()=>c=!1)}ne.push(()=>Me(G,"value",U));let V={label:"Pinyin name",placeholder:"Sūn Wùkōng"};void 0!==e.pinyinName&&(V.value=e.pinyinName);var J=new Bn({props:V});function X(n){e.input2_value_binding.call(null,n),u=!0,le(()=>u=!1)}ne.push(()=>Me(J,"value",Z));let Q={label:"English name",placeholder:"Monkey King"};void 0!==e.englishName&&(Q.value=e.englishName);var K=new Bn({props:Q});function ee(n){e.input3_value_binding.call(null,n),m=!0,le(()=>m=!1)}ne.push(()=>Me(K,"value",X));let te={type:"date",label:"Birthdate",max:e.todaysDate};void 0!==e.birthdate&&(te.value=e.birthdate);var re=new Bn({props:te});ne.push(()=>Me(re,"value",ee));var se=!e.id&&Zt(e);return{c(){n=I("h2"),W.c(),t=M(" a student"),r=T(),s=I("form"),Y&&Y.c(),i=T(),G.$$.fragment.c(),l=T(),J.$$.fragment.c(),d=T(),K.$$.fragment.c(),p=T(),re.$$.fragment.c(),f=T(),g=I("div"),h=I("label"),$=I("input"),v=M("\n\t\t\t\tMale"),b=T(),w=I("label"),y=I("input"),x=M("\n\t\t\t\tFemale"),S=T(),se&&se.c(),C=T(),A=I("div"),(L=I("button")).textContent="Save student",P=T(),R=I("input"),O(n,"class","title"),e.$$binding_groups[0].push($),O($,"type","radio"),$.__value="M",$.value=$.__value,O(h,"class","radio"),e.$$binding_groups[0].push(y),O(y,"type","radio"),y.__value="F",y.value=y.__value,O(w,"class","radio"),O(g,"class","control genders svelte-dhu3f3"),O(L,"type","submit"),O(L,"class","button is-primary"),q(L,"is-loading",e.loading),O(R,"type","reset"),O(R,"class","button"),R.value="Cancel",O(A,"class","buttons svelte-dhu3f3"),s.noValidate=!0,j=[N($,"change",e.input4_change_handler),N(y,"change",e.input5_change_handler),N(s,"submit",E(e.handleSubmit)),N(s,"reset",e.reset_handler)]},m(a,o){_(a,n,o),W.m(n,null),k(n,t),_(a,r,o),_(a,s,o),Y&&Y.m(s,null),k(s,i),Te(G,s,null),k(s,l),Te(J,s,null),k(s,d),Te(K,s,null),k(s,p),Te(re,s,null),k(s,f),k(s,g),k(g,h),k(h,$),$.checked=$.__value===e.gender,k(h,v),k(g,b),k(g,w),k(w,y),y.checked=y.__value===e.gender,k(w,x),k(s,S),se&&se.m(s,null),k(s,C),k(s,A),k(A,L),e.button_binding(L),k(A,P),k(A,R),e.form_1_binding(s),z=!0},p(e,r){F!==(F=H(0,r))&&(W.d(1),(W=F(r))&&(W.c(),W.m(n,t))),r.errors?Y?(Y.p(e,r),$e(Y,1)):((Y=Gt(r)).c(),$e(Y,1),Y.m(s,i)):Y&&(ge(),ve(Y,1,1,()=>{Y=null}),he());var a={};!o&&e.chineseName&&(a.value=r.chineseName),G.$set(a);var l={};!c&&e.pinyinName&&(l.value=r.pinyinName),J.$set(l);var d={};!u&&e.englishName&&(d.value=r.englishName),K.$set(d);var p={};e.todaysDate&&(p.max=r.todaysDate),!m&&e.birthdate&&(p.value=r.birthdate),re.$set(p),e.gender&&($.checked=$.__value===r.gender),e.gender&&(y.checked=y.__value===r.gender),r.id?se&&(ge(),ve(se,1,1,()=>{se=null}),he()):se?(se.p(e,r),$e(se,1)):((se=Zt(r)).c(),$e(se,1),se.m(s,C)),e.loading&&q(L,"is-loading",r.loading)},i(e){z||($e(Y),$e(G.$$.fragment,e),$e(J.$$.fragment,e),$e(K.$$.fragment,e),$e(re.$$.fragment,e),$e(se),z=!0)},o(e){ve(Y),ve(G.$$.fragment,e),ve(J.$$.fragment,e),ve(K.$$.fragment,e),ve(re.$$.fragment,e),ve(se),z=!1},d(t){t&&D(n),W.d(),t&&(D(r),D(s)),Y&&Y.d(),Ae(G),Ae(J),Ae(K),Ae(re),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf($),1),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf(y),1),se&&se.d(),e.button_binding(null),e.form_1_binding(null),a(j)}}}function Jt(e,n,t){const r=Q();let s,a,{chineseName:i="",pinyinName:o="",englishName:l="",birthdate:c=null,groupId:d=null,id:u=null,loading:p=!1,errors:m,groups:f=[],gender:g=null}=n;const h=(new Date).toISOString().slice(0,10);return e.$set=e=>{"chineseName"in e&&t("chineseName",i=e.chineseName),"pinyinName"in e&&t("pinyinName",o=e.pinyinName),"englishName"in e&&t("englishName",l=e.englishName),"birthdate"in e&&t("birthdate",c=e.birthdate),"groupId"in e&&t("groupId",d=e.groupId),"id"in e&&t("id",u=e.id),"loading"in e&&t("loading",p=e.loading),"errors"in e&&t("errors",m=e.errors),"groups"in e&&t("groups",f=e.groups),"gender"in e&&t("gender",g=e.gender)},e.$$.update=(e={saveButton:1,loading:1})=>{(e.saveButton||e.loading)&&a&&(a.disabled=p,t("saveButton",a),t("loading",p))},{chineseName:i,pinyinName:o,englishName:l,birthdate:c,groupId:d,id:u,loading:p,errors:m,groups:f,gender:g,form:s,saveButton:a,todaysDate:h,handleSubmit:()=>{s.checkValidity()?r("submit",{id:u,chineseName:i,birthdate:c,englishName:l,pinyinName:o,gender:g,groupId:d}):je.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){K(e,n)},input0_value_binding:function(e){t("chineseName",i=e)},input1_value_binding:function(e){t("pinyinName",o=e)},input2_value_binding:function(e){t("englishName",l=e)},input3_value_binding:function(e){t("birthdate",c=e)},input4_change_handler:function(){g=this.__value,t("gender",g)},input5_change_handler:function(){g=this.__value,t("gender",g)},groupselect_groupId_binding:function(e){t("groupId",d=e)},button_binding:function(e){ne[e?"unshift":"push"](()=>{t("saveButton",a=e)})},form_1_binding:function(e){ne[e?"unshift":"push"](()=>{t("form",s=e)})},$$binding_groups:[[]]}}class Xt extends Oe{constructor(e){super(),Ee(this,e,Jt,Vt,o,["chineseName","pinyinName","englishName","birthdate","groupId","id","loading","errors","groups","gender"])}}function Qt(e){var n,r=[{errors:e.errors},{loading:e.loading},e.student,{birthdate:e.student.birthdate&&e.student.birthdate.slice(0,10)}];let s={};for(var a=0;a<r.length;a+=1)s=t(s,r[a]);var i=new Xt({props:s});return i.$on("reset",e.reset),i.$on("submit",e.save),{c(){i.$$.fragment.c()},m(e,t){Te(i,e,t),n=!0},p(e,n){var t=e.errors||e.loading||e.student?Ce(r,[e.errors&&{errors:n.errors},e.loading&&{loading:n.loading},e.student&&n.student,e.student&&{birthdate:n.student.birthdate&&n.student.birthdate.slice(0,10)}]):{};i.$set(t)},i(e){n||($e(i.$$.fragment,e),n=!0)},o(e){ve(i.$$.fragment,e),n=!1},d(e){Ae(i,e)}}}function Kt(e,n,t){let{open:r=!1}=n,s=null,a=!1,{student:i}=n;const o=()=>{t("errors",s=null),t("open",r=!1)};return e.$set=e=>{"open"in e&&t("open",r=e.open),"student"in e&&t("student",i=e.student)},{open:r,errors:s,loading:a,student:i,reset:o,save:async({detail:e})=>{const{id:n,groupId:r,...i}=e;t("loading",a=!0);try{await Nt.patch(n,i),je.add({text:`Saved changes to student: '${e.englishName}'`,type:"success"}),o()}catch(e){t("errors",s=e),je.add({text:"Could not save changes to student",type:"danger"})}finally{t("loading",a=!1)}}}}class er extends Oe{constructor(e){super(),Ee(this,e,Kt,Qt,o,["open","student"])}}function nr(e,n,t){const r=Object.create(e);return r.group=n[t],r}function tr(e,n,t){const r=Object.create(e);return r.group=n[t],r}function rr(e){var n,t=e.error+"";return{c(){n=M(t)},m(e,t){_(e,n,t)},p(e,r){e.semesters&&t!==(t=r.error+"")&&L(n,t)},d(e){e&&D(n)}}}function sr(e){var n,t,r=e.result&&e.result.currentSemester&&ar(e),s=e.result&&e.result.nextSemester&&or(e);return{c(){r&&r.c(),n=T(),s&&s.c(),t=A()},m(e,a){r&&r.m(e,a),_(e,n,a),s&&s.m(e,a),_(e,t,a)},p(e,a){a.result&&a.result.currentSemester?r?r.p(e,a):((r=ar(a)).c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null),a.result&&a.result.nextSemester?s?s.p(e,a):((s=or(a)).c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(e){r&&r.d(e),e&&D(n),s&&s.d(e),e&&D(t)}}}function ar(e){for(var n,t,r,s,i,o,l,c=e.result.currentSemester.groups,d=[],u=0;u<c.length;u+=1)d[u]=ir(tr(e,c,u));function p(){return e.change_handler(e)}return{c(){(n=I("label")).textContent="Current semester",t=T(),r=I("div"),s=I("div"),i=I("select"),(o=I("option")).textContent="none";for(var a=0;a<d.length;a+=1)d[a].c();O(n,"class","label svelte-iubj27"),o.__value="",o.value=o.__value,void 0===e.currentSemester&&oe(()=>e.select_change_handler.call(i)),O(s,"class","select"),q(s,"is-loading",e.currentLoading),O(r,"class","control svelte-iubj27"),l=[N(i,"change",e.select_change_handler),N(i,"change",p)]},m(a,l){_(a,n,l),_(a,t,l),_(a,r,l),k(r,s),k(s,i),k(i,o);for(var c=0;c<d.length;c+=1)d[c].m(i,null);z(i,e.currentSemester),e.select_binding(i)},p(n,t){if(e=t,n.semesters||n.isInGroup){c=e.result.currentSemester.groups;for(var r=0;r<c.length;r+=1){const t=tr(e,c,r);d[r]?d[r].p(n,t):(d[r]=ir(t),d[r].c(),d[r].m(i,null))}for(;r<d.length;r+=1)d[r].d(1);d.length=c.length}n.currentSemester&&z(i,e.currentSemester),n.currentLoading&&q(s,"is-loading",e.currentLoading)},d(s){s&&(D(n),D(t),D(r)),S(d,s),e.select_binding(null),a(l)}}}function ir(e){var n,t,r,s,a=e.group.name+"";return{c(){n=I("option"),t=M(a),n.__value=r=e.group.id,n.value=n.__value,n.selected=s=e.isInGroup(e.group.id)},m(e,r){_(e,n,r),k(n,t)},p(e,i){e.semesters&&a!==(a=i.group.name+"")&&L(t,a),e.semesters&&r!==(r=i.group.id)&&(n.__value=r),n.value=n.__value,e.semesters&&s!==(s=i.isInGroup(i.group.id))&&(n.selected=s)},d(e){e&&D(n)}}}function or(e){for(var n,t,r,s,i,o,l,c,d=e.result.nextSemester.name+"",u=e.result.nextSemester.groups,p=[],m=0;m<u.length;m+=1)p[m]=lr(nr(e,u,m));function f(){return e.change_handler_1(e)}return{c(){n=I("label"),t=M(d),r=T(),s=I("div"),i=I("div"),o=I("select"),(l=I("option")).textContent="none";for(var a=0;a<p.length;a+=1)p[a].c();O(n,"class","label svelte-iubj27"),l.__value="",l.value=l.__value,void 0===e.nextSemester&&oe(()=>e.select_change_handler_1.call(o)),O(i,"class","select"),q(i,"is-loading",e.nextLoading),O(s,"class","control svelte-iubj27"),c=[N(o,"change",e.select_change_handler_1),N(o,"change",f)]},m(a,c){_(a,n,c),k(n,t),_(a,r,c),_(a,s,c),k(s,i),k(i,o),k(o,l);for(var d=0;d<p.length;d+=1)p[d].m(o,null);z(o,e.nextSemester),e.select_binding_1(o)},p(n,r){if(e=r,n.semesters&&d!==(d=e.result.nextSemester.name+"")&&L(t,d),n.semesters||n.isInGroup){u=e.result.nextSemester.groups;for(var s=0;s<u.length;s+=1){const t=nr(e,u,s);p[s]?p[s].p(n,t):(p[s]=lr(t),p[s].c(),p[s].m(o,null))}for(;s<p.length;s+=1)p[s].d(1);p.length=u.length}n.nextSemester&&z(o,e.nextSemester),n.nextLoading&&q(i,"is-loading",e.nextLoading)},d(t){t&&(D(n),D(r),D(s)),S(p,t),e.select_binding_1(null),a(c)}}}function lr(e){var n,t,r,s,a=e.group.name+"";return{c(){n=I("option"),t=M(a),n.__value=r=e.group.id,n.value=n.__value,n.selected=s=e.isInGroup(e.group.id)},m(e,r){_(e,n,r),k(n,t)},p(e,i){e.semesters&&a!==(a=i.group.name+"")&&L(t,a),e.semesters&&r!==(r=i.group.id)&&(n.__value=r),n.value=n.__value,e.semesters&&s!==(s=i.isInGroup(i.group.id))&&(n.selected=s)},d(e){e&&D(n)}}}function cr(n){var t;return{c(){t=M("Loading groups ...")},m(e,n){_(e,t,n)},p:e,d(e){e&&D(t)}}}function dr(e){var n,r,s,a,i,o,l,c,d,u,p,m,f,g=e.student.englishName+"",h=new xn({props:{errors:e.errors}});let $={ctx:e,current:null,token:null,pending:cr,then:sr,catch:rr,value:"result",error:"error"};return ke(c=e.semesters,$),{c(){n=I("h2"),r=M("Change "),s=M(g),a=M("'s classes"),i=T(),h.$$.fragment.c(),o=T(),l=I("div"),$.block.c(),d=T(),u=I("div"),(p=I("button")).textContent="Done",O(n,"class","title"),O(l,"class","grid-container svelte-iubj27"),O(p,"class","button is-primary"),q(p,"is-loading",e.loading),O(u,"class","buttons svelte-iubj27"),f=N(p,"click",e.click_handler)},m(t,c){_(t,n,c),k(n,r),k(n,s),k(n,a),_(t,i,c),Te(h,t,c),_(t,o,c),_(t,l,c),$.block.m(l,$.anchor=null),$.mount=()=>l,$.anchor=null,_(t,d,c),_(t,u,c),k(u,p),e.button_binding(p),m=!0},p(n,r){e=r,m&&!n.student||g===(g=e.student.englishName+"")||L(s,g);var a={};n.errors&&(a.errors=e.errors),h.$set(a),$.ctx=e,"semesters"in n&&c!==(c=e.semesters)&&ke(c,$)||$.block.p(n,t(t({},e),$.resolved)),n.loading&&q(p,"is-loading",e.loading)},i(e){m||($e(h.$$.fragment,e),m=!0)},o(e){ve(h.$$.fragment,e),m=!1},d(t){t&&(D(n),D(i)),Ae(h,t),t&&(D(o),D(l)),$.block.d(),$.token=null,$=null,t&&(D(d),D(u)),e.button_binding(null),f()}}}function ur(e,n,t){let r,s,a,i,o,l,c="",d=!1,u=!1,{open:p,student:m={}}=n;J(()=>{t("semesters",r=en(Ot))});const f=e=>!!m.groups.find(n=>n.id===e);async function g(e,n){e===s?d=!0:u=!0,t("currentLoading",d),t("nextLoading",u),e.disabled=!0,l.disabled=!0,t("closeButton",l);const r=e.value,a=e.selectedOptions[0].text,i=n.groups.find(e=>f(e.id));let o="";try{""===r&&i?(await Nt.removeStudentFromGroup(m.id,i.id),o=`Removed ${m.englishName} from ${i.name} class`):i?(await Nt.moveToDifferentGroup(m.id,i.id,r),o=`Switched ${m.englishName} from ${i.name} class to ${a} class`):(await Nt.addStudentToGroup(m.id,r),o=`Added ${m.englishName} to ${a} class`),je.add({text:o,type:"success"})}catch(e){t("errors",c=e),je.add({text:`Unable to change ${m.englishName}'s classes`,type:"danger"})}finally{e.disabled=!1,l.disabled=!1,t("closeButton",l),e===s?d=!1:u=!1,t("currentLoading",d),t("nextLoading",u)}}let h;return e.$set=e=>{"open"in e&&t("open",p=e.open),"student"in e&&t("student",m=e.student)},e.$$.update=(e={currentLoading:1,nextLoading:1})=>{(e.currentLoading||e.nextLoading)&&t("loading",h=d||u)},{semesters:r,selectCurrent:s,currentSemester:a,nextSemester:i,selectNext:o,errors:c,currentLoading:d,nextLoading:u,closeButton:l,open:p,student:m,isInGroup:f,joinOrChangeGroup:g,loading:h,select_change_handler:function(){a=j(this),t("currentSemester",a)},select_binding:function(e){ne[e?"unshift":"push"](()=>{t("selectCurrent",s=e)})},change_handler:function({result:e}){return g(s,e.currentSemester)},select_change_handler_1:function(){i=j(this),t("nextSemester",i)},select_binding_1:function(e){ne[e?"unshift":"push"](()=>{t("selectNext",o=e)})},change_handler_1:function({result:e}){return g(o,e.nextSemester)},button_binding:function(e){ne[e?"unshift":"push"](()=>{t("closeButton",l=e)})},click_handler:function(){const e=p=!1;return t("open",p),e}}}class pr extends Oe{constructor(e){super(),Ee(this,e,ur,dr,o,["open","student"])}}function mr(e){var n,t;const r=e.$$slots.default,s=u(r,e,null);return{c(){n=I("dl"),s&&s.c(),O(n,"class","svelte-1usf7k9")},l(e){s&&s.l(dl_nodes)},m(e,r){_(e,n,r),s&&s.m(n,null),t=!0},p(e,n){s&&s.p&&e.$$scope&&s.p(m(r,n,e,null),p(r,n,null))},i(e){t||($e(s,e),t=!0)},o(e){ve(s,e),t=!1},d(e){e&&D(n),s&&s.d(e)}}}function fr(e,n,t){let{$$slots:r={},$$scope:s}=n;return e.$set=e=>{"$$scope"in e&&t("$$scope",s=e.$$scope)},{$$slots:r,$$scope:s}}class gr extends Oe{constructor(e){super(),Ee(this,e,fr,mr,o,[])}}function hr(e,n,t){const r=Object.create(e);return r.group=n[t],r}function $r(e){var n,t,r,s=e.getAge(e.birthdate)+"";return{c(){n=I("p"),t=M(s),r=M(" yrs old")},m(e,s){_(e,n,s),k(n,t),k(n,r)},p(e,n){e.birthdate&&s!==(s=n.getAge(n.birthdate)+"")&&L(t,s)},d(e){e&&D(n)}}}function vr(e){var n,t,r,s=new gr({props:{$$slots:{default:[yr]},$$scope:{ctx:e}}});return{c(){n=I("div"),s.$$.fragment.c()},m(e,t){_(e,n,t),Te(s,n,null),r=!0},p(e,n){var t={};(e.$$scope||e.student||e.birthdate)&&(t.$$scope={changed:e,ctx:n}),s.$set(t)},i(e){r||($e(s.$$.fragment,e),e&&oe(()=>{t||(t=xe(n,We,{duration:200},!0)),t.run(1)}),r=!0)},o(e){ve(s.$$.fragment,e),e&&(t||(t=xe(n,We,{duration:200},!1)),t.run(0)),r=!1},d(e){e&&D(n),Ae(s),e&&t&&t.end()}}}function br(e){var n;return{c(){n=M("none")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function wr(e){var n,t,r,s,a=e.group.name+"",i=e.group.semester.name+"";return{c(){n=I("li"),t=M(a),r=M(" - "),s=M(i),O(n,"class","svelte-1i7iszh")},m(e,a){_(e,n,a),k(n,t),k(n,r),k(n,s)},p(e,n){e.student&&a!==(a=n.group.name+"")&&L(t,a),e.student&&i!==(i=n.group.semester.name+"")&&L(s,i)},d(e){e&&D(n)}}}function yr(e){for(var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$=e.student.pinyinName+"",v=e.student.pointsTally+"",b=e.student.groups,w=[],y=0;y<b.length;y+=1)w[y]=wr(hr(e,b,y));var x=null;return b.length||(x=br()).c(),{c(){(n=I("dt")).textContent="Groups:",t=T(),r=I("dd"),s=I("ul");for(var b=0;b<w.length;b+=1)w[b].c();a=T(),(i=I("dt")).textContent="Pinyin:",o=I("dd"),l=M($),c=T(),(d=I("dt")).textContent="Birthdate:",u=I("dd"),p=M(e.birthdate),m=T(),(f=I("dt")).textContent="Total points:",g=I("dd"),h=M(v),O(s,"class","groups-list svelte-1i7iszh")},m(e,$){_(e,n,$),_(e,t,$),_(e,r,$),k(r,s);for(var v=0;v<w.length;v+=1)w[v].m(s,null);x&&x.m(s,null),_(e,a,$),_(e,i,$),_(e,o,$),k(o,l),_(e,c,$),_(e,d,$),_(e,u,$),k(u,p),_(e,m,$),_(e,f,$),_(e,g,$),k(g,h)},p(e,n){if(e.student){b=n.student.groups;for(var t=0;t<b.length;t+=1){const r=hr(n,b,t);w[t]?w[t].p(e,r):(w[t]=wr(r),w[t].c(),w[t].m(s,null))}for(;t<w.length;t+=1)w[t].d(1);w.length=b.length}b.length?x&&(x.d(1),x=null):x||((x=br()).c(),x.m(s,null)),e.student&&$!==($=n.student.pinyinName+"")&&L(l,$),e.birthdate&&L(p,n.birthdate),e.student&&v!==(v=n.student.pointsTally+"")&&L(h,v)},d(e){e&&(D(n),D(t),D(r)),S(w,e),x&&x.d(),e&&(D(a),D(i),D(o),D(c),D(d),D(u),D(m),D(f),D(g))}}}function xr(e){var n,t;function r(t){e.editstudent_open_binding.call(null,t),n=!0,le(()=>n=!1)}let s={student:e.student};void 0!==e.editShowing&&(s.open=e.editShowing);var a=new er({props:s});return ne.push(()=>Me(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){Te(a,e,n),t=!0},p(e,t){var r={};e.student&&(r.student=t.student),!n&&e.editShowing&&(r.open=t.editShowing),a.$set(r)},i(e){t||($e(a.$$.fragment,e),t=!0)},o(e){ve(a.$$.fragment,e),t=!1},d(e){Ae(a,e)}}}function kr(e){var n,t,r=e.editShowing&&xr(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.editShowing?r?(r.p(e,t),$e(r,1)):((r=xr(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function _r(e){var n,t;function r(t){e.editstudentgroups_open_binding.call(null,t),n=!0,le(()=>n=!1)}let s={student:e.student};void 0!==e.groupsShowing&&(s.open=e.groupsShowing);var a=new pr({props:s});return ne.push(()=>Me(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){Te(a,e,n),t=!0},p(e,t){var r={};e.student&&(r.student=t.student),!n&&e.groupsShowing&&(r.open=t.groupsShowing),a.$set(r)},i(e){t||($e(a.$$.fragment,e),t=!0)},o(e){ve(a.$$.fragment,e),t=!1},d(e){Ae(a,e)}}}function Dr(e){var n,t,r=e.groupsShowing&&_r(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.groupsShowing?r?(r.p(e,t),$e(r,1)):((r=_r(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function Sr(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w,y,x,S,C,A,E,P,R,z,j,q,H,F,W,Y,U,B,G,Z,V,J=e.student.englishName+"",X=e.student.chineseName+"",Q=e.student.birthdate&&$r(e),K=e.expanded&&vr(e);function ee(n){e.deleteitem_open_binding.call(null,n),W=!0,le(()=>W=!1)}let te={id:e.student.id,store:Nt,type:"student",name:e.student.englishName+" ("+e.student.chineseName+")"};void 0!==e.showDelete&&(te.open=e.showDelete);var re=new Ln({props:te});function se(n){e.modal0_open_binding.call(null,n),U=!0,le(()=>U=!1)}ne.push(()=>Me(re,"open",ee));let ae={$$slots:{default:[kr]},$$scope:{ctx:e}};void 0!==e.editShowing&&(ae.open=e.editShowing);var ie=new Mn({props:ae});function oe(n){e.modal1_open_binding.call(null,n),G=!0,le(()=>G=!1)}ne.push(()=>Me(ie,"open",se));let ce={$$slots:{default:[Dr]},$$scope:{ctx:e}};void 0!==e.groupsShowing&&(ce.open=e.groupsShowing);var de=new Mn({props:ce});return ne.push(()=>Me(de,"open",oe)),{c(){n=I("div"),t=I("div"),r=I("div"),s=I("div"),i=I("figure"),o=I("img"),d=T(),u=I("div"),p=I("p"),m=I("strong"),f=M(J),g=T(),h=I("span"),$=M(X),v=T(),b=I("p"),w=M(e.currentOrNextClass),y=T(),Q&&Q.c(),x=T(),S=I("i"),A=T(),K&&K.c(),E=T(),P=I("footer"),(R=I("button")).textContent="Groups",z=T(),(j=I("button")).textContent="Edit",q=T(),(H=I("button")).textContent="Delete",F=T(),re.$$.fragment.c(),Y=T(),ie.$$.fragment.c(),B=T(),de.$$.fragment.c(),O(o,"src",l="images/"+e.gender+".jpg"),O(o,"alt","portrait"),O(o,"class",c="is-rounded portrait "+e.student.gender+" svelte-1i7iszh"),O(i,"class","image svelte-1i7iszh"),O(s,"class","media-left svelte-1i7iszh"),O(h,"class","chinese svelte-1i7iszh"),O(u,"class","media-content svelte-1i7iszh"),O(S,"class",C="expand-button fas fa-angle-"+(e.expanded?"up":"down")+" svelte-1i7iszh"),O(r,"class","media svelte-1i7iszh"),O(t,"class","card-content svelte-1i7iszh"),O(R,"class","card-footer-item svelte-1i7iszh"),O(j,"class","card-footer-item svelte-1i7iszh"),O(H,"class","card-footer-item svelte-1i7iszh"),O(P,"class","card-footer svelte-1i7iszh"),O(n,"class","card svelte-1i7iszh"),V=[N(r,"click",e.click_handler),N(R,"click",e.showGroups),N(j,"click",e.showEdit),N(H,"click",e.click_handler_1)]},m(e,a){_(e,n,a),k(n,t),k(t,r),k(r,s),k(s,i),k(i,o),k(r,d),k(r,u),k(u,p),k(p,m),k(m,f),k(p,g),k(p,h),k(h,$),k(u,v),k(u,b),k(b,w),k(u,y),Q&&Q.m(u,null),k(r,x),k(r,S),k(t,A),K&&K.m(t,null),k(n,E),k(n,P),k(P,R),k(P,z),k(P,j),k(P,q),k(P,H),_(e,F,a),Te(re,e,a),_(e,Y,a),Te(ie,e,a),_(e,B,a),Te(de,e,a),Z=!0},p(e,n){Z&&!e.gender||l===(l="images/"+n.gender+".jpg")||O(o,"src",l),Z&&!e.student||c===(c="is-rounded portrait "+n.student.gender+" svelte-1i7iszh")||O(o,"class",c),Z&&!e.student||J===(J=n.student.englishName+"")||L(f,J),Z&&!e.student||X===(X=n.student.chineseName+"")||L($,X),Z&&!e.currentOrNextClass||L(w,n.currentOrNextClass),n.student.birthdate?Q?Q.p(e,n):((Q=$r(n)).c(),Q.m(u,null)):Q&&(Q.d(1),Q=null),Z&&!e.expanded||C===(C="expand-button fas fa-angle-"+(n.expanded?"up":"down")+" svelte-1i7iszh")||O(S,"class",C),n.expanded?K?(K.p(e,n),$e(K,1)):((K=vr(n)).c(),$e(K,1),K.m(t,null)):K&&(ge(),ve(K,1,1,()=>{K=null}),he());var r={};e.student&&(r.id=n.student.id),e.students&&(r.store=Nt),e.student&&(r.name=n.student.englishName+" ("+n.student.chineseName+")"),!W&&e.showDelete&&(r.open=n.showDelete),re.$set(r);var s={};(e.$$scope||e.editShowing||e.student)&&(s.$$scope={changed:e,ctx:n}),!U&&e.editShowing&&(s.open=n.editShowing),ie.$set(s);var a={};(e.$$scope||e.groupsShowing||e.student)&&(a.$$scope={changed:e,ctx:n}),!G&&e.groupsShowing&&(a.open=n.groupsShowing),de.$set(a)},i(e){Z||($e(K),$e(re.$$.fragment,e),$e(ie.$$.fragment,e),$e(de.$$.fragment,e),Z=!0)},o(e){ve(K),ve(re.$$.fragment,e),ve(ie.$$.fragment,e),ve(de.$$.fragment,e),Z=!1},d(e){e&&D(n),Q&&Q.d(),K&&K.d(),e&&D(F),Ae(re,e),e&&D(Y),Ae(ie,e),e&&D(B),Ae(de,e),a(V)}}}function Ir(e,n,t){let{student:r={},semesters:s={}}=n,a=!1,i=!1,o=!1,l=!1;let c,d,u,p;return e.$set=e=>{"student"in e&&t("student",r=e.student),"semesters"in e&&t("semesters",s=e.semesters)},e.$$.update=(e={student:1})=>{e.student&&t("gender",c="M"===r.gender?"boy":"girl"),e.student&&t("birthdate",d=r.birthdate?r.birthdate.slice(0,10):"none"),e.student&&(u=r.groups?r.groups.map(e=>{if(e.name)return`${e.name} (${e.semester.name})`}).join(", "):"none"),e.student&&t("currentOrNextClass",p=(e=>{if(e){if(s.currentSemester){const n=e.find(e=>e.semester.id===s.currentSemester.id);if(n)return`Current ${n.name} class`}if(s.nextSemester){const n=e.find(e=>e.semester.id===s.nextSemester.id);if(n)return`Next ${n.name} class`}return"Not enrolled"}})(r.groups))},{student:r,semesters:s,expanded:a,showDelete:i,editShowing:o,groupsShowing:l,showEdit:()=>{t("editShowing",o=!0)},showGroups:()=>{t("groupsShowing",l=!0)},getAge:e=>{if("none"===e)return;const n=new Date,t=new Date(e);let r=n.getFullYear()-t.getFullYear();const s=n.getMonth()-t.getMonth();return(s<0||0===s&&n.getDate()<t.getDate())&&r--,r},gender:c,birthdate:d,currentOrNextClass:p,click_handler:function(){t("expanded",a=!a)},click_handler_1:function(){t("showDelete",i=!0)},deleteitem_open_binding:function(e){t("showDelete",i=e)},editstudent_open_binding:function(e){t("editShowing",o=e)},modal0_open_binding:function(e){t("editShowing",o=e)},editstudentgroups_open_binding:function(e){t("groupsShowing",l=e)},modal1_open_binding:function(e){t("groupsShowing",l=e)}}}class Cr extends Oe{constructor(e){super(),Ee(this,e,Ir,Sr,o,["student","semesters"])}}function Mr(n){var t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w;return{c(){t=I("div"),r=I("input"),s=T(),(i=I("span")).innerHTML='<i class="fas fa-search"></i>',o=T(),l=I("div"),c=I("div"),d=I("select"),(u=I("option")).textContent="Sort by: ID",(p=I("option")).textContent="Chinese name",(m=I("option")).textContent="English name",(f=I("option")).textContent="Age",(g=I("option")).textContent="Gender",h=T(),$=I("button"),v=I("i"),O(r,"class","input"),O(r,"type","text"),O(r,"placeholder","Search"),O(i,"class","icon is-small is-left"),O(t,"class","control search has-icons-left svelte-49z4zm"),u.__value="id",u.value=u.__value,p.__value="pinyinName",p.value=p.__value,m.__value="englishName",m.value=m.__value,f.__value="birthdate",f.value=f.__value,g.__value="gender",g.value=g.__value,void 0===n.sortParam&&oe(()=>n.select_change_handler.call(d)),O(c,"class","select"),O(v,"class",b="fas fa-sort-"+(-1===n.direction?"up":"down")+" svelte-49z4zm"),O($,"class","button is-link"),O(l,"class","control svelte-49z4zm"),w=[N(r,"input",n.input_input_handler),N(r,"input",n.reload),N(d,"change",n.select_change_handler),N(d,"change",n.sort),N($,"click",n.reverse)]},m(e,a){_(e,t,a),k(t,r),P(r,n.searchString),k(t,s),k(t,i),_(e,o,a),_(e,l,a),k(l,c),k(c,d),k(d,u),k(d,p),k(d,m),k(d,f),k(d,g),z(d,n.sortParam),k(l,h),k(l,$),k($,v)},p(e,n){e.searchString&&r.value!==n.searchString&&P(r,n.searchString),e.sortParam&&z(d,n.sortParam),e.direction&&b!==(b="fas fa-sort-"+(-1===n.direction?"up":"down")+" svelte-49z4zm")&&O(v,"class",b)},i:e,o:e,d(e){e&&(D(t),D(o),D(l)),a(w)}}}function Tr(e,n,t){let r="id",s=1,a="";const i=()=>{r&&Nt.sort(r,s)};return{sortParam:r,direction:s,searchString:a,reload:()=>{const e=1===s?"ASC":"DESC";Nt.get(`${r}_${e}`,a)},sort:i,reverse:()=>{t("direction",s=-s),i()},input_input_handler:function(){a=this.value,t("searchString",a)},select_change_handler:function(){r=j(this),t("sortParam",r)}}}class Ar extends Oe{constructor(e){super(),Ee(this,e,Tr,Mr,o,[])}}function Nr(e){var n,t=new Xt({props:{errors:e.errors,loading:e.loading}});return t.$on("reset",e.reset),t.$on("submit",e.save),{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Er(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,le(()=>r=!1)}let o={$$slots:{default:[Nr]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new Mn({props:o});return ne.push(()=>Me(l,"open",i)),{c(){(n=I("button")).innerHTML='<i class="fas fa-plus"></i> Add Student\n\t\t\t',t=T(),l.$$.fragment.c(),O(n,"class","button is-primary svelte-10d3jcz"),a=N(n,"click",e.click_handler)},m(e,r){_(e,n,r),_(e,t,r),Te(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||($e(l.$$.fragment,e),s=!0)},o(e){ve(l.$$.fragment,e),s=!1},d(e){e&&(D(n),D(t)),Ae(l,e),a()}}}function Or(e,n,t){let r=!1,s=null,a=!1;const i=()=>{t("errors",s=null),t("open",r=!1)};return{open:r,errors:s,loading:a,reset:i,save:async({detail:e})=>{const{groupId:n,id:r,...o}=e;t("loading",a=!0);try{await Nt.create(o,n),je.add({text:`Created new student: '${e.englishName}'`,type:"success"}),i()}catch(e){t("errors",s=e),je.add({text:"Could not save new student",type:"danger"})}finally{t("loading",a=!1)}},click_handler:function(){const e=r=!0;return t("open",r),e},modal_open_binding:function(e){t("open",r=e)}}}class Lr extends Oe{constructor(e){super(),Ee(this,e,Or,Er,o,[])}}function Pr(e,n,t){const r=Object.create(e);return r.student=n[t],r}function Rr(e){var n,t,r=[],s=new Map,a=e.$students;const i=e=>e.student.id;for(var o=0;o<a.length;o+=1){let n=Pr(e,a,o),t=i(n);s.set(t,r[o]=zr(t,n))}return{c(){for(n=I("div"),o=0;o<r.length;o+=1)r[o].c();O(n,"class","student-list svelte-5i8m0")},m(e,s){for(_(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=t.$students;ge(),r=Ie(r,e,i,1,t,a,s,n,Se,zr,null,Pr),he()},i(e){if(!t){for(var n=0;n<a.length;n+=1)$e(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)ve(r[o]);t=!1},d(e){for(e&&D(n),o=0;o<r.length;o+=1)r[o].d()}}}function zr(e,n){var t,r,s=new Cr({props:{student:n.student,semesters:n.semesters}});return{key:e,first:null,c(){t=A(),s.$$.fragment.c(),this.first=t},m(e,n){_(e,t,n),Te(s,e,n),r=!0},p(e,n){var t={};e.$students&&(t.student=n.student),e.semesters&&(t.semesters=n.semesters),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&D(t),Ae(s,e)}}}function jr(e){var n,t,r,s,a,i,o,l,c,d,u=e.$students&&e.$students.length+"",p=new Lr({}),m=new Ar({}),f=e.$students&&e.$students.length&&e.semesters&&Rr(e);return{c(){n=I("p"),t=M("Showing "),r=M(u),s=M(" students."),a=T(),i=I("div"),o=I("div"),p.$$.fragment.c(),l=T(),m.$$.fragment.c(),c=T(),f&&f.c(),O(n,"class","student-number"),O(o,"class","details svelte-5i8m0"),O(i,"class","svelte-5i8m0")},m(e,u){_(e,n,u),k(n,t),k(n,r),k(n,s),_(e,a,u),_(e,i,u),k(i,o),Te(p,o,null),k(o,l),Te(m,o,null),k(i,c),f&&f.m(i,null),d=!0},p(e,n){d&&!e.$students||u===(u=n.$students&&n.$students.length+"")||L(r,u),n.$students&&n.$students.length&&n.semesters?f?(f.p(e,n),$e(f,1)):((f=Rr(n)).c(),$e(f,1),f.m(i,null)):f&&(ge(),ve(f,1,1,()=>{f=null}),he())},i(e){d||($e(p.$$.fragment,e),$e(m.$$.fragment,e),$e(f),d=!0)},o(e){ve(p.$$.fragment,e),ve(m.$$.fragment,e),ve(f),d=!1},d(e){e&&(D(n),D(a),D(i)),Ae(p),Ae(m),f&&f.d()}}}function qr(e,n,t){let r,s;return d(e,Nt,e=>{t("$students",r=e)}),J(async()=>{t("semesters",s=await en(Ot))}),{semesters:s,$students:r}}class Hr extends Oe{constructor(e){super(),Ee(this,e,qr,jr,o,[])}}function Fr(e){var n,t=new xn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Wr(n){var t,r=new It({props:{what:"students"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function Yr(n){var t,r=new Hr({});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function Ur(e){var n,t,r,s,a,i,o,l=[Yr,Wr,Fr],c=[];function d(e,n){return n.$students?0:n.errors?2:1}return s=d(0,e),a=c[s]=l[s](e),{c(){n=T(),(t=I("h1")).textContent="Students",r=T(),a.c(),i=A(),document.title="Students",O(t,"class","title")},m(e,a){_(e,n,a),_(e,t,a),_(e,r,a),c[s].m(e,a),_(e,i,a),o=!0},p(e,n){var t=s;(s=d(0,n))===t?c[s].p(e,n):(ge(),ve(c[t],1,1,()=>{c[t]=null}),he(),(a=c[s])||(a=c[s]=l[s](n)).c(),$e(a,1),a.m(i.parentNode,i))},i(e){o||($e(a),o=!0)},o(e){ve(a),o=!1},d(e){e&&(D(n),D(t),D(r)),c[s].d(e),e&&D(i)}}}function Br(e,n,t){let r,s;return d(e,Nt,e=>{t("$students",r=e)}),J(async()=>{try{await Nt.get()}catch(e){t("errors",s=e),je.add({text:"Couldn't get students from server.",type:"danger"})}}),{errors:s,$students:r}}const Gr=(()=>{const{subscribe:e,set:n,update:t}=Re();return{subscribe:e,get:async()=>{const e=await en("\n  {\n    groups {\n      id\n      name\n      semester {\n        id\n        name\n        startDate\n      }\n      students {\n        chineseName\n        englishName\n        pinyinName\n        id\n      }\n    }\n  }\n");n(e.groups)},create:async(e,n)=>{const r=await en("\n  mutation createGroup($semesterId: ID!, $name: String!) {\n    createGroup(semesterId: $semesterId, name: $name){\n      id\n      name\n      semester {\n        id\n        name\n        startDate\n      }\n      students {\n        chineseName\n        englishName\n        pinyinName\n        id\n      }\n    }\n  }\n",{name:e,semesterId:n});t(e=>[...e,r.createGroup])},patch:async(e,n,r)=>{const s=await en("\n  mutation updateGroup($id: ID!, $semesterId: ID, $name: String) {\n    updateGroup(id: $id, semesterId: $semesterId, name: $name){\n      id\n      name\n      semester {\n        id\n        name\n        startDate\n      }\n      students {\n        chineseName\n        englishName\n        pinyinName\n        id\n      }\n    }\n  }\n",{id:e,name:n,semesterId:r});t(n=>n.map(n=>n.id!==e?n:s.updateGroup))},remove:async e=>{const n=await en("\nmutation deleteGroup($id: ID!) {\n  deleteGroup(id: $id) {\n    id\n    name\n  }\n}\n",{id:e});t(e=>e.filter(e=>n.deleteGroup.id!==e.id))}}})();function Zr(e,n,t){const r=Object.create(e);return r.semester=n[t],r}function Vr(e){var n;return{c(){(n=I("p")).textContent="Be careful! Only change if there aren't any class sessions.",O(n,"class","help is-warning")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function Jr(n){var t;return{c(){(t=I("option")).textContent="Loading semesters ...",t.__value="Loading semesters ...",t.value=t.__value},m(e,n){_(e,t,n)},p:e,d(e){e&&D(t)}}}function Xr(e){var n,t=e.result&&e.result.length&&Qr(e);return{c(){t&&t.c(),n=A()},m(e,r){t&&t.m(e,r),_(e,n,r)},p(e,r){r.result&&r.result.length?t?t.p(e,r):((t=Qr(r)).c(),t.m(n.parentNode,n)):t&&(t.d(1),t=null)},d(e){t&&t.d(e),e&&D(n)}}}function Qr(e){for(var n,t,r=e.result,s=[],a=0;a<r.length;a+=1)s[a]=Kr(Zr(e,r,a));return{c(){(n=I("option")).textContent="--";for(var e=0;e<s.length;e+=1)s[e].c();t=A(),n.__value="",n.value=n.__value},m(e,r){_(e,n,r);for(var a=0;a<s.length;a+=1)s[a].m(e,r);_(e,t,r)},p(e,n){if(e.$semesters||e.value){r=n.result;for(var a=0;a<r.length;a+=1){const i=Zr(n,r,a);s[a]?s[a].p(e,i):(s[a]=Kr(i),s[a].c(),s[a].m(t.parentNode,t))}for(;a<s.length;a+=1)s[a].d(1);s.length=r.length}},d(e){e&&D(n),S(s,e),e&&D(t)}}}function Kr(e){var n,t,r,s,a=e.semester.name+"";return{c(){n=I("option"),t=M(a),n.__value=r=e.semester.id,n.value=n.__value,n.selected=s=e.semester.id===e.value},m(e,r){_(e,n,r),k(n,t)},p(e,i){e.$semesters&&a!==(a=i.semester.name+"")&&L(t,a),e.$semesters&&r!==(r=i.semester.id)&&(n.__value=r),n.value=n.__value,(e.$semesters||e.value)&&s!==(s=i.semester.id===i.value)&&(n.selected=s)},d(e){e&&D(n)}}}function es(n){var t;return{c(){(t=I("option")).textContent="Loading semesters ...",t.__value="Loading semesters ...",t.value=t.__value},m(e,n){_(e,t,n)},p:e,d(e){e&&D(t)}}}function ns(e){var n,t;return{c(){n=I("p"),t=M(e.error),O(n,"class","help is-danger")},m(e,r){_(e,n,r),k(n,t)},p(e,n){e.error&&L(t,n.error)},d(e){e&&D(n)}}}function ts(n){var r,s,i,o,l,c,d,u,p=n.edit&&Vr();let m={ctx:n,current:null,token:null,pending:es,then:Xr,catch:Jr,value:"result",error:"null"};ke(c=n.$semesters,m);var f=n.error&&ns(n);return{c(){(r=I("label")).textContent="Semester",s=T(),p&&p.c(),i=T(),o=I("div"),l=I("select"),m.block.c(),d=T(),f&&f.c(),O(r,"class","label"),void 0===n.value&&oe(()=>n.select_change_handler.call(l)),l.required=!0,O(o,"class","select svelte-t5dn19"),u=[N(l,"change",n.select_change_handler),N(l,"invalid",E(n.checkValidity))]},m(e,t){_(e,r,t),_(e,s,t),p&&p.m(e,t),_(e,i,t),_(e,o,t),k(o,l),m.block.m(l,m.anchor=null),m.mount=()=>l,m.anchor=null,z(l,n.value),n.select_binding(l),k(o,d),f&&f.m(o,null)},p(e,r){(n=r).edit?p||((p=Vr()).c(),p.m(i.parentNode,i)):p&&(p.d(1),p=null),m.ctx=n,"$semesters"in e&&c!==(c=n.$semesters)&&ke(c,m)||m.block.p(e,t(t({},n),m.resolved)),e.value&&z(l,n.value),n.error?f?f.p(e,n):((f=ns(n)).c(),f.m(o,null)):f&&(f.d(1),f=null)},i:e,o:e,d(e){e&&(D(r),D(s)),p&&p.d(e),e&&(D(i),D(o)),m.block.d(),m.token=null,m=null,n.select_binding(null),f&&f.d(),a(u)}}}function rs(e,n,t){let r,s;d(e,vn,e=>{t("$semesters",r=e)});let a="",{edit:i=!1,value:o=""}=n;return J(()=>{r&&0!==r.length||vn.get()}),e.$set=e=>{"edit"in e&&t("edit",i=e.edit),"value"in e&&t("value",o=e.value)},{selectElement:s,error:a,edit:i,value:o,checkValidity:function(){t("error",a=!s.validity.valid&&s.validationMessage?s.validationMessage:"")},$semesters:r,select_change_handler:function(){o=j(this),t("value",o)},select_binding:function(e){ne[e?"unshift":"push"](()=>{t("selectElement",s=e)})}}}class ss extends Oe{constructor(e){super(),Ee(this,e,rs,ts,o,["edit","value"])}}function as(e){var n;return{c(){n=M("Add")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function is(e){var n;return{c(){n=M("Edit")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function os(e){var n,t=new xn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function ls(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h;function $(e,n){return n.id?is:as}var v=$(0,e),b=v(e),w=e.errors&&os(e);function y(n){e.input0_value_binding.call(null,n),o=!0,le(()=>o=!1)}let x={label:"Name"};void 0!==e.name&&(x.value=e.name);var S=new Bn({props:x});function C(n){e.semesterselect_value_binding.call(null,n),c=!0,le(()=>c=!1)}ne.push(()=>Me(S,"value",y));let A={edit:!!e.id};void 0!==e.semesterId&&(A.value=e.semesterId);var L=new ss({props:A});return ne.push(()=>Me(L,"value",C)),{c(){n=I("h2"),b.c(),t=M(" a group"),r=T(),s=I("form"),w&&w.c(),i=T(),S.$$.fragment.c(),l=T(),L.$$.fragment.c(),d=T(),u=I("div"),(p=I("button")).textContent="Save group",m=T(),f=I("input"),O(n,"class","title"),O(p,"type","submit"),O(p,"class","button is-primary"),q(p,"is-loading",e.loading),O(f,"type","reset"),O(f,"class","button"),f.value="Cancel",O(u,"class","buttons svelte-i7r75e"),s.noValidate=!0,h=[N(s,"submit",E(e.handleSubmit)),N(s,"reset",e.reset_handler)]},m(a,o){_(a,n,o),b.m(n,null),k(n,t),_(a,r,o),_(a,s,o),w&&w.m(s,null),k(s,i),Te(S,s,null),k(s,l),Te(L,s,null),k(s,d),k(s,u),k(u,p),e.button_binding(p),k(u,m),k(u,f),e.form_1_binding(s),g=!0},p(e,r){v!==(v=$(0,r))&&(b.d(1),(b=v(r))&&(b.c(),b.m(n,t))),r.errors?w?(w.p(e,r),$e(w,1)):((w=os(r)).c(),$e(w,1),w.m(s,i)):w&&(ge(),ve(w,1,1,()=>{w=null}),he());var a={};!o&&e.name&&(a.value=r.name),S.$set(a);var l={};e.id&&(l.edit=!!r.id),!c&&e.semesterId&&(l.value=r.semesterId),L.$set(l),e.loading&&q(p,"is-loading",r.loading)},i(e){g||($e(w),$e(S.$$.fragment,e),$e(L.$$.fragment,e),g=!0)},o(e){ve(w),ve(S.$$.fragment,e),ve(L.$$.fragment,e),g=!1},d(t){t&&D(n),b.d(),t&&(D(r),D(s)),w&&w.d(),Ae(S),Ae(L),e.button_binding(null),e.form_1_binding(null),a(h)}}}function cs(e,n,t){const r=Q();let s,a,{errors:i="",loading:o=!1,name:l="",semesterId:c=null,id:d=null}=n;return e.$set=e=>{"errors"in e&&t("errors",i=e.errors),"loading"in e&&t("loading",o=e.loading),"name"in e&&t("name",l=e.name),"semesterId"in e&&t("semesterId",c=e.semesterId),"id"in e&&t("id",d=e.id)},{form:s,saveButton:a,errors:i,loading:o,name:l,semesterId:c,id:d,handleSubmit:()=>{s.checkValidity()?r("submit",{id:d,name:l,semesterId:c}):je.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){K(e,n)},input0_value_binding:function(e){t("name",l=e)},semesterselect_value_binding:function(e){t("semesterId",c=e)},button_binding:function(e){ne[e?"unshift":"push"](()=>{t("saveButton",a=e)})},form_1_binding:function(e){ne[e?"unshift":"push"](()=>{t("form",s=e)})}}}class ds extends Oe{constructor(e){super(),Ee(this,e,cs,ls,o,["errors","loading","name","semesterId","id"])}}function us(e){var n,t=new ds({props:{id:e.group.id,loading:e.loading,errors:e.errors,name:e.group.name,semesterId:e.group.semester.id}});return t.$on("reset",e.reset),t.$on("submit",e.save),{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.group&&(r.id=n.group.id),e.loading&&(r.loading=n.loading),e.errors&&(r.errors=n.errors),e.group&&(r.name=n.group.name),e.group&&(r.semesterId=n.group.semester.id),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function ps(e,n,t){let{open:r=!1,group:s}=n,a="",i=!1;const o=()=>{t("errors",a=""),t("open",r=!1)};return e.$set=e=>{"open"in e&&t("open",r=e.open),"group"in e&&t("group",s=e.group)},{open:r,group:s,errors:a,loading:i,reset:o,save:async({detail:e})=>{const{id:n,semesterId:r,name:s}=e;t("loading",i=!0);try{await Gr.patch(n,s,r),je.add({text:`Saved changes to '${s}' class`,type:"success"}),o()}catch(e){t("errors",a=e),je.add({text:"Could not save changes to group",type:"danger"})}finally{t("loading",i=!1)}}}}class ms extends Oe{constructor(e){super(),Ee(this,e,ps,us,o,["open","group"])}}function fs(e,n,t){const r=Object.create(e);return r.student=n[t],r}function gs(e){for(var n,t,r,s,a,i,o=e.group.students.length+"",l=e.group.students,c=[],d=0;d<l.length;d+=1)c[d]=hs(fs(e,l,d));return{c(){n=I("p"),t=I("strong"),r=M(o),s=M(" students"),a=T(),i=I("ul");for(var e=0;e<c.length;e+=1)c[e].c();O(i,"class","student-list")},m(e,o){_(e,n,o),k(n,t),k(t,r),k(t,s),_(e,a,o),_(e,i,o);for(var l=0;l<c.length;l+=1)c[l].m(i,null)},p(e,n){if(e.group&&o!==(o=n.group.students.length+"")&&L(r,o),e.group){l=n.group.students;for(var t=0;t<l.length;t+=1){const r=fs(n,l,t);c[t]?c[t].p(e,r):(c[t]=hs(r),c[t].c(),c[t].m(i,null))}for(;t<c.length;t+=1)c[t].d(1);c.length=l.length}},d(e){e&&(D(n),D(a),D(i)),S(c,e)}}}function hs(e){var n,t,r,s,a=e.student.chineseName+"",i=e.student.englishName+"";return{c(){n=I("li"),t=M(a),r=T(),s=M(i)},m(e,a){_(e,n,a),k(n,t),k(n,r),k(n,s)},p(e,n){e.group&&a!==(a=n.student.chineseName+"")&&L(t,a),e.group&&i!==(i=n.student.englishName+"")&&L(s,i)},d(e){e&&D(n)}}}function $s(e){var n,t;function r(t){e.editgroup_open_binding.call(null,t),n=!0,le(()=>n=!1)}let s={group:e.group};void 0!==e.editShowing&&(s.open=e.editShowing);var a=new ms({props:s});return ne.push(()=>Me(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){Te(a,e,n),t=!0},p(e,t){var r={};e.group&&(r.group=t.group),!n&&e.editShowing&&(r.open=t.editShowing),a.$set(r)},i(e){t||($e(a.$$.fragment,e),t=!0)},o(e){ve(a.$$.fragment,e),t=!1},d(e){Ae(a,e)}}}function vs(e){var n,t,r=e.editShowing&&$s(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.editShowing?r?(r.p(e,t),$e(r,1)):((r=$s(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function bs(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w,y,x,S,C=e.group.name+"",A=e.group.semester.name+"",E=e.group.students&&e.group.students.length&&gs(e);function P(n){e.modal_open_binding.call(null,n),b=!0,le(()=>b=!1)}let R={$$slots:{default:[vs]},$$scope:{ctx:e}};void 0!==e.editShowing&&(R.open=e.editShowing);var z=new Mn({props:R});function j(n){e.deleteitem_open_binding.call(null,n),y=!0,le(()=>y=!1)}ne.push(()=>Me(z,"open",P));let q={id:e.group.id,store:Gr,type:"group",name:e.group.name+" class"};void 0!==e.showDelete&&(q.open=e.showDelete);var H=new Ln({props:q});return ne.push(()=>Me(H,"open",j)),{c(){n=I("li"),t=I("div"),r=I("h3"),s=M(C),i=M(" class"),o=T(),l=I("h4"),c=M(A),d=T(),E&&E.c(),u=T(),p=I("footer"),(m=I("button")).textContent="Edit",f=T(),(g=I("button")).textContent="Delete",v=T(),z.$$.fragment.c(),w=T(),H.$$.fragment.c(),O(r,"class","title is-4"),O(l,"class","subtitle is-6"),O(t,"class","card-content svelte-3tpm8l"),O(m,"class","card-footer-item svelte-3tpm8l"),O(g,"class","card-footer-item svelte-3tpm8l"),O(p,"class","card-footer svelte-3tpm8l"),O(n,"class","card svelte-3tpm8l"),S=[N(m,"click",e.click_handler),N(g,"click",e.click_handler_1)]},m(e,a){_(e,n,a),k(n,t),k(t,r),k(r,s),k(r,i),k(t,o),k(t,l),k(l,c),k(t,d),E&&E.m(t,null),k(n,u),k(n,p),k(p,m),k(p,f),k(p,g),_(e,v,a),Te(z,e,a),_(e,w,a),Te(H,e,a),x=!0},p(e,n){x&&!e.group||C===(C=n.group.name+"")||L(s,C),x&&!e.group||A===(A=n.group.semester.name+"")||L(c,A),n.group.students&&n.group.students.length?E?E.p(e,n):((E=gs(n)).c(),E.m(t,null)):E&&(E.d(1),E=null);var r={};(e.$$scope||e.editShowing||e.group)&&(r.$$scope={changed:e,ctx:n}),!b&&e.editShowing&&(r.open=n.editShowing),z.$set(r);var a={};e.group&&(a.id=n.group.id),e.groups&&(a.store=Gr),e.group&&(a.name=n.group.name+" class"),!y&&e.showDelete&&(a.open=n.showDelete),H.$set(a)},i(e){x||(oe(()=>{$&&$.end(1),h||(h=we(n,Fe,{x:400})),h.start()}),$e(z.$$.fragment,e),$e(H.$$.fragment,e),x=!0)},o(e){h&&h.invalidate(),$=ye(n,Fe,{x:-400}),ve(z.$$.fragment,e),ve(H.$$.fragment,e),x=!1},d(e){e&&D(n),E&&E.d(),e&&($&&$.end(),D(v)),Ae(z,e),e&&D(w),Ae(H,e),a(S)}}}function ws(e,n,t){let{group:r}=n,s=!1,a=!1;return e.$set=e=>{"group"in e&&t("group",r=e.group)},{group:r,editShowing:s,showDelete:a,click_handler:function(){t("editShowing",s=!0)},click_handler_1:function(){t("showDelete",a=!0)},editgroup_open_binding:function(e){t("editShowing",s=e)},modal_open_binding:function(e){t("editShowing",s=e)},deleteitem_open_binding:function(e){t("showDelete",a=e)}}}class ys extends Oe{constructor(e){super(),Ee(this,e,ws,bs,o,["group"])}}function xs(e){var n,t=new ds({props:{errors:e.errors,loading:e.loading}});return t.$on("reset",e.reset),t.$on("submit",e.save),{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function ks(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,le(()=>r=!1)}let o={$$slots:{default:[xs]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new Mn({props:o});return ne.push(()=>Me(l,"open",i)),{c(){(n=I("button")).innerHTML='<i class="fas fa-plus"></i> Add a group\n\t\t\t',t=T(),l.$$.fragment.c(),O(n,"class","button is-primary"),a=N(n,"click",e.click_handler)},m(e,r){_(e,n,r),_(e,t,r),Te(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||($e(l.$$.fragment,e),s=!0)},o(e){ve(l.$$.fragment,e),s=!1},d(e){e&&(D(n),D(t)),Ae(l,e),a()}}}function _s(e,n,t){let r="",s=!1,a=!1;const i=()=>{t("errors",r=""),t("open",a=!1)};return{errors:r,loading:s,open:a,reset:i,save:async({detail:e})=>{const{semesterId:n,name:a}=e;t("loading",s=!0);try{await Gr.create(a,n),je.add({text:`Added new class '${a} class'`,type:"success"}),i()}catch(e){t("errors",r=e),je.add({text:"Could not save changes to group",type:"danger"})}finally{t("loading",s=!1)}},click_handler:function(){const e=a=!0;return t("open",a),e},modal_open_binding:function(e){t("open",a=e)}}}class Ds extends Oe{constructor(e){super(),Ee(this,e,_s,ks,o,[])}}function Ss(e,n,t){const r=Object.create(e);return r.group=n[t],r}function Is(e){var n,t,r=[],s=new Map,a=e.sortedGroups;const i=e=>e.group.id;for(var o=0;o<a.length;o+=1){let n=Ss(e,a,o),t=i(n);s.set(t,r[o]=Cs(t,n))}return{c(){for(n=I("ul"),o=0;o<r.length;o+=1)r[o].c();O(n,"class","group-list svelte-v4hmp")},m(e,s){for(_(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=t.sortedGroups;ge(),r=Ie(r,e,i,1,t,a,s,n,Se,Cs,null,Ss),he()},i(e){if(!t){for(var n=0;n<a.length;n+=1)$e(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)ve(r[o]);t=!1},d(e){for(e&&D(n),o=0;o<r.length;o+=1)r[o].d()}}}function Cs(e,n){var t,r,s=new ys({props:{group:n.group}});return{key:e,first:null,c(){t=A(),s.$$.fragment.c(),this.first=t},m(e,n){_(e,t,n),Te(s,e,n),r=!0},p(e,n){var t={};e.sortedGroups&&(t.group=n.group),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&D(t),Ae(s,e)}}}function Ms(e){var n,t,r,s,a,i,o,l,c,d=e.$groups&&e.$groups.length+"",u=new Ds({}),p=e.$groups&&e.$groups.length&&Is(e);return{c(){n=I("p"),t=M("Showing "),r=M(d),s=M(" groups sorted by semester."),a=T(),i=I("div"),u.$$.fragment.c(),o=T(),p&&p.c(),l=A(),O(n,"class","groups-count svelte-v4hmp"),O(i,"class","details")},m(e,d){_(e,n,d),k(n,t),k(n,r),k(n,s),_(e,a,d),_(e,i,d),Te(u,i,null),_(e,o,d),p&&p.m(e,d),_(e,l,d),c=!0},p(e,n){c&&!e.$groups||d===(d=n.$groups&&n.$groups.length+"")||L(r,d),n.$groups&&n.$groups.length?p?(p.p(e,n),$e(p,1)):((p=Is(n)).c(),$e(p,1),p.m(l.parentNode,l)):p&&(ge(),ve(p,1,1,()=>{p=null}),he())},i(e){c||($e(u.$$.fragment,e),$e(p),c=!0)},o(e){ve(u.$$.fragment,e),ve(p),c=!1},d(e){e&&(D(n),D(a),D(i)),Ae(u),e&&D(o),p&&p.d(e),e&&D(l)}}}function Ts(e,n,t){let r,s;return d(e,Gr,e=>{t("$groups",r=e)}),e.$$.update=(e={$groups:1})=>{e.$groups&&t("sortedGroups",s=r.slice().sort((e,n)=>e.semester.startDate>n.semester.startDate?-1:e.semester.startDate<n.semester.startDate?1:e.name<n.name?-1:e.name>n.name?1:void 0))},{sortedGroups:s,$groups:r}}class As extends Oe{constructor(e){super(),Ee(this,e,Ts,Ms,o,[])}}function Ns(e){var n,t=new xn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Es(n){var t,r=new It({props:{what:"groups"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function Os(n){var t,r=new As({});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function Ls(e){var n,t,r,s,a,i,o,l=[Os,Es,Ns],c=[];function d(e,n){return n.$groups?0:n.errors?2:1}return s=d(0,e),a=c[s]=l[s](e),{c(){n=T(),(t=I("h1")).textContent="Groups",r=T(),a.c(),i=A(),document.title="Groups",O(t,"class","title")},m(e,a){_(e,n,a),_(e,t,a),_(e,r,a),c[s].m(e,a),_(e,i,a),o=!0},p(e,n){var t=s;(s=d(0,n))===t?c[s].p(e,n):(ge(),ve(c[t],1,1,()=>{c[t]=null}),he(),(a=c[s])||(a=c[s]=l[s](n)).c(),$e(a,1),a.m(i.parentNode,i))},i(e){o||($e(a),o=!0)},o(e){ve(a),o=!1},d(e){e&&(D(n),D(t),D(r)),c[s].d(e),e&&D(i)}}}function Ps(e,n,t){let r;return d(e,Gr,e=>{t("$groups",r=e)}),J(()=>{Gr.get()}),{errors:void 0,$groups:r}}var Rs=zs;function zs(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}zs.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),t=Math.floor(n*this.jitter*e);e=0==(1&Math.floor(10*n))?e-t:e+t}return 0|Math.min(e,this.max)},zs.prototype.reset=function(){this.attempts=0},zs.prototype.setMin=function(e){this.ms=e},zs.prototype.setMax=function(e){this.max=e},zs.prototype.setJitter=function(e){this.jitter=e};var js=Gn(function(e){var n=Object.prototype.hasOwnProperty,t="~";function r(){}function s(e,n,t){this.fn=e,this.context=n,this.once=t||!1}function a(e,n,r,a,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new s(r,a||e,i),l=t?t+n:n;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function i(e,n){0==--e._eventsCount?e._events=new r:delete e._events[n]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(t=!1)),o.prototype.eventNames=function(){var e,r,s=[];if(0===this._eventsCount)return s;for(r in e=this._events)n.call(e,r)&&s.push(t?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},o.prototype.listeners=function(e){var n=t?t+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,a=r.length,i=new Array(a);s<a;s++)i[s]=r[s].fn;return i},o.prototype.listenerCount=function(e){var n=t?t+e:e,r=this._events[n];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,n,r,s,a,i){var o=t?t+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,n),!0;case 3:return d.fn.call(d.context,n,r),!0;case 4:return d.fn.call(d.context,n,r,s),!0;case 5:return d.fn.call(d.context,n,r,s,a),!0;case 6:return d.fn.call(d.context,n,r,s,a,i),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var p,m=d.length;for(c=0;c<m;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,n);break;case 3:d[c].fn.call(d[c].context,n,r);break;case 4:d[c].fn.call(d[c].context,n,r,s);break;default:if(!l)for(p=1,l=new Array(u-1);p<u;p++)l[p-1]=arguments[p];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,n,t){return a(this,e,n,t,!1)},o.prototype.once=function(e,n,t){return a(this,e,n,t,!0)},o.prototype.removeListener=function(e,n,r,s){var a=t?t+e:e;if(!this._events[a])return this;if(!n)return i(this,a),this;var o=this._events[a];if(o.fn)o.fn!==n||s&&!o.once||r&&o.context!==r||i(this,a);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==n||s&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[a]=1===c.length?c[0]:c:i(this,a)}return this},o.prototype.removeAllListeners=function(e){var n;return e?(n=t?t+e:e,this._events[n]&&i(this,n)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,e.exports=o});var qs=function(e){var n,t=e.Symbol;return"function"==typeof t?t.observable?n=t.observable:(n=t("observable"),t.observable=n):n="@@observable",n}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")());const Hs=3e4;function Fs(e){return"string"==typeof e}const Ws=new class{constructor(e,n){const{connectionCallback:t,connectionParams:r={},timeout:s=Hs,reconnect:a=!1,reconnectionAttempts:i=1/0,lazy:o=!1,inactivityTimeout:l=0}=n||{};this.wsImpl=WebSocket,this.connectionCallback=t,this.url=e,this.operations={},this.nextOperationId=0,this.wsTimeout=s,this.unsentMessagesQueue=[],this.reconnect=a,this.reconnecting=!1,this.reconnectionAttempts=i,this.lazy=!!o,this.inactivityTimeout=l,this.closedByUser=!1,this.backoff=new Rs({jitter:.5}),this.eventEmitter=new js,this.client=null,this.maxConnectTimeGenerator=this.createMaxConnectTimeGenerator(),this.connectionParams=this.getConnectionParams(r),this.lazy||this.connect()}get status(){return null===this.client?this.wsImpl.CLOSED:this.client.readyState}close(e=!0,n=!0){this.clearInactivityTimeout(),null!==this.client&&(this.closedByUser=n,e&&(this.clearCheckConnectionInterval(),this.clearMaxConnectTimeout(),this.clearTryReconnectTimeout(),this.unsubscribeAll(),this.sendMessage(void 0,"connection_terminate",null)),this.client.close(),this.client=null,this.eventEmitter.emit("disconnected"),e||this.tryReconnect())}request(e){const n=this.getObserver.bind(this),t=this.executeOperation.bind(this),r=this.unsubscribe.bind(this);let s;return this.clearInactivityTimeout(),{[qs](){return this},subscribe(a,i,o){const l=n(a,i,o);return s=t(e,(e,n)=>{null===e&&null===n?l.complete&&l.complete():e?l.error&&l.error(e[0]):l.next&&l.next(n)}),{unsubscribe:()=>{s&&(r(s),s=null)}}}}}on(e,n,t){const r=this.eventEmitter.on(e,n,t);return()=>{r.off(e,n,t)}}onConnected(e,n){return this.on("connected",e,n)}onConnecting(e,n){return this.on("connecting",e,n)}onDisconnected(e,n){return this.on("disconnected",e,n)}onReconnected(e,n){return this.on("reconnected",e,n)}onReconnecting(e,n){return this.on("reconnecting",e,n)}onError(e,n){return this.on("error",e,n)}unsubscribeAll(){Object.keys(this.operations).forEach(e=>{this.unsubscribe(e)})}getConnectionParams(e){return()=>new Promise((n,t)=>{if("function"==typeof e)try{return n(e(null))}catch(e){return t(e)}n(e)})}executeOperation(e,n){null===this.client&&this.connect();const t=this.generateOperationId();this.operations[t]={options:e,handler:n};try{this.checkOperationOptions(e,n),this.operations[t]&&(this.operations[t]={options:e,handler:n},this.sendMessage(t,"start",e))}catch(e){this.unsubscribe(t),n(this.formatErrors(e))}return t}getObserver(e,n,t){return"function"==typeof e?{next:n=>e(n),error:e=>n&&n(e),complete:()=>t&&t()}:e}createMaxConnectTimeGenerator(){const e=this.wsTimeout;return new Rs({min:1e3,max:e,factor:1.2})}clearCheckConnectionInterval(){this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnectionIntervalId=null)}clearMaxConnectTimeout(){this.maxConnectTimeoutId&&(clearTimeout(this.maxConnectTimeoutId),this.maxConnectTimeoutId=null)}clearTryReconnectTimeout(){this.tryReconnectTimeoutId&&(clearTimeout(this.tryReconnectTimeoutId),this.tryReconnectTimeoutId=null)}clearInactivityTimeout(){this.inactivityTimeoutId&&(clearTimeout(this.inactivityTimeoutId),this.inactivityTimeoutId=null)}setInactivityTimeout(){this.inactivityTimeout>0&&0===Object.keys(this.operations).length&&(this.inactivityTimeoutId=setTimeout(()=>{0===Object.keys(this.operations).length&&this.close()},this.inactivityTimeout))}checkOperationOptions(e,n){const{query:t,variables:r,operationName:s}=e;if(!t)throw new Error("Must provide a query.");if(!n)throw new Error("Must provide an handler.");if(!Fs(t)||s&&!Fs(s)||r&&(null===(a=r)||"object"!=typeof a))throw new Error("Incorrect option types. query must be a string,`operationName` must be a string, and `variables` must be an object.");var a}buildMessage(e,n,t){return{id:e,type:n,payload:t&&t.query?Object.assign({},t,{query:t.query}):t}}formatErrors(e){return Array.isArray(e)?e:e&&e.errors?this.formatErrors(e.errors):e&&e.message?[e]:[{name:"FormatedError",message:"Unknown error",originalError:e}]}sendMessage(e,n,t){this.sendMessageRaw(this.buildMessage(e,n,t))}sendMessageRaw(e){switch(this.status){case this.wsImpl.OPEN:const n=JSON.stringify(e);try{JSON.parse(n)}catch(n){this.eventEmitter.emit("error",new Error(`Message must be JSON-serializable. Got: ${e}`))}this.client.send(n);break;case this.wsImpl.CONNECTING:this.unsentMessagesQueue.push(e);break;default:this.reconnecting||this.eventEmitter.emit("error",new Error("A message was not sent because socket is not connected, is closing or is already closed. Message was: "+JSON.stringify(e)))}}generateOperationId(){return String(++this.nextOperationId)}tryReconnect(){if(!this.reconnect||this.backoff.attempts>=this.reconnectionAttempts)return;this.reconnecting||(Object.keys(this.operations).forEach(e=>{this.unsentMessagesQueue.push(this.buildMessage(e,"start",this.operations[e].options))}),this.reconnecting=!0),this.clearTryReconnectTimeout();const e=this.backoff.duration();this.tryReconnectTimeoutId=setTimeout(()=>{this.connect()},e)}flushUnsentMessagesQueue(){this.unsentMessagesQueue.forEach(e=>{this.sendMessageRaw(e)}),this.unsentMessagesQueue=[]}checkConnection(){this.wasKeepAliveReceived?this.wasKeepAliveReceived=!1:this.reconnecting||this.close(!1,!0)}checkMaxConnectTimeout(){this.clearMaxConnectTimeout(),this.maxConnectTimeoutId=setTimeout(()=>{this.status!==this.wsImpl.OPEN&&(this.reconnecting=!0,this.close(!1,!0))},this.maxConnectTimeGenerator.duration())}connect(){this.client=new WebSocket(this.url,"graphql-ws"),this.checkMaxConnectTimeout(),this.client.addEventListener("open",async()=>{if(this.status===this.wsImpl.OPEN){this.clearMaxConnectTimeout(),this.closedByUser=!1,this.eventEmitter.emit(this.reconnecting?"reconnecting":"connecting");try{const e=await this.connectionParams();this.sendMessage(void 0,"connection_init",e),this.flushUnsentMessagesQueue()}catch(e){this.sendMessage(void 0,"connection_error",e),this.flushUnsentMessagesQueue()}}}),this.client.onclose=()=>{this.closedByUser||this.close(!1,!1)},this.client.addEventListener("error",e=>{this.eventEmitter.emit("error",e)}),this.client.addEventListener("message",({data:e})=>{this.processReceivedData(e)})}processReceivedData(e){let n,t;try{t=(n=JSON.parse(e)).id}catch(n){throw new Error(`Message must be JSON-parseable. Got: ${e}`)}if(!["data","complete","error"].includes(n.type)||this.operations[t])switch(n.type){case"connection_error":this.connectionCallback&&this.connectionCallback(n.payload);break;case"connection_ack":this.eventEmitter.emit(this.reconnecting?"reconnected":"connected"),this.reconnecting=!1,this.backoff.reset(),this.maxConnectTimeGenerator.reset(),this.connectionCallback&&this.connectionCallback();break;case"complete":this.operations[t].handler(null,null),delete this.operations[t];break;case"error":this.operations[t].handler(this.formatErrors(n.payload),null),delete this.operations[t];break;case"data":const e=n.payload.errors?{...n.payload,errors:this.formatErrors(n.payload.errors)}:n.payload;this.operations[t].handler(null,e);break;case"ka":const r=void 0===this.wasKeepAliveReceived;this.wasKeepAliveReceived=!0,r&&this.checkConnection(),this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnection()),this.checkConnectionIntervalId=setInterval(this.checkConnection.bind(this),this.wsTimeout);break;default:throw new Error("Invalid message type!")}else this.unsubscribe(t)}unsubscribe(e){this.operations[e]&&(delete this.operations[e],this.setInactivityTimeout(),this.sendMessage(e,"stop",void 0))}}("ws://192.168.1.9:4000/subscriptions",{reconnect:!0,lazy:!0,connectionCallback:e=>{e&&console.error(e)}}),Ys=Re(),Us=Re(),Bs=(()=>{const{subscribe:e,set:n,update:t}=Re();return{subscribe:e,update:t,get:async()=>{const e=c(Us),t=await en("\n query getSessions($where: ClassSessionWhereInput){\n  classSessions (where: $where) {\n    id\n    startsAt\n    endsAt\n    stage\n    number\n    group {\n      id\n      name\n    }\n    lesson {\n      id\n    }\n  }\n}",{where:e});n(t.classSessions)},create:async(e,n,t,r)=>{const s={startsAt:e,endsAt:n};t&&(s.group={connect:{id:t}}),r&&(s.lesson={connect:{id:r}});const a=await en("\nmutation newClassSession($input: ClassSessionCreateInput!) {\n  createClassSession(input: $input) {\n    id\n    stage\n    startsAt\n    endsAt\n    group {\n      name\n      id\n    }\n  }\n}\n",{input:s});return Bs.get(),a.createClassSession},remove:async e=>{const n=await en("\nmutation deleteClassSession($id: ID!) {\n  deleteClassSession(id: $id) {\n    id\n    stage\n    startsAt\n    endsAt\n  }\n}\n",{id:e});return Bs.get(),n.deleteClassSession},patch:async(e,n,t,r)=>{const s=await en("\nmutation updateClassSession($id: ID!, $lessonId: ID, $groupId: ID, $input: ClassSessionUpdateInput) {\n  updateClassSession(id: $id, input: $input, groupId: $groupId, lessonId: $lessonId) {\n    id\n    stage\n    startsAt\n    endsAt\n    group {\n      name\n      id\n    }\n  }\n}",{id:e,input:n,groupId:t,lessonId:r});return Bs.get(),s.updateClassSession}}})(),Gs=e=>{if(!e)return;const n=new Date,t=new Date(n.getTime()+18e5).toISOString(),r=new Date(n.getTime()+864e5).toISOString();return{now:e.find(e=>e.startsAt<n.toISOString()&&e.endsAt>n.toISOString()),soon:e.filter(e=>e.startsAt>n.toISOString()&&e.startsAt<t),later:e.filter(e=>e.startsAt>t&&e.startsAt<r)}},Zs=async()=>{const e=new Date,n=new Date(e.getTime()+864e5);return(await en("\nquery todaysSessions($now: DateTime, $latest: DateTime){\n  classSessions(where: {\n    startsAt_lt: $latest,\n    endsAt_gt: $now\n  }) {\n    id\n    startsAt\n    endsAt\n    stage\n    number\n    group {\n      id\n      name\n    }\n  }\n}",{now:e,latest:n})).classSessions},Vs=Pe(null,e=>{const n=new Date;let t=[];Zs().then(r=>{t=r,e({...Gs(r),updatedAt:n})});const r=Ws.request({query:"\nsubscription {\n  classSessions {\n    mutation\n    updatedFields\n    previousValues{\n      id\n      stage\n      startsAt\n      endsAt\n    }\n      node {\n        id\n        stage\n        startsAt\n        endsAt\n        number\n        group {\n          id\n          name\n        }\n      }\n  }\n}"}).subscribe({next(n){n.data&&n.data.classSessions&&Zs().then(n=>{t=n,e({...Gs(n),updatedAt:new Date})})}}),s=setInterval(()=>{const r=new Date,s=new Date(r-36e5);n<s?Zs().then(n=>{t=n;const r=new Date;e({...Gs(t),updatedAt:r})}):e({...Gs(t),updatedAt:n})},15e3);return()=>{r&&r.unsubscribe(),clearInterval(s)}}),Js=Pe(new Date,e=>{const n=setInterval(()=>{e(new Date)},1e3);return()=>clearInterval(n)});function Xs(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===n?new Date(e.getTime()):"number"==typeof e||"[object Number]"===n?new Date(e):("string"!=typeof e&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Qs(e){if(null===e||!0===e||!1===e)return NaN;var n=Number(e);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}var Ks=6e4;function ea(e){var n=new Date(e.getTime()),t=n.getTimezoneOffset();n.setSeconds(0,0);var r=n.getTime()%Ks;return t*Ks+r}function na(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Xs(e);return n.setHours(0,0,0,0),n}var ta=864e5;function ra(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var t=Xs(e),r=Xs(n),s=t.getTime()-r.getTime();return s<0?-1:s>0?1:s}function sa(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var t=Xs(e),r=Xs(n),s=ra(t,r),a=Math.abs(function(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var t=Xs(e),r=Xs(n);return 12*(t.getFullYear()-r.getFullYear())+(t.getMonth()-r.getMonth())}(t,r));t.setMonth(t.getMonth()-s*a);var i=s*(a-(ra(t,r)===-s));return 0===i?0:i}function aa(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var t=function(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var t=Xs(e),r=Xs(n);return t.getTime()-r.getTime()}(e,n)/1e3;return t>0?Math.floor(t):Math.ceil(t)}var ia={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function oa(e){return function(n){var t=n||{},r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var la={date:oa({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:oa({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:oa({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ca={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function da(e){return function(n,t){var r,s=t||{};if("formatting"===(s.context?String(s.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,i=s.width?String(s.width):a;r=e.formattingValues[i]||e.formattingValues[a]}else{var o=e.defaultWidth,l=s.width?String(s.width):e.defaultWidth;r=e.values[l]||e.values[o]}return r[e.argumentCallback?e.argumentCallback(n):n]}}function ua(e){return function(n,t){var r=String(n),s=t||{},a=s.width,i=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],o=r.match(i);if(!o)return null;var l,c=o[0],d=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth];return l="[object Array]"===Object.prototype.toString.call(d)?d.findIndex(function(e){return e.test(r)}):function(e,n){for(var t in e)if(e.hasOwnProperty(t)&&n(e[t]))return t}(d,function(e){return e.test(r)}),l=e.valueCallback?e.valueCallback(l):l,{value:l=s.valueCallback?s.valueCallback(l):l,rest:r.slice(c.length)}}}var pa,ma={formatDistance:function(e,n,t){var r;return t=t||{},r="string"==typeof ia[e]?ia[e]:1===n?ia[e].one:ia[e].other.replace("{{count}}",n),t.addSuffix?t.comparison>0?"in "+r:r+" ago":r},formatLong:la,formatRelative:function(e,n,t,r){return ca[e]},localize:{ordinalNumber:function(e,n){var t=Number(e),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:da({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:da({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:da({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:da({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:da({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(pa={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,n){var t=String(e),r=n||{},s=t.match(pa.matchPattern);if(!s)return null;var a=s[0],i=t.match(pa.parsePattern);if(!i)return null;var o=pa.valueCallback?pa.valueCallback(i[0]):i[0];return{value:o=r.valueCallback?r.valueCallback(o):o,rest:t.slice(a.length)}}),era:ua({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:ua({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:ua({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:ua({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:ua({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function fa(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");return function(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var t=Xs(e).getTime(),r=Qs(n);return new Date(t+r)}(e,-Qs(n))}function ga(e,n){for(var t=e<0?"-":"",r=Math.abs(e).toString();r.length<n;)r="0"+r;return t+r}var ha=function(e,n){var t=e.getUTCFullYear(),r=t>0?t:1-t;return ga("yy"===n?r%100:r,n.length)},$a=function(e,n){var t=e.getUTCMonth();return"M"===n?String(t+1):ga(t+1,2)},va=function(e,n){return ga(e.getUTCDate(),n.length)},ba=function(e,n){return ga(e.getUTCHours()%12||12,n.length)},wa=function(e,n){return ga(e.getUTCHours(),n.length)},ya=function(e,n){return ga(e.getUTCMinutes(),n.length)},xa=function(e,n){return ga(e.getUTCSeconds(),n.length)},ka=function(e,n){var t=n.length,r=e.getUTCMilliseconds();return ga(Math.floor(r*Math.pow(10,t-3)),n.length)},_a=864e5;function Da(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Xs(e),t=n.getUTCDay(),r=(t<1?7:0)+t-1;return n.setUTCDate(n.getUTCDate()-r),n.setUTCHours(0,0,0,0),n}function Sa(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Xs(e),t=n.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var s=Da(r),a=new Date(0);a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0);var i=Da(a);return n.getTime()>=s.getTime()?t+1:n.getTime()>=i.getTime()?t:t-1}var Ia=6048e5;function Ca(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Xs(e),t=Da(n).getTime()-function(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Sa(e),t=new Date(0);return t.setUTCFullYear(n,0,4),t.setUTCHours(0,0,0,0),Da(t)}(n).getTime();return Math.round(t/Ia)+1}function Ma(e,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=n||{},r=t.locale,s=r&&r.options&&r.options.weekStartsOn,a=null==s?0:Qs(s),i=null==t.weekStartsOn?a:Qs(t.weekStartsOn);if(!(i>=0&&i<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var o=Xs(e),l=o.getUTCDay(),c=(l<i?7:0)+l-i;return o.setUTCDate(o.getUTCDate()-c),o.setUTCHours(0,0,0,0),o}function Ta(e,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Xs(e,n),r=t.getUTCFullYear(),s=n||{},a=s.locale,i=a&&a.options&&a.options.firstWeekContainsDate,o=null==i?1:Qs(i),l=null==s.firstWeekContainsDate?o:Qs(s.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,l),c.setUTCHours(0,0,0,0);var d=Ma(c,n),u=new Date(0);u.setUTCFullYear(r,0,l),u.setUTCHours(0,0,0,0);var p=Ma(u,n);return t.getTime()>=d.getTime()?r+1:t.getTime()>=p.getTime()?r:r-1}var Aa=6048e5;function Na(e,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Xs(e),r=Ma(t,n).getTime()-function(e,n){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=n||{},r=t.locale,s=r&&r.options&&r.options.firstWeekContainsDate,a=null==s?1:Qs(s),i=null==t.firstWeekContainsDate?a:Qs(t.firstWeekContainsDate),o=Ta(e,n),l=new Date(0);return l.setUTCFullYear(o,0,i),l.setUTCHours(0,0,0,0),Ma(l,n)}(t,n).getTime();return Math.round(r/Aa)+1}var Ea="midnight",Oa="noon",La="morning",Pa="afternoon",Ra="evening",za="night",ja={G:function(e,n,t){var r=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(e,n,t){if("yo"===n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return ha(e,n)},Y:function(e,n,t,r){var s=Ta(e,r),a=s>0?s:1-s;return"YY"===n?ga(a%100,2):"Yo"===n?t.ordinalNumber(a,{unit:"year"}):ga(a,n.length)},R:function(e,n){return ga(Sa(e),n.length)},u:function(e,n){return ga(e.getUTCFullYear(),n.length)},Q:function(e,n,t){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return ga(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,t){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return ga(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,t){var r=e.getUTCMonth();switch(n){case"M":case"MM":return $a(e,n);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,t){var r=e.getUTCMonth();switch(n){case"L":return String(r+1);case"LL":return ga(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,t,r){var s=Na(e,r);return"wo"===n?t.ordinalNumber(s,{unit:"week"}):ga(s,n.length)},I:function(e,n,t){var r=Ca(e);return"Io"===n?t.ordinalNumber(r,{unit:"week"}):ga(r,n.length)},d:function(e,n,t){return"do"===n?t.ordinalNumber(e.getUTCDate(),{unit:"date"}):va(e,n)},D:function(e,n,t){var r=function(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Xs(e),t=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var r=t-n.getTime();return Math.floor(r/_a)+1}(e);return"Do"===n?t.ordinalNumber(r,{unit:"dayOfYear"}):ga(r,n.length)},E:function(e,n,t){var r=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,t,r){var s=e.getUTCDay(),a=(s-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return ga(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,t,r){var s=e.getUTCDay(),a=(s-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return ga(a,n.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,t){var r=e.getUTCDay(),s=0===r?7:r;switch(n){case"i":return String(s);case"ii":return ga(s,n.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,n,t){var r,s=e.getUTCHours();switch(r=12===s?Oa:0===s?Ea:s/12>=1?"pm":"am",n){case"b":case"bb":case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,n,t){var r,s=e.getUTCHours();switch(r=s>=17?Ra:s>=12?Pa:s>=4?La:za,n){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,n,t){if("ho"===n){var r=e.getUTCHours()%12;return 0===r&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return ba(e,n)},H:function(e,n,t){return"Ho"===n?t.ordinalNumber(e.getUTCHours(),{unit:"hour"}):wa(e,n)},K:function(e,n,t){var r=e.getUTCHours()%12;return"Ko"===n?t.ordinalNumber(r,{unit:"hour"}):ga(r,n.length)},k:function(e,n,t){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===n?t.ordinalNumber(r,{unit:"hour"}):ga(r,n.length)},m:function(e,n,t){return"mo"===n?t.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ya(e,n)},s:function(e,n,t){return"so"===n?t.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):xa(e,n)},S:function(e,n){return ka(e,n)},X:function(e,n,t,r){var s=(r._originalDate||e).getTimezoneOffset();if(0===s)return"Z";switch(n){case"X":return Ha(s);case"XXXX":case"XX":return Fa(s);case"XXXXX":case"XXX":default:return Fa(s,":")}},x:function(e,n,t,r){var s=(r._originalDate||e).getTimezoneOffset();switch(n){case"x":return Ha(s);case"xxxx":case"xx":return Fa(s);case"xxxxx":case"xxx":default:return Fa(s,":")}},O:function(e,n,t,r){var s=(r._originalDate||e).getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+qa(s,":");case"OOOO":default:return"GMT"+Fa(s,":")}},z:function(e,n,t,r){var s=(r._originalDate||e).getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+qa(s,":");case"zzzz":default:return"GMT"+Fa(s,":")}},t:function(e,n,t,r){var s=r._originalDate||e;return ga(Math.floor(s.getTime()/1e3),n.length)},T:function(e,n,t,r){return ga((r._originalDate||e).getTime(),n.length)}};function qa(e,n){var t=e>0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),a=r%60;if(0===a)return t+String(s);var i=n||"";return t+String(s)+i+ga(a,2)}function Ha(e,n){return e%60==0?(e>0?"-":"+")+ga(Math.abs(e)/60,2):Fa(e,n)}function Fa(e,n){var t=n||"",r=e>0?"-":"+",s=Math.abs(e);return r+ga(Math.floor(s/60),2)+t+ga(s%60,2)}function Wa(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}}function Ya(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}}var Ua={p:Ya,P:function(e,n){var t,r=e.match(/(P+)(p+)?/),s=r[1],a=r[2];if(!a)return Wa(e,n);switch(s){case"P":t=n.dateTime({width:"short"});break;case"PP":t=n.dateTime({width:"medium"});break;case"PPP":t=n.dateTime({width:"long"});break;case"PPPP":default:t=n.dateTime({width:"full"})}return t.replace("{{date}}",Wa(s,n)).replace("{{time}}",Ya(a,n))}},Ba=["D","DD"],Ga=["YY","YYYY"];function Za(e){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` for formatting years; see: https://git.io/fxCyr");if("YY"===e)throw new RangeError("Use `yy` instead of `YY` for formatting years; see: https://git.io/fxCyr");if("D"===e)throw new RangeError("Use `d` instead of `D` for formatting days of the month; see: https://git.io/fxCyr");if("DD"===e)throw new RangeError("Use `dd` instead of `DD` for formatting days of the month; see: https://git.io/fxCyr")}var Va=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ja=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Xa=/^'(.*?)'?$/,Qa=/''/g,Ka=/[a-zA-Z]/;function ei(e,n,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=String(n),s=t||{},a=s.locale||ma,i=a.options&&a.options.firstWeekContainsDate,o=null==i?1:Qs(i),l=null==s.firstWeekContainsDate?o:Qs(s.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=a.options&&a.options.weekStartsOn,d=null==c?0:Qs(c),u=null==s.weekStartsOn?d:Qs(s.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!a.localize)throw new RangeError("locale must contain localize property");if(!a.formatLong)throw new RangeError("locale must contain formatLong property");var p=Xs(e);if(!function(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Xs(e);return!isNaN(n)}(p))throw new RangeError("Invalid time value");var m=fa(p,ea(p)),f={firstWeekContainsDate:l,weekStartsOn:u,locale:a,_originalDate:p};return r.match(Ja).map(function(e){var n=e[0];return"p"===n||"P"===n?(0,Ua[n])(e,a.formatLong,f):e}).join("").match(Va).map(function(e){if("''"===e)return"'";var n=e[0];if("'"===n)return e.match(Xa)[1].replace(Qa,"'");var t,r=ja[n];if(r)return s.useAdditionalWeekYearTokens||(t=e,-1===Ga.indexOf(t))||Za(e),!s.useAdditionalDayOfYearTokens&&function(e){return-1!==Ba.indexOf(e)}(e)&&Za(e),r(m,e,a.localize,f);if(n.match(Ka))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");return e}).join("")}function ni(e){return function(e,n){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in n=n||{})n.hasOwnProperty(t)&&(e[t]=n[t]);return e}({},e)}var ti=1440,ri=2520,si=43200,ai=86400;function ii(e,n,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=t||{},s=r.locale||ma;if(!s.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=ra(e,n);if(isNaN(a))throw new RangeError("Invalid time value");var i,o,l=ni(r);l.addSuffix=Boolean(r.addSuffix),l.comparison=a,a>0?(i=Xs(n),o=Xs(e)):(i=Xs(e),o=Xs(n));var c,d=aa(o,i),u=(ea(o)-ea(i))/1e3,p=Math.round((d-u)/60);if(p<2)return r.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,l):d<10?s.formatDistance("lessThanXSeconds",10,l):d<20?s.formatDistance("lessThanXSeconds",20,l):d<40?s.formatDistance("halfAMinute",null,l):d<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):0===p?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",p,l);if(p<45)return s.formatDistance("xMinutes",p,l);if(p<90)return s.formatDistance("aboutXHours",1,l);if(p<ti){var m=Math.round(p/60);return s.formatDistance("aboutXHours",m,l)}if(p<ri)return s.formatDistance("xDays",1,l);if(p<si){var f=Math.round(p/ti);return s.formatDistance("xDays",f,l)}if(p<ai)return c=Math.round(p/si),s.formatDistance("aboutXMonths",c,l);if((c=sa(o,i))<12){var g=Math.round(p/si);return s.formatDistance("xMonths",g,l)}var h=c%12,$=Math.floor(c/12);return h<3?s.formatDistance("aboutXYears",$,l):h<9?s.formatDistance("overXYears",$,l):s.formatDistance("almostXYears",$+1,l)}var oi=1440,li=43200,ci=525600;function di(e,n,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=Xs(e),s=Xs(n),a=t||{},i=a.locale||ma;if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");if(!i.formatRelative)throw new RangeError("locale must contain formatRelative property");var o,l=function(e,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var t=na(e),r=na(n),s=t.getTime()-ea(t),a=r.getTime()-ea(r);return Math.round((s-a)/ta)}(r,s);if(isNaN(l))throw new RangeError("Invalid time value");o=l<-6?"other":l<-1?"lastWeek":l<0?"yesterday":l<1?"today":l<2?"tomorrow":l<7?"nextWeek":"other";var c=fa(r,ea(r)),d=fa(s,ea(s));return ei(r,i.formatRelative(o,c,d,a),a)}function ui(e){var n,t,r,s,a,i,o=e.dateString(e.session.startsAt)+"",l=e.session.group.name+"";return{c(){n=I("span"),t=M("the session which takes place "),r=M(o),s=M(" with "),a=M(l),i=M(" class?")},m(e,o){_(e,n,o),k(n,t),k(n,r),k(n,s),k(n,a),k(n,i)},p(e,n){e.session&&o!==(o=n.dateString(n.session.startsAt)+"")&&L(r,o),e.session&&l!==(l=n.session.group.name+"")&&L(a,l)},d(e){e&&D(n)}}}function pi(e){var n,t;function r(t){e.confirmdelete_open_binding.call(null,t),n=!0,le(()=>n=!1)}let s={name:"session",errors:e.errors,loading:e.loading,$$slots:{default:[ui]},$$scope:{ctx:e}};void 0!==e.open&&(s.open=e.open);var a=new Dn({props:s});return ne.push(()=>Me(a,"open",r)),a.$on("delete",e.handleDelete),{c(){a.$$.fragment.c()},m(e,n){Te(a,e,n),t=!0},p(e,t){var r={};e.errors&&(r.errors=t.errors),e.loading&&(r.loading=t.loading),(e.$$scope||e.session)&&(r.$$scope={changed:e,ctx:t}),!n&&e.open&&(r.open=t.open),a.$set(r)},i(e){t||($e(a.$$.fragment,e),t=!0)},o(e){ve(a.$$.fragment,e),t=!1},d(e){Ae(a,e)}}}function mi(e,n,t){let{open:r=!1,session:s={}}=n,a=!1,i="";return e.$set=e=>{"open"in e&&t("open",r=e.open),"session"in e&&t("session",s=e.session)},{open:r,session:s,loading:a,errors:i,handleDelete:async()=>{t("loading",a=!0);try{await Bs.remove(s.id),t("open",r=!1),je.add({text:"Session deleted",type:"success"})}catch(e){t("errors",i=e),je.add({text:"Could not delete session'",type:"danger"})}finally{t("loading",a=!1)}},dateString:e=>di(new Date(e),new Date),confirmdelete_open_binding:function(e){t("open",r=e)}}}class fi extends Oe{constructor(e){super(),Ee(this,e,mi,pi,o,["open","session"])}}function gi(e,n,t){const r=Object.create(e);return r.id=n[t].id,r.name=n[t].name,r}function hi(n){var t;return{c(){(t=I("option")).textContent="Loading semesters...",t.__value="",t.value=t.__value},m(e,n){_(e,t,n)},p:e,d(e){e&&D(t)}}}function $i(e){var n,t=[],r=new Map,s=e.$semesters;const a=e=>e.id;for(var i=0;i<s.length;i+=1){let n=gi(e,s,i),o=a(n);r.set(o,t[i]=vi(o,n))}return{c(){for(i=0;i<t.length;i+=1)t[i].c();n=A()},m(e,r){for(i=0;i<t.length;i+=1)t[i].m(e,r);_(e,n,r)},p(e,s){const i=s.$semesters;t=Ie(t,e,a,1,s,i,r,n.parentNode,De,vi,n,gi)},d(e){for(i=0;i<t.length;i+=1)t[i].d(e);e&&D(n)}}}function vi(e,n){var t,r,s,a=n.name+"";return{key:e,first:null,c(){t=I("option"),r=M(a),t.__value=s=n.id,t.value=t.__value,this.first=t},m(e,n){_(e,t,n),k(t,r)},p(e,n){e.$semesters&&a!==(a=n.name+"")&&L(r,a),e.$semesters&&s!==(s=n.id)&&(t.__value=s),t.value=t.__value},d(e){e&&D(t)}}}function bi(n){var t,r,s,a;function i(e,n){return n.$semesters?$i:hi}var o=i(0,n),l=o(n);return{c(){t=I("div"),r=I("select"),l.c(),O(t,"class","select svelte-t5dn19"),a=N(r,"change",n.handleChange)},m(e,a){_(e,t,a),k(t,r),l.m(r,null),n.select_binding(r),s=n.$semester&&n.$semester.id;for(var i=0;i<r.options.length;i+=1){var o=r.options[i];if(o.__value===s){o.selected=!0;break}}},p(e,n){if(o===(o=i(0,n))&&l?l.p(e,n):(l.d(1),(l=o(n))&&(l.c(),l.m(r,null))),e.$semester&&s!==(s=n.$semester&&n.$semester.id))for(var t=0;t<r.options.length;t+=1){var a=r.options[t];if(a.__value===s){a.selected=!0;break}}},i:e,o:e,d(e){e&&D(t),l.d(),n.select_binding(null),a()}}}function wi(e,n,t){let r,s,a;d(e,Ys,e=>{t("$semester",r=e)}),d(e,vn,e=>{t("$semesters",s=e)}),J(async()=>{if(await vn.get(),!r){const e=(new Date).toISOString(),n=s.find(n=>n.startDate<e&&n.endDate>e);n&&Ys.set(n)}});return{semesterSelect:a,handleChange:()=>{const e=s.find(e=>e.id===a.value);Ys.set(e)},$semester:r,$semesters:s,select_binding:function(e){ne[e?"unshift":"push"](()=>{t("semesterSelect",a=e)})}}}class yi extends Oe{constructor(e){super(),Ee(this,e,wi,bi,o,[])}}const xi="\n  fragment LessonFields on Lesson {\n    id\n    name\n    summaryEN\n    summaryZH\n    homeworkEN\n    homeworkZH\n    tags {\n      id\n      name\n    }\n    words {\n      id\n      english\n      chinese\n    }\n    materials {\n        id\n        title\n        type\n      }\n  }",ki=`\n  query Lesson($id: ID!) {\n    lesson(id: $id){\n      ...LessonFields\n    }\n  }\n  ${xi}`,_i=`\n  mutation CreateLesson($input: LessonCreateInput!){\n    createLesson(input: $input) {\n      ...LessonFields\n    }\n  }\n  ${xi}`,Di=`\n  mutation UpdateLesson($input: LessonUpdateInput!, $id: ID!){\n    updateLesson(input: $input, id: $id) {\n      ...LessonFields\n    }\n  }\n  ${xi}`,Si=(()=>{const{subscribe:e,set:n,update:t}=Re();return{subscribe:e,get:async(e={})=>{const{orderBy:t,where:r}=e,s=await en("\n  query ($orderBy: LessonOrderByInput, $where: LessonWhereInput) {\n    lessons (orderBy: $orderBy, where: $where) {\n      id\n      name\n      tags {\n        id\n        name\n      }\n    }\n  }",{orderBy:t,where:r});n(s.lessons)},remove:async e=>{await en("\n  mutation DeleteLesson($id: ID!){\n    deleteLesson(id: $id) {\n      id\n    }\n  }",{id:e}),t(n=>n&&n.filter(n=>n.id!==e))},create:async e=>{const n=await en(_i,{input:e});t(e=>e?[...e,n.createLesson]:[n.createLesson])},patch:async({input:e,id:n})=>{const r=await en(Di,{id:n,input:e});t(e=>e?e.map(e=>e.id!==n?e:r.updateLesson):[r.updateLesson]),Ii.update(e=>e&&e.id===n?r.updateLesson:e)}}})(),Ii=(()=>{const{subscribe:e,set:n,update:t}=Re();return{subscribe:e,update:t,patch:Si.patch,get:async e=>{const t=await en(ki,{id:e});n(t.lesson)}}})();function Ci(e,n,t){const r=Object.create(e);return r.tag=n[t],r}function Mi(e){var n,t,r,s,i,o,l,c,d=[],u=new Map,p=e.unique(e.tags);const m=e=>e.tag.id;for(var f=0;f<p.length;f+=1){let n=Ci(e,p,f),t=m(n);u.set(t,d[f]=Ti(t,n))}return{c(){for(n=I("div"),t=I("div"),r=I("div"),s=I("select"),(i=I("option")).textContent="No tag filter",f=0;f<d.length;f+=1)d[f].c();o=T(),(l=I("div")).innerHTML='<i class="fas fa-tag"></i>',i.__value="",i.value=i.__value,void 0===e.tagFilter&&oe(()=>e.select_change_handler.call(s)),O(r,"class","select"),O(l,"class","icon is-small is-left"),O(t,"class","control has-icons-left"),O(n,"class","field svelte-1038q9s"),c=[N(s,"change",e.select_change_handler),N(s,"change",e.getItems)]},m(a,c){for(_(a,n,c),k(n,t),k(t,r),k(r,s),k(s,i),f=0;f<d.length;f+=1)d[f].m(s,null);z(s,e.tagFilter),k(t,o),k(t,l)},p(e,n){const t=n.unique(n.tags);d=Ie(d,e,m,1,n,t,u,s,De,Ti,null,Ci),e.tagFilter&&z(s,n.tagFilter)},d(e){for(e&&D(n),f=0;f<d.length;f+=1)d[f].d();a(c)}}}function Ti(e,n){var t,r,s,a=n.tag.name+"";return{key:e,first:null,c(){t=I("option"),r=M(a),t.__value=s=n.tag.id,t.value=t.__value,this.first=t},m(e,n){_(e,t,n),k(t,r)},p(e,n){e.tags&&a!==(a=n.tag.name+"")&&L(r,a),e.tags&&s!==(s=n.tag.id)&&(t.__value=s),t.value=t.__value},d(e){e&&D(t)}}}function Ai(n){var t,r,s,i,o,l,c,d,u=n.tags&&Mi(n);return{c(){t=I("section"),r=I("div"),s=I("div"),i=I("input"),o=T(),(l=I("span")).innerHTML='<i class="fas fa-search"></i>',c=T(),u&&u.c(),O(i,"class","input"),O(i,"type","text"),O(i,"placeholder","Search"),O(l,"class","icon is-small is-left"),O(s,"class","control search has-icons-left"),q(s,"is-loading",n.loading),O(r,"class","field svelte-1038q9s"),O(t,"class","filters svelte-1038q9s"),d=[N(i,"input",n.input_input_handler),N(i,"input",n.getItems)]},m(e,a){_(e,t,a),k(t,r),k(r,s),k(s,i),P(i,n.searchString),k(s,o),k(s,l),k(t,c),u&&u.m(t,null)},p(e,n){e.searchString&&i.value!==n.searchString&&P(i,n.searchString),e.loading&&q(s,"is-loading",n.loading),n.tags?u?u.p(e,n):((u=Mi(n)).c(),u.m(t,null)):u&&(u.d(1),u=null)},i:e,o:e,d(e){e&&D(t),u&&u.d(),a(d)}}}function Ni(e,n,t){let r,s="",a=!1,i="",{searchParams:o="name",store:l}=n;d(e,l,e=>{t("$store",r=e)});const c=e=>{if(e)return e.reduce((e,n)=>(e.find(e=>e.id===n.id)||e.push(n),e),[])};let u;return e.$set=e=>{"searchParams"in e&&t("searchParams",o=e.searchParams),"store"in e&&t("store",l=e.store)},e.$$.update=(e={$store:1})=>{e.$store&&t("tags",u=r&&r.reduce((e,n)=>[...e,...n.tags],[]))},{searchString:s,loading:a,tagFilter:i,searchParams:o,store:l,getItems:async()=>{const e={};t("loading",a=!0),s&&(e.OR=[],"string"==typeof o&&t("searchParams",o=[o]),o.forEach(n=>{const t={};t[n+"_contains"]=s,e.OR.push(t)})),i&&(e.tags_some={id:i});try{await l.get({where:e})}catch(e){console.error(e)}finally{t("loading",a=!1)}},unique:c,tags:u,input_input_handler:function(){s=this.value,t("searchString",s)},select_change_handler:function(){i=j(this),t("tagFilter",i),t("unique",c),t("tags",u),t("$store",r)}}}class Ei extends Oe{constructor(e){super(),Ee(this,e,Ni,Ai,o,["searchParams","store"])}}function Oi(e,n,t){const r=Object.create(e);return r.lesson=n[t],r}function Li(n){var t;return{c(){(t=I("option")).textContent="Loading lessons...",t.__value="",t.value=t.__value},m(e,n){_(e,t,n)},p:e,d(e){e&&D(t)}}}function Pi(e){var n,t,r,s,a=e.$lessons.length+"",i=[],o=new Map,l=e.$lessons;const c=e=>e.lesson.id;for(var d=0;d<l.length;d+=1){let n=Oi(e,l,d),t=c(n);o.set(t,i[d]=Ri(t,n))}return{c(){for(n=I("option"),t=M(a),r=M(" matching lessons"),d=0;d<i.length;d+=1)i[d].c();s=A(),n.__value="",n.value=n.__value},m(e,a){for(_(e,n,a),k(n,t),k(n,r),d=0;d<i.length;d+=1)i[d].m(e,a);_(e,s,a)},p(e,n){e.$lessons&&a!==(a=n.$lessons.length+"")&&L(t,a);const r=n.$lessons;i=Ie(i,e,c,1,n,r,o,s.parentNode,De,Ri,s,Oi)},d(e){for(e&&D(n),d=0;d<i.length;d+=1)i[d].d(e);e&&D(s)}}}function Ri(e,n){var t,r,s,a,i=n.lesson.name+"";return{key:e,first:null,c(){t=I("option"),r=M(i),t.__value=s=n.lesson.id,t.value=t.__value,t.selected=a=n.lesson.id===n.lessonId,this.first=t},m(e,n){_(e,t,n),k(t,r)},p(e,n){e.$lessons&&i!==(i=n.lesson.name+"")&&L(r,i),e.$lessons&&s!==(s=n.lesson.id)&&(t.__value=s),t.value=t.__value,(e.$lessons||e.lessonId)&&a!==(a=n.lesson.id===n.lessonId)&&(t.selected=a)},d(e){e&&D(t)}}}function zi(e){var n,t,r,s,a,i,o=new Ei({props:{store:Si}});function l(e,n){return n.$lessons?Pi:Li}var c=l(0,e),d=c(e);return{c(){n=I("div"),o.$$.fragment.c(),t=T(),r=I("div"),s=I("select"),d.c(),void 0===e.lessonId&&oe(()=>e.select_change_handler.call(s)),O(r,"class","select"),O(n,"class","lesson-select svelte-610gz2"),i=N(s,"change",e.select_change_handler)},m(i,l){_(i,n,l),Te(o,n,null),k(n,t),k(n,r),k(r,s),d.m(s,null),z(s,e.lessonId),a=!0},p(e,n){var t={};e.lessons&&(t.store=Si),o.$set(t),c===(c=l(0,n))&&d?d.p(e,n):(d.d(1),(d=c(n))&&(d.c(),d.m(s,null))),e.lessonId&&z(s,n.lessonId)},i(e){a||($e(o.$$.fragment,e),a=!0)},o(e){ve(o.$$.fragment,e),a=!1},d(e){e&&D(n),Ae(o),d.d(),i()}}}function ji(e,n,t){let r;d(e,Si,e=>{t("$lessons",r=e)});let{lessonId:s=""}=n;return J(async()=>{await Si.get()}),e.$set=e=>{"lessonId"in e&&t("lessonId",s=e.lessonId)},{lessonId:s,$lessons:r,select_change_handler:function(){s=j(this),t("lessonId",s)}}}class qi extends Oe{constructor(e){super(),Ee(this,e,ji,zi,o,["lessonId"])}}function Hi(e){var n;return{c(){n=M("Add")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function Fi(e){var n;return{c(){n=M("Edit")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function Wi(e){var n,t;function r(t){e.groupselect_groupId_binding.call(null,t),n=!0,le(()=>n=!1)}let s={groups:e.$semester.groups,required:!0};void 0!==e.groupId&&(s.groupId=e.groupId);var a=new Yt({props:s});return ne.push(()=>Me(a,"groupId",r)),{c(){a.$$.fragment.c()},m(e,n){Te(a,e,n),t=!0},p(e,t){var r={};e.$semester&&(r.groups=t.$semester.groups),!n&&e.groupId&&(r.groupId=t.groupId),a.$set(r)},i(e){t||($e(a.$$.fragment,e),t=!0)},o(e){ve(a.$$.fragment,e),t=!1},d(e){Ae(a,e)}}}function Yi(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w,y,x,S,C;function A(e,n){return n.id?Fi:Hi}var L=A(0,e),P=L(e),R=new xn({props:{errors:e.errors}});function z(n){e.input0_value_binding.call(null,n),o=!0,le(()=>o=!1)}let j={label:"Start time",type:"datetime-local",required:!0};void 0!==e.startsAt&&(j.value=e.startsAt);var H=new Bn({props:j});function F(n){e.input1_value_binding.call(null,n),c=!0,le(()=>c=!1)}ne.push(()=>Me(H,"value",z));let W={label:"End time",type:"datetime-local",required:!0};void 0!==e.endsAt&&(W.value=e.endsAt);var Y=new Bn({props:W});ne.push(()=>Me(Y,"value",F));var U=new yi({}),B=e.$semester&&Wi(e);function G(n){e.lessonselect_lessonId_binding.call(null,n),$=!0,le(()=>$=!1)}let Z={};void 0!==e.lessonId&&(Z.lessonId=e.lessonId);var V=new qi({props:Z});return ne.push(()=>Me(V,"lessonId",G)),{c(){n=I("h2"),P.c(),t=M(" a class session"),r=T(),R.$$.fragment.c(),s=T(),i=I("form"),H.$$.fragment.c(),l=T(),Y.$$.fragment.c(),d=T(),(u=I("label")).textContent="Semester & Group",p=T(),U.$$.fragment.c(),m=T(),B&&B.c(),f=T(),(g=I("label")).textContent="Add lesson",h=T(),V.$$.fragment.c(),v=T(),b=I("div"),(w=I("button")).textContent="Save",y=T(),x=I("input"),O(n,"class","title"),O(u,"class","label"),O(g,"class","label"),O(w,"class","button is-primary"),O(w,"type","submit"),q(w,"is-loading",e.loading),O(x,"class","button"),O(x,"type","reset"),x.value="Cancel",O(b,"class","buttons svelte-jsaq7t"),i.noValidate=!0,C=[N(i,"submit",E(e.handleSubmit)),N(i,"reset",e.reset_handler)]},m(a,o){_(a,n,o),P.m(n,null),k(n,t),_(a,r,o),Te(R,a,o),_(a,s,o),_(a,i,o),Te(H,i,null),k(i,l),Te(Y,i,null),k(i,d),k(i,u),k(i,p),Te(U,i,null),k(i,m),B&&B.m(i,null),k(i,f),k(i,g),k(i,h),Te(V,i,null),k(i,v),k(i,b),k(b,w),e.button_binding(w),k(b,y),k(b,x),e.form_1_binding(i),S=!0},p(e,r){L!==(L=A(0,r))&&(P.d(1),(P=L(r))&&(P.c(),P.m(n,t)));var s={};e.errors&&(s.errors=r.errors),R.$set(s);var a={};!o&&e.startsAt&&(a.value=r.startsAt),H.$set(a);var l={};!c&&e.endsAt&&(l.value=r.endsAt),Y.$set(l),r.$semester?B?(B.p(e,r),$e(B,1)):((B=Wi(r)).c(),$e(B,1),B.m(i,f)):B&&(ge(),ve(B,1,1,()=>{B=null}),he());var d={};!$&&e.lessonId&&(d.lessonId=r.lessonId),V.$set(d),e.loading&&q(w,"is-loading",r.loading)},i(e){S||($e(R.$$.fragment,e),$e(H.$$.fragment,e),$e(Y.$$.fragment,e),$e(U.$$.fragment,e),$e(B),$e(V.$$.fragment,e),S=!0)},o(e){ve(R.$$.fragment,e),ve(H.$$.fragment,e),ve(Y.$$.fragment,e),ve(U.$$.fragment,e),ve(B),ve(V.$$.fragment,e),S=!1},d(t){t&&D(n),P.d(),t&&D(r),Ae(R,t),t&&(D(s),D(i)),Ae(H),Ae(Y),Ae(U),B&&B.d(),Ae(V),e.button_binding(null),e.form_1_binding(null),a(C)}}}function Ui(e,n,t){let r;d(e,Ys,e=>{t("$semester",r=e)});const s=Q(),a=new Date;a.setHours(19),a.setMinutes(0);const i=new Date;i.setHours(20),i.setMinutes(30);let o,l,{errors:c,loading:u=!1}=n,{id:p="",groupId:m="",startsAt:f=ei(a,"yyyy-MM-dd'T'HH:mm"),endsAt:g=ei(i,"yyyy-MM-dd'T'HH:mm"),lessonId:h=""}=n;return e.$set=e=>{"errors"in e&&t("errors",c=e.errors),"loading"in e&&t("loading",u=e.loading),"id"in e&&t("id",p=e.id),"groupId"in e&&t("groupId",m=e.groupId),"startsAt"in e&&t("startsAt",f=e.startsAt),"endsAt"in e&&t("endsAt",g=e.endsAt),"lessonId"in e&&t("lessonId",h=e.lessonId)},{errors:c,loading:u,form:o,saveButton:l,id:p,groupId:m,startsAt:f,endsAt:g,lessonId:h,handleSubmit:()=>{o.checkValidity()?s("submit",{id:p,groupId:m,startsAt:f,endsAt:g,lessonId:h}):je.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){K(e,n)},$semester:r,input0_value_binding:function(e){t("startsAt",f=e)},input1_value_binding:function(e){t("endsAt",g=e)},groupselect_groupId_binding:function(e){t("groupId",m=e)},lessonselect_lessonId_binding:function(e){t("lessonId",h=e)},button_binding:function(e){ne[e?"unshift":"push"](()=>{t("saveButton",l=e)})},form_1_binding:function(e){ne[e?"unshift":"push"](()=>{t("form",o=e)})}}}class Bi extends Oe{constructor(e){super(),Ee(this,e,Ui,Yi,o,["errors","loading","id","groupId","startsAt","endsAt","lessonId"])}}function Gi(e){var n,t=new Bi({props:{errors:e.errors,groupId:e.session.group.id,startsAt:e.startsAtLocal,endsAt:e.endsAtLocal,id:e.session.id,lessonId:e.lessonId,loading:e.loading}});return t.$on("submit",e.save),t.$on("reset",e.reset),{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),e.session&&(r.groupId=n.session.group.id),e.startsAtLocal&&(r.startsAt=n.startsAtLocal),e.endsAtLocal&&(r.endsAt=n.endsAtLocal),e.session&&(r.id=n.session.id),e.lessonId&&(r.lessonId=n.lessonId),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Zi(e,n,t){let r="",s=!1,{open:a=!1,session:i={}}=n;const o=()=>{t("errors",r=""),t("open",a=!1)};let l,c,d;return e.$set=e=>{"open"in e&&t("open",a=e.open),"session"in e&&t("session",i=e.session)},e.$$.update=(e={session:1})=>{e.session&&t("startsAtLocal",l=ei(new Date(i.startsAt),"yyyy-MM-dd'T'HH:mm")),e.session&&t("endsAtLocal",c=ei(new Date(i.endsAt),"yyyy-MM-dd'T'HH:mm")),e.session&&t("lessonId",d=i.lesson?i.lesson.id:null)},{errors:r,loading:s,open:a,session:i,reset:o,save:async({detail:e})=>{const{id:n,groupId:a,lessonId:i,...l}=e;l.startsAt=new Date(l.startsAt).toISOString(),l.endsAt=new Date(l.endsAt).toISOString(),t("loading",s=!0);try{const e=await Bs.patch(n,l,a,i),c=di(new Date(l.startsAt),new Date,{addSuffix:!0});je.add({text:`Updated session to ${c} with ${e.group.name} class`,type:"success"}),o()}catch(e){t("errors",r=e),je.add({text:"Couldn't save changes to session",type:"danger"})}finally{t("loading",s=!1)}},startsAtLocal:l,endsAtLocal:c,lessonId:d}}class Vi extends Oe{constructor(e){super(),Ee(this,e,Zi,Gi,o,["open","session"])}}function Ji(e){var n,t,r,s,a,i;function o(e,n){return(null==t||e.session)&&(t=!!n.isCurrentOrPast(n.session.startsAt)),t?Qi:Xi}var l=o(null,e),c=l(e),d=new ct({props:{name:"edit"}});d.$on("click",e.click_handler_2);var u=new ct({props:{name:"minus"}});return u.$on("click",e.click_handler_3),{c(){n=I("li"),c.c(),r=T(),s=I("div"),d.$$.fragment.c(),a=T(),u.$$.fragment.c(),O(s,"class","buttons svelte-ik776v"),O(n,"class","svelte-ik776v")},m(e,t){_(e,n,t),c.m(n,null),k(n,r),k(n,s),Te(d,s,null),k(s,a),Te(u,s,null),i=!0},p(e,t){l===(l=o(e,t))&&c?c.p(e,t):(c.d(1),(c=l(t))&&(c.c(),c.m(n,r)))},i(e){i||($e(d.$$.fragment,e),$e(u.$$.fragment,e),i=!0)},o(e){ve(d.$$.fragment,e),ve(u.$$.fragment,e),i=!1},d(e){e&&D(n),c.d(),Ae(d),Ae(u)}}}function Xi(e){var n,t,r,s,a,i,o,l,c,d=e.session.group.name+"",u=e.relativeDate(e.session.startsAt,e.time)+"",p=e.maybeDate(e.session.startsAt)||e.formatTime(e.session.startsAt)+"",m=e.formatTime(e.session.endsAt)+"";return{c(){n=I("span"),t=M(d),r=M(" class "),s=M(u),a=M(", "),i=M(p),o=M(" to "),l=M(m),c=N(n,"click",e.click_handler_1)},m(e,c){_(e,n,c),k(n,t),k(n,r),k(n,s),k(n,a),k(n,i),k(n,o),k(n,l)},p(e,n){e.session&&d!==(d=n.session.group.name+"")&&L(t,d),(e.session||e.time)&&u!==(u=n.relativeDate(n.session.startsAt,n.time)+"")&&L(s,u),e.session&&p!==(p=n.maybeDate(n.session.startsAt)||n.formatTime(n.session.startsAt)+"")&&L(i,p),e.session&&m!==(m=n.formatTime(n.session.endsAt)+"")&&L(l,m)},d(e){e&&D(n),c()}}}function Qi(e){var n,t,r,s,a,i,o,l,c,d,u,p=e.session.group.name+"",m=e.relativeDate(e.session.startsAt,e.time)+"",f=e.maybeDate(e.session.startsAt)||e.formatTime(e.session.startsAt)+"",g=e.formatTime(e.session.endsAt)+"";return{c(){n=I("a"),t=I("span"),r=M(p),s=M(" class "),a=M(m),i=M(", "),o=M(f),l=M(" to "),c=M(g),O(n,"href",d="#/session/"+e.session.id),u=N(t,"click",e.click_handler)},m(e,d){_(e,n,d),k(n,t),k(t,r),k(t,s),k(t,a),k(t,i),k(t,o),k(t,l),k(t,c)},p(e,t){e.session&&p!==(p=t.session.group.name+"")&&L(r,p),(e.session||e.time)&&m!==(m=t.relativeDate(t.session.startsAt,t.time)+"")&&L(a,m),e.session&&f!==(f=t.maybeDate(t.session.startsAt)||t.formatTime(t.session.startsAt)+"")&&L(o,f),e.session&&g!==(g=t.formatTime(t.session.endsAt)+"")&&L(c,g),e.session&&d!==(d="#/session/"+t.session.id)&&O(n,"href",d)},d(e){e&&D(n),u()}}}function Ki(e){var n,t;function r(t){e.deletesession_open_binding.call(null,t),n=!0,le(()=>n=!1)}let s={session:e.session};void 0!==e.showDelete&&(s.open=e.showDelete);var a=new fi({props:s});return ne.push(()=>Me(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){Te(a,e,n),t=!0},p(e,t){var r={};e.session&&(r.session=t.session),!n&&e.showDelete&&(r.open=t.showDelete),a.$set(r)},i(e){t||($e(a.$$.fragment,e),t=!0)},o(e){ve(a.$$.fragment,e),t=!1},d(e){Ae(a,e)}}}function eo(e){var n,t,r=e.showDelete&&Ki(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.showDelete?r?(r.p(e,t),$e(r,1)):((r=Ki(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function no(e){var n,t;function r(t){e.editsession_open_binding.call(null,t),n=!0,le(()=>n=!1)}let s={session:e.session};void 0!==e.showEdit&&(s.open=e.showEdit);var a=new Vi({props:s});return ne.push(()=>Me(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){Te(a,e,n),t=!0},p(e,t){var r={};e.session&&(r.session=t.session),!n&&e.showEdit&&(r.open=t.showEdit),a.$set(r)},i(e){t||($e(a.$$.fragment,e),t=!0)},o(e){ve(a.$$.fragment,e),t=!1},d(e){Ae(a,e)}}}function to(e){var n,t,r=e.showEdit&&no(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.showEdit?r?(r.p(e,t),$e(r,1)):((r=no(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function ro(e){var n,t,r,s,a,i=e.session&&Ji(e);function o(n){e.modal0_open_binding.call(null,n),t=!0,le(()=>t=!1)}let l={$$slots:{default:[eo]},$$scope:{ctx:e}};void 0!==e.showDelete&&(l.open=e.showDelete);var c=new Mn({props:l});function d(n){e.modal1_open_binding.call(null,n),s=!0,le(()=>s=!1)}ne.push(()=>Me(c,"open",o));let u={$$slots:{default:[to]},$$scope:{ctx:e}};void 0!==e.showEdit&&(u.open=e.showEdit);var p=new Mn({props:u});return ne.push(()=>Me(p,"open",d)),{c(){i&&i.c(),n=T(),c.$$.fragment.c(),r=T(),p.$$.fragment.c()},m(e,t){i&&i.m(e,t),_(e,n,t),Te(c,e,t),_(e,r,t),Te(p,e,t),a=!0},p(e,r){r.session?i?(i.p(e,r),$e(i,1)):((i=Ji(r)).c(),$e(i,1),i.m(n.parentNode,n)):i&&(ge(),ve(i,1,1,()=>{i=null}),he());var a={};(e.$$scope||e.showDelete||e.session)&&(a.$$scope={changed:e,ctx:r}),!t&&e.showDelete&&(a.open=r.showDelete),c.$set(a);var o={};(e.$$scope||e.showEdit||e.session)&&(o.$$scope={changed:e,ctx:r}),!s&&e.showEdit&&(o.open=r.showEdit),p.$set(o)},i(e){a||($e(i),$e(c.$$.fragment,e),$e(p.$$.fragment,e),a=!0)},o(e){ve(i),ve(c.$$.fragment,e),ve(p.$$.fragment,e),a=!1},d(e){i&&i.d(e),e&&D(n),Ae(c,e),e&&D(r),Ae(p,e)}}}function so(e,n,t){let{session:r}=n,s=!1,a=!1,i=!1,{time:o=new Date}=n;const l=e=>{if(!e)return;const n=new Date(e);return 0===n.getMinutes()?ei(n,"h b"):ei(n,"p")};return e.$set=e=>{"session"in e&&t("session",r=e.session),"time"in e&&t("time",o=e.time)},{session:r,showDelete:s,showEdit:a,showActions:i,time:o,relativeDate:(e,n)=>{if(e)return ii(new Date(e),new Date,{addSuffix:!0})},formatTime:l,maybeDate:e=>{const n=new Date(e)-new Date;if(Math.abs(n)>864e5){const n=di(new Date(e),new Date);return["AM","PM"].includes(n.slice(-2))?n:`${n} ${l(e)}`}return""},isCurrentOrPast:e=>{const n=new Date;return e<new Date(n.valueOf()+18e5).toISOString()},click_handler:function(){t("showActions",i=!i)},click_handler_1:function(){t("showActions",i=!i)},click_handler_2:function(){t("showEdit",a=!0)},click_handler_3:function(){t("showDelete",s=!0)},deletesession_open_binding:function(e){t("showDelete",s=e)},modal0_open_binding:function(e){t("showDelete",s=e)},editsession_open_binding:function(e){t("showEdit",a=e)},modal1_open_binding:function(e){t("showEdit",a=e)}}}class ao extends Oe{constructor(e){super(),Ee(this,e,so,ro,o,["session","time"])}}function io(e,n,t){const r=Object.create(e);return r.session=n[t],r}function oo(e,n,t){const r=Object.create(e);return r.session=n[t],r}function lo(n){var t,r=new It({props:{what:"today's lessons"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function co(e){var n,t,r,s=e.$todaysSessions.soon&&uo(e),a=e.$todaysSessions.later&&mo(e);return{c(){s&&s.c(),n=T(),a&&a.c(),t=A()},m(e,i){s&&s.m(e,i),_(e,n,i),a&&a.m(e,i),_(e,t,i),r=!0},p(e,r){r.$todaysSessions.soon?s?(s.p(e,r),$e(s,1)):((s=uo(r)).c(),$e(s,1),s.m(n.parentNode,n)):s&&(ge(),ve(s,1,1,()=>{s=null}),he()),r.$todaysSessions.later?a?(a.p(e,r),$e(a,1)):((a=mo(r)).c(),$e(a,1),a.m(t.parentNode,t)):a&&(ge(),ve(a,1,1,()=>{a=null}),he())},i(e){r||($e(s),$e(a),r=!0)},o(e){ve(s),ve(a),r=!1},d(e){s&&s.d(e),e&&D(n),a&&a.d(e),e&&D(t)}}}function uo(e){var n,t,r,s,a,i,o,l,c=e.$todaysSessions.soon.length+"",d=e.$todaysSessions.soon.length-1?"s":"",u=[],p=new Map,m=e.$todaysSessions.soon;const f=e=>e.session.id;for(var g=0;g<m.length;g+=1){let n=oo(e,m,g),t=f(n);p.set(t,u[g]=po(t,n))}return{c(){for(n=I("h3"),t=M(c),r=M(" Lesson"),s=M(d),a=M(" within 30 minutes"),i=T(),g=0;g<u.length;g+=1)u[g].c();o=A(),O(n,"class","title is-5")},m(e,c){for(_(e,n,c),k(n,t),k(n,r),k(n,s),k(n,a),_(e,i,c),g=0;g<u.length;g+=1)u[g].m(e,c);_(e,o,c),l=!0},p(e,n){l&&!e.$todaysSessions||c===(c=n.$todaysSessions.soon.length+"")||L(t,c),l&&!e.$todaysSessions||d===(d=n.$todaysSessions.soon.length-1?"s":"")||L(s,d);const r=n.$todaysSessions.soon;ge(),u=Ie(u,e,f,1,n,r,p,o.parentNode,Se,po,o,oo),he()},i(e){if(!l){for(var n=0;n<m.length;n+=1)$e(u[n]);l=!0}},o(e){for(g=0;g<u.length;g+=1)ve(u[g]);l=!1},d(e){for(e&&(D(n),D(i)),g=0;g<u.length;g+=1)u[g].d(e);e&&D(o)}}}function po(e,n){var t,r,s=new ao({props:{session:n.session,time:n.$time}});return{key:e,first:null,c(){t=A(),s.$$.fragment.c(),this.first=t},m(e,n){_(e,t,n),Te(s,e,n),r=!0},p(e,n){var t={};e.$todaysSessions&&(t.session=n.session),e.$time&&(t.time=n.$time),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&D(t),Ae(s,e)}}}function mo(e){var n,t,r,s,a,i,o,l,c=e.$todaysSessions.later.length+"",d=e.$todaysSessions.later.length-1?"s":"",u=[],p=new Map,m=e.$todaysSessions.later;const f=e=>e.session.id;for(var g=0;g<m.length;g+=1){let n=io(e,m,g),t=f(n);p.set(t,u[g]=fo(t,n))}return{c(){for(n=I("h3"),t=M(c),r=M(" Lesson"),s=M(d),a=M(" within 24 hours"),i=T(),g=0;g<u.length;g+=1)u[g].c();o=A(),O(n,"class","title is-5")},m(e,c){for(_(e,n,c),k(n,t),k(n,r),k(n,s),k(n,a),_(e,i,c),g=0;g<u.length;g+=1)u[g].m(e,c);_(e,o,c),l=!0},p(e,n){l&&!e.$todaysSessions||c===(c=n.$todaysSessions.later.length+"")||L(t,c),l&&!e.$todaysSessions||d===(d=n.$todaysSessions.later.length-1?"s":"")||L(s,d);const r=n.$todaysSessions.later;ge(),u=Ie(u,e,f,1,n,r,p,o.parentNode,Se,fo,o,io),he()},i(e){if(!l){for(var n=0;n<m.length;n+=1)$e(u[n]);l=!0}},o(e){for(g=0;g<u.length;g+=1)ve(u[g]);l=!1},d(e){for(e&&(D(n),D(i)),g=0;g<u.length;g+=1)u[g].d(e);e&&D(o)}}}function fo(e,n){var t,r,s=new ao({props:{session:n.session,time:n.$time}});return{key:e,first:null,c(){t=A(),s.$$.fragment.c(),this.first=t},m(e,n){_(e,t,n),Te(s,e,n),r=!0},p(e,n){var t={};e.$todaysSessions&&(t.session=n.session),e.$time&&(t.time=n.$time),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&D(t),Ae(s,e)}}}function go(e){var n,t,r,s,a=[co,lo],i=[];function o(e,n){return n.$todaysSessions?0:1}return n=o(0,e),t=i[n]=a[n](e),{c(){t.c(),r=A()},m(e,t){i[n].m(e,t),_(e,r,t),s=!0},p(e,s){var l=n;(n=o(0,s))===l?i[n].p(e,s):(ge(),ve(i[l],1,1,()=>{i[l]=null}),he(),(t=i[n])||(t=i[n]=a[n](s)).c(),$e(t,1),t.m(r.parentNode,r))},i(e){s||($e(t),s=!0)},o(e){ve(t),s=!1},d(e){i[n].d(e),e&&D(r)}}}function ho(e,n,t){let r,s;return d(e,Vs,e=>{t("$todaysSessions",r=e)}),d(e,Js,e=>{t("$time",s=e)}),{$todaysSessions:r,$time:s}}class $o extends Oe{constructor(e){super(),Ee(this,e,ho,go,o,[])}}function vo(e,n,t){const r=Object.create(e);return r.session=n[t],r}function bo(n){var t,r=new It({props:{what:"sessions"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function wo(e){var n,t,r,s,a,i,o,l,c,d=e.$sessions.length+"",u=[],p=new Map,m=e.$sessions;const f=e=>e.session.id;for(var g=0;g<m.length;g+=1){let n=vo(e,m,g),t=f(n);p.set(t,u[g]=yo(t,n))}return{c(){for(n=I("h3"),t=M("Showing "),r=M(d),s=M(" sessions"),a=T(),(i=I("p")).textContent="Click a session to view details.",o=T(),l=I("ul"),g=0;g<u.length;g+=1)u[g].c();O(n,"class","title is-5")},m(e,d){for(_(e,n,d),k(n,t),k(n,r),k(n,s),_(e,a,d),_(e,i,d),_(e,o,d),_(e,l,d),g=0;g<u.length;g+=1)u[g].m(l,null);c=!0},p(e,n){c&&!e.$sessions||d===(d=n.$sessions.length+"")||L(r,d);const t=n.$sessions;ge(),u=Ie(u,e,f,1,n,t,p,l,Se,yo,null,vo),he()},i(e){if(!c){for(var n=0;n<m.length;n+=1)$e(u[n]);c=!0}},o(e){for(g=0;g<u.length;g+=1)ve(u[g]);c=!1},d(e){for(e&&(D(n),D(a),D(i),D(o),D(l)),g=0;g<u.length;g+=1)u[g].d()}}}function yo(e,n){var t,r,s=new ao({props:{session:n.session}});return{key:e,first:null,c(){t=A(),s.$$.fragment.c(),this.first=t},m(e,n){_(e,t,n),Te(s,e,n),r=!0},p(e,n){var t={};e.$sessions&&(t.session=n.session),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&D(t),Ae(s,e)}}}function xo(e){var n,t,r,s,a=[wo,bo],i=[];function o(e,n){return n.$sessions?0:1}return n=o(0,e),t=i[n]=a[n](e),{c(){t.c(),r=A()},m(e,t){i[n].m(e,t),_(e,r,t),s=!0},p(e,s){var l=n;(n=o(0,s))===l?i[n].p(e,s):(ge(),ve(i[l],1,1,()=>{i[l]=null}),he(),(t=i[n])||(t=i[n]=a[n](s)).c(),$e(t,1),t.m(r.parentNode,r))},i(e){s||($e(t),s=!0)},o(e){ve(t),s=!1},d(e){i[n].d(e),e&&D(r)}}}function ko(e,n,t){let r;return d(e,Bs,e=>{t("$sessions",r=e)}),{$sessions:r}}class _o extends Oe{constructor(e){super(),Ee(this,e,ko,xo,o,[])}}function Do(e){var n,t=new Bi({props:{errors:e.errors,loading:e.loading}});return t.$on("submit",e.save),t.$on("reset",e.reset),{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function So(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,le(()=>r=!1)}let o={$$slots:{default:[Do]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new Mn({props:o});return ne.push(()=>Me(l,"open",i)),{c(){(n=I("button")).innerHTML='<i class="fas fa-plus"></i> Add a\n\t\t\t  session',t=T(),l.$$.fragment.c(),O(n,"class","button add-button is-primary svelte-1igl3a3"),a=N(n,"click",e.click_handler)},m(e,r){_(e,n,r),_(e,t,r),Te(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||($e(l.$$.fragment,e),s=!0)},o(e){ve(l.$$.fragment,e),s=!1},d(e){e&&(D(n),D(t)),Ae(l,e),a()}}}function Io(e,n,t){let r=null,s=!1,a=!1;const i=()=>{t("errors",r=null),t("open",s=!1)};return{errors:r,open:s,loading:a,reset:i,save:async({detail:e})=>{const{groupId:n,lessonId:s,startsAt:o,endsAt:l}=e;console.log(e);const c=new Date(o).toISOString(),d=new Date(l).toISOString();t("loading",a=!0);try{const e=await Bs.create(c,d,n,s),l=di(new Date(o),new Date,{addSuffix:!0});je.add({text:`Created new session ${l} with ${e.group.name} class`,type:"success"}),i()}catch(e){t("errors",r=e),je.add({text:"Could not create new session",type:"danger"})}finally{t("loading",a=!1)}},click_handler:function(){t("open",s=!0)},modal_open_binding:function(e){t("open",s=e)}}}class Co extends Oe{constructor(e){super(),Ee(this,e,Io,So,o,[])}}function Mo(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w=new Co({}),y=e.activeComponent;if(y)var x=new y({});return{c(){n=T(),(t=I("h1")).textContent="Class schedule",r=T(),w.$$.fragment.c(),s=T(),(i=I("button")).innerHTML='<i class="fas fa-sync"></i>Reload sessions',o=T(),l=I("nav"),(c=I("button")).textContent="24 hours",d=T(),(u=I("button")).textContent="Past",p=T(),(m=I("button")).textContent="Future",f=T(),(g=I("button")).textContent="All",h=T(),x&&x.$$.fragment.c(),$=A(),document.title="Class schedule",O(t,"class","title"),O(i,"class","button"),O(c,"class","button is-link svelte-1rwunha"),q(c,"is-outlined","upcoming"!==e.active),O(u,"class","button is-link svelte-1rwunha"),q(u,"is-outlined","past"!==e.active),O(m,"class","button is-link svelte-1rwunha"),q(m,"is-outlined","future"!==e.active),O(g,"class","button is-link svelte-1rwunha"),q(g,"is-outlined","all"!==e.active),O(l,"class","buttons has-addons is-centered svelte-1rwunha"),b=[N(i,"click",Bs.get),N(c,"click",e.click_handler),N(u,"click",e.click_handler_1),N(m,"click",e.click_handler_2),N(g,"click",e.click_handler_3)]},m(e,a){_(e,n,a),_(e,t,a),_(e,r,a),Te(w,e,a),_(e,s,a),_(e,i,a),_(e,o,a),_(e,l,a),k(l,c),k(l,d),k(l,u),k(l,p),k(l,m),k(l,f),k(l,g),_(e,h,a),x&&Te(x,e,a),_(e,$,a),v=!0},p(e,n){if(e.active&&(q(c,"is-outlined","upcoming"!==n.active),q(u,"is-outlined","past"!==n.active),q(m,"is-outlined","future"!==n.active),q(g,"is-outlined","all"!==n.active)),y!==(y=n.activeComponent)){if(x){ge();const e=x;ve(e.$$.fragment,1,0,()=>{Ae(e,1)}),he()}y?((x=new y({})).$$.fragment.c(),$e(x.$$.fragment,1),Te(x,$.parentNode,$)):x=null}},i(e){v||($e(w.$$.fragment,e),x&&$e(x.$$.fragment,e),v=!0)},o(e){ve(w.$$.fragment,e),x&&ve(x.$$.fragment,e),v=!1},d(e){e&&(D(n),D(t),D(r)),Ae(w,e),e&&(D(s),D(i),D(o),D(l),D(h),D($)),x&&Ae(x,e),a(b)}}}function To(e,n,t){let r=$o,s="upcoming";J(()=>{Bs.get();const e=setInterval(Bs.get,3e5);return()=>{e&&clearInterval(e)}});const a=e=>{let n=null;t("active",s=e),"past"===e?n={endsAt_lt:(new Date).toISOString()}:"future"===e&&(n={startsAt_gt:(new Date).toISOString()}),Us.set(n),Bs.get(),t("activeComponent",r="upcoming"===e?$o:_o)};return{activeComponent:r,active:s,switchTab:a,click_handler:function(){return a("upcoming")},click_handler_1:function(){return a("past")},click_handler_2:function(){return a("future")},click_handler_3:function(){return a("all")}}}const Ao="\n  fragment AllSessionFields on ClassSession {\n    id\n     stage\n     startsAt\n     startedAt\n     endsAt\n     endedAt\n     number\n     group {\n       id\n       name\n     }\n     report {\n      id\n      published\n      homeworkEN\n      homeworkZH\n      summaryEN\n      summaryZH\n      performance\n      materials {\n        id\n        type\n        title\n        url\n        notes\n      }\n      words {\n        id\n        english\n        chinese\n        audio\n      }\n    }\n    lesson {\n      id\n      name\n    }\n  }\n",No=`\n  query classSession($id: ID!){\n    classSession (id: $id){\n      ...AllSessionFields\n    }\n  }\n  ${Ao}`,Eo=`\nsubscription classSession($id: ID!){\n  classSession (id: $id){\n    ...AllSessionFields\n  }\n}\n${Ao}`,Oo="\nquery points($classSessionId: ID!) {\n points(where: { classSession: {id: $classSessionId}}) {\n      id \n      value\n      student {\n        englishName\n        chineseName\n        id\n      }\n    }\n}\n",Lo="\nsubscription sessionPoints($classSessionId: ID!){\n  points(classSessionId: $classSessionId){\n    mutation\n    previousValues {\n      id\n    }\n    node {\n      id\n      value\n      student {\n        englishName\n        chineseName\n        id\n      }\n    }\n    \n  }\n}\n",Po="\nquery sessionResults($id: ID!) {\n  classSession (id: $id){\n    id\n    stage\n    startsAt\n    startedAt\n    endsAt\n    endedAt\n    number\n    group {\n      id\n      name\n    }\n    attendances {\n      status\n      arrivedAt \n      student {\n        id\n        chineseName\n        englishName\n        pinyinName\n      }\n    }\n    points {\n      value\n      student {\n        id\n        chineseName\n        englishName\n        pinyinName\n      }\n    }\n  }\n}\n",Ro="\n mutation activateSession($id:ID!){\n   activateSession(id:$id) {\n     id\n   }\n }",zo="\nmutation startClass($id: ID!, $now: DateTime!) {\n  updateClassSession(id: $id, input: {stage: Started, startedAt: $now}) {\n    id\n  }\n  markRestAbsent(classSessionId: $id)\n}\n",jo="\nmutation endClass($id: ID!, $now: DateTime!) {\n  updateClassSession(id: $id, input: {stage: Ended, endedAt: $now}) {\n    id\n  }\n}",qo="\nmutation updateAttendance($classSessionId: ID!, $studentId: ID!, $status: String!){\n  updateAttendance(classSessionId: $classSessionId, studentId: $studentId, status: $status){\n    id\n  }\n}\n",Ho="\nmutation markAllPresent($classSessionId: ID!) {\n  markAllPresent(classSessionId: $classSessionId)\n}\n",Fo=`\nmutation AddLessonToSession($id: ID!, $lessonId: ID!) {\n  addLessonToClassSession(id: $id, lessonId: $lessonId) {\n    ...AllSessionFields\n  }\n}\n${Ao}`,Wo=Re(null,e=>e(null)),Yo=Pe(null,e=>{let n;const t=Wo.subscribe(t=>{t?(n&&n.unsubscribe(),en(No,{id:t}).then(n=>{e(n.classSession)}),n=Ws.request({query:Eo,variables:{id:t}}).subscribe({next(n){n.data&&n.data.classSession&&e(n.data.classSession)}})):e(null)});return()=>{n&&n.unsubscribe(),t()}}),Uo=(()=>{const e=(e,n)=>e&&0===e.length?n:(e=Array.isArray(e)?e:[e],n.map(n=>{const t=e.find(e=>!!e.student&&e.student.id===n.id);return t&&(n.attendance=t),n}).sort((e,n)=>e.englishName<n.englishName?-1:e.englishName>n.englishName?1:void 0)),{subscribe:n,update:t}=Re(null,n=>{let r;const s=Yo.subscribe(s=>{s&&(r&&r.unsubscribe(),en("\nquery students($groupId: ID!, $classSessionId: ID!){\n  students (where: { groups_some: {id: $groupId}}) {\n    id\n    chineseName\n    pinyinName\n    englishName\n  }\n  attendances (where: {classSession: {id: $classSessionId}}) {\n    id\n    student {\n      id\n    }\n    status\n  }\n}\n",{groupId:s.group.id,classSessionId:s.id}).then(t=>{n(e(t.attendances,t.students))}),r=Ws.request({query:"\nsubscription attendances($classSessionId: ID!){\n  attendances (classSessionId: $classSessionId){\n    id\n    student {\n      id\n    }\n    status\n  }\n}",variables:{classSessionId:s.id}}).subscribe({next(n){n.data&&n.data.attendances&&t(t=>e(n.data.attendances,t))}}))});return()=>{r&&r.unsubscribe(),s()}});return{subscribe:n,update:t,mapAttendanceToStudents:e}})(),Bo=(()=>{const{subscribe:e,update:n}=Re([]);return{subscribe:e,update:n,add:e=>{n(n=>[e,...n.slice(0,9)])},remove:e=>{n(n=>n.filter(n=>n.id!==e))}}})(),Go=(()=>{const{subscribe:e,update:n}=Re(null,e=>{let t;const r=Yo.subscribe(r=>{r&&(t&&t.unsubscribe(),en(Oo,{classSessionId:r.id}).then(n=>{e(n.points)}),t=Ws.request({query:Lo,variables:{classSessionId:r.id}}).subscribe({next(e){if(e.data&&e.data.points){const{node:t,mutation:r,previousValues:s}=e.data.points;"CREATED"===r&&n(e=>[t,...e]),"DELETED"===r&&(n(e=>e.filter(e=>e.id!==s.id)),Bo.update(e=>e.filter(e=>e.id!==s.id)))}}}))});return()=>{r(),t&&t.unsubscribe()}});return{subscribe:e,update:n,undo:async e=>{await en("\nmutation undoPoint($id: ID!) {\n  undoPoint(id: $id) {\n    id\n  }\n}\n",{id:e})},add:async(e,n,t)=>{const r=await en("\nmutation addPoint($value: Int!, $studentId: ID!, $classSessionId: ID!) {\n  addPoint(value: $value, studentId: $studentId, classSessionId: $classSessionId) {\n    id\n    value\n    student {\n      englishName\n      chineseName\n      id\n    }\n  }\n} ",{value:e,studentId:n,classSessionId:t});Bo.add(r.addPoint)}}})(),Zo=(ze(Wo,async(e,n)=>{if(!e)return;const t=await en(Po,{classSessionId:e});if(!t.classSession)return;const{attendances:r,points:s}=t.classSession;n((r&&r.map(e=>(e.points=s&&s.filter(n=>n.student.id===e.student.id),e.pointsTally=e.points.reduce((e,n)=>e+n.value,0),e))).slice().sort((e,n)=>n.pointsTally-e.pointsTally))}),async e=>{const n=await en(Po,{id:e});if(!n.classSession)return;const{attendances:t,points:r}=n.classSession;return(t&&t.map(e=>(e.points=r&&r.filter(n=>n.student.id===e.student.id),e.pointsTally=e.points.reduce((e,n)=>e+n.value,0),e))).slice().sort((e,n)=>n.pointsTally-e.pointsTally)});function Vo(n){var t,r,s,a,i,o,l,c=n.student.englishName||n.student.chineseName+"";return{c(){t=I("li"),r=I("i"),a=T(),i=I("span"),o=M(c),O(r,"class",s="fas fa-"+(n.present?"check":"dot")+"-circle status svelte-1199exf"),O(i,"class","name"),O(t,"class","svelte-1199exf"),q(t,"absent",!n.present),l=N(t,"click",n.updateAttendance)},m(e,n){_(e,t,n),k(t,r),k(t,a),k(t,i),k(i,o)},p(e,n){e.present&&s!==(s="fas fa-"+(n.present?"check":"dot")+"-circle status svelte-1199exf")&&O(r,"class",s),e.student&&c!==(c=n.student.englishName||n.student.chineseName+"")&&L(o,c),e.present&&q(t,"absent",!n.present)},i:e,o:e,d(e){e&&D(t),l()}}}function Jo(e,n,t){let{student:r={},sessionId:s=null,started:a=!1}=n;let i;return e.$set=e=>{"student"in e&&t("student",r=e.student),"sessionId"in e&&t("sessionId",s=e.sessionId),"started"in e&&t("started",a=e.started)},e.$$.update=(e={student:1})=>{e.student&&t("present",i=!(!r.attendance||"Absent"===r.attendance.status))},{student:r,sessionId:s,started:a,updateAttendance:()=>{const e=i?"Absent":a?"Late":"Present";try{en(qo,{classSessionId:s,studentId:r.id,status:e})}catch(e){console.error(e)}},present:i}}class Xo extends Oe{constructor(e){super(),Ee(this,e,Jo,Vo,o,["student","sessionId","started"])}}function Qo(e,n,t){const r=Object.create(e);return r.student=n[t],r}function Ko(n){var t,r=new It({props:{what:"students"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function el(e){var n,t,r,s,a=[tl,nl],i=[];function o(e,n){return n.$sessionStudents.length?0:1}return n=o(0,e),t=i[n]=a[n](e),{c(){t.c(),r=A()},m(e,t){i[n].m(e,t),_(e,r,t),s=!0},p(e,s){var l=n;(n=o(0,s))===l?i[n].p(e,s):(ge(),ve(i[l],1,1,()=>{i[l]=null}),he(),(t=i[n])||(t=i[n]=a[n](s)).c(),$e(t,1),t.m(r.parentNode,r))},i(e){s||($e(t),s=!0)},o(e){ve(t),s=!1},d(e){i[n].d(e),e&&D(r)}}}function nl(n){var t;return{c(){(t=I("p")).textContent="No students were found for this class session."},m(e,n){_(e,t,n)},p:e,i:e,o:e,d(e){e&&D(t)}}}function tl(e){var n,t,r=[],s=new Map,a=e.$sessionStudents;const i=e=>e.student.id;for(var o=0;o<a.length;o+=1){let n=Qo(e,a,o),t=i(n);s.set(t,r[o]=rl(t,n))}return{c(){for(o=0;o<r.length;o+=1)r[o].c();n=A()},m(e,s){for(o=0;o<r.length;o+=1)r[o].m(e,s);_(e,n,s),t=!0},p(e,t){const a=t.$sessionStudents;ge(),r=Ie(r,e,i,1,t,a,s,n.parentNode,Se,rl,n,Qo),he()},i(e){if(!t){for(var n=0;n<a.length;n+=1)$e(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)ve(r[o]);t=!1},d(e){for(o=0;o<r.length;o+=1)r[o].d(e);e&&D(n)}}}function rl(e,n){var t,r,s=new Xo({props:{student:n.student,sessionId:n.$session.id}});return{key:e,first:null,c(){t=A(),s.$$.fragment.c(),this.first=t},m(e,n){_(e,t,n),Te(s,e,n),r=!0},p(e,n){var t={};e.$sessionStudents&&(t.student=n.student),e.$session&&(t.sessionId=n.$session.id),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&D(t),Ae(s,e)}}}function sl(e){var n,t,r,s,a,i,o,l,c=new xn({props:{errors:e.errors}}),d=[el,Ko],u=[];function p(e,n){return n.$sessionStudents?0:1}return a=p(0,e),i=u[a]=d[a](e),{c(){n=I("section"),c.$$.fragment.c(),t=T(),(r=I("button")).innerHTML='<i class="fas fa-clipboard-check"></i>All\n\t\t\t    present',s=T(),i.c(),O(r,"class","button is-primary is-inverted svelte-1yp3byo"),O(n,"class","attendance-form svelte-1yp3byo"),l=N(r,"click",e.markAllPresent)},m(e,i){_(e,n,i),Te(c,n,null),k(n,t),k(n,r),k(n,s),u[a].m(n,null),o=!0},p(e,t){var r={};e.errors&&(r.errors=t.errors),c.$set(r);var s=a;(a=p(0,t))===s?u[a].p(e,t):(ge(),ve(u[s],1,1,()=>{u[s]=null}),he(),(i=u[a])||(i=u[a]=d[a](t)).c(),$e(i,1),i.m(n,null))},i(e){o||($e(c.$$.fragment,e),$e(i),o=!0)},o(e){ve(c.$$.fragment,e),ve(i),o=!1},d(e){e&&D(n),Ae(c),u[a].d(),l()}}}function al(e,n,t){let r,s;d(e,Yo,e=>{t("$session",r=e)}),d(e,Uo,e=>{t("$sessionStudents",s=e)});let a="";return{errors:a,markAllPresent:()=>{try{en(Ho,{classSessionId:r.id})}catch(e){t("errors",a=e)}},$session:r,$sessionStudents:s}}class il extends Oe{constructor(e){super(),Ee(this,e,al,sl,o,[])}}function ol(e){var n,t,r,s,a,i,o,l,c,d,u=new xn({props:{errors:e.errors}}),p=new il({});return{c(){n=T(),t=I("p"),r=M("Scheduled start time: "),s=M(e.distance),a=T(),u.$$.fragment.c(),i=T(),p.$$.fragment.c(),o=T(),(l=I("button")).innerHTML='<i class="fas fa-play-circle"></i>\n\t\t\t  Start class\n\t\t\t',document.title="Active Session",O(t,"class","subtitle svelte-1rayv7m"),q(t,"late",e.$session.startsAt<e.$time.toJSON()),O(l,"class","button is-primary"),d=N(l,"click",e.startClass)},m(e,d){_(e,n,d),_(e,t,d),k(t,r),k(t,s),_(e,a,d),Te(u,e,d),_(e,i,d),Te(p,e,d),_(e,o,d),_(e,l,d),c=!0},p(e,n){c&&!e.distance||L(s,n.distance),(e.$session||e.$time)&&q(t,"late",n.$session.startsAt<n.$time.toJSON());var r={};e.errors&&(r.errors=n.errors),u.$set(r)},i(e){c||($e(u.$$.fragment,e),$e(p.$$.fragment,e),c=!0)},o(e){ve(u.$$.fragment,e),ve(p.$$.fragment,e),c=!1},d(e){e&&(D(n),D(t),D(a)),Ae(u,e),e&&D(i),Ae(p,e),e&&(D(o),D(l)),d()}}}function ll(e,n,t){let r,s;d(e,Yo,e=>{t("$session",r=e)}),d(e,Js,e=>{t("$time",s=e)});let a="";let i;return e.$$.update=(e={$session:1,$time:1})=>{(e.$session||e.$time)&&t("distance",i=r&&s&&ii(new Date(r.startsAt),s,{addSuffix:!0}))},{errors:a,startClass:()=>{const e=(new Date).toISOString();try{en(zo,{id:r.id,now:e})}catch(e){t("errors",a=e)}},$session:r,distance:i,$time:s}}class cl extends Oe{constructor(e){super(),Ee(this,e,ll,ol,o,[])}}function dl(n){var t;return{c(){(t=I("p")).textContent="Activating class session..."},m(e,n){_(e,t,n)},p:e,i:e,o:e,d(e){e&&D(t)}}}function ul(e,n,t){let{id:r=null}=n;return J(()=>{r&&en(Ro,{id:r})}),e.$set=e=>{"id"in e&&t("id",r=e.id)},{id:r}}class pl extends Oe{constructor(e){super(),Ee(this,e,ul,dl,o,["id"])}}function ml(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w,y,x,S,C,A,E,P,R,z,j,H,F=e.$session.group.name+"",W=e.$session.number+"",Y=e.startDifference()+"",U=new xn({props:{errors:e.errors}});return{c(){n=I("h1"),t=M("End "),r=M(F),s=M(" class lesson "),i=M(W),o=T(),U.$$.fragment.c(),l=T(),c=I("p"),d=M("Scheduled end: "),u=M(e.endsAt),p=M(" ("),m=M(e.endsAtDistance),f=M(")"),g=T(),h=I("p"),$=M("Class started "),v=M(Y),b=T(),w=I("br"),y=T(),(x=I("p")).textContent="Sure you want to end class now?",S=T(),C=I("div"),A=I("button"),E=I("i"),P=M("\n    End class"),R=T(),(z=I("button")).textContent="Nevermind",O(n,"class","title"),O(E,"class","fas fa-thumbs-up"),O(A,"class","button is-primary"),A.disabled=fl,q(A,"is-loading",fl),O(z,"class","button"),O(C,"class","buttons svelte-8v8jl6"),H=[N(A,"click",e.handleEnd),N(z,"click",e.click_handler)]},m(e,a){_(e,n,a),k(n,t),k(n,r),k(n,s),k(n,i),_(e,o,a),Te(U,e,a),_(e,l,a),_(e,c,a),k(c,d),k(c,u),k(c,p),k(c,m),k(c,f),_(e,g,a),_(e,h,a),k(h,$),k(h,v),_(e,b,a),_(e,w,a),_(e,y,a),_(e,x,a),_(e,S,a),_(e,C,a),k(C,A),k(A,E),k(A,P),k(C,R),k(C,z),j=!0},p(e,n){j&&!e.$session||F===(F=n.$session.group.name+"")||L(r,F),j&&!e.$session||W===(W=n.$session.number+"")||L(i,W);var t={};e.errors&&(t.errors=n.errors),U.$set(t),e.loading&&q(A,"is-loading",fl)},i(e){j||($e(U.$$.fragment,e),j=!0)},o(e){ve(U.$$.fragment,e),j=!1},d(e){e&&(D(n),D(o)),Ae(U,e),e&&(D(l),D(c),D(g),D(h),D(b),D(w),D(y),D(x),D(S),D(C)),a(H)}}}let fl=!1;function gl(e,n,t){let r;d(e,Yo,e=>{t("$session",r=e)});let{open:s=!1}=n,a="";const i=ei(new Date(r.endsAt),"p"),o=ii(new Date(r.endsAt),new Date,{addSuffix:!0});return e.$set=e=>{"open"in e&&t("open",s=e.open)},{open:s,errors:a,handleEnd:()=>{try{en(jo,{id:r.id,now:new Date})}catch(e){t("errors",a=e)}},endsAt:i,endsAtDistance:o,startDifference:()=>{const e=new Date(r.startsAt),n=new Date(r.startedAt),t=e-n;return`${ii(e,n)}  ${t>0?"early":"late"}`},$session:r,click_handler:function(){t("open",s=!1)}}}class hl extends Oe{constructor(e){super(),Ee(this,e,gl,ml,o,["open"])}}function $l(e){var n,t,r,s,a,i,o,l,c,d=e.student.englishName||e.student.chineseName+"",u=new ct({props:{name:"plus-square",color:"#55FF66"}});u.$on("click",e.click_handler);var p=new ct({props:{name:"minus-square",color:"#FF3344",disabled:e.pointsTally<1}});return p.$on("click",e.click_handler_1),{c(){n=I("li"),u.$$.fragment.c(),t=T(),r=I("span"),s=M(d),a=T(),i=I("span"),o=M(e.pointsTally),l=T(),p.$$.fragment.c(),O(r,"class","name svelte-ht5lal"),O(i,"class","points svelte-ht5lal"),O(n,"class","svelte-ht5lal")},m(e,d){_(e,n,d),Te(u,n,null),k(n,t),k(n,r),k(r,s),k(n,a),k(n,i),k(i,o),k(n,l),Te(p,n,null),c=!0},p(e,n){c&&!e.student||d===(d=n.student.englishName||n.student.chineseName+"")||L(s,d),c&&!e.pointsTally||L(o,n.pointsTally);var t={};e.pointsTally&&(t.disabled=n.pointsTally<1),p.$set(t)},i(e){c||($e(u.$$.fragment,e),$e(p.$$.fragment,e),c=!0)},o(e){ve(u.$$.fragment,e),ve(p.$$.fragment,e),c=!1},d(e){e&&D(n),Ae(u),Ae(p)}}}function vl(e,n,t){let r;d(e,Go,e=>{t("$points",r=e)});let{student:s,sessionId:a}=n;const i=e=>{Go.add(e,s.id,a)};let o;return e.$set=e=>{"student"in e&&t("student",s=e.student),"sessionId"in e&&t("sessionId",a=e.sessionId)},e.$$.update=(e={$points:1,student:1})=>{(e.$points||e.student)&&t("pointsTally",o=r?r.reduce((e,n)=>n.student.id!==s.id?e:e+n.value,0):0)},{student:s,sessionId:a,addPoint:i,pointsTally:o,click_handler:function(){return i(1)},click_handler_1:function(){return i(-1)}}}class bl extends Oe{constructor(e){super(),Ee(this,e,vl,$l,o,["student","sessionId"])}}function wl(e,n,t){const r=Object.create(e);return r.student=n[t],r}function yl(e){var n,t=new bl({props:{student:e.student,sessionId:e.sessionId}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.$sessionStudents&&(r.student=n.student),e.sessionId&&(r.sessionId=n.sessionId),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function xl(e,n){var t,r,s,a=n.student.attendance&&"Absent"!==n.student.attendance.status&&yl(n);return{key:e,first:null,c(){t=A(),a&&a.c(),r=A(),this.first=t},m(e,n){_(e,t,n),a&&a.m(e,n),_(e,r,n),s=!0},p(e,n){n.student.attendance&&"Absent"!==n.student.attendance.status?a?(a.p(e,n),$e(a,1)):((a=yl(n)).c(),$e(a,1),a.m(r.parentNode,r)):a&&(ge(),ve(a,1,1,()=>{a=null}),he())},i(e){s||($e(a),s=!0)},o(e){ve(a),s=!1},d(e){e&&D(t),a&&a.d(e),e&&D(r)}}}function kl(e){var n,t,r,s,a,i=[],o=new Map,l=e.$sessionStudents;const c=e=>e.student.id;for(var d=0;d<l.length;d+=1){let n=wl(e,l,d),t=c(n);o.set(t,i[d]=xl(t,n))}return{c(){for(n=I("section"),(t=I("h3")).textContent="Points",r=T(),s=I("ul"),d=0;d<i.length;d+=1)i[d].c();O(t,"class","title is-4"),O(n,"class","points svelte-xj6mxc")},m(e,o){for(_(e,n,o),k(n,t),k(n,r),k(n,s),d=0;d<i.length;d+=1)i[d].m(s,null);a=!0},p(e,n){const t=n.$sessionStudents;ge(),i=Ie(i,e,c,1,n,t,o,s,Se,xl,null,wl),he()},i(e){if(!a){for(var n=0;n<l.length;n+=1)$e(i[n]);a=!0}},o(e){for(d=0;d<i.length;d+=1)ve(i[d]);a=!1},d(e){for(e&&D(n),d=0;d<i.length;d+=1)i[d].d()}}}function _l(e,n,t){let r;d(e,Uo,e=>{t("$sessionStudents",r=e)});let{sessionId:s}=n;return e.$set=e=>{"sessionId"in e&&t("sessionId",s=e.sessionId)},{sessionId:s,$sessionStudents:r}}class Dl extends Oe{constructor(e){super(),Ee(this,e,_l,kl,o,["sessionId"])}}function Sl(e,n,t){const r=Object.create(e);return r.student=n[t],r}function Il(e){var n,t,r,s,a,i,o,l,c,d=e.$pointsLog[0].value+"",u=e.$pointsLog[0].value-1?"s":"",p=e.$pointsLog[0].student.englishName||e.$pointsLog[0].student.chineseName+"";return{c(){n=I("button"),t=I("i"),r=M("\n    Undo "),s=M(d),a=M(" point"),i=M(u),o=M(" for "),l=M(p),O(t,"class","fas fa-undo"),O(n,"class","button is-white"),c=N(n,"click",e.click_handler)},m(e,c){_(e,n,c),k(n,t),k(n,r),k(n,s),k(n,a),k(n,i),k(n,o),k(n,l)},p(e,n){e.$pointsLog&&d!==(d=n.$pointsLog[0].value+"")&&L(s,d),e.$pointsLog&&u!==(u=n.$pointsLog[0].value-1?"s":"")&&L(i,u),e.$pointsLog&&p!==(p=n.$pointsLog[0].student.englishName||n.$pointsLog[0].student.chineseName+"")&&L(l,p)},d(e){e&&D(n),c()}}}function Cl(e){var n,t,r,s=new Dl({props:{sessionId:e.$session.id}}),a=e.absentStudents&&e.absentStudents.length&&Ml(e);return{c(){s.$$.fragment.c(),n=T(),a&&a.c(),t=A()},m(e,i){Te(s,e,i),_(e,n,i),a&&a.m(e,i),_(e,t,i),r=!0},p(e,n){var r={};e.$session&&(r.sessionId=n.$session.id),s.$set(r),n.absentStudents&&n.absentStudents.length?a?(a.p(e,n),$e(a,1)):((a=Ml(n)).c(),$e(a,1),a.m(t.parentNode,t)):a&&(ge(),ve(a,1,1,()=>{a=null}),he())},i(e){r||($e(s.$$.fragment,e),$e(a),r=!0)},o(e){ve(s.$$.fragment,e),ve(a),r=!1},d(e){Ae(s,e),e&&D(n),a&&a.d(e),e&&D(t)}}}function Ml(e){var n,t,r,s,a=[],i=new Map,o=e.absentStudents;const l=e=>e.student.id;for(var c=0;c<o.length;c+=1){let n=Sl(e,o,c),t=l(n);i.set(t,a[c]=Tl(t,n))}return{c(){for(n=I("section"),(t=I("h3")).textContent="Absent",r=T(),c=0;c<a.length;c+=1)a[c].c();O(t,"class","title is-4"),O(n,"class","absent svelte-1kn2bdy")},m(e,i){for(_(e,n,i),k(n,t),k(n,r),c=0;c<a.length;c+=1)a[c].m(n,null);s=!0},p(e,t){const r=t.absentStudents;ge(),a=Ie(a,e,l,1,t,r,i,n,Se,Tl,null,Sl),he()},i(e){if(!s){for(var n=0;n<o.length;n+=1)$e(a[n]);s=!0}},o(e){for(c=0;c<a.length;c+=1)ve(a[c]);s=!1},d(e){for(e&&D(n),c=0;c<a.length;c+=1)a[c].d()}}}function Tl(e,n){var t,r,s=new Xo({props:{student:n.student,sessionId:n.$session.id,started:"true"}});return{key:e,first:null,c(){t=A(),s.$$.fragment.c(),this.first=t},m(e,n){_(e,t,n),Te(s,e,n),r=!0},p(e,n){var t={};e.absentStudents&&(t.student=n.student),e.$session&&(t.sessionId=n.$session.id),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&D(t),Ae(s,e)}}}function Al(e){var n,t;function r(t){e.confirmendsession_open_binding.call(null,t),n=!0,le(()=>n=!1)}let s={};void 0!==e.showEndModal&&(s.open=e.showEndModal);var a=new hl({props:s});return ne.push(()=>Me(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){Te(a,e,n),t=!0},p(e,t){var r={};!n&&e.showEndModal&&(r.open=t.showEndModal),a.$set(r)},i(e){t||($e(a.$$.fragment,e),t=!0)},o(e){ve(a.$$.fragment,e),t=!1},d(e){Ae(a,e)}}}function Nl(e){var n,t,r=e.showEndModal&&Al(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.showEndModal?r?(r.p(e,t),$e(r,1)):((r=Al(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function El(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w=e.$pointsLog&&e.$pointsLog.length&&Il(e),y=e.$sessionStudents&&Cl(e);function x(n){e.modal_open_binding.call(null,n),$=!0,le(()=>$=!1)}let S={$$slots:{default:[Nl]},$$scope:{ctx:e}};void 0!==e.showEndModal&&(S.open=e.showEndModal);var C=new Mn({props:S});return ne.push(()=>Me(C,"open",x)),{c(){n=T(),t=I("p"),r=I("span"),s=M("Started: "),a=M(e.startedAt),i=T(),o=I("br"),l=T(),c=I("span"),d=M("Scheduled End: "),u=M(e.endsAt),p=T(),w&&w.c(),m=T(),y&&y.c(),f=T(),(g=I("button")).innerHTML='<i class="fas fa-hourglass-end"></i>\n\t\t\t  End class\n\t\t\t',h=T(),C.$$.fragment.c(),document.title="Started Session",O(r,"class","start"),O(c,"class","end svelte-1kn2bdy"),q(c,"late",e.$session.endsAt<e.$time.toJSON()),O(t,"class","subtitle"),O(g,"class","button is-primary end svelte-1kn2bdy"),b=N(g,"click",e.click_handler_1)},m(e,$){_(e,n,$),_(e,t,$),k(t,r),k(r,s),k(r,a),k(t,i),k(t,o),k(t,l),k(t,c),k(c,d),k(c,u),_(e,p,$),w&&w.m(e,$),_(e,m,$),y&&y.m(e,$),_(e,f,$),_(e,g,$),_(e,h,$),Te(C,e,$),v=!0},p(e,n){v&&!e.startedAt||L(a,n.startedAt),v&&!e.endsAt||L(u,n.endsAt),(e.$session||e.$time)&&q(c,"late",n.$session.endsAt<n.$time.toJSON()),n.$pointsLog&&n.$pointsLog.length?w?w.p(e,n):((w=Il(n)).c(),w.m(m.parentNode,m)):w&&(w.d(1),w=null),n.$sessionStudents?y?(y.p(e,n),$e(y,1)):((y=Cl(n)).c(),$e(y,1),y.m(f.parentNode,f)):y&&(ge(),ve(y,1,1,()=>{y=null}),he());var t={};(e.$$scope||e.showEndModal)&&(t.$$scope={changed:e,ctx:n}),!$&&e.showEndModal&&(t.open=n.showEndModal),C.$set(t)},i(e){v||($e(y),$e(C.$$.fragment,e),v=!0)},o(e){ve(y),ve(C.$$.fragment,e),v=!1},d(e){e&&(D(n),D(t),D(p)),w&&w.d(e),e&&D(m),y&&y.d(e),e&&(D(f),D(g),D(h)),Ae(C,e),b()}}}function Ol(e,n,t){let r,s,a,i;d(e,Yo,e=>{t("$session",r=e)}),d(e,Uo,e=>{t("$sessionStudents",s=e)}),d(e,Js,e=>{t("$time",a=e)}),d(e,Bo,e=>{t("$pointsLog",i=e)});let o,l,c,u=!1;return e.$$.update=(e={$session:1,$sessionStudents:1})=>{e.$session&&t("startedAt",o=ii(new Date(r.startedAt),new Date,{addSuffix:!0})),e.$session&&t("endsAt",l=ii(new Date(r.endsAt),new Date,{addSuffix:!0})),e.$sessionStudents&&t("absentStudents",c=s&&s.filter(e=>e.attendance&&"Absent"===e.attendance.status))},{showEndModal:u,startedAt:o,$session:r,endsAt:l,absentStudents:c,$sessionStudents:s,$time:a,$pointsLog:i,click_handler:function(){return Go.undo(i[0].id)},click_handler_1:function(){t("showEndModal",u=!0)},confirmendsession_open_binding:function(e){t("showEndModal",u=e)},modal_open_binding:function(e){t("showEndModal",u=e)}}}class Ll extends Oe{constructor(e){super(),Ee(this,e,Ol,El,o,[])}}function Pl(n){var t,r,s,a;return{c(){t=I("span"),r=I("i"),s=M("×"),a=M(n.pointsTally),O(r,"class","fas fa-star"),O(t,"class","stars")},m(e,n){_(e,t,n),k(t,r),k(t,s),k(t,a)},p:e,d(e){e&&D(t)}}}function Rl(e){var n,t=e.result.status+"";return{c(){n=M(t)},m(e,t){_(e,n,t)},p(e,r){e.result&&t!==(t=r.result.status+"")&&L(n,t)},d(e){e&&D(n)}}}function zl(n){var t,r,s,a,i,o,l=n.result.student.englishName||n.result.student.chineseName+"",c="Absent"!==n.result.status&&Pl(n),d="Present"!==n.result.status&&Rl(n);return{c(){t=I("li"),c&&c.c(),r=T(),s=I("span"),a=M(l),i=T(),o=I("span"),d&&d.c(),O(s,"class","name"),O(o,"class","status svelte-1r4n15n"),O(t,"class","svelte-1r4n15n"),q(t,"absent","Absent"===n.result.status)},m(e,n){_(e,t,n),c&&c.m(t,null),k(t,r),k(t,s),k(s,a),k(t,i),k(t,o),d&&d.m(o,null)},p(e,n){"Absent"!==n.result.status?c?c.p(e,n):((c=Pl(n)).c(),c.m(t,r)):c&&(c.d(1),c=null),e.result&&l!==(l=n.result.student.englishName||n.result.student.chineseName+"")&&L(a,l),"Present"!==n.result.status?d?d.p(e,n):((d=Rl(n)).c(),d.m(o,null)):d&&(d.d(1),d=null),e.result&&q(t,"absent","Absent"===n.result.status)},i:e,o:e,d(e){e&&D(t),c&&c.d(),d&&d.d()}}}function jl(e,n,t){let{result:r={}}=n;const s=("0"+r.pointsTally).slice(-2);return e.$set=e=>{"result"in e&&t("result",r=e.result)},{result:r,pointsTally:s}}class ql extends Oe{constructor(e){super(),Ee(this,e,jl,zl,o,["result"])}}function Hl(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w=new xn({props:{errors:e.errors}});function y(n){e.input0_value_binding.call(null,n),i=!0,le(()=>i=!1)}let x={label:"Scheduled start",type:"datetime-local",required:!0};void 0!==e.startsAt&&(x.value=e.startsAt);var S=new Bn({props:x});function C(n){e.input1_value_binding.call(null,n),l=!0,le(()=>l=!1)}ne.push(()=>Me(S,"value",y));let M={label:"Actual start",type:"datetime-local",required:!0};void 0!==e.startedAt&&(M.value=e.startedAt);var A=new Bn({props:M});function L(n){e.input2_value_binding.call(null,n),d=!0,le(()=>d=!1)}ne.push(()=>Me(A,"value",C));let P={label:"Scheduled end",type:"datetime-local",required:!0};void 0!==e.endsAt&&(P.value=e.endsAt);var R=new Bn({props:P});function z(n){e.input3_value_binding.call(null,n),p=!0,le(()=>p=!1)}ne.push(()=>Me(R,"value",L));let j={label:"Actual end",type:"datetime-local",required:!0};void 0!==e.endedAt&&(j.value=e.endedAt);var q=new Bn({props:j});return ne.push(()=>Me(q,"value",z)),{c(){(n=I("h2")).textContent="Edit session times",t=T(),w.$$.fragment.c(),r=T(),s=I("form"),S.$$.fragment.c(),o=T(),A.$$.fragment.c(),c=T(),R.$$.fragment.c(),u=T(),q.$$.fragment.c(),m=T(),f=I("div"),(g=I("button")).textContent="Save",h=T(),$=I("input"),O(n,"class","title"),O(g,"class","button is-primary"),O(g,"type","submit"),O($,"class","button"),O($,"type","reset"),$.value="Cancel",O(f,"class","buttons"),s.noValidate=!0,b=[N(s,"submit",E(e.handleSubmit)),N(s,"reset",e.reset_handler)]},m(a,i){_(a,n,i),_(a,t,i),Te(w,a,i),_(a,r,i),_(a,s,i),Te(S,s,null),k(s,o),Te(A,s,null),k(s,c),Te(R,s,null),k(s,u),Te(q,s,null),k(s,m),k(s,f),k(f,g),e.button_binding(g),k(f,h),k(f,$),e.form_1_binding(s),v=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),w.$set(t);var r={};!i&&e.startsAt&&(r.value=n.startsAt),S.$set(r);var s={};!l&&e.startedAt&&(s.value=n.startedAt),A.$set(s);var a={};!d&&e.endsAt&&(a.value=n.endsAt),R.$set(a);var o={};!p&&e.endedAt&&(o.value=n.endedAt),q.$set(o)},i(e){v||($e(w.$$.fragment,e),$e(S.$$.fragment,e),$e(A.$$.fragment,e),$e(R.$$.fragment,e),$e(q.$$.fragment,e),v=!0)},o(e){ve(w.$$.fragment,e),ve(S.$$.fragment,e),ve(A.$$.fragment,e),ve(R.$$.fragment,e),ve(q.$$.fragment,e),v=!1},d(i){i&&(D(n),D(t)),Ae(w,i),i&&(D(r),D(s)),Ae(S),Ae(A),Ae(R),Ae(q),e.button_binding(null),e.form_1_binding(null),a(b)}}}function Fl(e,n,t){const r=Q();let s,a,{errors:i,loading:o=!1}=n,{startsAt:l="",endsAt:c="",startedAt:d="",endedAt:u=""}=n;return e.$set=e=>{"errors"in e&&t("errors",i=e.errors),"loading"in e&&t("loading",o=e.loading),"startsAt"in e&&t("startsAt",l=e.startsAt),"endsAt"in e&&t("endsAt",c=e.endsAt),"startedAt"in e&&t("startedAt",d=e.startedAt),"endedAt"in e&&t("endedAt",u=e.endedAt)},{errors:i,loading:o,form:s,saveButton:a,startsAt:l,endsAt:c,startedAt:d,endedAt:u,handleSubmit:()=>{s.checkValidity()?r("submit",{startsAt:l,endsAt:c,startedAt:d,endedAt:u}):je.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){K(e,n)},input0_value_binding:function(e){t("startsAt",l=e)},input1_value_binding:function(e){t("startedAt",d=e)},input2_value_binding:function(e){t("endsAt",c=e)},input3_value_binding:function(e){t("endedAt",u=e)},button_binding:function(e){ne[e?"unshift":"push"](()=>{t("saveButton",a=e)})},form_1_binding:function(e){ne[e?"unshift":"push"](()=>{t("form",s=e)})}}}class Wl extends Oe{constructor(e){super(),Ee(this,e,Fl,Hl,o,["errors","loading","startsAt","endsAt","startedAt","endedAt"])}}function Yl(e){var n,t=new Wl({props:{startsAt:e.localTime(e.$session.startsAt),endsAt:e.localTime(e.$session.endsAt),startedAt:e.localTime(e.$session.startedAt),endedAt:e.localTime(e.$session.endedAt),loading:e.loading,errors:e.errors}});return t.$on("submit",e.save),t.$on("reset",e.reset),{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};(e.localTime||e.$session)&&(r.startsAt=n.localTime(n.$session.startsAt)),(e.localTime||e.$session)&&(r.endsAt=n.localTime(n.$session.endsAt)),(e.localTime||e.$session)&&(r.startedAt=n.localTime(n.$session.startedAt)),(e.localTime||e.$session)&&(r.endedAt=n.localTime(n.$session.endedAt)),e.loading&&(r.loading=n.loading),e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Ul(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,le(()=>r=!1)}let o={$$slots:{default:[Yl]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new Mn({props:o});return ne.push(()=>Me(l,"open",i)),{c(){(n=I("button")).textContent="edit times",t=T(),l.$$.fragment.c(),O(n,"class","button svelte-1ih8yvt"),a=N(n,"click",e.click_handler)},m(e,r){_(e,n,r),_(e,t,r),Te(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.$session||e.loading||e.errors)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||($e(l.$$.fragment,e),s=!0)},o(e){ve(l.$$.fragment,e),s=!1},d(e){e&&(D(n),D(t)),Ae(l,e),a()}}}function Bl(e,n,t){let r;d(e,Yo,e=>{t("$session",r=e)});let s=!1,a="",i=!1;const o=()=>{t("open",s=!1),t("errors",a="")};return{open:s,errors:a,loading:i,reset:o,save:async({detail:e})=>{t("loading",i=!0),e.startsAt=new Date(e.startsAt).toISOString(),e.endsAt=new Date(e.endsAt).toISOString(),e.startedAt=new Date(e.startedAt).toISOString(),e.endedAt=new Date(e.endedAt).toISOString();try{const n=await Bs.patch(r.id,e),s=di(new Date(e.startsAt),new Date,{addSuffix:!0});je.add({text:`Updated session to ${s} with ${n.group.name} class`,type:"success"}),o()}catch(e){t("errors",a=e),je.add({text:"Couldn't save changes to session",type:"danger"})}finally{t("loading",i=!1)}},localTime:e=>ei(new Date(e),"yyyy-MM-dd'T'HH:mm"),$session:r,click_handler:function(){t("open",s=!0)},modal_open_binding:function(e){t("open",s=e)}}}class Gl extends Oe{constructor(e){super(),Ee(this,e,Bl,Ul,o,[])}}function Zl(e){var n,t;function r(t){e.lessonselect_lessonId_binding.call(null,t),n=!0,le(()=>n=!1)}let s={};void 0!==e.lessonId&&(s.lessonId=e.lessonId);var a=new qi({props:s});return ne.push(()=>Me(a,"lessonId",r)),{c(){a.$$.fragment.c()},m(e,n){Te(a,e,n),t=!0},p(e,t){var r={};!n&&e.lessonId&&(r.lessonId=t.lessonId),a.$set(r)},i(e){t||($e(a.$$.fragment,e),t=!0)},o(e){ve(a.$$.fragment,e),t=!1},d(e){Ae(a,e)}}}function Vl(e,n,t){let r,{id:s}=n;let a;return e.$set=e=>{"id"in e&&t("id",s=e.id)},e.$$.update=(e={lessonId:1})=>{e.lessonId&&(a=(async()=>{if(!r)return;await en(Fo,{id:s,lessonId:r})})())},{lessonId:r,id:s,lessonselect_lessonId_binding:function(e){t("lessonId",r=e)}}}class Jl extends Oe{constructor(e){super(),Ee(this,e,Vl,Zl,o,["id"])}}const Xl="\n mutation CreateReport($classSessionId: ID!) {\n   createReport(classSessionId: $classSessionId) {\n     id\n   }\n }";function Ql(n){var t,r;return{c(){(t=I("button")).textContent="Create report",O(t,"class","button svelte-1ih8yvt"),r=N(t,"click",n.create)},m(e,n){_(e,t,n)},p:e,i:e,o:e,d(e){e&&D(t),r()}}}function Kl(e,n,t){let{classSessionId:r}=n;return e.$set=e=>{"classSessionId"in e&&t("classSessionId",r=e.classSessionId)},{classSessionId:r,create:async()=>{await en(Xl,{classSessionId:r})}}}class ec extends Oe{constructor(e){super(),Ee(this,e,Kl,Ql,o,["classSessionId"])}}var nc=Gn(function(e,n){!function(n){var t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:h,table:h,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};function r(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||x.defaults,this.rules=t.normal,this.options.pedantic?this.rules=t.pedantic:this.options.gfm&&(this.rules=t.gfm)}t._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,t._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,t.def=p(t.def).replace("label",t._label).replace("title",t._title).getRegex(),t.bullet=/(?:[*+-]|\d{1,9}\.)/,t.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,t.item=p(t.item,"gm").replace(/bull/g,t.bullet).getRegex(),t.list=p(t.list).replace(/bull/g,t.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+t.def.source+")").getRegex(),t._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",t._comment=/<!--(?!-?>)[\s\S]*?-->/,t.html=p(t.html,"i").replace("comment",t._comment).replace("tag",t._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),t.paragraph=p(t._paragraph).replace("hr",t.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",t._tag).getRegex(),t.blockquote=p(t.blockquote).replace("paragraph",t.paragraph).getRegex(),t.normal=$({},t),t.gfm=$({},t.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),t.pedantic=$({},t.normal,{html:p("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",t._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:h,paragraph:p(t.normal._paragraph).replace("hr",t.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",t.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),r.rules=t,r.lex=function(e,n){return new r(n).lex(e)},r.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},r.prototype.token=function(e,n){var r,s,a,i,o,l,c,u,p,m,f,g,h,$,w,y;for(e=e.replace(/^ +$/gm,"");e;)if((a=this.rules.newline.exec(e))&&(e=e.substring(a[0].length),a[0].length>1&&this.tokens.push({type:"space"})),a=this.rules.code.exec(e)){var x=this.tokens[this.tokens.length-1];e=e.substring(a[0].length),x&&"paragraph"===x.type?x.text+="\n"+a[0].trimRight():(a=a[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?a:b(a,"\n")}))}else if(a=this.rules.fences.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"code",lang:a[2]?a[2].trim():a[2],text:a[3]||""});else if(a=this.rules.heading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:a[1].length,text:a[2]});else if((a=this.rules.nptable.exec(e))&&(l={type:"table",header:v(a[1].replace(/^ *| *\| *$/g,"")),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3]?a[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(a[0].length),f=0;f<l.align.length;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(f=0;f<l.cells.length;f++)l.cells[f]=v(l.cells[f],l.header.length);this.tokens.push(l)}else if(a=this.rules.hr.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"hr"});else if(a=this.rules.blockquote.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"blockquote_start"}),a=a[0].replace(/^ *> ?/gm,""),this.token(a,n),this.tokens.push({type:"blockquote_end"});else if(a=this.rules.list.exec(e)){for(e=e.substring(a[0].length),c={type:"list_start",ordered:$=(i=a[2]).length>1,start:$?+i:"",loose:!1},this.tokens.push(c),u=[],r=!1,h=(a=a[0].match(this.rules.item)).length,f=0;f<h;f++)m=(l=a[f]).length,~(l=l.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(m-=l.length,l=this.options.pedantic?l.replace(/^ {1,4}/gm,""):l.replace(new RegExp("^ {1,"+m+"}","gm"),"")),f!==h-1&&(o=t.bullet.exec(a[f+1])[0],(i.length>1?1===o.length:o.length>1||this.options.smartLists&&o!==i)&&(e=a.slice(f+1).join("\n")+e,f=h-1)),s=r||/\n\n(?!\s*$)/.test(l),f!==h-1&&(r="\n"===l.charAt(l.length-1),s||(s=r)),s&&(c.loose=!0),y=void 0,(w=/^\[[ xX]\] /.test(l))&&(y=" "!==l[1],l=l.replace(/^\[[ xX]\] +/,"")),p={type:"list_item_start",task:w,checked:y,loose:s},u.push(p),this.tokens.push(p),this.token(l,!1),this.tokens.push({type:"list_item_end"});if(c.loose)for(h=u.length,f=0;f<h;f++)u[f].loose=!0;this.tokens.push({type:"list_end"})}else if(a=this.rules.html.exec(e))e=e.substring(a[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===a[1]||"script"===a[1]||"style"===a[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):d(a[0]):a[0]});else if(n&&(a=this.rules.def.exec(e)))e=e.substring(a[0].length),a[3]&&(a[3]=a[3].substring(1,a[3].length-1)),g=a[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[g]||(this.tokens.links[g]={href:a[2],title:a[3]});else if((a=this.rules.table.exec(e))&&(l={type:"table",header:v(a[1].replace(/^ *| *\| *$/g,"")),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:a[3]?a[3].replace(/\n$/,"").split("\n"):[]}).header.length===l.align.length){for(e=e.substring(a[0].length),f=0;f<l.align.length;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(f=0;f<l.cells.length;f++)l.cells[f]=v(l.cells[f].replace(/^ *\| *| *\| *$/g,""),l.header.length);this.tokens.push(l)}else if(a=this.rules.lheading.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"heading",depth:"="===a[2].charAt(0)?1:2,text:a[1]});else if(n&&(a=this.rules.paragraph.exec(e)))e=e.substring(a[0].length),this.tokens.push({type:"paragraph",text:"\n"===a[1].charAt(a[1].length-1)?a[1].slice(0,-1):a[1]});else if(a=this.rules.text.exec(e))e=e.substring(a[0].length),this.tokens.push({type:"text",text:a[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var s={escape:/^\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:h,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:h,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function a(e,n){if(this.options=n||x.defaults,this.links=e,this.rules=s.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=s.pedantic:this.options.gfm&&(this.options.breaks?this.rules=s.breaks:this.rules=s.gfm)}function i(e){this.options=e||x.defaults}function o(){}function l(e){this.tokens=[],this.token=null,this.options=e||x.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new c}function c(){this.seen={}}function d(e,n){if(n){if(d.escapeTest.test(e))return e.replace(d.escapeReplace,function(e){return d.replacements[e]})}else if(d.escapeTestNoEncode.test(e))return e.replace(d.escapeReplaceNoEncode,function(e){return d.replacements[e]});return e}function u(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,n){return"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""})}function p(e,n){return e=e.source||e,n=n||"",{replace:function(n,t){return t=(t=t.source||t).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(n,t),this},getRegex:function(){return new RegExp(e,n)}}}function m(e,n,t){if(e){try{var r=decodeURIComponent(u(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}n&&!g.test(t)&&(t=function(e,n){f[" "+e]||(/^[^:]+:\/*[^\/]*$/.test(e)?f[" "+e]=e+"/":f[" "+e]=b(e,"/",!0));return e=f[" "+e],"//"===n.slice(0,2)?e.replace(/:[\s\S]*/,":")+n:"/"===n.charAt(0)?e.replace(/(:\/*[^\/]*)[\s\S]*/,"$1")+n:e+n}(n,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch(e){return null}return t}s._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",s.em=p(s.em).replace(/punctuation/g,s._punctuation).getRegex(),s._escapes=/\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/g,s._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,s._email=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,s.autolink=p(s.autolink).replace("scheme",s._scheme).replace("email",s._email).getRegex(),s._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,s.tag=p(s.tag).replace("comment",t._comment).replace("attribute",s._attribute).getRegex(),s._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,s._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,s._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,s.link=p(s.link).replace("label",s._label).replace("href",s._href).replace("title",s._title).getRegex(),s.reflink=p(s.reflink).replace("label",s._label).getRegex(),s.normal=$({},s),s.pedantic=$({},s.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:p(/^!?\[(label)\]\((.*?)\)/).replace("label",s._label).getRegex(),reflink:p(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",s._label).getRegex()}),s.gfm=$({},s.normal,{escape:p(s.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),s.gfm.url=p(s.gfm.url,"i").replace("email",s.gfm._extended_email).getRegex(),s.breaks=$({},s.gfm,{br:p(s.br).replace("{2,}","*").getRegex(),text:p(s.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),a.rules=s,a.output=function(e,n,t){return new a(n,t).output(e)},a.prototype.output=function(e){for(var n,t,r,s,i,o,l="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),l+=d(i[1]);else if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.inRawBlock=!1),e=e.substring(i[0].length),l+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):d(i[0]):i[0];else if(i=this.rules.link.exec(e)){var c=w(i[2],"()");if(c>-1){var u=4+i[1].length+c;i[2]=i[2].substring(0,c),i[0]=i[0].substring(0,u).trim(),i[3]=""}e=e.substring(i[0].length),this.inLink=!0,r=i[2],this.options.pedantic?(n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=n[1],s=n[3]):s="":s=i[3]?i[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),l+=this.outputLink(i,{href:a.escapes(r),title:a.escapes(s)}),this.inLink=!1}else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),n=(i[2]||i[1]).replace(/\s+/g," "),!(n=this.links[n.toLowerCase()])||!n.href){l+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,l+=this.outputLink(i,n),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),l+=this.renderer.strong(this.output(i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),l+=this.renderer.em(this.output(i[6]||i[5]||i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),l+=this.renderer.codespan(d(i[2].trim(),!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),l+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),l+=this.renderer.del(this.output(i[1]));else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),r="@"===i[2]?"mailto:"+(t=d(this.mangle(i[1]))):t=d(i[1]),l+=this.renderer.link(r,null,t);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.inRawBlock?l+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):d(i[0]):i[0]):l+=this.renderer.text(d(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===i[2])r="mailto:"+(t=d(i[0]));else{do{o=i[0],i[0]=this.rules._backpedal.exec(i[0])[0]}while(o!==i[0]);t=d(i[0]),r="www."===i[1]?"http://"+t:t}e=e.substring(i[0].length),l+=this.renderer.link(r,null,t)}return l},a.escapes=function(e){return e?e.replace(a.rules._escapes,"$1"):e},a.prototype.outputLink=function(e,n){var t=n.href,r=n.title?d(n.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(t,r,this.output(e[1])):this.renderer.image(t,r,d(e[1]))},a.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},a.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var n,t="",r=e.length,s=0;s<r;s++)n=e.charCodeAt(s),Math.random()>.5&&(n="x"+n.toString(16)),t+="&#"+n+";";return t},i.prototype.code=function(e,n,t){var r=(n||"").match(/\S*/)[0];if(this.options.highlight){var s=this.options.highlight(e,r);null!=s&&s!==e&&(t=!0,e=s)}return r?'<pre><code class="'+this.options.langPrefix+d(r,!0)+'">'+(t?e:d(e,!0))+"</code></pre>\n":"<pre><code>"+(t?e:d(e,!0))+"</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.html=function(e){return e},i.prototype.heading=function(e,n,t,r){return this.options.headerIds?"<h"+n+' id="'+this.options.headerPrefix+r.slug(t)+'">'+e+"</h"+n+">\n":"<h"+n+">"+e+"</h"+n+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,n,t){var r=n?"ol":"ul";return"<"+r+(n&&1!==t?' start="'+t+'"':"")+">\n"+e+"</"+r+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,n){return n&&(n="<tbody>"+n+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+n+"</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,n){var t=n.header?"th":"td";return(n.align?"<"+t+' align="'+n.align+'">':"<"+t+">")+e+"</"+t+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,n,t){if(null===(e=m(this.options.sanitize,this.options.baseUrl,e)))return t;var r='<a href="'+d(e)+'"';return n&&(r+=' title="'+n+'"'),r+=">"+t+"</a>"},i.prototype.image=function(e,n,t){if(null===(e=m(this.options.sanitize,this.options.baseUrl,e)))return t;var r='<img src="'+e+'" alt="'+t+'"';return n&&(r+=' title="'+n+'"'),r+=this.options.xhtml?"/>":">"},i.prototype.text=function(e){return e},o.prototype.strong=o.prototype.em=o.prototype.codespan=o.prototype.del=o.prototype.text=function(e){return e},o.prototype.link=o.prototype.image=function(e,n,t){return""+t},o.prototype.br=function(){return""},l.parse=function(e,n){return new l(n).parse(e)},l.prototype.parse=function(e){this.inline=new a(e.links,this.options),this.inlineText=new a(e.links,$({},this.options,{renderer:new o})),this.tokens=e.reverse();for(var n="";this.next();)n+=this.tok();return n},l.prototype.next=function(){return this.token=this.tokens.pop(),this.token},l.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},l.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},l.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,u(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,n,t,r,s="",a="";for(t="",e=0;e<this.token.header.length;e++)t+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(s+=this.renderer.tablerow(t),e=0;e<this.token.cells.length;e++){for(n=this.token.cells[e],t="",r=0;r<n.length;r++)t+=this.renderer.tablecell(this.inline.output(n[r]),{header:!1,align:this.token.align[r]});a+=this.renderer.tablerow(t)}return this.renderer.table(s,a);case"blockquote_start":for(a="";"blockquote_end"!==this.next().type;)a+=this.tok();return this.renderer.blockquote(a);case"list_start":a="";for(var i=this.token.ordered,o=this.token.start;"list_end"!==this.next().type;)a+=this.tok();return this.renderer.list(a,i,o);case"list_item_start":a="";var l=this.token.loose,c=this.token.checked,d=this.token.task;for(this.token.task&&(a+=this.renderer.checkbox(c));"list_item_end"!==this.next().type;)a+=l||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(a,d,c);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var p='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(p);console.log(p)}},c.prototype.slug=function(e){var n=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,.\/:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(n)){var t=n;do{this.seen[t]++,n=t+"-"+this.seen[t]}while(this.seen.hasOwnProperty(n))}return this.seen[n]=0,n},d.escapeTest=/[&<>"']/,d.escapeReplace=/[&<>"']/g,d.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},d.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,d.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var f={},g=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function h(){}function $(e){for(var n,t,r=1;r<arguments.length;r++)for(t in n=arguments[r])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}function v(e,n){var t=e.replace(/\|/g,function(e,n,t){for(var r=!1,s=n;--s>=0&&"\\"===t[s];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(t.length>n)t.splice(n);else for(;t.length<n;)t.push("");for(;r<t.length;r++)t[r]=t[r].trim().replace(/\\\|/g,"|");return t}function b(e,n,t){if(0===e.length)return"";for(var r=0;r<e.length;){var s=e.charAt(e.length-r-1);if(s!==n||t){if(s===n||!t)break;r++}else r++}return e.substr(0,e.length-r)}function w(e,n){if(-1===e.indexOf(n[1]))return-1;for(var t=0,r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===n[0])t++;else if(e[r]===n[1]&&--t<0)return r;return-1}function y(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function x(e,n,t){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(t||"function"==typeof n){t||(t=n,n=null),y(n=$({},x.defaults,n||{}));var s,a,i=n.highlight,o=0;try{s=r.lex(e,n)}catch(e){return t(e)}a=s.length;var c=function(e){if(e)return n.highlight=i,t(e);var r;try{r=l.parse(s,n)}catch(n){e=n}return n.highlight=i,e?t(e):t(null,r)};if(!i||i.length<3)return c();if(delete n.highlight,!a)return c();for(;o<s.length;o++)!function(e){"code"!==e.type?--a||c():i(e.text,e.lang,function(n,t){return n?c(n):null==t||t===e.text?--a||c():(e.text=t,e.escaped=!0,void(--a||c()))})}(s[o])}else try{return n&&(n=$({},x.defaults,n)),y(n),l.parse(r.lex(e,n),n)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(n||x.defaults).silent)return"<p>An error occurred:</p><pre>"+d(e.message+"",!0)+"</pre>";throw e}}h.exec=h,x.options=x.setOptions=function(e){return $(x.defaults,e),x},x.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new i,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}},x.defaults=x.getDefaults(),x.Parser=l,x.parser=l.parse,x.Renderer=i,x.TextRenderer=o,x.Lexer=r,x.lexer=r.lex,x.InlineLexer=a,x.inlineLexer=a.output,x.Slugger=c,x.parse=x,e.exports=x}()});function tc(e){var n,t;return{c(){(n=I("button")).innerHTML='<i class="fas fa-edit"></i>Edit\n\t\t\t  ',O(n,"class","button"),t=N(n,"click",e.toggleEdit)},m(e,t){_(e,n,t)},d(e){e&&D(n),t()}}}function rc(e){var n,t;return{c(){(n=I("button")).innerHTML='<i class="fas fa-eye"></i>Preview\n\t\t\t  ',O(n,"class","button"),t=N(n,"click",e.toggleEdit)},m(e,t){_(e,n,t)},d(e){e&&D(n),t()}}}function sc(e){var n,t,r,s;return{c(){(n=I("button")).innerHTML='<i class="fas fa-history"></i>Discard changes\n\t\t\t  ',t=T(),(r=I("button")).innerHTML='<i class="fas fa-save"></i>Save changes\n\t\t\t  ',O(n,"class","button is-danger"),O(r,"class","button is-primary"),q(r,"is-loading",e.loading),s=[N(n,"click",e.discardChanges),N(r,"click",e.save)]},m(e,s){_(e,n,s),_(e,t,s),_(e,r,s)},p(e,n){e.loading&&q(r,"is-loading",n.loading)},d(e){e&&(D(n),D(t),D(r)),a(s)}}}function ac(e){var n,t=nc(e.text,{breaks:!0})+"";return{c(){n=new F(t,null)},m(e,t){n.m(e,t)},p(e,r){e.text&&t!==(t=nc(r.text,{breaks:!0})+"")&&n.p(t)},d(e){e&&n.d()}}}function ic(e){var n,t;return{c(){O(n=I("textarea"),"class","textarea svelte-18mnnh3"),t=[N(n,"input",e.textarea_input_handler),N(n,"input",e.inputHandler)]},m(t,r){_(t,n,r),P(n,e.text),e.textarea_binding(n)},p(e,t){e.text&&P(n,t.text)},d(r){r&&D(n),e.textarea_binding(null),a(t)}}}function oc(n){var t,r,s,a;function i(e,n){return n.edit?rc:tc}var o=i(0,n),l=o(n),c=n.text!==n.original&&sc(n);function d(e,n){return n.edit?ic:ac}var u=d(0,n),p=u(n);return{c(){t=I("div"),l.c(),r=T(),c&&c.c(),s=T(),p.c(),a=A(),O(t,"class","buttons")},m(e,n){_(e,t,n),l.m(t,null),k(t,r),c&&c.m(t,null),_(e,s,n),p.m(e,n),_(e,a,n)},p(e,n){o!==(o=i(0,n))&&(l.d(1),(l=o(n))&&(l.c(),l.m(t,r))),n.text!==n.original?c?c.p(e,n):((c=sc(n)).c(),c.m(t,null)):c&&(c.d(1),c=null),u===(u=d(0,n))&&p?p.p(e,n):(p.d(1),(p=u(n))&&(p.c(),p.m(a.parentNode,a)))},i:e,o:e,d(e){e&&D(t),l.d(),c&&c.d(),e&&D(s),p.d(e),e&&D(a)}}}function lc(e,n,t){let r;d(e,Yo,e=>{t("$session",r=e)});let s,{text:a="",key:i=""}=n,o=a&&a.slice(0),l=!0,c=!1,u=!1,p="";const m=e=>{s.style.height="auto",t("input",s),s.style.height=s.scrollHeight+"px",t("input",s)};return e.$set=e=>{"text"in e&&t("text",a=e.text),"key"in e&&t("key",i=e.key)},e.$$.update=(e={alreadySet:1,input:1})=>{(e.alreadySet||e.input)&&!c&&s&&(m(),t("alreadySet",c=!0))},{text:a,key:i,original:o,input:s,edit:l,loading:u,inputHandler:m,save:async()=>{t("loading",u=!0);const e={report:{update:{[i]:a}}};try{await Bs.patch(r.id,e),je.add({text:"Successfuly saved changes",type:"success"}),p="",t("original",o=a.slice(0))}catch(e){p=e,je.add({text:"Couldn't save changes",type:"danger"})}finally{t("loading",u=!1)}},toggleEdit:()=>{t("edit",l=!l),l&&t("alreadySet",c=!1)},discardChanges:()=>{t("text",a=o.slice(0))},textarea_input_handler:function(){a=this.value,t("text",a)},textarea_binding:function(e){ne[e?"unshift":"push"](()=>{t("input",s=e)})}}}class cc extends Oe{constructor(e){super(),Ee(this,e,lc,oc,o,["text","key"])}}function dc(n){var t,r;return{c(){O(t=I("button"),"class","delete"),r=N(t,"click",n.remove)},m(e,n){_(e,t,n)},p:e,i:e,o:e,d(e){e&&D(t),r()}}}function uc(e,n,t){let{wordId:r,classSessionId:s}=n;return e.$set=e=>{"wordId"in e&&t("wordId",r=e.wordId),"classSessionId"in e&&t("classSessionId",s=e.classSessionId)},{wordId:r,classSessionId:s,remove:async()=>{const e={report:{update:{words:{disconnect:{id:r}}}}};try{await Bs.patch(s,e),je.add({text:"Removed word from report",type:"success"})}catch(e){console.error(e)}}}}class pc extends Oe{constructor(e){super(),Ee(this,e,uc,dc,o,["wordId","classSessionId"])}}const mc="\n  fragment WordFields on Word {\n    id\n    english\n    chinese\n    audio\n    lessons {\n      id\n      name\n    }\n    tags {\n      id\n      name\n    }\n  }",fc=`\n query Words ($orderBy: WordOrderByInput, $where: WordWhereInput){\n   words (orderBy: $orderBy, where:$where){\n     ...WordFields\n   }\n }\n ${mc}`,gc=`\nquery Word ($id: ID!){\n  word (id: $id){\n    ...WordFields\n  }\n}\n${mc}`,hc=`\n mutation CreateWord ($input: WordCreateInput!){\n   createWord (input: $input) {\n     ...WordFields\n   }\n }\n ${mc}`,$c=`\nmutation UpdateWord ($input: WordUpdateInput!, $id: ID!){\n  updateWord (input: $input, id:$id) {\n    ...WordFields\n  }\n}\n${mc}`,vc=(()=>{const{subscribe:e,set:n,update:t}=Re();return{subscribe:e,get:async(e={})=>{const t=await en(fc,{orderBy:e.orderBy,where:e.where});n(t.words)},create:async e=>{const n=await en(hc,{input:e});t(e=>e?[...e,n.createWord]:[n.createWord])},remove:async e=>{await en("\nmutation DeleteWord ($id: ID!){\n  deleteWord (id:$id) {\n    id\n  }\n}",{id:e}),t(n=>n&&n.filter(n=>n.id!==e)),bc.update(n=>n&&n.id===e?null:n)},patch:async({input:e,id:n})=>{const r=await en($c,{id:n,input:e});t(e=>e?e.map(e=>e.id!==n?e:r.updateWord):[r.updateWord]),bc.update(e=>e&&e.id===n?r.updateWord:e)}}})(),bc=(()=>{const{subscribe:e,set:n,update:t}=Re();return{subscribe:e,update:t,patch:vc.patch,get:async e=>{const t=await en(gc,{id:e});null===t.word&&ln(`/not-found/word/${e}`),n(t.word)}}})();function wc(n){var t,r,s,a,i,o,l,c,d,u,p=n.word.english+"",m=n.word.chinese+"";return{c(){t=I("li"),r=I("label"),s=I("i"),i=T(),o=M(p),l=M(" ("),c=M(m),d=M(")"),O(s,"class",a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12"),O(r,"class","checkbox"),O(t,"class","svelte-12hcy12"),u=N(t,"click",n.toggle)},m(e,n){_(e,t,n),k(t,r),k(r,s),k(r,i),k(r,o),k(r,l),k(r,c),k(r,d)},p(e,n){e.isAdded&&a!==(a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12")&&O(s,"class",a),e.word&&p!==(p=n.word.english+"")&&L(o,p),e.word&&m!==(m=n.word.chinese+"")&&L(c,m)},i:e,o:e,d(e){e&&D(t),u()}}}function yc(e,n,t){let r;d(e,Yo,e=>{t("$session",r=e)});let{word:s}=n;let a;return e.$set=e=>{"word"in e&&t("word",s=e.word)},e.$$.update=(e={$session:1,word:1})=>{(e.$session||e.word)&&t("isAdded",a=!!r.report.words.find(e=>e.id===s.id))},{word:s,toggle:async()=>{const e={report:{update:{}}};let n="Removed word session vocabulary";a?e.report.update.words={disconnect:{id:s.id}}:(n="Added word to session vocabulary",e.report.update.words={connect:{id:s.id}});try{await Bs.patch(r.id,e),je.add({text:n,type:"success"})}catch(e){console.error(e)}},isAdded:a}}class xc extends Oe{constructor(e){super(),Ee(this,e,yc,wc,o,["word"])}}function kc(e,n,t){const r=Object.create(e);return r.word=n[t],r}function _c(e){var n,t,r,s,a,i,o=e.$words.length+"",l=[],c=new Map,d=e.$words;const u=e=>e.word.id;for(var p=0;p<d.length;p+=1){let n=kc(e,d,p),t=u(n);c.set(t,l[p]=Dc(t,n))}return{c(){for(n=I("p"),t=M(o),r=M(" matches:"),s=T(),p=0;p<l.length;p+=1)l[p].c();a=A()},m(e,o){for(_(e,n,o),k(n,t),k(n,r),_(e,s,o),p=0;p<l.length;p+=1)l[p].m(e,o);_(e,a,o),i=!0},p(e,n){i&&!e.$words||o===(o=n.$words.length+"")||L(t,o);const r=n.$words;ge(),l=Ie(l,e,u,1,n,r,c,a.parentNode,Se,Dc,a,kc),he()},i(e){if(!i){for(var n=0;n<d.length;n+=1)$e(l[n]);i=!0}},o(e){for(p=0;p<l.length;p+=1)ve(l[p]);i=!1},d(e){for(e&&(D(n),D(s)),p=0;p<l.length;p+=1)l[p].d(e);e&&D(a)}}}function Dc(e,n){var t,r,s=new xc({props:{word:n.word}});return{key:e,first:null,c(){t=A(),s.$$.fragment.c(),this.first=t},m(e,n){_(e,t,n),Te(s,e,n),r=!0},p(e,n){var t={};e.$words&&(t.word=n.word),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&D(t),Ae(s,e)}}}function Sc(e){var n,t,r,s,a,i,o,l,c,d,u=new Ei({props:{store:vc,searchParams:["english","chinese"]}}),p=new xn({props:{errors:e.errors}}),m=e.$words&&_c(e);return{c(){(n=I("h2")).textContent="Add word to session vocabulary",t=T(),u.$$.fragment.c(),r=T(),p.$$.fragment.c(),s=T(),a=I("div"),m&&m.c(),i=T(),o=I("div"),(l=I("button")).textContent="Exit",O(n,"class","title is-4"),O(a,"class","results"),O(l,"class","button"),O(o,"class","buttons svelte-1yabmim"),d=N(l,"click",e.click_handler_1)},m(e,d){_(e,n,d),_(e,t,d),Te(u,e,d),_(e,r,d),Te(p,e,d),_(e,s,d),_(e,a,d),m&&m.m(a,null),_(e,i,d),_(e,o,d),k(o,l),c=!0},p(e,n){var t={};e.words&&(t.store=vc),u.$set(t);var r={};e.errors&&(r.errors=n.errors),p.$set(r),n.$words?m?(m.p(e,n),$e(m,1)):((m=_c(n)).c(),$e(m,1),m.m(a,null)):m&&(ge(),ve(m,1,1,()=>{m=null}),he())},i(e){c||($e(u.$$.fragment,e),$e(p.$$.fragment,e),$e(m),c=!0)},o(e){ve(u.$$.fragment,e),ve(p.$$.fragment,e),ve(m),c=!1},d(e){e&&(D(n),D(t)),Ae(u,e),e&&D(r),Ae(p,e),e&&(D(s),D(a)),m&&m.d(),e&&(D(i),D(o)),d()}}}function Ic(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,le(()=>r=!1)}let o={$$slots:{default:[Sc]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new Mn({props:o});return ne.push(()=>Me(l,"open",i)),{c(){(n=I("button")).innerHTML='<i class="fas fa-plus"></i>add words',t=T(),l.$$.fragment.c(),O(n,"class","button add svelte-1yabmim"),a=N(n,"click",e.click_handler)},m(e,r){_(e,n,r),_(e,t,r),Te(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.$words||e.errors)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||($e(l.$$.fragment,e),s=!0)},o(e){ve(l.$$.fragment,e),s=!1},d(e){e&&(D(n),D(t)),Ae(l,e),a()}}}function Cc(e,n,t){let r;d(e,vc,e=>{t("$words",r=e)});let s=!1,a="";return J(async()=>{try{await vc.get()}catch(e){t("errors",a=e)}}),{open:s,errors:a,$words:r,click_handler:function(){t("open",s=!0)},click_handler_1:function(){t("open",s=!1)},modal_open_binding:function(e){t("open",s=e)}}}class Mc extends Oe{constructor(e){super(),Ee(this,e,Cc,Ic,o,[])}}function Tc(n){var t,r;return{c(){O(t=I("button"),"class","delete"),r=N(t,"click",n.remove)},m(e,n){_(e,t,n)},p:e,i:e,o:e,d(e){e&&D(t),r()}}}function Ac(e,n,t){let{materialId:r,classSessionId:s}=n;return e.$set=e=>{"materialId"in e&&t("materialId",r=e.materialId),"classSessionId"in e&&t("classSessionId",s=e.classSessionId)},{materialId:r,classSessionId:s,remove:async()=>{const e={report:{update:{materials:{disconnect:{id:r}}}}};try{await Bs.patch(s,e),je.add({text:"Removed material from session report",type:"success"})}catch(e){console.error(e)}}}}class Nc extends Oe{constructor(e){super(),Ee(this,e,Ac,Tc,o,["materialId","classSessionId"])}}const Ec="\n  fragment MaterialFields on Material {\n    id\n    type\n    url\n    title\n    notes\n    imageUrl\n    tags {\n       id\n       name\n    }\n  }",Oc=`\n  query Materials($orderBy: MaterialOrderByInput, $where: MaterialWhereInput) {\n    materials (orderBy: $orderBy, where:$where) {\n      ...MaterialFields\n    }\n  }\n  ${Ec}`,Lc=`\n  query Material($id: ID!){\n    material(id: $id) {\n      ...MaterialFields\n    }\n  }\n  ${Ec}`,Pc=`\n mutation CreateMaterial($input: MaterialCreateInput!) {\n   createMaterial(input: $input) {\n     ...MaterialFields\n   }\n }\n ${Ec}`,Rc=`\nmutation UpdateMaterial($input: MaterialUpdateInput!, $id:ID!) {\n  updateMaterial(input: $input, id: $id) {\n    ...MaterialFields\n  }\n}\n${Ec}`,zc=(()=>{const{subscribe:e,set:n,update:t}=Re();return{subscribe:e,update:t,get:async(e={})=>{const{orderBy:t,where:r}=e,s=await en(Oc,{orderBy:t,where:r});n(s.materials)},create:async e=>{const n=await en(Pc,{input:e});t(e=>e?[...e,n.createMaterial]:[n.createMaterial])},remove:async e=>{await en("\nmutation DeleteMaterial($id:ID!) {\n  deleteMaterial(id: $id) {\n    id\n  }\n}",{id:e}),t(n=>n&&n.filter(n=>n.id!==e)),jc.update(n=>n&&n.id===e?null:n)},patch:async({input:e,id:n})=>{const r=await en(Rc,{id:n,input:e});t(e=>e?e.map(e=>e.id!==n?e:r.updateMaterial):[r.updateMaterial]),jc.update(e=>e&&e.id===n?r.updateMaterial:e)}}})(),jc=(()=>{const{subscribe:e,set:n,update:t}=Re();return{subscribe:e,update:t,patch:zc.patch,get:async e=>{const t=await en(Lc,{id:e});n(t.material)}}})();function qc(n){var t,r,s,a,i,o,l,c,d,u=n.material.title+"",p=n.material.type+"";return{c(){t=I("li"),r=I("label"),s=I("i"),i=T(),o=M(u),l=M(" - "),c=M(p),O(s,"class",a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12"),O(r,"class","checkbox"),O(t,"class","svelte-12hcy12"),d=N(t,"click",n.toggle)},m(e,n){_(e,t,n),k(t,r),k(r,s),k(r,i),k(r,o),k(r,l),k(r,c)},p(e,n){e.isAdded&&a!==(a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12")&&O(s,"class",a),e.material&&u!==(u=n.material.title+"")&&L(o,u),e.material&&p!==(p=n.material.type+"")&&L(c,p)},i:e,o:e,d(e){e&&D(t),d()}}}function Hc(e,n,t){let r;d(e,Yo,e=>{t("$session",r=e)});let{material:s}=n;let a;return e.$set=e=>{"material"in e&&t("material",s=e.material)},e.$$.update=(e={$session:1,material:1})=>{(e.$session||e.material)&&t("isAdded",a=!!r.report.materials.find(e=>e.id===s.id))},{material:s,toggle:async()=>{const e={report:{update:{}}};let n="Removed material from report";a?e.report.update.materials={disconnect:{id:s.id}}:(n="Added material to report",e.report.update.materials={connect:{id:s.id}});try{await Bs.patch(r.id,e),je.add({text:n,type:"success"})}catch(e){console.error(e)}},isAdded:a}}class Fc extends Oe{constructor(e){super(),Ee(this,e,Hc,qc,o,["material"])}}function Wc(e,n,t){const r=Object.create(e);return r.material=n[t],r}function Yc(e){var n,t,r,s,a,i,o=e.$materials.length+"",l=[],c=new Map,d=e.$materials;const u=e=>e.material.id;for(var p=0;p<d.length;p+=1){let n=Wc(e,d,p),t=u(n);c.set(t,l[p]=Uc(t,n))}return{c(){for(n=I("p"),t=M(o),r=M(" matches:"),s=T(),p=0;p<l.length;p+=1)l[p].c();a=A()},m(e,o){for(_(e,n,o),k(n,t),k(n,r),_(e,s,o),p=0;p<l.length;p+=1)l[p].m(e,o);_(e,a,o),i=!0},p(e,n){i&&!e.$materials||o===(o=n.$materials.length+"")||L(t,o);const r=n.$materials;ge(),l=Ie(l,e,u,1,n,r,c,a.parentNode,Se,Uc,a,Wc),he()},i(e){if(!i){for(var n=0;n<d.length;n+=1)$e(l[n]);i=!0}},o(e){for(p=0;p<l.length;p+=1)ve(l[p]);i=!1},d(e){for(e&&(D(n),D(s)),p=0;p<l.length;p+=1)l[p].d(e);e&&D(a)}}}function Uc(e,n){var t,r,s=new Fc({props:{material:n.material}});return{key:e,first:null,c(){t=A(),s.$$.fragment.c(),this.first=t},m(e,n){_(e,t,n),Te(s,e,n),r=!0},p(e,n){var t={};e.$materials&&(t.material=n.material),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&D(t),Ae(s,e)}}}function Bc(e){var n,t,r,s,a,i,o,l,c,d,u=new Ei({props:{store:zc,searchParams:"title"}}),p=new xn({props:{errors:e.errors}}),m=e.$materials&&Yc(e);return{c(){(n=I("h2")).textContent="Add material to session report",t=T(),u.$$.fragment.c(),r=T(),p.$$.fragment.c(),s=T(),a=I("div"),m&&m.c(),i=T(),o=I("div"),(l=I("button")).textContent="Exit",O(n,"class","title is-4"),O(a,"class","results"),O(l,"class","button"),O(o,"class","buttons svelte-1yabmim"),d=N(l,"click",e.click_handler_1)},m(e,d){_(e,n,d),_(e,t,d),Te(u,e,d),_(e,r,d),Te(p,e,d),_(e,s,d),_(e,a,d),m&&m.m(a,null),_(e,i,d),_(e,o,d),k(o,l),c=!0},p(e,n){var t={};e.materials&&(t.store=zc),u.$set(t);var r={};e.errors&&(r.errors=n.errors),p.$set(r),n.$materials?m?(m.p(e,n),$e(m,1)):((m=Yc(n)).c(),$e(m,1),m.m(a,null)):m&&(ge(),ve(m,1,1,()=>{m=null}),he())},i(e){c||($e(u.$$.fragment,e),$e(p.$$.fragment,e),$e(m),c=!0)},o(e){ve(u.$$.fragment,e),ve(p.$$.fragment,e),ve(m),c=!1},d(e){e&&(D(n),D(t)),Ae(u,e),e&&D(r),Ae(p,e),e&&(D(s),D(a)),m&&m.d(),e&&(D(i),D(o)),d()}}}function Gc(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,le(()=>r=!1)}let o={$$slots:{default:[Bc]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new Mn({props:o});return ne.push(()=>Me(l,"open",i)),{c(){(n=I("button")).innerHTML='<i class="fas fa-plus"></i>add material',t=T(),l.$$.fragment.c(),O(n,"class","button add svelte-1yabmim"),a=N(n,"click",e.click_handler)},m(e,r){_(e,n,r),_(e,t,r),Te(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.$materials||e.errors)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||($e(l.$$.fragment,e),s=!0)},o(e){ve(l.$$.fragment,e),s=!1},d(e){e&&(D(n),D(t)),Ae(l,e),a()}}}function Zc(e,n,t){let r;d(e,zc,e=>{t("$materials",r=e)});let s=!1,a="";return J(async()=>{try{await zc.get()}catch(e){t("errors",a=e)}}),{open:s,errors:a,$materials:r,click_handler:function(){t("open",s=!0)},click_handler_1:function(){t("open",s=!1)},modal_open_binding:function(e){t("open",s=e)}}}class Vc extends Oe{constructor(e){super(),Ee(this,e,Zc,Gc,o,[])}}function Jc(e,n,t){const r=Object.create(e);return r.material=n[t],r}function Xc(e,n,t){const r=Object.create(e);return r.word=n[t],r}function Qc(e){var n,t,r=[],s=new Map,a=e.report.words;const i=e=>e.word.id;for(var o=0;o<a.length;o+=1){let n=Xc(e,a,o),t=i(n);s.set(t,r[o]=Kc(t,n))}return{c(){for(n=I("ul"),o=0;o<r.length;o+=1)r[o].c();O(n,"class","words-list")},m(e,s){for(_(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=t.report.words;ge(),r=Ie(r,e,i,1,t,a,s,n,Se,Kc,null,Xc),he()},i(e){if(!t){for(var n=0;n<a.length;n+=1)$e(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)ve(r[o]);t=!1},d(e){for(e&&D(n),o=0;o<r.length;o+=1)r[o].d()}}}function Kc(e,n){var t,r,s,a,i,o,l,c,d,u,p=n.word.english+"",m=n.word.chinese+"",f=new pc({props:{wordId:n.word.id,classSessionId:n.classSessionId}});return{key:e,first:null,c(){t=I("li"),r=I("a"),s=M(p),a=M(" ("),i=M(m),o=M(")"),c=T(),f.$$.fragment.c(),d=T(),O(r,"href",l="#/word/"+n.word.id),this.first=t},m(e,n){_(e,t,n),k(t,r),k(r,s),k(r,a),k(r,i),k(r,o),k(t,c),Te(f,t,null),k(t,d),u=!0},p(e,n){u&&!e.report||p===(p=n.word.english+"")||L(s,p),u&&!e.report||m===(m=n.word.chinese+"")||L(i,m),u&&!e.report||l===(l="#/word/"+n.word.id)||O(r,"href",l);var t={};e.report&&(t.wordId=n.word.id),e.classSessionId&&(t.classSessionId=n.classSessionId),f.$set(t)},i(e){u||($e(f.$$.fragment,e),u=!0)},o(e){ve(f.$$.fragment,e),u=!1},d(e){e&&D(t),Ae(f)}}}function ed(e){var n,t,r=[],s=new Map,a=e.report.materials;const i=e=>e.material.id;for(var o=0;o<a.length;o+=1){let n=Jc(e,a,o),t=i(n);s.set(t,r[o]=nd(t,n))}return{c(){for(n=I("ul"),o=0;o<r.length;o+=1)r[o].c();O(n,"class","materials-list")},m(e,s){for(_(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=t.report.materials;ge(),r=Ie(r,e,i,1,t,a,s,n,Se,nd,null,Jc),he()},i(e){if(!t){for(var n=0;n<a.length;n+=1)$e(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)ve(r[o]);t=!1},d(e){for(e&&D(n),o=0;o<r.length;o+=1)r[o].d()}}}function nd(e,n){var t,r,s,a,i,o,l,c,d,u=n.material.title+"",p=n.material.type+"",m=new Nc({props:{materialId:n.material.id,classSessionId:n.classSessionId}});return{key:e,first:null,c(){t=I("li"),r=I("a"),s=M(u),i=M("\n         - "),o=M(p),l=T(),m.$$.fragment.c(),c=T(),O(r,"href",a="#/material/"+n.material.id),this.first=t},m(e,n){_(e,t,n),k(t,r),k(r,s),k(t,i),k(t,o),k(t,l),Te(m,t,null),k(t,c),d=!0},p(e,n){d&&!e.report||u===(u=n.material.title+"")||L(s,u),d&&!e.report||a===(a="#/material/"+n.material.id)||O(r,"href",a),d&&!e.report||p===(p=n.material.type+"")||L(o,p);var t={};e.report&&(t.materialId=n.material.id),e.classSessionId&&(t.classSessionId=n.classSessionId),m.$set(t)},i(e){d||($e(m.$$.fragment,e),d=!0)},o(e){ve(m.$$.fragment,e),d=!1},d(e){e&&D(t),Ae(m)}}}function td(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w,y,x,S,C,M,A,N,E,L,P,R=new cc({props:{text:e.report.summaryEN,key:"summaryEN"}}),z=new cc({props:{text:e.report.homeworkEN,key:"homeworkEN"}}),j=new cc({props:{text:e.report.summaryZH,key:"summaryZH"}}),q=new cc({props:{text:e.report.homeworkZH,key:"homeworkZH"}}),H=new cc({props:{text:e.report.performance,key:"performance"}}),F=e.report.words&&e.report.words.length>0&&Qc(e),W=new Mc({}),Y=e.report.materials&&e.report.materials.length>0&&ed(e),U=new Vc({});return{c(){n=I("section"),(t=I("h3")).textContent="Summary (English)",r=T(),R.$$.fragment.c(),s=T(),a=I("section"),(i=I("h3")).textContent="Homework (English)",o=T(),z.$$.fragment.c(),l=T(),c=I("section"),(d=I("h3")).textContent="Summary (Chinese)",u=T(),j.$$.fragment.c(),p=T(),m=I("section"),(f=I("h3")).textContent="Homework (Chinese)",g=T(),q.$$.fragment.c(),h=T(),$=I("section"),(v=I("h3")).textContent="Performance",b=T(),H.$$.fragment.c(),w=T(),y=I("section"),(x=I("h3")).textContent="Vocabulary",S=T(),F&&F.c(),C=T(),W.$$.fragment.c(),M=T(),A=I("section"),(N=I("h3")).textContent="Materials",E=T(),Y&&Y.c(),L=T(),U.$$.fragment.c(),O(t,"class","title is-5 svelte-l1zkq1"),O(n,"class","svelte-l1zkq1"),O(i,"class","title is-5 svelte-l1zkq1"),O(a,"class","svelte-l1zkq1"),O(d,"class","title is-5 svelte-l1zkq1"),O(c,"class","svelte-l1zkq1"),O(f,"class","title is-5 svelte-l1zkq1"),O(m,"class","svelte-l1zkq1"),O(v,"class","title is-5 svelte-l1zkq1"),O($,"class","svelte-l1zkq1"),O(x,"class","title is-5 svelte-l1zkq1"),O(y,"class","svelte-l1zkq1"),O(N,"class","title is-5 svelte-l1zkq1"),O(A,"class","svelte-l1zkq1")},m(e,D){_(e,n,D),k(n,t),k(n,r),Te(R,n,null),_(e,s,D),_(e,a,D),k(a,i),k(a,o),Te(z,a,null),_(e,l,D),_(e,c,D),k(c,d),k(c,u),Te(j,c,null),_(e,p,D),_(e,m,D),k(m,f),k(m,g),Te(q,m,null),_(e,h,D),_(e,$,D),k($,v),k($,b),Te(H,$,null),_(e,w,D),_(e,y,D),k(y,x),k(y,S),F&&F.m(y,null),k(y,C),Te(W,y,null),_(e,M,D),_(e,A,D),k(A,N),k(A,E),Y&&Y.m(A,null),k(A,L),Te(U,A,null),P=!0},p(e,n){var t={};e.report&&(t.text=n.report.summaryEN),R.$set(t);var r={};e.report&&(r.text=n.report.homeworkEN),z.$set(r);var s={};e.report&&(s.text=n.report.summaryZH),j.$set(s);var a={};e.report&&(a.text=n.report.homeworkZH),q.$set(a);var i={};e.report&&(i.text=n.report.performance),H.$set(i),n.report.words&&n.report.words.length>0?F?(F.p(e,n),$e(F,1)):((F=Qc(n)).c(),$e(F,1),F.m(y,C)):F&&(ge(),ve(F,1,1,()=>{F=null}),he()),n.report.materials&&n.report.materials.length>0?Y?(Y.p(e,n),$e(Y,1)):((Y=ed(n)).c(),$e(Y,1),Y.m(A,L)):Y&&(ge(),ve(Y,1,1,()=>{Y=null}),he())},i(e){P||($e(R.$$.fragment,e),$e(z.$$.fragment,e),$e(j.$$.fragment,e),$e(q.$$.fragment,e),$e(H.$$.fragment,e),$e(F),$e(W.$$.fragment,e),$e(Y),$e(U.$$.fragment,e),P=!0)},o(e){ve(R.$$.fragment,e),ve(z.$$.fragment,e),ve(j.$$.fragment,e),ve(q.$$.fragment,e),ve(H.$$.fragment,e),ve(F),ve(W.$$.fragment,e),ve(Y),ve(U.$$.fragment,e),P=!1},d(e){e&&D(n),Ae(R),e&&(D(s),D(a)),Ae(z),e&&(D(l),D(c)),Ae(j),e&&(D(p),D(m)),Ae(q),e&&(D(h),D($)),Ae(H),e&&(D(w),D(y)),F&&F.d(),Ae(W),e&&(D(M),D(A)),Y&&Y.d(),Ae(U)}}}function rd(e,n,t){let{report:r,classSessionId:s}=n;return e.$set=e=>{"report"in e&&t("report",r=e.report),"classSessionId"in e&&t("classSessionId",s=e.classSessionId)},{report:r,classSessionId:s}}class sd extends Oe{constructor(e){super(),Ee(this,e,rd,td,o,["report","classSessionId"])}}function ad(e){var n,t;return{c(){(n=I("button")).innerHTML='<i class="fas fa-paper-plane"></i>\n\t\t\t    Publish report\n\t\t\t  ',O(n,"class","button is-primary"),q(n,"is-loading",e.loading),t=N(n,"click",e.click_handler_1)},m(e,t){_(e,n,t)},p(e,t){e.loading&&q(n,"is-loading",t.loading)},d(e){e&&D(n),t()}}}function id(e){var n,t;return{c(){(n=I("button")).innerHTML='<i class="fas fa-eye-slash"></i>\n\t\t\t    Unpublish report\n\t\t\t  ',O(n,"class","button is-primary"),q(n,"is-loading",e.loading),t=N(n,"click",e.click_handler)},m(e,t){_(e,n,t)},p(e,t){e.loading&&q(n,"is-loading",t.loading)},d(e){e&&D(n),t()}}}function od(e){var n,t,r,s=new xn({props:{errors:e.errors}});function a(e,n){return n.$session&&n.$session.report.published?id:n.$session.report.published?void 0:ad}var i=a(0,e),o=i&&i(e);return{c(){s.$$.fragment.c(),n=T(),o&&o.c(),t=A()},m(e,a){Te(s,e,a),_(e,n,a),o&&o.m(e,a),_(e,t,a),r=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),s.$set(r),i===(i=a(0,n))&&o?o.p(e,n):(o&&o.d(1),(o=i&&i(n))&&(o.c(),o.m(t.parentNode,t)))},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){Ae(s,e),e&&D(n),o&&o.d(e),e&&D(t)}}}function ld(e,n,t){let r;d(e,Yo,e=>{t("$session",r=e)});let s="",a=!1,{classSessionId:i}=n;const o=async e=>{t("loading",a=!0);const n=e?"publish":"unpublish",r={report:{update:{published:e}}};try{await Bs.patch(i,r),je.add({text:`${n.charAt(0).toUpperCase()+n.slice(1)}ed session report`,type:"success"}),t("errors",s="")}catch(e){t("errors",s=e),je.add({text:`Couldn't ${n} session report`,type:"danger"})}finally{t("loading",a=!1)}};return e.$set=e=>{"classSessionId"in e&&t("classSessionId",i=e.classSessionId)},{errors:s,loading:a,classSessionId:i,togglePublish:o,$session:r,click_handler:function(){return o(!1)},click_handler_1:function(){return o(!0)}}}class cd extends Oe{constructor(e){super(),Ee(this,e,ld,od,o,["classSessionId"])}}function dd(e){var n,t,r=new cd({props:{classSessionId:e.$session.id}}),s=new sd({props:{report:e.$session.report,classSessionId:e.$session.id}});return{c(){r.$$.fragment.c(),n=T(),s.$$.fragment.c()},m(e,a){Te(r,e,a),_(e,n,a),Te(s,e,a),t=!0},p(e,n){var t={};e.$session&&(t.classSessionId=n.$session.id),r.$set(t);var a={};e.$session&&(a.report=n.$session.report),e.$session&&(a.classSessionId=n.$session.id),s.$set(a)},i(e){t||($e(r.$$.fragment,e),$e(s.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),ve(s.$$.fragment,e),t=!1},d(e){Ae(r,e),e&&D(n),Ae(s,e)}}}function ud(e){var n,t,r,s=new ec({props:{classSessionId:e.$session.id}});return{c(){(n=I("p")).textContent="No report exists for this session.",t=T(),s.$$.fragment.c()},m(e,a){_(e,n,a),_(e,t,a),Te(s,e,a),r=!0},p(e,n){var t={};e.$session&&(t.classSessionId=n.$session.id),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&(D(n),D(t)),Ae(s,e)}}}function pd(n){var t;return{c(){(t=I("p")).textContent="A lesson must be added before a report can be created."},m(e,n){_(e,t,n)},p:e,i:e,o:e,d(e){e&&D(t)}}}function md(e){var n,t,r,s,a,i,o=[pd,ud,dd],l=[];function c(e,n){return n.$session.lesson?n.$session&&!n.$session.report?1:2:0}return s=c(0,e),a=l[s]=o[s](e),{c(){n=I("section"),(t=I("h3")).textContent="Report",r=T(),a.c(),O(t,"class","title is-4"),O(n,"class","report svelte-xj6mxc")},m(e,a){_(e,n,a),k(n,t),k(n,r),l[s].m(n,null),i=!0},p(e,t){var r=s;(s=c(0,t))===r?l[s].p(e,t):(ge(),ve(l[r],1,1,()=>{l[r]=null}),he(),(a=l[s])||(a=l[s]=o[s](t)).c(),$e(a,1),a.m(n,null))},i(e){i||($e(a),i=!0)},o(e){ve(a),i=!1},d(e){e&&D(n),l[s].d()}}}function fd(e,n,t){let r;return d(e,Yo,e=>{t("$session",r=e)}),{$session:r}}class gd extends Oe{constructor(e){super(),Ee(this,e,fd,md,o,[])}}function hd(e,n,t){const r=Object.create(e);return r.result=n[t],r}function $d(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w=e.formatTime(e.$session.startsAt)+"",y=e.formatTime(e.$session.startedAt)+"",x=e.formatTime(e.$session.endsAt)+"",S=e.formatTime(e.$session.endedAt)+"";return{c(){(n=I("dt")).textContent="Schedule start:",t=T(),r=I("dd"),s=M(w),a=T(),(i=I("dt")).textContent="Actual start:",o=T(),l=I("dd"),c=M(y),d=T(),(u=I("dt")).textContent="Schedule end:",p=T(),m=I("dd"),f=M(x),g=T(),(h=I("dt")).textContent="Actual end:",$=T(),v=I("dd"),b=M(S)},m(e,w){_(e,n,w),_(e,t,w),_(e,r,w),k(r,s),_(e,a,w),_(e,i,w),_(e,o,w),_(e,l,w),k(l,c),_(e,d,w),_(e,u,w),_(e,p,w),_(e,m,w),k(m,f),_(e,g,w),_(e,h,w),_(e,$,w),_(e,v,w),k(v,b)},p(e,n){e.$session&&w!==(w=n.formatTime(n.$session.startsAt)+"")&&L(s,w),e.$session&&y!==(y=n.formatTime(n.$session.startedAt)+"")&&L(c,y),e.$session&&x!==(x=n.formatTime(n.$session.endsAt)+"")&&L(f,x),e.$session&&S!==(S=n.formatTime(n.$session.endedAt)+"")&&L(b,S)},d(e){e&&(D(n),D(t),D(r),D(a),D(i),D(o),D(l),D(d),D(u),D(p),D(m),D(g),D(h),D($),D(v))}}}function vd(e){var n,t=new xn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};(e.getResults||e.id)&&(r.errors=n.errors),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function bd(e){var n,t,r,s,a,i=[],o=new Map,l=e.results;const c=e=>e.result.id;for(var d=0;d<l.length;d+=1){let n=hd(e,l,d),t=c(n);o.set(t,i[d]=wd(t,n))}return{c(){for(n=I("section"),(t=I("h3")).textContent="Results",r=T(),s=I("ul"),d=0;d<i.length;d+=1)i[d].c();O(t,"class","title is-4"),O(n,"class","results svelte-xj6mxc")},m(e,o){for(_(e,n,o),k(n,t),k(n,r),k(n,s),d=0;d<i.length;d+=1)i[d].m(s,null);a=!0},p(e,n){const t=n.results;ge(),i=Ie(i,e,c,1,n,t,o,s,Se,wd,null,hd),he()},i(e){if(!a){for(var n=0;n<l.length;n+=1)$e(i[n]);a=!0}},o(e){for(d=0;d<i.length;d+=1)ve(i[d]);a=!1},d(e){for(e&&D(n),d=0;d<i.length;d+=1)i[d].d()}}}function wd(e,n){var t,r,s=new ql({props:{result:n.result}});return{key:e,first:null,c(){t=A(),s.$$.fragment.c(),this.first=t},m(e,n){_(e,t,n),Te(s,e,n),r=!0},p(e,n){var t={};(e.getResults||e.id)&&(t.result=n.result),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&D(t),Ae(s,e)}}}function yd(n){var t,r=new It({props:{what:"results"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function xd(n){var t,r,s=n.$session.lesson.name+"";return{c(){t=I("p"),r=M(s)},m(e,n){_(e,t,n),k(t,r)},p(e,n){e.$session&&s!==(s=n.$session.lesson.name+"")&&L(r,s)},i:e,o:e,d(e){e&&D(t)}}}function kd(e){var n,t,r,s=new Jl({props:{id:e.$session.id}});return{c(){(n=I("p")).textContent="No lesson has been selected yet.",t=T(),s.$$.fragment.c()},m(e,a){_(e,n,a),_(e,t,a),Te(s,e,a),r=!0},p(e,n){var t={};e.$session&&(t.id=n.$session.id),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&(D(n),D(t)),Ae(s,e)}}}function _d(e){var n,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$,v=new gr({props:{$$slots:{default:[$d]},$$scope:{ctx:e}}}),b=new Gl({});let w={ctx:e,current:null,token:null,pending:yd,then:bd,catch:vd,value:"results",error:"errors",blocks:[,,,]};ke(c=Zo(e.id),w);var y=[kd,xd],x=[];function S(e,n){return n.$session.lesson?1:0}f=S(0,e),g=x[f]=y[f](e);var C=new gd({});return{c(){n=T(),r=I("p"),s=M("Ended "),a=M(e.endedDistance),i=T(),v.$$.fragment.c(),o=T(),b.$$.fragment.c(),l=T(),w.block.c(),d=T(),u=I("setion"),(p=I("h3")).textContent="Lesson",m=T(),g.c(),h=T(),C.$$.fragment.c(),document.title="Ended Session",O(r,"class","subtitle"),O(p,"class","title is-4"),O(u,"class","lesson")},m(e,t){_(e,n,t),_(e,r,t),k(r,s),k(r,a),_(e,i,t),Te(v,e,t),_(e,o,t),Te(b,e,t),_(e,l,t),w.block.m(e,w.anchor=t),w.mount=()=>d.parentNode,w.anchor=d,_(e,d,t),_(e,u,t),k(u,p),k(u,m),x[f].m(u,null),_(e,h,t),Te(C,e,t),$=!0},p(n,r){e=r,$&&!n.endedDistance||L(a,e.endedDistance);var s={};(n.$$scope||n.$session)&&(s.$$scope={changed:n,ctx:e}),v.$set(s),w.ctx=e,"id"in n&&c!==(c=Zo(e.id))&&ke(c,w)||w.block.p(n,t(t({},e),w.resolved));var i=f;(f=S(0,e))===i?x[f].p(n,e):(ge(),ve(x[i],1,1,()=>{x[i]=null}),he(),(g=x[f])||(g=x[f]=y[f](e)).c(),$e(g,1),g.m(u,null))},i(e){$||($e(v.$$.fragment,e),$e(b.$$.fragment,e),$e(w.block),$e(g),$e(C.$$.fragment,e),$=!0)},o(e){ve(v.$$.fragment,e),ve(b.$$.fragment,e);for(let e=0;e<3;e+=1){ve(w.blocks[e])}ve(g),ve(C.$$.fragment,e),$=!1},d(e){e&&(D(n),D(r),D(i)),Ae(v,e),e&&D(o),Ae(b,e),e&&D(l),w.block.d(e),w.token=null,w=null,e&&(D(d),D(u)),x[f].d(),e&&D(h),Ae(C,e)}}}function Dd(e,n,t){let r,s;d(e,Yo,e=>{t("$session",r=e)}),d(e,Js,e=>{t("$time",s=e)});let{id:a}=n;let i;return e.$set=e=>{"id"in e&&t("id",a=e.id)},e.$$.update=(e={$session:1,$time:1})=>{(e.$session||e.$time)&&t("endedDistance",i=ii(new Date(r.endedAt),new Date(s),{addSuffix:!0}))},{id:a,formatTime:e=>{if(!e)return;const n=new Date(e);return 0===n.getMinutes()?ei(n,"h b"):ei(n,"p")},endedDistance:i,$session:r}}class Sd extends Oe{constructor(e){super(),Ee(this,e,Dd,_d,o,["id"])}}function Id(n){var t,r=new It({props:{what:"class session"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function Cd(n){var t,r=new hn({});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function Md(e){var n,t,r,s,a,i,o,l,c,d=e.$session.group.name+"",u=e.$session.number+"",p=[Ed,Nd,Ad,Td],m=[];function f(e,n){return"Inactive"===n.$session.stage?0:"Active"===n.$session.stage?1:"Started"===n.$session.stage?2:"Ended"===n.$session.stage?3:-1}return~(i=f(0,e))&&(o=m[i]=p[i](e)),{c(){n=I("h2"),t=M(d),r=M(" class lesson "),s=M(u),a=T(),o&&o.c(),l=A(),O(n,"class","title")},m(e,o){_(e,n,o),k(n,t),k(n,r),k(n,s),_(e,a,o),~i&&m[i].m(e,o),_(e,l,o),c=!0},p(e,n){c&&!e.$session||d===(d=n.$session.group.name+"")||L(t,d),c&&!e.$session||u===(u=n.$session.number+"")||L(s,u);var r=i;(i=f(0,n))===r?~i&&m[i].p(e,n):(o&&(ge(),ve(m[r],1,1,()=>{m[r]=null}),he()),~i?((o=m[i])||(o=m[i]=p[i](n)).c(),$e(o,1),o.m(l.parentNode,l)):o=null)},i(e){c||($e(o),c=!0)},o(e){ve(o),c=!1},d(e){e&&(D(n),D(a)),~i&&m[i].d(e),e&&D(l)}}}function Td(e){var n,t=new Sd({props:{id:e.params.id}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.params&&(r.id=n.params.id),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Ad(n){var t,r=new Ll({});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function Nd(n){var t,r=new cl({});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function Ed(e){var n,t=new pl({props:{id:e.params.id}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.params&&(r.id=n.params.id),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Od(e){var n,t,r,s,a=[Md,Cd,Id],i=[];function o(e,n){return n.$session?0:n.$session&&null===n.$session.classSession?1:2}return n=o(0,e),t=i[n]=a[n](e),{c(){t.c(),r=A()},m(e,t){i[n].m(e,t),_(e,r,t),s=!0},p(e,s){var l=n;(n=o(0,s))===l?i[n].p(e,s):(ge(),ve(i[l],1,1,()=>{i[l]=null}),he(),(t=i[n])||(t=i[n]=a[n](s)).c(),$e(t,1),t.m(r.parentNode,r))},i(e){s||($e(t),s=!0)},o(e){ve(t),s=!1},d(e){i[n].d(e),e&&D(r)}}}function Ld(e,n,t){let r;d(e,Yo,e=>{t("$session",r=e)});let{params:s={}}=n;return Wo.set(s.id),X(()=>{Wo.set(null)}),e.$set=e=>{"params"in e&&t("params",s=e.params)},{params:s,$session:r}}function Pd(e,n,t){const r=Object.create(e);return r.tag=n[t],r}function Rd(e,n,t){const r=Object.create(e);return r.lesson=n[t],r}function zd(e){var n,t,r,s,a,i=e.$lessons.length+"",o=e.$lessons.length>0&&jd(e);return{c(){n=I("p"),t=M(i),r=M(" matching lessons found:"),s=T(),o&&o.c(),a=A()},m(e,i){_(e,n,i),k(n,t),k(n,r),_(e,s,i),o&&o.m(e,i),_(e,a,i)},p(e,n){e.$lessons&&i!==(i=n.$lessons.length+"")&&L(t,i),n.$lessons.length>0?o?o.p(e,n):((o=jd(n)).c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},d(e){e&&(D(n),D(s)),o&&o.d(e),e&&D(a)}}}function jd(e){var n,t=[],r=new Map,s=e.$lessons;const a=e=>e.lesson.id;for(var i=0;i<s.length;i+=1){let n=Rd(e,s,i),o=a(n);r.set(o,t[i]=Fd(o,n))}return{c(){for(i=0;i<t.length;i+=1)t[i].c();n=A()},m(e,r){for(i=0;i<t.length;i+=1)t[i].m(e,r);_(e,n,r)},p(e,s){const i=s.$lessons;t=Ie(t,e,a,1,s,i,r,n.parentNode,De,Fd,n,Rd)},d(e){for(i=0;i<t.length;i+=1)t[i].d(e);e&&D(n)}}}function qd(e){var n,t=[],r=new Map,s=e.lesson.tags;const a=e=>e.tag.id;for(var i=0;i<s.length;i+=1){let n=Pd(e,s,i),o=a(n);r.set(o,t[i]=Hd(o,n))}return{c(){for(n=I("div"),i=0;i<t.length;i+=1)t[i].c();O(n,"class","tags svelte-4s8ccd")},m(e,r){for(_(e,n,r),i=0;i<t.length;i+=1)t[i].m(n,null)},p(e,s){const i=s.lesson.tags;t=Ie(t,e,a,1,s,i,r,n,De,Hd,null,Pd)},d(e){for(e&&D(n),i=0;i<t.length;i+=1)t[i].d()}}}function Hd(e,n){var t,r,s=n.tag.name+"";return{key:e,first:null,c(){t=I("span"),r=M(s),O(t,"class","tag is-dark"),this.first=t},m(e,n){_(e,t,n),k(t,r)},p(e,n){e.$lessons&&s!==(s=n.tag.name+"")&&L(r,s)},d(e){e&&D(t)}}}function Fd(e,n){var t,r,s,a,i,o,l=n.lesson.name+"",c=n.lesson.tags.length>0&&qd(n);return{key:e,first:null,c(){t=I("li"),r=I("a"),s=M(l),i=T(),c&&c.c(),o=T(),O(r,"href",a="#/lesson/"+n.lesson.id),O(t,"class","svelte-4s8ccd"),this.first=t},m(e,n){_(e,t,n),k(t,r),k(r,s),k(t,i),c&&c.m(t,null),k(t,o)},p(e,n){e.$lessons&&l!==(l=n.lesson.name+"")&&L(s,l),e.$lessons&&a!==(a="#/lesson/"+n.lesson.id)&&O(r,"href",a),n.lesson.tags.length>0?c?c.p(e,n):((c=qd(n)).c(),c.m(t,o)):c&&(c.d(1),c=null)},d(e){e&&D(t),c&&c.d()}}}function Wd(n){var t,r=n.$lessons&&zd(n);return{c(){t=I("section"),r&&r.c(),O(t,"class","lesson-list svelte-4s8ccd")},m(e,n){_(e,t,n),r&&r.m(t,null)},p(e,n){n.$lessons?r?r.p(e,n):((r=zd(n)).c(),r.m(t,null)):r&&(r.d(1),r=null)},i:e,o:e,d(e){e&&D(t),r&&r.d()}}}function Yd(e,n,t){let r;return d(e,Si,e=>{t("$lessons",r=e)}),{$lessons:r}}class Ud extends Oe{constructor(e){super(),Ee(this,e,Yd,Wd,o,[])}}function Bd(e){var n,t=new It({props:{what:"lessons"}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Gd(e){var n,t=new Ud({});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Zd(e){var n,t,r,s,a,i,o,l,c,d,u,p=new xn({props:{errors:e.errors}}),m=new Ei({props:{searchParams:"name",store:Si}}),f=[Gd,Bd],g=[];function h(e,n){return n.$lessons?0:n.errors?-1:1}return~(l=h(0,e))&&(c=g[l]=f[l](e)),{c(){n=T(),(t=I("h1")).textContent="Lessons",r=T(),p.$$.fragment.c(),s=T(),(a=I("a")).innerHTML='<i class="fas fa-plus"></i>Create new lesson\n\t\t\t',i=T(),m.$$.fragment.c(),o=T(),c&&c.c(),d=A(),document.title="Lessons",O(t,"class","title"),O(a,"href","#/new-lesson"),O(a,"class","button is-primary create-lesson")},m(e,c){_(e,n,c),_(e,t,c),_(e,r,c),Te(p,e,c),_(e,s,c),_(e,a,c),_(e,i,c),Te(m,e,c),_(e,o,c),~l&&g[l].m(e,c),_(e,d,c),u=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),p.$set(t);var r={};e.lessons&&(r.store=Si),m.$set(r);var s=l;(l=h(0,n))!==s&&(c&&(ge(),ve(g[s],1,1,()=>{g[s]=null}),he()),~l?((c=g[l])||(c=g[l]=f[l](n)).c(),$e(c,1),c.m(d.parentNode,d)):c=null)},i(e){u||($e(p.$$.fragment,e),$e(m.$$.fragment,e),$e(c),u=!0)},o(e){ve(p.$$.fragment,e),ve(m.$$.fragment,e),ve(c),u=!1},d(e){e&&(D(n),D(t),D(r)),Ae(p,e),e&&(D(s),D(a),D(i)),Ae(m,e),e&&D(o),~l&&g[l].d(e),e&&D(d)}}}function Vd(e,n,t){let r;d(e,Si,e=>{t("$lessons",r=e)});let s="";return J(async()=>{try{await Si.get()}catch(e){t("errors",s=e),je.add({text:"Couldn't get lessons from server.",type:"danger"})}}),{errors:s,$lessons:r}}const Jd=(()=>{const{subscribe:e,set:n,update:t}=Re();return{subscribe:e,get:async()=>{const e=(await en("\n {\n   tags {\n     id\n     name\n     connections\n   }\n }")).tags.sort((e,n)=>e.connections-n.connections);n(e)},remove:async e=>{await en("\n mutation DeleteTag ($id: ID!) {\n   deleteTag(id:$id) {\n     id\n   }\n }",{id:e}),t(n=>n&&n.filter(n=>e!==n.id))},create:async e=>{const n=await en("\n mutation CreateTag($name: String!) {\n   createTag(name:$name) {\n     id\n     name\n     connections\n   }\n }",{name:e});t(e=>e?[...e,n.createTag]:[n.createTag])},patch:async({id:e,input:n})=>{const r=await en("\n  mutation UpdateTag($id: ID!, $input: TagUpdateInput!) {\n    updateTag(id: $id, input:$input) {\n      id\n      name\n      connections\n    }\n  }",{id:e,input:n});return t(n=>n?n.map(n=>n.id!==e?n:r.updateTag):[r.updateTag]),r.updateTag}}})(),Xd=(()=>{const{subscribe:e,set:n}=Re();return{subscribe:e,get:async e=>{const t=await en("\n query ($id: ID!){\n   tag (id: $id) {\n     id\n     name\n     materials {\n       id\n       title\n     }\n    words {\n      id\n      english\n    }\n    lessons {\n      id\n      name\n    }\n   }\n }",{id:e});n(t.tag)}}})();function Qd(e,n,t){const r=Object.create(e);return r.tag=n[t],r}function Kd(e){var n,t,r,s,i=[],o=new Map,l=e.otherTags;const c=e=>e.tag.id;for(var d=0;d<l.length;d+=1){let n=Qd(e,l,d),t=c(n);o.set(t,i[d]=eu(t,n))}return{c(){for(n=I("div"),t=I("select"),(r=I("option")).textContent="Add existing tag",d=0;d<i.length;d+=1)i[d].c();r.__value="",r.value=r.__value,void 0===e.toAdd&&oe(()=>e.select_change_handler.call(t)),O(n,"class","select svelte-16yzrx7"),s=[N(t,"change",e.select_change_handler),N(t,"change",e.add)]},m(s,a){for(_(s,n,a),k(n,t),k(t,r),d=0;d<i.length;d+=1)i[d].m(t,null);z(t,e.toAdd)},p(e,n){const r=n.otherTags;i=Ie(i,e,c,1,n,r,o,t,De,eu,null,Qd),e.toAdd&&z(t,n.toAdd)},d(e){for(e&&D(n),d=0;d<i.length;d+=1)i[d].d();a(s)}}}function eu(e,n){var t,r,s,a=n.tag.name+"";return{key:e,first:null,c(){t=I("option"),r=M(a),t.__value=s=n.tag.id,t.value=t.__value,this.first=t},m(e,n){_(e,t,n),k(t,r)},p(e,n){e.otherTags&&a!==(a=n.tag.name+"")&&L(r,a),e.otherTags&&s!==(s=n.tag.id)&&(t.__value=s),t.value=t.__value},d(e){e&&D(t)}}}function nu(n){var t,r,s,i,o,l,c,d,u,p=n.otherTags&&Kd(n);return{c(){p&&p.c(),t=T(),r=I("div"),s=I("div"),i=I("input"),o=T(),(l=I("span")).innerHTML='<i class="fas fa-tag"></i>',c=T(),(d=I("button")).textContent="add",O(i,"class","input svelte-16yzrx7"),O(i,"type","text"),O(i,"placeholder","new tag"),O(l,"class","icon is-small is-left"),O(s,"class","control new has-icons-left"),O(d,"class","button is-success svelte-16yzrx7"),O(r,"class","field has-addons svelte-16yzrx7"),u=[N(i,"input",n.input_input_handler),N(i,"change",n.change_handler),N(d,"change",n.change_handler_1)]},m(e,a){p&&p.m(e,a),_(e,t,a),_(e,r,a),k(r,s),k(s,i),P(i,n.newTag),k(s,o),k(s,l),k(r,c),k(r,d)},p(e,n){n.otherTags?p?p.p(e,n):((p=Kd(n)).c(),p.m(t.parentNode,t)):p&&(p.d(1),p=null),e.newTag&&i.value!==n.newTag&&P(i,n.newTag)},i:e,o:e,d(e){p&&p.d(e),e&&(D(t),D(r)),a(u)}}}function tu(e,n,t){let r;d(e,Jd,e=>{t("$tags",r=e)});let s,{item:a,store:i,type:o=""}=n,l="";J(async()=>{r||await Jd.get()});const c=async e=>{const n={};if("new"===e){if(!l)return;n.tags={create:{name:l}}}else{if(!s)return;n.tags={connect:{id:s}}}try{await i.patch({input:n,id:a.id}),je.add({text:"Added tag to item",type:"success"}),t("newTag",l=""),t("toAdd",s="")}catch(e){console.error(e),je.add({text:"Couldn't add tag to item",type:"danger"})}};let u,p;return e.$set=e=>{"item"in e&&t("item",a=e.item),"store"in e&&t("store",i=e.store),"type"in e&&t("type",o=e.type)},e.$$.update=(e={item:1,$tags:1,currentTags:1})=>{e.item&&t("currentTags",u=a.tags.length>0?a.tags.map(e=>e.id):[]),(e.$tags||e.currentTags)&&t("otherTags",p=r&&r.length>0?r.filter(e=>!u.includes(e.id)):[])},{item:a,store:i,type:o,newTag:l,toAdd:s,add:c,otherTags:p,select_change_handler:function(){s=j(this),t("toAdd",s),t("otherTags",p),t("$tags",r),t("currentTags",u),t("item",a)},input_input_handler:function(){l=this.value,t("newTag",l)},change_handler:function(){return c("new")},change_handler_1:function(){return c("new")}}}class ru extends Oe{constructor(e){super(),Ee(this,e,tu,nu,o,["item","store","type"])}}function su(n){var t,r,s,a,i,o=n.tag.name+"";return{c(){t=I("span"),r=M(o),s=T(),O(a=I("button"),"class","delete is-small"),O(t,"class","tag is-dark"),i=N(a,"click",n.remove)},m(e,n){_(e,t,n),k(t,r),k(t,s),k(t,a)},p(e,n){e.tag&&o!==(o=n.tag.name+"")&&L(r,o)},i:e,o:e,d(e){e&&D(t),i()}}}function au(e,n,t){let{tag:r,store:s,type:a,itemId:i}=n;return e.$set=e=>{"tag"in e&&t("tag",r=e.tag),"store"in e&&t("store",s=e.store),"type"in e&&t("type",a=e.type),"itemId"in e&&t("itemId",i=e.itemId)},{tag:r,store:s,type:a,itemId:i,remove:async()=>{const e={tags:{disconnect:{id:r.id}}};try{await s.patch({input:e,id:i}),je.add({text:`Removed tag '${r.name}' from the item`,type:"success"})}catch(e){console.error(e),je.add({text:`Could not remove tag '${r.name}'`,type:"danger"})}}}}class iu extends Oe{constructor(e){super(),Ee(this,e,au,su,o,["tag","store","type","itemId"])}}function ou(e,n,t){const r=Object.create(e);return r.tag=n[t],r}function lu(e){var n,t,r=[],s=new Map,a=e.item.tags;const i=e=>e.tag.id;for(var o=0;o<a.length;o+=1){let n=ou(e,a,o),t=i(n);s.set(t,r[o]=cu(t,n))}return{c(){for(n=I("div"),o=0;o<r.length;o+=1)r[o].c();O(n,"class","tags")},m(e,s){for(_(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=t.item.tags;ge(),r=Ie(r,e,i,1,t,a,s,n,Se,cu,null,ou),he()},i(e){if(!t){for(var n=0;n<a.length;n+=1)$e(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)ve(r[o]);t=!1},d(e){for(e&&D(n),o=0;o<r.length;o+=1)r[o].d()}}}function cu(e,n){var t,r,s=new iu({props:{tag:n.tag,itemId:n.item.id,store:n.store,type:n.type}});return{key:e,first:null,c(){t=A(),s.$$.fragment.c(),this.first=t},m(e,n){_(e,t,n),Te(s,e,n),r=!0},p(e,n){var t={};e.item&&(t.tag=n.tag),e.item&&(t.itemId=n.item.id),e.store&&(t.store=n.store),e.type&&(t.type=n.type),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&D(t),Ae(s,e)}}}function du(e){var n,t,r,s=e.item.tags&&e.item.tags.length>0&&lu(e),a=new ru({props:{item:e.item,type:e.type,store:e.store}});return{c(){s&&s.c(),n=T(),t=I("div"),a.$$.fragment.c(),O(t,"class","tag-inputs svelte-eil3r6")},m(e,i){s&&s.m(e,i),_(e,n,i),_(e,t,i),Te(a,t,null),r=!0},p(e,t){t.item.tags&&t.item.tags.length>0?s?(s.p(e,t),$e(s,1)):((s=lu(t)).c(),$e(s,1),s.m(n.parentNode,n)):s&&(ge(),ve(s,1,1,()=>{s=null}),he());var r={};e.item&&(r.item=t.item),e.type&&(r.type=t.type),e.store&&(r.store=t.store),a.$set(r)},i(e){r||($e(s),$e(a.$$.fragment,e),r=!0)},o(e){ve(s),ve(a.$$.fragment,e),r=!1},d(e){s&&s.d(e),e&&(D(n),D(t)),Ae(a)}}}function uu(e,n,t){let{item:r,store:s,type:a}=n;return e.$set=e=>{"item"in e&&t("item",r=e.item),"store"in e&&t("store",s=e.store),"type"in e&&t("type",a=e.type)},{item:r,store:s,type:a}}class pu extends Oe{constructor(e){super(),Ee(this,e,uu,du,o,["item","store","type"])}}function mu(n){var t,r,s,a,i,o,l,c,d,u=n.material.title+"",p=n.material.type+"";return{c(){t=I("li"),r=I("label"),s=I("i"),i=T(),o=M(u),l=M(" - "),c=M(p),O(s,"class",a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12"),O(r,"class","checkbox"),O(t,"class","svelte-12hcy12"),d=N(t,"click",n.toggle)},m(e,n){_(e,t,n),k(t,r),k(r,s),k(r,i),k(r,o),k(r,l),k(r,c)},p(e,n){e.isAdded&&a!==(a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12")&&O(s,"class",a),e.material&&u!==(u=n.material.title+"")&&L(o,u),e.material&&p!==(p=n.material.type+"")&&L(c,p)},i:e,o:e,d(e){e&&D(t),d()}}}function fu(e,n,t){let r;d(e,Ii,e=>{t("$lesson",r=e)});let{material:s}=n;let a;return e.$set=e=>{"material"in e&&t("material",s=e.material)},e.$$.update=(e={$lesson:1,material:1})=>{(e.$lesson||e.material)&&t("isAdded",a=!!r.materials.find(e=>e.id===s.id))},{material:s,toggle:async()=>{const e={};let n="Removed material from lesson";a?e.materials={disconnect:{id:s.id}}:(n="Added material to lesson",e.materials={connect:{id:s.id}});try{await Ii.patch({id:r.id,input:e}),je.add({text:n,type:"success"})}catch(e){console.error(e)}},isAdded:a}}class gu extends Oe{constructor(e){super(),Ee(this,e,fu,mu,o,["material"])}}function hu(e,n,t){const r=Object.create(e);return r.material=n[t],r}function $u(e){var n,t,r,s,a,i,o=e.$materials.length+"",l=[],c=new Map,d=e.$materials;const u=e=>e.material.id;for(var p=0;p<d.length;p+=1){let n=hu(e,d,p),t=u(n);c.set(t,l[p]=vu(t,n))}return{c(){for(n=I("p"),t=M(o),r=M(" matches:"),s=T(),p=0;p<l.length;p+=1)l[p].c();a=A()},m(e,o){for(_(e,n,o),k(n,t),k(n,r),_(e,s,o),p=0;p<l.length;p+=1)l[p].m(e,o);_(e,a,o),i=!0},p(e,n){i&&!e.$materials||o===(o=n.$materials.length+"")||L(t,o);const r=n.$materials;ge(),l=Ie(l,e,u,1,n,r,c,a.parentNode,Se,vu,a,hu),he()},i(e){if(!i){for(var n=0;n<d.length;n+=1)$e(l[n]);i=!0}},o(e){for(p=0;p<l.length;p+=1)ve(l[p]);i=!1},d(e){for(e&&(D(n),D(s)),p=0;p<l.length;p+=1)l[p].d(e);e&&D(a)}}}function vu(e,n){var t,r,s=new gu({props:{material:n.material}});return{key:e,first:null,c(){t=A(),s.$$.fragment.c(),this.first=t},m(e,n){_(e,t,n),Te(s,e,n),r=!0},p(e,n){var t={};e.$materials&&(t.material=n.material),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&D(t),Ae(s,e)}}}function bu(e){var n,t,r,s,a,i,o,l,c,d,u=new Ei({props:{store:zc,searchParams:"title"}}),p=new xn({props:{errors:e.errors}}),m=e.$materials&&$u(e);return{c(){(n=I("h2")).textContent="Add material to lesson",t=T(),u.$$.fragment.c(),r=T(),p.$$.fragment.c(),s=T(),a=I("div"),m&&m.c(),i=T(),o=I("div"),(l=I("button")).textContent="Exit",O(n,"class","title is-4"),O(a,"class","results"),O(l,"class","button"),O(o,"class","buttons svelte-jsaq7t"),d=N(l,"click",e.click_handler_1)},m(e,d){_(e,n,d),_(e,t,d),Te(u,e,d),_(e,r,d),Te(p,e,d),_(e,s,d),_(e,a,d),m&&m.m(a,null),_(e,i,d),_(e,o,d),k(o,l),c=!0},p(e,n){var t={};e.materials&&(t.store=zc),u.$set(t);var r={};e.errors&&(r.errors=n.errors),p.$set(r),n.$materials?m?(m.p(e,n),$e(m,1)):((m=$u(n)).c(),$e(m,1),m.m(a,null)):m&&(ge(),ve(m,1,1,()=>{m=null}),he())},i(e){c||($e(u.$$.fragment,e),$e(p.$$.fragment,e),$e(m),c=!0)},o(e){ve(u.$$.fragment,e),ve(p.$$.fragment,e),ve(m),c=!1},d(e){e&&(D(n),D(t)),Ae(u,e),e&&D(r),Ae(p,e),e&&(D(s),D(a)),m&&m.d(),e&&(D(i),D(o)),d()}}}function wu(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,le(()=>r=!1)}let o={$$slots:{default:[bu]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new Mn({props:o});return ne.push(()=>Me(l,"open",i)),{c(){(n=I("button")).textContent="add material",t=T(),l.$$.fragment.c(),O(n,"class","button"),a=N(n,"click",e.click_handler)},m(e,r){_(e,n,r),_(e,t,r),Te(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.$materials||e.errors)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||($e(l.$$.fragment,e),s=!0)},o(e){ve(l.$$.fragment,e),s=!1},d(e){e&&(D(n),D(t)),Ae(l,e),a()}}}function yu(e,n,t){let r;d(e,zc,e=>{t("$materials",r=e)});let{lesson:s}=n,a=!1,i="";return J(async()=>{try{await zc.get()}catch(e){t("errors",i=e)}}),e.$set=e=>{"lesson"in e&&t("lesson",s=e.lesson)},{lesson:s,open:a,errors:i,$materials:r,click_handler:function(){t("open",a=!0)},click_handler_1:function(){t("open",a=!1)},modal_open_binding:function(e){t("open",a=e)}}}class xu extends Oe{constructor(e){super(),Ee(this,e,yu,wu,o,["lesson"])}}function ku(e){var n,t,r,s=e.word.chinese+"";return{c(){n=M("("),t=M(s),r=M(")")},m(e,s){_(e,n,s),_(e,t,s),_(e,r,s)},p(e,n){e.word&&s!==(s=n.word.chinese+"")&&L(t,s)},d(e){e&&(D(n),D(t),D(r))}}}function _u(n){var t,r,s,a,i,o,l,c,d=n.word.english+"",u=n.word.chinese&&ku(n);return{c(){t=I("li"),r=I("label"),s=I("i"),i=T(),o=M(d),l=T(),u&&u.c(),O(s,"class",a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12"),O(r,"class","checkbox"),O(t,"class","svelte-12hcy12"),c=N(t,"click",n.toggle)},m(e,n){_(e,t,n),k(t,r),k(r,s),k(r,i),k(r,o),k(r,l),u&&u.m(r,null)},p(e,n){e.isAdded&&a!==(a="fas fa-"+(n.isAdded?"check-":"")+"square status svelte-12hcy12")&&O(s,"class",a),e.word&&d!==(d=n.word.english+"")&&L(o,d),n.word.chinese?u?u.p(e,n):((u=ku(n)).c(),u.m(r,null)):u&&(u.d(1),u=null)},i:e,o:e,d(e){e&&D(t),u&&u.d(),c()}}}function Du(e,n,t){let r;d(e,Ii,e=>{t("$lesson",r=e)});let{word:s}=n;let a;return e.$set=e=>{"word"in e&&t("word",s=e.word)},e.$$.update=(e={$lesson:1,word:1})=>{(e.$lesson||e.word)&&t("isAdded",a=!!r.words.find(e=>e.id===s.id))},{word:s,toggle:async()=>{const e={};let n="Removed word from lesson";a?e.words={disconnect:{id:s.id}}:(n="Added word to lesson",e.words={connect:{id:s.id}});try{await Ii.patch({id:r.id,input:e}),je.add({text:n,type:"success"})}catch(e){console.error(e)}},isAdded:a}}class Su extends Oe{constructor(e){super(),Ee(this,e,Du,_u,o,["word"])}}function Iu(e,n,t){const r=Object.create(e);return r.word=n[t],r}function Cu(e){var n,t,r,s,a,i,o=e.$words.length+"",l=[],c=new Map,d=e.$words;const u=e=>e.word.id;for(var p=0;p<d.length;p+=1){let n=Iu(e,d,p),t=u(n);c.set(t,l[p]=Mu(t,n))}return{c(){for(n=I("p"),t=M(o),r=M(" matches:"),s=T(),p=0;p<l.length;p+=1)l[p].c();a=A()},m(e,o){for(_(e,n,o),k(n,t),k(n,r),_(e,s,o),p=0;p<l.length;p+=1)l[p].m(e,o);_(e,a,o),i=!0},p(e,n){i&&!e.$words||o===(o=n.$words.length+"")||L(t,o);const r=n.$words;ge(),l=Ie(l,e,u,1,n,r,c,a.parentNode,Se,Mu,a,Iu),he()},i(e){if(!i){for(var n=0;n<d.length;n+=1)$e(l[n]);i=!0}},o(e){for(p=0;p<l.length;p+=1)ve(l[p]);i=!1},d(e){for(e&&(D(n),D(s)),p=0;p<l.length;p+=1)l[p].d(e);e&&D(a)}}}function Mu(e,n){var t,r,s=new Su({props:{word:n.word}});return{key:e,first:null,c(){t=A(),s.$$.fragment.c(),this.first=t},m(e,n){_(e,t,n),Te(s,e,n),r=!0},p(e,n){var t={};e.$words&&(t.word=n.word),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&D(t),Ae(s,e)}}}function Tu(e){var n,t,r,s,a,i,o,l,c,d,u=new Ei({props:{store:vc,searchParams:["english","chinese"]}}),p=new xn({props:{errors:e.errors}}),m=e.$words&&Cu(e);return{c(){(n=I("h2")).textContent="Add word to lesson",t=T(),u.$$.fragment.c(),r=T(),p.$$.fragment.c(),s=T(),a=I("div"),m&&m.c(),i=T(),o=I("div"),(l=I("button")).textContent="Exit",O(n,"class","title is-4"),O(a,"class","results"),O(l,"class","button"),O(o,"class","buttons svelte-1yabmim"),d=N(l,"click",e.click_handler_1)},m(e,d){_(e,n,d),_(e,t,d),Te(u,e,d),_(e,r,d),Te(p,e,d),_(e,s,d),_(e,a,d),m&&m.m(a,null),_(e,i,d),_(e,o,d),k(o,l),c=!0},p(e,n){var t={};e.words&&(t.store=vc),u.$set(t);var r={};e.errors&&(r.errors=n.errors),p.$set(r),n.$words?m?(m.p(e,n),$e(m,1)):((m=Cu(n)).c(),$e(m,1),m.m(a,null)):m&&(ge(),ve(m,1,1,()=>{m=null}),he())},i(e){c||($e(u.$$.fragment,e),$e(p.$$.fragment,e),$e(m),c=!0)},o(e){ve(u.$$.fragment,e),ve(p.$$.fragment,e),ve(m),c=!1},d(e){e&&(D(n),D(t)),Ae(u,e),e&&D(r),Ae(p,e),e&&(D(s),D(a)),m&&m.d(),e&&(D(i),D(o)),d()}}}function Au(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,le(()=>r=!1)}let o={$$slots:{default:[Tu]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new Mn({props:o});return ne.push(()=>Me(l,"open",i)),{c(){(n=I("button")).textContent="add words",t=T(),l.$$.fragment.c(),O(n,"class","button add svelte-1yabmim"),a=N(n,"click",e.click_handler)},m(e,r){_(e,n,r),_(e,t,r),Te(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.$words||e.errors)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||($e(l.$$.fragment,e),s=!0)},o(e){ve(l.$$.fragment,e),s=!1},d(e){e&&(D(n),D(t)),Ae(l,e),a()}}}function Nu(e,n,t){let r;d(e,vc,e=>{t("$words",r=e)});let s=!1,a="";return J(async()=>{try{await vc.get()}catch(e){t("errors",a=e)}}),{open:s,errors:a,$words:r,click_handler:function(){t("open",s=!0)},click_handler_1:function(){t("open",s=!1)},modal_open_binding:function(e){t("open",s=e)}}}class Eu extends Oe{constructor(e){super(),Ee(this,e,Nu,Au,o,[])}}function Ou(n){var t,r;return{c(){O(t=I("button"),"class","delete"),r=N(t,"click",n.remove)},m(e,n){_(e,t,n)},p:e,i:e,o:e,d(e){e&&D(t),r()}}}function Lu(e,n,t){let r;d(e,Ii,e=>{t("$lesson",r=e)});let{materialId:s}=n;return e.$set=e=>{"materialId"in e&&t("materialId",s=e.materialId)},{materialId:s,remove:async()=>{const e={materials:{disconnect:{id:s}}};try{await Ii.patch({id:r.id,input:e}),je.add({text:"Removed material from lesson",type:"success"})}catch(e){console.error(e)}}}}class Pu extends Oe{constructor(e){super(),Ee(this,e,Lu,Ou,o,["materialId"])}}function Ru(n){var t,r;return{c(){O(t=I("button"),"class","delete"),r=N(t,"click",n.remove)},m(e,n){_(e,t,n)},p:e,i:e,o:e,d(e){e&&D(t),r()}}}function zu(e,n,t){let r;d(e,Ii,e=>{t("$lesson",r=e)});let{wordId:s}=n;return e.$set=e=>{"wordId"in e&&t("wordId",s=e.wordId)},{wordId:s,remove:async()=>{const e={words:{disconnect:{id:s}}};try{await Ii.patch({id:r.id,input:e}),je.add({text:"Removed word from lesson",type:"success"})}catch(e){console.error(e)}}}}class ju extends Oe{constructor(e){super(),Ee(this,e,zu,Ru,o,["wordId"])}}function qu(e,n,t){const r=Object.create(e);return r.word=n[t],r}function Hu(e,n,t){const r=Object.create(e);return r.material=n[t],r}function Fu(e){var n,t=new xn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Wu(n){var t,r=new It({props:{what:"Lesson"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function Yu(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w,y,x,S,C,A,E,P,R,z,j,q,H,W,Y,U,B,G,Z,V,J,X,Q,K,ee,te,re=e.$lesson.name+"",se=nc(e.$lesson.summaryEN,{breaks:!0})+"",ae=nc(e.$lesson.homeworkEN,{breaks:!0})+"",ie=nc(e.$lesson.summaryZH,{breaks:!0})+"",oe=nc(e.$lesson.homeworkZH,{breaks:!0})+"",ce=new pu({props:{item:e.$lesson,type:"lessons",store:Ii}}),de=e.$lesson.materials&&e.$lesson.materials.length>0&&Uu(e),ue=new xu({props:{lesson:e.$lesson}}),pe=e.$lesson.words&&e.$lesson.words.length>0&&Gu(e),me=new Eu({});function fe(n){e.deleteitem_open_binding.call(null,n),K=!0,le(()=>K=!1)}let be={id:e.$lesson.id,store:Si,type:"lesson",name:e.$lesson.title};void 0!==e.showDelete&&(be.open=e.showDelete);var we=new Ln({props:be});return ne.push(()=>Me(we,"open",fe)),{c(){n=I("h1"),t=M(re),r=T(),ce.$$.fragment.c(),s=T(),a=I("section"),(i=I("h2")).textContent="Summary (English)",o=T(),c=T(),(d=I("h2")).textContent="Homework (English)",u=T(),m=T(),(f=I("h2")).textContent="Summary (Chinese)",g=T(),$=T(),(v=I("h2")).textContent="Homework (Chinese)",b=T(),y=T(),x=I("section"),(S=I("h2")).textContent="Materials",C=T(),de&&de.c(),A=T(),ue.$$.fragment.c(),E=T(),P=I("section"),(R=I("h2")).textContent="Words",z=T(),pe&&pe.c(),j=T(),me.$$.fragment.c(),q=T(),H=I("section"),(W=I("h2")).textContent="Lesson actions",Y=T(),U=I("div"),B=I("a"),G=I("i"),Z=M("Edit"),J=T(),(X=I("button")).innerHTML='<i class="fas fa-trash"></i>Delete',Q=T(),we.$$.fragment.c(),O(n,"class","title"),O(i,"class","title is-4 svelte-1cb6t0j"),l=new F(se,c),O(d,"class","title is-4 svelte-1cb6t0j"),p=new F(ae,m),O(f,"class","title is-4 svelte-1cb6t0j"),h=new F(ie,$),O(v,"class","title is-4 svelte-1cb6t0j"),w=new F(oe,null),O(a,"class","summaries svelte-1cb6t0j"),O(S,"class","title is-4 svelte-1cb6t0j"),O(x,"class","materials svelte-1cb6t0j"),O(R,"class","title is-4 svelte-1cb6t0j"),O(P,"class","words svelte-1cb6t0j"),O(W,"class","title is-4 svelte-1cb6t0j"),O(G,"class","fas fa-edit"),O(B,"class","button is-primary"),O(B,"href",V="#/edit-lesson/"+e.$lesson.id),O(X,"class","button is-danger"),O(U,"class","buttons"),O(H,"class","actions svelte-1cb6t0j"),te=N(X,"click",e.click_handler)},m(e,D){_(e,n,D),k(n,t),_(e,r,D),Te(ce,e,D),_(e,s,D),_(e,a,D),k(a,i),k(a,o),l.m(a),k(a,c),k(a,d),k(a,u),p.m(a),k(a,m),k(a,f),k(a,g),h.m(a),k(a,$),k(a,v),k(a,b),w.m(a),_(e,y,D),_(e,x,D),k(x,S),k(x,C),de&&de.m(x,null),k(x,A),Te(ue,x,null),_(e,E,D),_(e,P,D),k(P,R),k(P,z),pe&&pe.m(P,null),k(P,j),Te(me,P,null),_(e,q,D),_(e,H,D),k(H,W),k(H,Y),k(H,U),k(U,B),k(B,G),k(B,Z),k(U,J),k(U,X),k(U,Q),Te(we,U,null),ee=!0},p(e,n){ee&&!e.$lesson||re===(re=n.$lesson.name+"")||L(t,re);var r={};e.$lesson&&(r.item=n.$lesson),e.lesson&&(r.store=Ii),ce.$set(r),ee&&!e.$lesson||se===(se=nc(n.$lesson.summaryEN,{breaks:!0})+"")||l.p(se),ee&&!e.$lesson||ae===(ae=nc(n.$lesson.homeworkEN,{breaks:!0})+"")||p.p(ae),ee&&!e.$lesson||ie===(ie=nc(n.$lesson.summaryZH,{breaks:!0})+"")||h.p(ie),ee&&!e.$lesson||oe===(oe=nc(n.$lesson.homeworkZH,{breaks:!0})+"")||w.p(oe),n.$lesson.materials&&n.$lesson.materials.length>0?de?(de.p(e,n),$e(de,1)):((de=Uu(n)).c(),$e(de,1),de.m(x,A)):de&&(ge(),ve(de,1,1,()=>{de=null}),he());var s={};e.$lesson&&(s.lesson=n.$lesson),ue.$set(s),n.$lesson.words&&n.$lesson.words.length>0?pe?(pe.p(e,n),$e(pe,1)):((pe=Gu(n)).c(),$e(pe,1),pe.m(P,j)):pe&&(ge(),ve(pe,1,1,()=>{pe=null}),he()),ee&&!e.$lesson||V===(V="#/edit-lesson/"+n.$lesson.id)||O(B,"href",V);var a={};e.$lesson&&(a.id=n.$lesson.id),e.lessons&&(a.store=Si),e.$lesson&&(a.name=n.$lesson.title),!K&&e.showDelete&&(a.open=n.showDelete),we.$set(a)},i(e){ee||($e(ce.$$.fragment,e),$e(de),$e(ue.$$.fragment,e),$e(pe),$e(me.$$.fragment,e),$e(we.$$.fragment,e),ee=!0)},o(e){ve(ce.$$.fragment,e),ve(de),ve(ue.$$.fragment,e),ve(pe),ve(me.$$.fragment,e),ve(we.$$.fragment,e),ee=!1},d(e){e&&(D(n),D(r)),Ae(ce,e),e&&(D(s),D(a),D(y),D(x)),de&&de.d(),Ae(ue),e&&(D(E),D(P)),pe&&pe.d(),Ae(me),e&&(D(q),D(H)),Ae(we),te()}}}function Uu(e){var n,t,r=[],s=new Map,a=e.$lesson.materials;const i=e=>e.material.id;for(var o=0;o<a.length;o+=1){let n=Hu(e,a,o),t=i(n);s.set(t,r[o]=Bu(t,n))}return{c(){for(n=I("ul"),o=0;o<r.length;o+=1)r[o].c();O(n,"class","materials-list svelte-1cb6t0j")},m(e,s){for(_(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=t.$lesson.materials;ge(),r=Ie(r,e,i,1,t,a,s,n,Se,Bu,null,Hu),he()},i(e){if(!t){for(var n=0;n<a.length;n+=1)$e(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)ve(r[o]);t=!1},d(e){for(e&&D(n),o=0;o<r.length;o+=1)r[o].d()}}}function Bu(e,n){var t,r,s,a,i,o,l,c,d,u=n.material.title+"",p=n.material.type+"",m=new Pu({props:{materialId:n.material.id}});return{key:e,first:null,c(){t=I("li"),r=I("a"),s=M(u),i=M("\n           - "),o=M(p),l=T(),m.$$.fragment.c(),c=T(),O(r,"href",a="#/material/"+n.material.id),this.first=t},m(e,n){_(e,t,n),k(t,r),k(r,s),k(t,i),k(t,o),k(t,l),Te(m,t,null),k(t,c),d=!0},p(e,n){d&&!e.$lesson||u===(u=n.material.title+"")||L(s,u),d&&!e.$lesson||a===(a="#/material/"+n.material.id)||O(r,"href",a),d&&!e.$lesson||p===(p=n.material.type+"")||L(o,p);var t={};e.$lesson&&(t.materialId=n.material.id),m.$set(t)},i(e){d||($e(m.$$.fragment,e),d=!0)},o(e){ve(m.$$.fragment,e),d=!1},d(e){e&&D(t),Ae(m)}}}function Gu(e){var n,t,r=[],s=new Map,a=e.$lesson.words;const i=e=>e.word.id;for(var o=0;o<a.length;o+=1){let n=qu(e,a,o),t=i(n);s.set(t,r[o]=Vu(t,n))}return{c(){for(n=I("ul"),o=0;o<r.length;o+=1)r[o].c();O(n,"class","words-list")},m(e,s){for(_(e,n,s),o=0;o<r.length;o+=1)r[o].m(n,null);t=!0},p(e,t){const a=t.$lesson.words;ge(),r=Ie(r,e,i,1,t,a,s,n,Se,Vu,null,qu),he()},i(e){if(!t){for(var n=0;n<a.length;n+=1)$e(r[n]);t=!0}},o(e){for(o=0;o<r.length;o+=1)ve(r[o]);t=!1},d(e){for(e&&D(n),o=0;o<r.length;o+=1)r[o].d()}}}function Zu(e){var n,t,r,s=e.word.chinese+"";return{c(){n=M("("),t=M(s),r=M(")")},m(e,s){_(e,n,s),_(e,t,s),_(e,r,s)},p(e,n){e.$lesson&&s!==(s=n.word.chinese+"")&&L(t,s)},d(e){e&&(D(n),D(t),D(r))}}}function Vu(e,n){var t,r,s,a,i,o,l,c,d=n.word.english+"",u=n.word.chinese&&Zu(n),p=new ju({props:{wordId:n.word.id}});return{key:e,first:null,c(){t=I("li"),r=I("a"),s=M(d),a=T(),u&&u.c(),o=T(),p.$$.fragment.c(),l=T(),O(r,"href",i="#/word/"+n.word.id),this.first=t},m(e,n){_(e,t,n),k(t,r),k(r,s),k(r,a),u&&u.m(r,null),k(t,o),Te(p,t,null),k(t,l),c=!0},p(e,n){c&&!e.$lesson||d===(d=n.word.english+"")||L(s,d),n.word.chinese?u?u.p(e,n):((u=Zu(n)).c(),u.m(r,null)):u&&(u.d(1),u=null),c&&!e.$lesson||i===(i="#/word/"+n.word.id)||O(r,"href",i);var t={};e.$lesson&&(t.wordId=n.word.id),p.$set(t)},i(e){c||($e(p.$$.fragment,e),c=!0)},o(e){ve(p.$$.fragment,e),c=!1},d(e){e&&D(t),u&&u.d(),Ae(p)}}}function Ju(e){var n,t,r,s,a,i,o=e.errors&&Fu(e),l=[Yu,Wu],c=[];function d(e,n){return n.$lesson&&n.$lesson.id===n.params.id?0:n.errors?-1:1}return~(r=d(0,e))&&(s=c[r]=l[r](e)),{c(){n=T(),o&&o.c(),t=T(),s&&s.c(),a=A(),document.title="Lesson Details"},m(e,s){_(e,n,s),o&&o.m(e,s),_(e,t,s),~r&&c[r].m(e,s),_(e,a,s),i=!0},p(e,n){n.errors?o?(o.p(e,n),$e(o,1)):((o=Fu(n)).c(),$e(o,1),o.m(t.parentNode,t)):o&&(ge(),ve(o,1,1,()=>{o=null}),he());var i=r;(r=d(0,n))===i?~r&&c[r].p(e,n):(s&&(ge(),ve(c[i],1,1,()=>{c[i]=null}),he()),~r?((s=c[r])||(s=c[r]=l[r](n)).c(),$e(s,1),s.m(a.parentNode,a)):s=null)},i(e){i||($e(o),$e(s),i=!0)},o(e){ve(o),ve(s),i=!1},d(e){e&&D(n),o&&o.d(e),e&&D(t),~r&&c[r].d(e),e&&D(a)}}}function Xu(e,n,t){let r;d(e,Ii,e=>{t("$lesson",r=e)});let{params:s={}}=n,a="",i=!1;return J(async()=>{if(!r||r.id!==s.id)try{await Ii.get(s.id)}catch(e){t("errors",a=e),je.add({text:"Could not fetch lesson from the server",type:"danger"})}}),e.$set=e=>{"params"in e&&t("params",s=e.params)},{params:s,errors:a,showDelete:i,$lesson:r,click_handler:function(){t("showDelete",i=!0)},deleteitem_open_binding:function(e){t("showDelete",i=e)}}}function Qu(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w,y,x,S,C,M,A,L,R,z,j,H,F,W,Y,U=new xn({props:{errors:e.errors}});function B(n){e.input0_value_binding.call(null,n),s=!0,le(()=>s=!1)}let G={label:"Name",placeholder:"i.e. 'My Body part 3'",required:!0};void 0!==e.name&&(G.value=e.name);var Z=new Bn({props:G});return ne.push(()=>Me(Z,"value",B)),{c(){n=I("form"),U.$$.fragment.c(),t=T(),r=I("div"),Z.$$.fragment.c(),i=T(),(o=I("p")).innerHTML="To make report writting easier write the summary in <strong>past tense</strong>.",l=T(),c=I("div"),(d=I("label")).textContent="Summary in English",u=T(),p=I("textarea"),m=T(),f=I("div"),(g=I("label")).textContent="Homework in English",h=T(),$=I("textarea"),v=T(),b=I("div"),(w=I("label")).textContent="Summary in Chinese",y=T(),x=I("textarea"),S=T(),C=I("div"),(M=I("label")).textContent="Homework in Chinese",A=T(),L=I("textarea"),R=T(),z=I("div"),(j=I("button")).textContent="Save\n      lesson",H=T(),F=I("input"),O(r,"class","field svelte-14t3m6a"),O(d,"class","label"),O(p,"class","textarea is-primary"),O(c,"class","field svelte-14t3m6a"),O(g,"class","label"),O($,"class","textarea is-primary"),O(f,"class","field svelte-14t3m6a"),O(w,"class","label"),O(x,"class","textarea is-info"),O(b,"class","field svelte-14t3m6a"),O(M,"class","label"),O(L,"class","textarea is-info"),O(C,"class","field svelte-14t3m6a"),O(j,"type","submit"),O(j,"class","button is-primary"),q(j,"is-loading",e.loading),O(F,"type","reset"),O(F,"class","button"),F.value="Cancel",O(z,"class","buttons svelte-14t3m6a"),n.noValidate=!0,Y=[N(p,"input",e.textarea0_input_handler),N($,"input",e.textarea1_input_handler),N(x,"input",e.textarea2_input_handler),N(L,"input",e.textarea3_input_handler),N(n,"submit",E(e.handleSubmit)),N(n,"reset",e.reset_handler)]},m(s,a){_(s,n,a),Te(U,n,null),k(n,t),k(n,r),Te(Z,r,null),k(n,i),k(n,o),k(n,l),k(n,c),k(c,d),k(c,u),k(c,p),P(p,e.summaryEN),k(n,m),k(n,f),k(f,g),k(f,h),k(f,$),P($,e.homeworkEN),k(n,v),k(n,b),k(b,w),k(b,y),k(b,x),P(x,e.summaryZH),k(n,S),k(n,C),k(C,M),k(C,A),k(C,L),P(L,e.homeworkZH),k(n,R),k(n,z),k(z,j),e.button_binding(j),k(z,H),k(z,F),e.form_1_binding(n),W=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),U.$set(t);var r={};!s&&e.name&&(r.value=n.name),Z.$set(r),e.summaryEN&&P(p,n.summaryEN),e.homeworkEN&&P($,n.homeworkEN),e.summaryZH&&P(x,n.summaryZH),e.homeworkZH&&P(L,n.homeworkZH),e.loading&&q(j,"is-loading",n.loading)},i(e){W||($e(U.$$.fragment,e),$e(Z.$$.fragment,e),W=!0)},o(e){ve(U.$$.fragment,e),ve(Z.$$.fragment,e),W=!1},d(t){t&&D(n),Ae(U),Ae(Z),e.button_binding(null),e.form_1_binding(null),a(Y)}}}function Ku(e,n,t){let r,s,{errors:a,loading:i,name:o="",summaryEN:l="",homeworkEN:c="",homeworkZH:d="",summaryZH:u="",id:p="",tags:m=[]}=n;const f=Q();return e.$set=e=>{"errors"in e&&t("errors",a=e.errors),"loading"in e&&t("loading",i=e.loading),"name"in e&&t("name",o=e.name),"summaryEN"in e&&t("summaryEN",l=e.summaryEN),"homeworkEN"in e&&t("homeworkEN",c=e.homeworkEN),"homeworkZH"in e&&t("homeworkZH",d=e.homeworkZH),"summaryZH"in e&&t("summaryZH",u=e.summaryZH),"id"in e&&t("id",p=e.id),"tags"in e&&t("tags",m=e.tags)},e.$$.update=(e={saveButton:1,loading:1})=>{(e.saveButton||e.loading)&&r&&(r.disabled=i,t("saveButton",r),t("loading",i))},{saveButton:r,form:s,errors:a,loading:i,name:o,summaryEN:l,homeworkEN:c,homeworkZH:d,summaryZH:u,id:p,tags:m,handleSubmit:()=>{s.checkValidity()?f("submit",{name:o,summaryEN:l,summaryZH:u,homeworkEN:c,homeworkZH:d}):je.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){K(e,n)},input0_value_binding:function(e){t("name",o=e)},textarea0_input_handler:function(){l=this.value,t("summaryEN",l)},textarea1_input_handler:function(){c=this.value,t("homeworkEN",c)},textarea2_input_handler:function(){u=this.value,t("summaryZH",u)},textarea3_input_handler:function(){d=this.value,t("homeworkZH",d)},button_binding:function(e){ne[e?"unshift":"push"](()=>{t("saveButton",r=e)})},form_1_binding:function(e){ne[e?"unshift":"push"](()=>{t("form",s=e)})}}}class ep extends Oe{constructor(e){super(),Ee(this,e,Ku,Qu,o,["errors","loading","name","summaryEN","homeworkEN","homeworkZH","summaryZH","id","tags"])}}function np(n){var t,r=new It({props:{what:"lesson"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function tp(e){var n,r=[{errors:e.errors},{loading:e.loading},e.$lesson,{id:e.params.id}];let s={};for(var a=0;a<r.length;a+=1)s=t(s,r[a]);var i=new ep({props:s});return i.$on("reset",e.reset),i.$on("submit",e.save),{c(){i.$$.fragment.c()},m(e,t){Te(i,e,t),n=!0},p(e,n){var t=e.errors||e.loading||e.$lesson||e.params?Ce(r,[e.errors&&{errors:n.errors},e.loading&&{loading:n.loading},e.$lesson&&n.$lesson,e.params&&{id:n.params.id}]):{};i.$set(t)},i(e){n||($e(i.$$.fragment,e),n=!0)},o(e){ve(i.$$.fragment,e),n=!1},d(e){Ae(i,e)}}}function rp(e){var n,t,r,s,a,i,o,l=[tp,np],c=[];function d(e,n){return Ii?0:1}return s=d(),a=c[s]=l[s](e),{c(){n=T(),(t=I("h1")).textContent="Edit a Lesson",r=T(),a.c(),i=A(),document.title="New Lesson",O(t,"class","title")},m(e,a){_(e,n,a),_(e,t,a),_(e,r,a),c[s].m(e,a),_(e,i,a),o=!0},p(e,n){var t=s;(s=d())===t?c[s].p(e,n):(ge(),ve(c[t],1,1,()=>{c[t]=null}),he(),(a=c[s])||(a=c[s]=l[s](n)).c(),$e(a,1),a.m(i.parentNode,i))},i(e){o||($e(a),o=!0)},o(e){ve(a),o=!1},d(e){e&&(D(n),D(t),D(r)),c[s].d(e),e&&D(i)}}}function sp(e,n,t){let r;d(e,Ii,e=>{t("$lesson",r=e)});let s=!1,a="",{params:i={}}=n;J(async()=>{if(!r||r.id===i.id)try{await Ii.get(i.id)}catch(e){t("errors",a=e),je.add({text:"Could not fetch lesson from the server",type:"danger"})}});const o=()=>{t("errors",a=""),ln(`/lesson/${i.id}`)};return e.$set=e=>{"params"in e&&t("params",i=e.params)},{loading:s,errors:a,params:i,reset:o,save:async({detail:e})=>{console.log(e),t("loading",s=!0);try{await Si.patch({input:e,id:i.id}),je.add({text:`Saved edits to lesson '${e.name}'`,type:"success"}),o()}catch(e){t("errors",a=e),je.add({text:"Could not save lesson.",type:"danger"})}finally{t("loading",s=!1)}},$lesson:r}}function ap(e){var n,t,r,s,a=new ep({props:{errors:e.errors,loading:e.loading}});return a.$on("reset",e.reset),a.$on("submit",e.save),{c(){n=T(),(t=I("h1")).textContent="New Lesson",r=T(),a.$$.fragment.c(),document.title="New Lesson",O(t,"class","title")},m(e,i){_(e,n,i),_(e,t,i),_(e,r,i),Te(a,e,i),s=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),e.loading&&(t.loading=n.loading),a.$set(t)},i(e){s||($e(a.$$.fragment,e),s=!0)},o(e){ve(a.$$.fragment,e),s=!1},d(e){e&&(D(n),D(t),D(r)),Ae(a,e)}}}function ip(e,n,t){let r=!1,s="";const a=()=>{t("errors",s=""),ln("/lessons")};return{loading:r,errors:s,reset:a,save:async({detail:e})=>{t("loading",r=!0);try{await Si.create(e),je.add({text:`Saved new lesson '${e.name}'`,type:"success"}),a()}catch(e){t("errors",s=e),je.add({text:"Could not save new lesson.",type:"danger"})}finally{t("loading",r=!1)}}}}function op(e,n,t){const r=Object.create(e);return r.tag=n[t],r}function lp(e,n,t){const r=Object.create(e);return r.material=n[t],r}function cp(e){var n,t,r,s,a,i=e.materials.length+"",o=[],l=new Map,c=e.materials;const d=e=>e.material.id;for(var u=0;u<c.length;u+=1){let n=lp(e,c,u),t=d(n);l.set(t,o[u]=pp(t,n))}return{c(){for(n=I("p"),t=M(i),r=M(" matching materials found:"),s=T(),u=0;u<o.length;u+=1)o[u].c();a=A()},m(e,i){for(_(e,n,i),k(n,t),k(n,r),_(e,s,i),u=0;u<o.length;u+=1)o[u].m(e,i);_(e,a,i)},p(e,n){e.materials&&i!==(i=n.materials.length+"")&&L(t,i);const r=n.materials;o=Ie(o,e,d,1,n,r,l,a.parentNode,De,pp,a,lp)},d(e){for(e&&(D(n),D(s)),u=0;u<o.length;u+=1)o[u].d(e);e&&D(a)}}}function dp(e){var n,t=[],r=new Map,s=e.material.tags;const a=e=>e.tag.id;for(var i=0;i<s.length;i+=1){let n=op(e,s,i),o=a(n);r.set(o,t[i]=up(o,n))}return{c(){for(n=I("div"),i=0;i<t.length;i+=1)t[i].c();O(n,"class","tags")},m(e,r){for(_(e,n,r),i=0;i<t.length;i+=1)t[i].m(n,null)},p(e,s){const i=s.material.tags;t=Ie(t,e,a,1,s,i,r,n,De,up,null,op)},d(e){for(e&&D(n),i=0;i<t.length;i+=1)t[i].d()}}}function up(e,n){var t,r,s=n.tag.name+"";return{key:e,first:null,c(){t=I("span"),r=M(s),O(t,"class","tag is-dark"),this.first=t},m(e,n){_(e,t,n),k(t,r)},p(e,n){e.materials&&s!==(s=n.tag.name+"")&&L(r,s)},d(e){e&&D(t)}}}function pp(e,n){var t,r,s,a,i,o,l,c,d,u=n.material.title+"",p=n.material.type+"",m=n.material.tags&&n.material.tags.length>0&&dp(n);return{key:e,first:null,c(){t=I("li"),r=I("a"),s=M(u),i=T(),o=I("span"),l=M(p),c=T(),m&&m.c(),d=T(),O(r,"href",a="#/material/"+n.material.id),O(o,"class","type svelte-wyy114"),O(t,"class","svelte-wyy114"),this.first=t},m(e,n){_(e,t,n),k(t,r),k(r,s),k(t,i),k(t,o),k(o,l),k(t,c),m&&m.m(t,null),k(t,d)},p(e,n){e.materials&&u!==(u=n.material.title+"")&&L(s,u),e.materials&&a!==(a="#/material/"+n.material.id)&&O(r,"href",a),e.materials&&p!==(p=n.material.type+"")&&L(l,p),n.material.tags&&n.material.tags.length>0?m?m.p(e,n):((m=dp(n)).c(),m.m(t,d)):m&&(m.d(1),m=null)},d(e){e&&D(t),m&&m.d()}}}function mp(n){var t,r=n.materials&&cp(n);return{c(){t=I("section"),r&&r.c(),O(t,"class","materials-list svelte-wyy114")},m(e,n){_(e,t,n),r&&r.m(t,null)},p(e,n){n.materials?r?r.p(e,n):((r=cp(n)).c(),r.m(t,null)):r&&(r.d(1),r=null)},i:e,o:e,d(e){e&&D(t),r&&r.d()}}}function fp(e,n,t){let{materials:r}=n;return e.$set=e=>{"materials"in e&&t("materials",r=e.materials)},{materials:r}}class gp extends Oe{constructor(e){super(),Ee(this,e,fp,mp,o,["materials"])}}function hp(e){var n;return{c(){n=M("Create")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function $p(e){var n;return{c(){n=M("Edit")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function vp(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w,y,x;function S(e,n){return n.id?$p:hp}var C=S(0,e),A=C(e),L=new xn({props:{errors:e.errors}});function R(n){e.input0_value_binding.call(null,n),o=!0,le(()=>o=!1)}let z={label:"Title",placeholder:"e.g. 'Song: Teacher on the bookcase'",required:!0};void 0!==e.title&&(z.value=e.title);var j=new Bn({props:z});function H(n){e.input1_value_binding.call(null,n),c=!0,le(()=>c=!1)}ne.push(()=>Me(j,"value",R));let F={label:"Complete URL",required:!0};void 0!==e.url&&(F.value=e.url);var W=new Bn({props:F});function Y(n){e.input2_value_binding.call(null,n),u=!0,le(()=>u=!1)}ne.push(()=>Me(W,"value",H));let U={label:"Filetype",placeholder:"e.g. 'audio/mp3'",required:!0};void 0!==e.type&&(U.value=e.type);var B=new Bn({props:U});function G(n){e.input3_value_binding.call(null,n),m=!0,le(()=>m=!1)}ne.push(()=>Me(B,"value",Y));let Z={label:"Url of related Image"};void 0!==e.imageUrl&&(Z.value=e.imageUrl);var V=new Bn({props:Z});return ne.push(()=>Me(V,"value",G)),{c(){n=I("h1"),A.c(),t=M(" material"),r=T(),s=I("form"),L.$$.fragment.c(),i=T(),j.$$.fragment.c(),l=T(),W.$$.fragment.c(),d=T(),B.$$.fragment.c(),p=T(),V.$$.fragment.c(),f=T(),g=I("textarea"),h=T(),$=I("div"),(v=I("button")).textContent="Save material",b=T(),w=I("input"),O(n,"class","title"),O(g,"class","textarea"),O(v,"type","submit"),O(v,"class","button is-primary"),q(v,"is-loading",e.loading),O(w,"type","reset"),O(w,"class","button"),w.value="Cancel",O($,"class","buttons svelte-1nzkngr"),s.noValidate=!0,x=[N(g,"input",e.textarea_input_handler),N(s,"submit",E(e.handleSubmit)),N(s,"reset",e.reset_handler)]},m(a,o){_(a,n,o),A.m(n,null),k(n,t),_(a,r,o),_(a,s,o),Te(L,s,null),k(s,i),Te(j,s,null),k(s,l),Te(W,s,null),k(s,d),Te(B,s,null),k(s,p),Te(V,s,null),k(s,f),k(s,g),P(g,e.notes),k(s,h),k(s,$),k($,v),e.button_binding(v),k($,b),k($,w),e.form_1_binding(s),y=!0},p(e,r){C!==(C=S(0,r))&&(A.d(1),(A=C(r))&&(A.c(),A.m(n,t)));var s={};e.errors&&(s.errors=r.errors),L.$set(s);var a={};!o&&e.title&&(a.value=r.title),j.$set(a);var i={};!c&&e.url&&(i.value=r.url),W.$set(i);var l={};!u&&e.type&&(l.value=r.type),B.$set(l);var d={};!m&&e.imageUrl&&(d.value=r.imageUrl),V.$set(d),e.notes&&P(g,r.notes),e.loading&&q(v,"is-loading",r.loading)},i(e){y||($e(L.$$.fragment,e),$e(j.$$.fragment,e),$e(W.$$.fragment,e),$e(B.$$.fragment,e),$e(V.$$.fragment,e),y=!0)},o(e){ve(L.$$.fragment,e),ve(j.$$.fragment,e),ve(W.$$.fragment,e),ve(B.$$.fragment,e),ve(V.$$.fragment,e),y=!1},d(t){t&&D(n),A.d(),t&&(D(r),D(s)),Ae(L),Ae(j),Ae(W),Ae(B),Ae(V),e.button_binding(null),e.form_1_binding(null),a(x)}}}function bp(e,n,t){let r,s,{title:a="",url:i="",notes:o="",type:l="",id:c="",imageUrl:d="",errors:u,loading:p}=n;const m=Q();return e.$set=e=>{"title"in e&&t("title",a=e.title),"url"in e&&t("url",i=e.url),"notes"in e&&t("notes",o=e.notes),"type"in e&&t("type",l=e.type),"id"in e&&t("id",c=e.id),"imageUrl"in e&&t("imageUrl",d=e.imageUrl),"errors"in e&&t("errors",u=e.errors),"loading"in e&&t("loading",p=e.loading)},e.$$.update=(e={saveButton:1,loading:1})=>{(e.saveButton||e.loading)&&r&&(r.disabled=p,t("saveButton",r),t("loading",p))},{title:a,url:i,notes:o,type:l,id:c,imageUrl:d,errors:u,loading:p,saveButton:r,form:s,handleSubmit:()=>{s.checkValidity()?m("submit",{title:a,url:i,notes:o,type:l,imageUrl:d}):je.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){K(e,n)},input0_value_binding:function(e){t("title",a=e)},input1_value_binding:function(e){t("url",i=e)},input2_value_binding:function(e){t("type",l=e)},input3_value_binding:function(e){t("imageUrl",d=e)},textarea_input_handler:function(){o=this.value,t("notes",o)},button_binding:function(e){ne[e?"unshift":"push"](()=>{t("saveButton",r=e)})},form_1_binding:function(e){ne[e?"unshift":"push"](()=>{t("form",s=e)})}}}class wp extends Oe{constructor(e){super(),Ee(this,e,bp,vp,o,["title","url","notes","type","id","imageUrl","errors","loading"])}}function yp(e){var n,t=new wp({props:{errors:e.errors,loading:e.loading}});return t.$on("reset",e.reset),t.$on("submit",e.save),{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function xp(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,le(()=>r=!1)}let o={$$slots:{default:[yp]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new Mn({props:o});return ne.push(()=>Me(l,"open",i)),{c(){(n=I("button")).innerHTML='<i class="fas fa-plus"></i>Add material',t=T(),l.$$.fragment.c(),O(n,"class","button is-primary"),a=N(n,"click",e.click_handler)},m(e,r){_(e,n,r),_(e,t,r),Te(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||($e(l.$$.fragment,e),s=!0)},o(e){ve(l.$$.fragment,e),s=!1},d(e){e&&(D(n),D(t)),Ae(l,e),a()}}}function kp(e,n,t){let r=!1,s="",a=!1;const i=()=>{t("errors",s=""),t("open",a=!1)};return{loading:r,errors:s,open:a,reset:i,save:async({detail:e})=>{t("loading",r=!0);try{await zc.create(e),je.add({text:`Saved new material '${e.title}'`,type:"success"}),i()}catch(e){t("errors",s=e),je.add({text:"Could not save new material.",type:"danger"})}finally{t("loading",r=!1)}},click_handler:function(){t("open",a=!0)},modal_open_binding:function(e){t("open",a=e)}}}class _p extends Oe{constructor(e){super(),Ee(this,e,kp,xp,o,[])}}function Dp(n){var t,r=new It({props:{what:"materials"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function Sp(e){var n,t=new gp({props:{materials:e.$materials}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.$materials&&(r.materials=n.$materials),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Ip(e){var n,t,r,s,a,i,o,l,c,d,u=new xn({props:{errors:e.errors}}),p=new _p({}),m=new Ei({props:{searchParams:"title",store:zc}}),f=[Sp,Dp],g=[];function h(e,n){return n.$materials?0:n.errors?-1:1}return~(o=h(0,e))&&(l=g[o]=f[o](e)),{c(){n=T(),(t=I("h1")).textContent="Materials",r=T(),u.$$.fragment.c(),s=T(),p.$$.fragment.c(),a=T(),m.$$.fragment.c(),i=T(),l&&l.c(),c=A(),document.title="Materials",O(t,"class","title")},m(e,l){_(e,n,l),_(e,t,l),_(e,r,l),Te(u,e,l),_(e,s,l),Te(p,e,l),_(e,a,l),Te(m,e,l),_(e,i,l),~o&&g[o].m(e,l),_(e,c,l),d=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),u.$set(t);var r={};e.materials&&(r.store=zc),m.$set(r);var s=o;(o=h(0,n))===s?~o&&g[o].p(e,n):(l&&(ge(),ve(g[s],1,1,()=>{g[s]=null}),he()),~o?((l=g[o])||(l=g[o]=f[o](n)).c(),$e(l,1),l.m(c.parentNode,c)):l=null)},i(e){d||($e(u.$$.fragment,e),$e(p.$$.fragment,e),$e(m.$$.fragment,e),$e(l),d=!0)},o(e){ve(u.$$.fragment,e),ve(p.$$.fragment,e),ve(m.$$.fragment,e),ve(l),d=!1},d(e){e&&(D(n),D(t),D(r)),Ae(u,e),e&&D(s),Ae(p,e),e&&D(a),Ae(m,e),e&&D(i),~o&&g[o].d(e),e&&D(c)}}}function Cp(e,n,t){let r;d(e,zc,e=>{t("$materials",r=e)});let s="";return J(async()=>{try{await zc.get({})}catch(e){t("errors",s=e),je.add({text:"Couldn't get materials from server.",type:"danger"})}}),{errors:s,$materials:r}}function Mp(e){var n,t=new wp({props:{title:e.material.title,url:e.material.url,id:e.material.id,type:e.material.type,notes:e.material.notes,imageUrl:e.material.imageUrl,errors:e.errors,loading:e.loading}});return t.$on("submit",e.save),t.$on("reset",e.reset),{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.material&&(r.title=n.material.title),e.material&&(r.url=n.material.url),e.material&&(r.id=n.material.id),e.material&&(r.type=n.material.type),e.material&&(r.notes=n.material.notes),e.material&&(r.imageUrl=n.material.imageUrl),e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Tp(e){var n,t,r=e.open&&Mp(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.open?r?(r.p(e,t),$e(r,1)):((r=Mp(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function Ap(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,le(()=>r=!1)}let o={$$slots:{default:[Tp]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new Mn({props:o});return ne.push(()=>Me(l,"open",i)),{c(){(n=I("button")).innerHTML='<i class="fas fa-edit"></i>Edit\n\t\t\t',t=T(),l.$$.fragment.c(),O(n,"class","button is-primary"),a=N(n,"click",e.click_handler)},m(e,r){_(e,n,r),_(e,t,r),Te(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.open||e.material||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||($e(l.$$.fragment,e),s=!0)},o(e){ve(l.$$.fragment,e),s=!1},d(e){e&&(D(n),D(t)),Ae(l,e),a()}}}function Np(e,n,t){let r=!1,s="",a=!1,{material:i}=n;const o=()=>{t("errors",s=""),t("open",a=!1)};return e.$set=e=>{"material"in e&&t("material",i=e.material)},{loading:r,errors:s,open:a,material:i,reset:o,save:async({detail:e})=>{t("loading",r=!0);try{await zc.patch({input:e,id:i.id}),je.add({text:`Saved edits to material '${e.title}'`,type:"success"}),o()}catch(e){t("errors",s=e),je.add({text:"Could not save edits to material.",type:"danger"})}finally{t("loading",r=!1)}},click_handler:function(){t("open",a=!0)},modal_open_binding:function(e){t("open",a=e)}}}class Ep extends Oe{constructor(e){super(),Ee(this,e,Np,Ap,o,["material"])}}function Op(e){var n,t=new xn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Lp(n){var t,r=new It({props:{what:"Material"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function Pp(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w,y,x,S=e.$material.title+"",C=e.truncate(e.$material.url)+"",A=new pu({props:{item:e.$material,type:"materials",store:jc}}),E=e.$material.imageUrl&&Rp(e),P=e.$material.notes&&zp(e),R=new Ep({props:{material:e.$material}});function z(n){e.deleteitem_open_binding.call(null,n),w=!0,le(()=>w=!1)}let j={id:e.$material.id,store:zc,type:"material",name:e.$material.title};void 0!==e.showDelete&&(j.open=e.showDelete);var q=new Ln({props:j});return ne.push(()=>Me(q,"open",z)),{c(){n=I("h1"),t=M(S),r=T(),A.$$.fragment.c(),s=T(),a=I("section"),(i=I("h2")).textContent="Material Details",o=T(),l=I("p"),c=M("URL: "),d=I("a"),u=M(C),m=T(),E&&E.c(),f=T(),P&&P.c(),g=T(),h=I("section"),R.$$.fragment.c(),$=T(),(v=I("button")).innerHTML='<i class="fas fa-trash"></i>Delete',b=T(),q.$$.fragment.c(),O(n,"class","title"),O(i,"class","title is-4 svelte-3e59po"),O(d,"href",p=e.$material.url),O(a,"class","details svelte-3e59po"),O(v,"class","button is-danger"),O(h,"class","buttons svelte-3e59po"),x=N(v,"click",e.click_handler)},m(e,p){_(e,n,p),k(n,t),_(e,r,p),Te(A,e,p),_(e,s,p),_(e,a,p),k(a,i),k(a,o),k(a,l),k(l,c),k(l,d),k(d,u),k(a,m),E&&E.m(a,null),k(a,f),P&&P.m(a,null),_(e,g,p),_(e,h,p),Te(R,h,null),k(h,$),k(h,v),k(h,b),Te(q,h,null),y=!0},p(e,n){y&&!e.$material||S===(S=n.$material.title+"")||L(t,S);var r={};e.$material&&(r.item=n.$material),e.material&&(r.store=jc),A.$set(r),y&&!e.$material||C===(C=n.truncate(n.$material.url)+"")||L(u,C),y&&!e.$material||p===(p=n.$material.url)||O(d,"href",p),n.$material.imageUrl?E?E.p(e,n):((E=Rp(n)).c(),E.m(a,f)):E&&(E.d(1),E=null),n.$material.notes?P?P.p(e,n):((P=zp(n)).c(),P.m(a,null)):P&&(P.d(1),P=null);var s={};e.$material&&(s.material=n.$material),R.$set(s);var i={};e.$material&&(i.id=n.$material.id),e.materials&&(i.store=zc),e.$material&&(i.name=n.$material.title),!w&&e.showDelete&&(i.open=n.showDelete),q.$set(i)},i(e){y||($e(A.$$.fragment,e),$e(R.$$.fragment,e),$e(q.$$.fragment,e),y=!0)},o(e){ve(A.$$.fragment,e),ve(R.$$.fragment,e),ve(q.$$.fragment,e),y=!1},d(e){e&&(D(n),D(r)),Ae(A,e),e&&(D(s),D(a)),E&&E.d(),P&&P.d(),e&&(D(g),D(h)),Ae(R),Ae(q),x()}}}function Rp(e){var n,t;return{c(){O(n=I("img"),"src",t=e.$material.imageUrl),O(n,"alt","image related to material")},m(e,t){_(e,n,t)},p(e,r){e.$material&&t!==(t=r.$material.imageUrl)&&O(n,"src",t)},d(e){e&&D(n)}}}function zp(e){var n,t,r,s=nc(e.$material.notes,{breaks:!0})+"";return{c(){(n=I("h3")).textContent="Notes",t=T(),r=new F(s,null)},m(e,s){_(e,n,s),_(e,t,s),r.m(e,s)},p(e,n){e.$material&&s!==(s=nc(n.$material.notes,{breaks:!0})+"")&&r.p(s)},d(e){e&&(D(n),D(t),r.d())}}}function jp(e){var n,t,r,s,a,i,o=e.errors&&Op(e),l=[Pp,Lp],c=[];function d(e,n){return n.$material&&n.$material.id===n.params.id?0:n.errors?-1:1}return~(r=d(0,e))&&(s=c[r]=l[r](e)),{c(){n=T(),o&&o.c(),t=T(),s&&s.c(),a=A(),document.title="Material Details"},m(e,s){_(e,n,s),o&&o.m(e,s),_(e,t,s),~r&&c[r].m(e,s),_(e,a,s),i=!0},p(e,n){n.errors?o?(o.p(e,n),$e(o,1)):((o=Op(n)).c(),$e(o,1),o.m(t.parentNode,t)):o&&(ge(),ve(o,1,1,()=>{o=null}),he());var i=r;(r=d(0,n))===i?~r&&c[r].p(e,n):(s&&(ge(),ve(c[i],1,1,()=>{c[i]=null}),he()),~r?((s=c[r])||(s=c[r]=l[r](n)).c(),$e(s,1),s.m(a.parentNode,a)):s=null)},i(e){i||($e(o),$e(s),i=!0)},o(e){ve(o),ve(s),i=!1},d(e){e&&D(n),o&&o.d(e),e&&D(t),~r&&c[r].d(e),e&&D(a)}}}function qp(e,n,t){let r;d(e,jc,e=>{t("$material",r=e)});let{params:s={}}=n,a="",i=!1;J(async()=>{if(!r||r.id!==s.id)try{await jc.get(s.id),null===r&&ln(`/not-found/material/${s.id}`)}catch(e){t("errors",a=e),je.add({text:"Could not fetch material from the server",type:"danger"})}});return e.$set=e=>{"params"in e&&t("params",s=e.params)},{params:s,errors:a,showDelete:i,truncate:e=>{if(e.length>80)return e.substring(0,77)+"..."},$material:r,click_handler:function(){t("showDelete",i=!0)},deleteitem_open_binding:function(e){t("showDelete",i=e)}}}function Hp(e,n,t){const r=Object.create(e);return r.tag=n[t],r}function Fp(e,n,t){const r=Object.create(e);return r.word=n[t],r}function Wp(e){var n,t,r,s,a,i=e.words.length+"",o=[],l=new Map,c=e.words;const d=e=>e.word.id;for(var u=0;u<c.length;u+=1){let n=Fp(e,c,u),t=d(n);l.set(t,o[u]=Gp(t,n))}return{c(){for(n=I("p"),t=M(i),r=M(" words found:"),s=T(),u=0;u<o.length;u+=1)o[u].c();a=A()},m(e,i){for(_(e,n,i),k(n,t),k(n,r),_(e,s,i),u=0;u<o.length;u+=1)o[u].m(e,i);_(e,a,i)},p(e,n){e.words&&i!==(i=n.words.length+"")&&L(t,i);const r=n.words;o=Ie(o,e,d,1,n,r,l,a.parentNode,De,Gp,a,Fp)},d(e){for(e&&(D(n),D(s)),u=0;u<o.length;u+=1)o[u].d(e);e&&D(a)}}}function Yp(e){var n,t,r,s=e.word.chinese+"";return{c(){n=M("("),t=M(s),r=M(")")},m(e,s){_(e,n,s),_(e,t,s),_(e,r,s)},p(e,n){e.words&&s!==(s=n.word.chinese+"")&&L(t,s)},d(e){e&&(D(n),D(t),D(r))}}}function Up(e){var n,t=[],r=new Map,s=e.word.tags;const a=e=>e.tag.id;for(var i=0;i<s.length;i+=1){let n=Hp(e,s,i),o=a(n);r.set(o,t[i]=Bp(o,n))}return{c(){for(n=I("div"),i=0;i<t.length;i+=1)t[i].c();O(n,"class","tags svelte-4s8ccd")},m(e,r){for(_(e,n,r),i=0;i<t.length;i+=1)t[i].m(n,null)},p(e,s){const i=s.word.tags;t=Ie(t,e,a,1,s,i,r,n,De,Bp,null,Hp)},d(e){for(e&&D(n),i=0;i<t.length;i+=1)t[i].d()}}}function Bp(e,n){var t,r,s=n.tag.name+"";return{key:e,first:null,c(){t=I("span"),r=M(s),O(t,"class","tag is-dark"),this.first=t},m(e,n){_(e,t,n),k(t,r)},p(e,n){e.words&&s!==(s=n.tag.name+"")&&L(r,s)},d(e){e&&D(t)}}}function Gp(e,n){var t,r,s,a,i,o,l,c=n.word.english+"",d=n.word.chinese&&Yp(n),u=n.word.tags&&n.word.tags.length>0&&Up(n);return{key:e,first:null,c(){t=I("li"),r=I("a"),s=M(c),a=T(),d&&d.c(),o=T(),u&&u.c(),l=T(),O(r,"href",i="#/word/"+n.word.id),O(t,"class","svelte-4s8ccd"),this.first=t},m(e,n){_(e,t,n),k(t,r),k(r,s),k(r,a),d&&d.m(r,null),k(t,o),u&&u.m(t,null),k(t,l)},p(e,n){e.words&&c!==(c=n.word.english+"")&&L(s,c),n.word.chinese?d?d.p(e,n):((d=Yp(n)).c(),d.m(r,null)):d&&(d.d(1),d=null),e.words&&i!==(i="#/word/"+n.word.id)&&O(r,"href",i),n.word.tags&&n.word.tags.length>0?u?u.p(e,n):((u=Up(n)).c(),u.m(t,l)):u&&(u.d(1),u=null)},d(e){e&&D(t),d&&d.d(),u&&u.d()}}}function Zp(n){var t,r=n.words.length>0&&Wp(n);return{c(){t=I("section"),r&&r.c(),O(t,"class","word-list svelte-4s8ccd")},m(e,n){_(e,t,n),r&&r.m(t,null)},p(e,n){n.words.length>0?r?r.p(e,n):((r=Wp(n)).c(),r.m(t,null)):r&&(r.d(1),r=null)},i:e,o:e,d(e){e&&D(t),r&&r.d()}}}function Vp(e,n,t){let{words:r=[]}=n;return e.$set=e=>{"words"in e&&t("words",r=e.words)},{words:r}}class Jp extends Oe{constructor(e){super(),Ee(this,e,Vp,Zp,o,["words"])}}function Xp(e){var n;return{c(){n=M("Create")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function Qp(e){var n;return{c(){n=M("Edit")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function Kp(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v;function b(e,n){return n.id?Qp:Xp}var w=b(0,e),y=w(e),x=new xn({props:{errors:e.errors}});function S(n){e.input0_value_binding.call(null,n),o=!0,le(()=>o=!1)}let C={label:"English",placeholder:"e.g. 'bookcase'",required:!0};void 0!==e.english&&(C.value=e.english);var A=new Bn({props:C});function L(n){e.input1_value_binding.call(null,n),c=!0,le(()=>c=!1)}ne.push(()=>Me(A,"value",S));let P={label:"Chinese",placeholder:"e.g. '书柜'"};void 0!==e.chinese&&(P.value=e.chinese);var R=new Bn({props:P});function z(n){e.input2_value_binding.call(null,n),u=!0,le(()=>u=!1)}ne.push(()=>Me(R,"value",L));let j={label:"URL of audio"};void 0!==e.audio&&(j.value=e.audio);var H=new Bn({props:j});return ne.push(()=>Me(H,"value",z)),{c(){n=I("h1"),y.c(),t=M(" word"),r=T(),s=I("form"),x.$$.fragment.c(),i=T(),A.$$.fragment.c(),l=T(),R.$$.fragment.c(),d=T(),H.$$.fragment.c(),p=T(),m=I("div"),(f=I("button")).textContent="Save word",g=T(),h=I("input"),O(n,"class","title"),O(f,"type","submit"),O(f,"class","button is-primary"),q(f,"is-loading",e.loading),O(h,"type","reset"),O(h,"class","button"),h.value="Cancel",O(m,"class","buttons svelte-oih4d0"),s.noValidate=!0,O(s,"class","svelte-oih4d0"),v=[N(s,"submit",E(e.handleSubmit)),N(s,"reset",e.reset_handler)]},m(a,o){_(a,n,o),y.m(n,null),k(n,t),_(a,r,o),_(a,s,o),Te(x,s,null),k(s,i),Te(A,s,null),k(s,l),Te(R,s,null),k(s,d),Te(H,s,null),k(s,p),k(s,m),k(m,f),e.button_binding(f),k(m,g),k(m,h),e.form_1_binding(s),$=!0},p(e,r){w!==(w=b(0,r))&&(y.d(1),(y=w(r))&&(y.c(),y.m(n,t)));var s={};e.errors&&(s.errors=r.errors),x.$set(s);var a={};!o&&e.english&&(a.value=r.english),A.$set(a);var i={};!c&&e.chinese&&(i.value=r.chinese),R.$set(i);var l={};!u&&e.audio&&(l.value=r.audio),H.$set(l),e.loading&&q(f,"is-loading",r.loading)},i(e){$||($e(x.$$.fragment,e),$e(A.$$.fragment,e),$e(R.$$.fragment,e),$e(H.$$.fragment,e),$=!0)},o(e){ve(x.$$.fragment,e),ve(A.$$.fragment,e),ve(R.$$.fragment,e),ve(H.$$.fragment,e),$=!1},d(t){t&&D(n),y.d(),t&&(D(r),D(s)),Ae(x),Ae(A),Ae(R),Ae(H),e.button_binding(null),e.form_1_binding(null),a(v)}}}function em(e,n,t){let r,s,{english:a="",chinese:i="",audio:o="",id:l=null,errors:c,loading:d}=n;const u=Q();return e.$set=e=>{"english"in e&&t("english",a=e.english),"chinese"in e&&t("chinese",i=e.chinese),"audio"in e&&t("audio",o=e.audio),"id"in e&&t("id",l=e.id),"errors"in e&&t("errors",c=e.errors),"loading"in e&&t("loading",d=e.loading)},e.$$.update=(e={saveButton:1,loading:1})=>{(e.saveButton||e.loading)&&r&&(r.disabled=d,t("saveButton",r),t("loading",d))},{english:a,chinese:i,audio:o,id:l,errors:c,loading:d,saveButton:r,form:s,handleSubmit:()=>{s.checkValidity()?u("submit",{english:a,chinese:i,audio:o}):je.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){K(e,n)},input0_value_binding:function(e){t("english",a=e)},input1_value_binding:function(e){t("chinese",i=e)},input2_value_binding:function(e){t("audio",o=e)},button_binding:function(e){ne[e?"unshift":"push"](()=>{t("saveButton",r=e)})},form_1_binding:function(e){ne[e?"unshift":"push"](()=>{t("form",s=e)})}}}class nm extends Oe{constructor(e){super(),Ee(this,e,em,Kp,o,["english","chinese","audio","id","errors","loading"])}}function tm(e){var n,t=new nm({props:{errors:e.errors,loading:e.loading}});return t.$on("reset",e.reset),t.$on("submit",e.save),{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function rm(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,le(()=>r=!1)}let o={$$slots:{default:[tm]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new Mn({props:o});return ne.push(()=>Me(l,"open",i)),{c(){(n=I("button")).innerHTML='<i class="fas fa-plus"></i>Add word',t=T(),l.$$.fragment.c(),O(n,"class","button is-primary"),a=N(n,"click",e.click_handler)},m(e,r){_(e,n,r),_(e,t,r),Te(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||($e(l.$$.fragment,e),s=!0)},o(e){ve(l.$$.fragment,e),s=!1},d(e){e&&(D(n),D(t)),Ae(l,e),a()}}}function sm(e,n,t){let r=!1,s="",a=!1;const i=()=>{t("errors",s=""),t("open",a=!1)};return{loading:r,errors:s,open:a,reset:i,save:async({detail:e})=>{t("loading",r=!0);try{await vc.create(e),je.add({text:`Saved new word '${e.english}'`,type:"success"}),i()}catch(e){t("errors",s=e),je.add({text:"Could not save new word.",type:"danger"})}finally{t("loading",r=!1)}},click_handler:function(){t("open",a=!0)},modal_open_binding:function(e){t("open",a=e)}}}class am extends Oe{constructor(e){super(),Ee(this,e,sm,rm,o,[])}}function im(n){var t,r=new It({props:{what:"words"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function om(e){var n,t=new Jp({props:{words:e.$words}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.$words&&(r.words=n.$words),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function lm(e){var n,t,r,s,a,i,o,l,c,d,u=new xn({props:{errors:e.errors}}),p=new am({}),m=new Ei({props:{searchParams:["english","chinese"],store:vc}}),f=[om,im],g=[];function h(e,n){return n.$words?0:n.errors?-1:1}return~(o=h(0,e))&&(l=g[o]=f[o](e)),{c(){n=T(),(t=I("h1")).textContent="Words",r=T(),u.$$.fragment.c(),s=T(),p.$$.fragment.c(),a=T(),m.$$.fragment.c(),i=T(),l&&l.c(),c=A(),document.title="Words",O(t,"class","title")},m(e,l){_(e,n,l),_(e,t,l),_(e,r,l),Te(u,e,l),_(e,s,l),Te(p,e,l),_(e,a,l),Te(m,e,l),_(e,i,l),~o&&g[o].m(e,l),_(e,c,l),d=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),u.$set(t);var r={};e.words&&(r.store=vc),m.$set(r);var s=o;(o=h(0,n))===s?~o&&g[o].p(e,n):(l&&(ge(),ve(g[s],1,1,()=>{g[s]=null}),he()),~o?((l=g[o])||(l=g[o]=f[o](n)).c(),$e(l,1),l.m(c.parentNode,c)):l=null)},i(e){d||($e(u.$$.fragment,e),$e(p.$$.fragment,e),$e(m.$$.fragment,e),$e(l),d=!0)},o(e){ve(u.$$.fragment,e),ve(p.$$.fragment,e),ve(m.$$.fragment,e),ve(l),d=!1},d(e){e&&(D(n),D(t),D(r)),Ae(u,e),e&&D(s),Ae(p,e),e&&D(a),Ae(m,e),e&&D(i),~o&&g[o].d(e),e&&D(c)}}}function cm(e,n,t){let r;d(e,vc,e=>{t("$words",r=e)});let s="";return J(async()=>{try{await vc.get()}catch(e){t("errors",s=e),je.add({text:"Couldn't get words from server.",type:"danger"})}}),{errors:s,$words:r}}function dm(e){var n,t=new nm({props:{english:e.word.english,audio:e.word.audio,chinese:e.word.chinese,errors:e.errors,loading:e.loading}});return t.$on("submit",e.save),t.$on("reset",e.reset),{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.word&&(r.english=n.word.english),e.word&&(r.audio=n.word.audio),e.word&&(r.chinese=n.word.chinese),e.errors&&(r.errors=n.errors),e.loading&&(r.loading=n.loading),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function um(e){var n,t,r=e.open&&dm(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.open?r?(r.p(e,t),$e(r,1)):((r=dm(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function pm(e){var n,t,r,s,a;function i(n){e.modal_open_binding.call(null,n),r=!0,le(()=>r=!1)}let o={$$slots:{default:[um]},$$scope:{ctx:e}};void 0!==e.open&&(o.open=e.open);var l=new Mn({props:o});return ne.push(()=>Me(l,"open",i)),{c(){(n=I("button")).innerHTML='<i class="fas fa-edit"></i>Edit\n\t\t\t',t=T(),l.$$.fragment.c(),O(n,"class","button is-primary"),a=N(n,"click",e.click_handler)},m(e,r){_(e,n,r),_(e,t,r),Te(l,e,r),s=!0},p(e,n){var t={};(e.$$scope||e.open||e.word||e.errors||e.loading)&&(t.$$scope={changed:e,ctx:n}),!r&&e.open&&(t.open=n.open),l.$set(t)},i(e){s||($e(l.$$.fragment,e),s=!0)},o(e){ve(l.$$.fragment,e),s=!1},d(e){e&&(D(n),D(t)),Ae(l,e),a()}}}function mm(e,n,t){let r=!1,s="",a=!1,{word:i}=n;const o=()=>{t("errors",s=""),t("open",a=!1)};return e.$set=e=>{"word"in e&&t("word",i=e.word)},{loading:r,errors:s,open:a,word:i,reset:o,save:async({detail:e})=>{t("loading",r=!0);try{await vc.patch({input:e,id:i.id}),je.add({text:`Saved edits to word '${e.english}'`,type:"success"}),o()}catch(e){t("errors",s=e),je.add({text:"Could not save word.",type:"danger"})}finally{t("loading",r=!1)}},click_handler:function(){t("open",a=!0)},modal_open_binding:function(e){t("open",a=e)}}}class fm extends Oe{constructor(e){super(),Ee(this,e,mm,pm,o,["word"])}}function gm(e,n,t){const r=Object.create(e);return r.lesson=n[t],r}function hm(e){var n,t=new xn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function $m(n){var t,r=new It({props:{what:"word"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function vm(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w,y,x,S,C,A,E,P,R,z,j,q,H,F=e.$word.english+"",W=e.$word.chinese+"",Y=e.$word.audio||"none",U=e.$word.lessons.length+"",B=new pu({props:{type:"words",item:e.$word,store:vc}}),G=e.$word.lessons&&e.$word.lessons.length>0&&bm(e),Z=new fm({props:{word:e.$word}});function V(n){e.deleteitem_open_binding.call(null,n),j=!0,le(()=>j=!1)}let J={id:e.$word.id,store:vc,type:"word",name:e.$word.english};void 0!==e.showDelete&&(J.open=e.showDelete);var X=new Ln({props:J});return ne.push(()=>Me(X,"open",V)),{c(){n=I("h1"),t=M(F),r=T(),(s=I("p")).innerHTML='<a href="#/words">←Back to word list</a>',a=T(),B.$$.fragment.c(),i=T(),o=I("section"),(l=I("h2")).textContent="Details",c=T(),d=I("p"),(u=I("strong")).textContent="Chinese",p=M(": "),m=M(W),f=T(),g=I("p"),(h=I("strong")).textContent="Audio",$=M(": "),v=M(Y),b=T(),w=I("h2"),y=M("Used in "),x=M(U),S=M(" Lessons"),C=T(),G&&G.c(),A=T(),E=I("section"),Z.$$.fragment.c(),P=T(),(R=I("button")).innerHTML='<i class="fas fa-trash"></i>Delete',z=T(),X.$$.fragment.c(),O(n,"class","title"),O(l,"class","title is-4"),O(w,"class","title is-4"),O(o,"class","details svelte-xj6mxc"),O(R,"class","button is-danger"),O(E,"class","buttons svelte-xj6mxc"),H=N(R,"click",e.click_handler)},m(e,D){_(e,n,D),k(n,t),_(e,r,D),_(e,s,D),_(e,a,D),Te(B,e,D),_(e,i,D),_(e,o,D),k(o,l),k(o,c),k(o,d),k(d,u),k(d,p),k(d,m),k(o,f),k(o,g),k(g,h),k(g,$),k(g,v),k(o,b),k(o,w),k(w,y),k(w,x),k(w,S),k(o,C),G&&G.m(o,null),_(e,A,D),_(e,E,D),Te(Z,E,null),k(E,P),k(E,R),k(E,z),Te(X,E,null),q=!0},p(e,n){q&&!e.$word||F===(F=n.$word.english+"")||L(t,F);var r={};e.$word&&(r.item=n.$word),e.words&&(r.store=vc),B.$set(r),q&&!e.$word||W===(W=n.$word.chinese+"")||L(m,W),q&&!e.$word||Y===(Y=n.$word.audio||"none")||L(v,Y),q&&!e.$word||U===(U=n.$word.lessons.length+"")||L(x,U),n.$word.lessons&&n.$word.lessons.length>0?G?G.p(e,n):((G=bm(n)).c(),G.m(o,null)):G&&(G.d(1),G=null);var s={};e.$word&&(s.word=n.$word),Z.$set(s);var a={};e.$word&&(a.id=n.$word.id),e.words&&(a.store=vc),e.$word&&(a.name=n.$word.english),!j&&e.showDelete&&(a.open=n.showDelete),X.$set(a)},i(e){q||($e(B.$$.fragment,e),$e(Z.$$.fragment,e),$e(X.$$.fragment,e),q=!0)},o(e){ve(B.$$.fragment,e),ve(Z.$$.fragment,e),ve(X.$$.fragment,e),q=!1},d(e){e&&(D(n),D(r),D(s),D(a)),Ae(B,e),e&&(D(i),D(o)),G&&G.d(),e&&(D(A),D(E)),Ae(Z),Ae(X),H()}}}function bm(e){var n,t=[],r=new Map,s=e.$word.lessons;const a=e=>e.lesson.id;for(var i=0;i<s.length;i+=1){let n=gm(e,s,i),o=a(n);r.set(o,t[i]=wm(o,n))}return{c(){for(i=0;i<t.length;i+=1)t[i].c();n=A()},m(e,r){for(i=0;i<t.length;i+=1)t[i].m(e,r);_(e,n,r)},p(e,s){const i=s.$word.lessons;t=Ie(t,e,a,1,s,i,r,n.parentNode,De,wm,n,gm)},d(e){for(i=0;i<t.length;i+=1)t[i].d(e);e&&D(n)}}}function wm(e,n){var t,r,s,a,i=n.lesson.name+"";return{key:e,first:null,c(){t=I("li"),r=I("a"),s=M(i),O(r,"href",a="#/lesson/"+n.lesson.id),this.first=t},m(e,n){_(e,t,n),k(t,r),k(r,s)},p(e,n){e.$word&&i!==(i=n.lesson.name+"")&&L(s,i),e.$word&&a!==(a="#/lesson/"+n.lesson.id)&&O(r,"href",a)},d(e){e&&D(t)}}}function ym(e){var n,t,r,s,a,i,o=e.errors&&hm(e),l=[vm,$m],c=[];function d(e,n){return n.$word&&n.$word.id===n.params.id?0:n.errors?-1:1}return~(r=d(0,e))&&(s=c[r]=l[r](e)),{c(){n=T(),o&&o.c(),t=T(),s&&s.c(),a=A(),document.title="Word Details"},m(e,s){_(e,n,s),o&&o.m(e,s),_(e,t,s),~r&&c[r].m(e,s),_(e,a,s),i=!0},p(e,n){n.errors?o?(o.p(e,n),$e(o,1)):((o=hm(n)).c(),$e(o,1),o.m(t.parentNode,t)):o&&(ge(),ve(o,1,1,()=>{o=null}),he());var i=r;(r=d(0,n))===i?~r&&c[r].p(e,n):(s&&(ge(),ve(c[i],1,1,()=>{c[i]=null}),he()),~r?((s=c[r])||(s=c[r]=l[r](n)).c(),$e(s,1),s.m(a.parentNode,a)):s=null)},i(e){i||($e(o),$e(s),i=!0)},o(e){ve(o),ve(s),i=!1},d(e){e&&D(n),o&&o.d(e),e&&D(t),~r&&c[r].d(e),e&&D(a)}}}function xm(e,n,t){let r;d(e,bc,e=>{t("$word",r=e)});let{params:s={}}=n,a="",i=!1;return J(async()=>{if(!r||r.id!==s.id)try{await bc.get(s.id),null===r&&ln(`/not-found/material/${s.id}`)}catch(e){t("errors",a=e),je.add({text:"Could not fetch word from the server",type:"danger"})}}),e.$set=e=>{"params"in e&&t("params",s=e.params)},{params:s,errors:a,showDelete:i,$word:r,click_handler:function(){t("showDelete",i=!0)},deleteitem_open_binding:function(e){t("showDelete",i=e)}}}function km(e){var n,t=new xn({props:{errors:e.errors}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.errors&&(r.errors=n.errors),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function _m(e){var n,t,r,s,i,o,l,c,d,u,p=e.errors&&km(e);function m(n){e.input0_value_binding.call(null,n),r=!0,le(()=>r=!1)}let f={type:"text",label:e.id?"Name":"New tag name"};void 0!==e.name&&(f.value=e.name);var g=new Bn({props:f});return ne.push(()=>Me(g,"value",m)),{c(){n=I("form"),p&&p.c(),t=T(),g.$$.fragment.c(),s=T(),i=I("div"),(o=I("button")).textContent="Save Tag",l=T(),c=I("input"),O(o,"type","submit"),O(o,"class","button is-primary"),q(o,"is-loading",e.loading),O(c,"type","reset"),O(c,"class","button"),c.value="Cancel",O(i,"class","buttons svelte-i7r75e"),n.noValidate=!0,u=[N(n,"submit",E(e.handleSubmit)),N(n,"reset",e.reset_handler)]},m(r,a){_(r,n,a),p&&p.m(n,null),k(n,t),Te(g,n,null),k(n,s),k(n,i),k(i,o),e.button_binding(o),k(i,l),k(i,c),e.form_1_binding(n),d=!0},p(e,s){s.errors?p?(p.p(e,s),$e(p,1)):((p=km(s)).c(),$e(p,1),p.m(n,t)):p&&(ge(),ve(p,1,1,()=>{p=null}),he());var a={};e.id&&(a.label=s.id?"Name":"New tag name"),!r&&e.name&&(a.value=s.name),g.$set(a),e.loading&&q(o,"is-loading",s.loading)},i(e){d||($e(p),$e(g.$$.fragment,e),d=!0)},o(e){ve(p),ve(g.$$.fragment,e),d=!1},d(t){t&&D(n),p&&p.d(),Ae(g),e.button_binding(null),e.form_1_binding(null),a(u)}}}function Dm(e,n,t){const r=Q();let s,a,{name:i="",id:o=null,loading:l=!1,errors:c,connections:d=null}=n;return e.$set=e=>{"name"in e&&t("name",i=e.name),"id"in e&&t("id",o=e.id),"loading"in e&&t("loading",l=e.loading),"errors"in e&&t("errors",c=e.errors),"connections"in e&&t("connections",d=e.connections)},{name:i,id:o,loading:l,errors:c,connections:d,form:s,saveButton:a,handleSubmit:()=>{s.checkValidity()?r("submit",{id:o,name:i}):je.add({text:"Please fix form errors first.",type:"danger"})},reset_handler:function(n){K(e,n)},input0_value_binding:function(e){t("name",i=e)},button_binding:function(e){ne[e?"unshift":"push"](()=>{t("saveButton",a=e)})},form_1_binding:function(e){ne[e?"unshift":"push"](()=>{t("form",s=e)})}}}class Sm extends Oe{constructor(e){super(),Ee(this,e,Dm,_m,o,["name","id","loading","errors","connections"])}}function Im(e){var n,t;function r(t){e.tagform_name_binding.call(null,t),n=!0,le(()=>n=!1)}let s={errors:e.errors,loading:e.loading};void 0!==e.name&&(s.name=e.name);var a=new Sm({props:s});return ne.push(()=>Me(a,"name",r)),a.$on("submit",e.handleSubmit),a.$on("reset",e.reset),{c(){a.$$.fragment.c()},m(e,n){Te(a,e,n),t=!0},p(e,t){var r={};e.errors&&(r.errors=t.errors),e.loading&&(r.loading=t.loading),!n&&e.name&&(r.name=t.name),a.$set(r)},i(e){t||($e(a.$$.fragment,e),t=!0)},o(e){ve(a.$$.fragment,e),t=!1},d(e){Ae(a,e)}}}function Cm(e,n,t){let r;d(e,Jd,e=>{t("$tags",r=e)});let s="",a="",i=!1;const o=()=>{t("errors",a=""),t("name",s="")};return{name:s,errors:a,loading:i,reset:o,handleSubmit:async({detail:e})=>{if(e.name){t("loading",i=!0);try{if(r&&r.find(n=>n.name===e.name))throw new xn(`The tag '${e.name}' already exists.`);await Jd.create(e.name),je.add({text:`Saved new tag '${e.name}'`,type:"success"}),o()}catch(e){t("errors",a=e),je.add({text:"Could not save new tag.",type:"danger"})}finally{t("loading",i=!1)}}},tagform_name_binding:function(e){t("name",s=e)}}}class Mm extends Oe{constructor(e){super(),Ee(this,e,Cm,Im,o,[])}}function Tm(e,n,t){const r=Object.create(e);return r.word=n[t],r}function Am(e,n,t){const r=Object.create(e);return r.lesson=n[t],r}function Nm(e,n,t){const r=Object.create(e);return r.material=n[t],r}function Em(n){var t,r=new It({props:{what:"connections"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function Om(n){var t,r,s,a=n.$tag.materials.length>0&&Lm(n),i=n.$tag.lessons.length>0&&Rm(n),o=n.$tag.words.length>0&&jm(n);return{c(){a&&a.c(),t=T(),i&&i.c(),r=T(),o&&o.c(),s=A()},m(e,n){a&&a.m(e,n),_(e,t,n),i&&i.m(e,n),_(e,r,n),o&&o.m(e,n),_(e,s,n)},p(e,n){n.$tag.materials.length>0?a?a.p(e,n):((a=Lm(n)).c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),n.$tag.lessons.length>0?i?i.p(e,n):((i=Rm(n)).c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null),n.$tag.words.length>0?o?o.p(e,n):((o=jm(n)).c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},i:e,o:e,d(e){a&&a.d(e),e&&D(t),i&&i.d(e),e&&D(r),o&&o.d(e),e&&D(s)}}}function Lm(e){var n,t,r,s=[],a=new Map,i=e.$tag.materials;const o=e=>e.material.id;for(var l=0;l<i.length;l+=1){let n=Nm(e,i,l),t=o(n);a.set(t,s[l]=Pm(t,n))}return{c(){for(n=I("section"),(t=I("h2")).textContent="Materials",r=T(),l=0;l<s.length;l+=1)s[l].c();O(t,"class","title is-4"),O(n,"class","materials svelte-189pca3")},m(e,a){for(_(e,n,a),k(n,t),k(n,r),l=0;l<s.length;l+=1)s[l].m(n,null)},p(e,t){const r=t.$tag.materials;s=Ie(s,e,o,1,t,r,a,n,De,Pm,null,Nm)},d(e){for(e&&D(n),l=0;l<s.length;l+=1)s[l].d()}}}function Pm(e,n){var t,r,s,a=n.material.title+"";return{key:e,first:null,c(){t=I("a"),r=M(a),O(t,"href",s="#/material/"+n.material.id),this.first=t},m(e,n){_(e,t,n),k(t,r)},p(e,n){e.$tag&&a!==(a=n.material.title+"")&&L(r,a),e.$tag&&s!==(s="#/material/"+n.material.id)&&O(t,"href",s)},d(e){e&&D(t)}}}function Rm(e){var n,t,r,s=[],a=new Map,i=e.$tag.lessons;const o=e=>e.lesson.id;for(var l=0;l<i.length;l+=1){let n=Am(e,i,l),t=o(n);a.set(t,s[l]=zm(t,n))}return{c(){for(n=I("section"),(t=I("h2")).textContent="Lessons",r=T(),l=0;l<s.length;l+=1)s[l].c();O(t,"class","title is-4"),O(n,"class","lessons svelte-189pca3")},m(e,a){for(_(e,n,a),k(n,t),k(n,r),l=0;l<s.length;l+=1)s[l].m(n,null)},p(e,t){const r=t.$tag.lessons;s=Ie(s,e,o,1,t,r,a,n,De,zm,null,Am)},d(e){for(e&&D(n),l=0;l<s.length;l+=1)s[l].d()}}}function zm(e,n){var t,r,s,a=n.lesson.name+"";return{key:e,first:null,c(){t=I("a"),r=M(a),O(t,"href",s="#/lesson/"+n.lesson.id),this.first=t},m(e,n){_(e,t,n),k(t,r)},p(e,n){e.$tag&&a!==(a=n.lesson.name+"")&&L(r,a),e.$tag&&s!==(s="#/lesson/"+n.lesson.id)&&O(t,"href",s)},d(e){e&&D(t)}}}function jm(e){var n,t,r,s=[],a=new Map,i=e.$tag.words;const o=e=>e.word.id;for(var l=0;l<i.length;l+=1){let n=Tm(e,i,l),t=o(n);a.set(t,s[l]=qm(t,n))}return{c(){for(n=I("section"),(t=I("h2")).textContent="Words",r=T(),l=0;l<s.length;l+=1)s[l].c();O(t,"class","title is-4"),O(n,"class","words svelte-189pca3")},m(e,a){for(_(e,n,a),k(n,t),k(n,r),l=0;l<s.length;l+=1)s[l].m(n,null)},p(e,t){const r=t.$tag.words;s=Ie(s,e,o,1,t,r,a,n,De,qm,null,Tm)},d(e){for(e&&D(n),l=0;l<s.length;l+=1)s[l].d()}}}function qm(e,n){var t,r,s,a=n.word.english+"";return{key:e,first:null,c(){t=I("a"),r=M(a),O(t,"href",s="#/word/"+n.word.id),this.first=t},m(e,n){_(e,t,n),k(t,r)},p(e,n){e.$tag&&a!==(a=n.word.english+"")&&L(r,a),e.$tag&&s!==(s="#/word/"+n.word.id)&&O(t,"href",s)},d(e){e&&D(t)}}}function Hm(e){var n,t,r,s,a,i,o=new xn({props:{errors:e.errors}}),l=[Om,Em],c=[];function d(e,n){return n.$tag&&n.$tag.id===n.id?0:n.errors?-1:1}return~(r=d(0,e))&&(s=c[r]=l[r](e)),{c(){n=I("section"),o.$$.fragment.c(),t=T(),s&&s.c(),a=A(),O(n,"class","errors svelte-189pca3")},m(e,s){_(e,n,s),Te(o,n,null),_(e,t,s),~r&&c[r].m(e,s),_(e,a,s),i=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),o.$set(t);var i=r;(r=d(0,n))===i?~r&&c[r].p(e,n):(s&&(ge(),ve(c[i],1,1,()=>{c[i]=null}),he()),~r?((s=c[r])||(s=c[r]=l[r](n)).c(),$e(s,1),s.m(a.parentNode,a)):s=null)},i(e){i||($e(o.$$.fragment,e),$e(s),i=!0)},o(e){ve(o.$$.fragment,e),ve(s),i=!1},d(e){e&&D(n),Ae(o),e&&D(t),~r&&c[r].d(e),e&&D(a)}}}function Fm(e,n,t){let r;d(e,Xd,e=>{t("$tag",r=e)});let{id:s}=n,a="";return J(async()=>{if(!r||r.id!==s)try{await Xd.get(s)}catch(e){t("errors",a=e),je.add({text:"Could not get related items from server",type:"danger"})}}),e.$set=e=>{"id"in e&&t("id",s=e.id)},{id:s,errors:a,$tag:r}}class Wm extends Oe{constructor(e){super(),Ee(this,e,Fm,Hm,o,["id"])}}function Ym(e){var n,t=new Wm({props:{id:e.openTag.id}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.openTag&&(r.id=n.openTag.id),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Um(e){var n,r,s,a,i,o=[{errors:e.errors},{loading:e.loading},e.openTag];let l={};for(var c=0;c<o.length;c+=1)l=t(l,o[c]);var d=new Sm({props:l});d.$on("submit",e.handleSubmit),d.$on("reset",e.reset);var u=e.openTag.connections&&Ym(e);return{c(){(n=I("h2")).textContent="Tag details",r=T(),d.$$.fragment.c(),s=T(),u&&u.c(),a=A(),O(n,"class","title")},m(e,t){_(e,n,t),_(e,r,t),Te(d,e,t),_(e,s,t),u&&u.m(e,t),_(e,a,t),i=!0},p(e,n){var t=e.errors||e.loading||e.openTag?Ce(o,[e.errors&&{errors:n.errors},e.loading&&{loading:n.loading},e.openTag&&n.openTag]):{};d.$set(t),n.openTag.connections?u?(u.p(e,n),$e(u,1)):((u=Ym(n)).c(),$e(u,1),u.m(a.parentNode,a)):u&&(ge(),ve(u,1,1,()=>{u=null}),he())},i(e){i||($e(d.$$.fragment,e),$e(u),i=!0)},o(e){ve(d.$$.fragment,e),ve(u),i=!1},d(e){e&&(D(n),D(r)),Ae(d,e),e&&D(s),u&&u.d(e),e&&D(a)}}}function Bm(e,n,t){let r;d(e,Jd,e=>{t("$tags",r=e)});let{openTag:s}=n,a="",i=!1;const o=()=>{t("errors",a=""),t("openTag",s=!1)};return e.$set=e=>{"openTag"in e&&t("openTag",s=e.openTag)},{openTag:s,errors:a,loading:i,reset:o,handleSubmit:async({detail:e})=>{t("loading",i=!0);try{if(r&&r.find(n=>n.name===e.name))throw new Error(`The tag '${e.name}' already exists.`);await Jd.patch({id:e.id,input:{name:e.name}}),je.add({text:`Updated tag to '${e.name}'`,type:"success"}),o()}catch(e){t("errors",a=e),je.add({text:"Could not update tag.",type:"danger"})}finally{t("loading",i=!1)}}}}class Gm extends Oe{constructor(e){super(),Ee(this,e,Bm,Um,o,["openTag"])}}function Zm(e,n,t){const r=Object.create(e);return r.tag=n[t],r}function Vm(e){var n,t,r,s,a,i=e.$tags.length+"",o=[],l=new Map,c=e.$tags;const d=e=>e.tag.id;for(var u=0;u<c.length;u+=1){let n=Zm(e,c,u),t=d(n);l.set(t,o[u]=Qm(t,n))}return{c(){for(n=I("h2"),t=M(i),r=M(" tags. Click to edit."),s=T(),a=I("div"),u=0;u<o.length;u+=1)o[u].c();O(n,"class","title is-4"),O(a,"class","field is-grouped is-grouped-multiline")},m(e,i){for(_(e,n,i),k(n,t),k(n,r),_(e,s,i),_(e,a,i),u=0;u<o.length;u+=1)o[u].m(a,null)},p(e,n){e.$tags&&i!==(i=n.$tags.length+"")&&L(t,i);const r=n.$tags;o=Ie(o,e,d,1,n,r,l,a,De,Qm,null,Zm)},d(e){for(e&&(D(n),D(s),D(a)),u=0;u<o.length;u+=1)o[u].d()}}}function Jm(e){var n,t,r=e.tag.connections+"";return{c(){n=I("span"),t=M(r),O(n,"class","tag svelte-xf633j")},m(e,r){_(e,n,r),k(n,t)},p(e,n){e.$tags&&r!==(r=n.tag.connections+"")&&L(t,r)},d(e){e&&D(n)}}}function Xm(e){var n,t;function r(){return e.click_handler_1(e)}return{c(){O(n=I("span"),"class","tag is-delete svelte-xf633j"),t=N(n,"click",r)},m(e,t){_(e,n,t)},p(n,t){e=t},d(e){e&&D(n),t()}}}function Qm(e,n){var t,r,s,a,i,o,l,c=n.tag.name+"";function d(){return n.click_handler(n)}function u(e,n){return 0===n.tag.connections?Xm:Jm}var p=u(0,n),m=p(n);return{key:e,first:null,c(){t=I("div"),r=I("div"),s=I("span"),a=M(c),i=T(),m.c(),o=T(),O(s,"class","tag is-dark svelte-xf633j"),O(r,"class","tags has-addons"),O(t,"class","control"),l=N(s,"click",d),this.first=t},m(e,n){_(e,t,n),k(t,r),k(r,s),k(s,a),k(r,i),m.m(r,null),k(t,o)},p(e,t){n=t,e.$tags&&c!==(c=n.tag.name+"")&&L(a,c),p===(p=u(0,n))&&m?m.p(e,n):(m.d(1),(m=p(n))&&(m.c(),m.m(r,null)))},d(e){e&&D(t),m.d(),l()}}}function Km(e){var n,t;function r(t){e.edittag_openTag_binding.call(null,t),n=!0,le(()=>n=!1)}let s={};void 0!==e.openTag&&(s.openTag=e.openTag);var a=new Gm({props:s});return ne.push(()=>Me(a,"openTag",r)),{c(){a.$$.fragment.c()},m(e,n){Te(a,e,n),t=!0},p(e,t){var r={};!n&&e.openTag&&(r.openTag=t.openTag),a.$set(r)},i(e){t||($e(a.$$.fragment,e),t=!0)},o(e){ve(a.$$.fragment,e),t=!1},d(e){Ae(a,e)}}}function ef(e){var n,t,r=e.openTag&&Km(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.openTag?r?(r.p(e,t),$e(r,1)):((r=Km(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function nf(e){var n,t;function r(t){e.deleteitem_open_binding.call(null,t),n=!0,le(()=>n=!1)}let s={id:e.deleteTag.id,store:Jd,type:"tag",name:e.deleteTag.name,next:"/tags"};void 0!==e.deleteTag&&(s.open=e.deleteTag);var a=new Ln({props:s});return ne.push(()=>Me(a,"open",r)),{c(){a.$$.fragment.c()},m(e,n){Te(a,e,n),t=!0},p(e,t){var r={};e.deleteTag&&(r.id=t.deleteTag.id),e.tags&&(r.store=Jd),e.deleteTag&&(r.name=t.deleteTag.name),!n&&e.deleteTag&&(r.open=t.deleteTag),a.$set(r)},i(e){t||($e(a.$$.fragment,e),t=!0)},o(e){ve(a.$$.fragment,e),t=!1},d(e){Ae(a,e)}}}function tf(e){var n,t,r,s,a,i,o,l,c,d,u,p=new Mm({}),m=new xn({props:{errors:e.errors}}),f=e.$tags&&e.$tags.length>0&&Vm(e);function g(n){e.modal_open_binding.call(null,n),l=!0,le(()=>l=!1)}let h={$$slots:{default:[ef]},$$scope:{ctx:e}};void 0!==e.openTag&&(h.open=e.openTag);var $=new Mn({props:h});ne.push(()=>Me($,"open",g));var v=e.deleteTag&&nf(e);return{c(){n=T(),(t=I("h1")).textContent="Tags",r=T(),p.$$.fragment.c(),s=T(),m.$$.fragment.c(),a=T(),i=I("div"),f&&f.c(),o=T(),$.$$.fragment.c(),c=T(),v&&v.c(),d=A(),document.title="Tags",O(t,"class","title"),O(i,"class","tag-list svelte-xf633j")},m(e,l){_(e,n,l),_(e,t,l),_(e,r,l),Te(p,e,l),_(e,s,l),Te(m,e,l),_(e,a,l),_(e,i,l),f&&f.m(i,null),_(e,o,l),Te($,e,l),_(e,c,l),v&&v.m(e,l),_(e,d,l),u=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),m.$set(t),n.$tags&&n.$tags.length>0?f?f.p(e,n):((f=Vm(n)).c(),f.m(i,null)):f&&(f.d(1),f=null);var r={};(e.$$scope||e.openTag)&&(r.$$scope={changed:e,ctx:n}),!l&&e.openTag&&(r.open=n.openTag),$.$set(r),n.deleteTag?v?(v.p(e,n),$e(v,1)):((v=nf(n)).c(),$e(v,1),v.m(d.parentNode,d)):v&&(ge(),ve(v,1,1,()=>{v=null}),he())},i(e){u||($e(p.$$.fragment,e),$e(m.$$.fragment,e),$e($.$$.fragment,e),$e(v),u=!0)},o(e){ve(p.$$.fragment,e),ve(m.$$.fragment,e),ve($.$$.fragment,e),ve(v),u=!1},d(e){e&&(D(n),D(t),D(r)),Ae(p,e),e&&D(s),Ae(m,e),e&&(D(a),D(i)),f&&f.d(),e&&D(o),Ae($,e),e&&D(c),v&&v.d(e),e&&D(d)}}}function rf(e,n,t){let r;d(e,Jd,e=>{t("$tags",r=e)});let s,a,i="";return J(async()=>{try{await Jd.get()}catch(e){t("errors",i=e),je.add({text:"Coudn't load tags from server",type:"danger"})}}),{errors:i,openTag:s,deleteTag:a,$tags:r,click_handler:function({tag:e}){t("openTag",s=e)},click_handler_1:function({tag:e}){t("deleteTag",a=e)},edittag_openTag_binding:function(e){t("openTag",s=e)},modal_open_binding:function(e){t("openTag",s=e)},deleteitem_open_binding:function(e){t("deleteTag",a=e)}}}const sf=(()=>{const{subscribe:e,set:n}=Re();return{subscribe:e,get:async()=>{const e=await en("\n{\n  me {\n    id\n    username\n  }\n}\n");n(e.me)}}})();function af(n){var t,r=new It({props:{what:"user"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function of(e){var n,t=new gr({props:{$$slots:{default:[lf]},$$scope:{ctx:e}}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};(e.$$scope||e.$me)&&(r.$$scope={changed:e,ctx:n}),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function lf(e){var n,t,r,s,a,i,o,l,c,d=e.$me.username+"",u=e.$me.id+"";return{c(){(n=I("dt")).textContent="Username:",t=T(),r=I("dd"),s=M(d),a=T(),(i=I("dt")).textContent="ID:",o=T(),l=I("dd"),c=M(u)},m(e,d){_(e,n,d),_(e,t,d),_(e,r,d),k(r,s),_(e,a,d),_(e,i,d),_(e,o,d),_(e,l,d),k(l,c)},p(e,n){e.$me&&d!==(d=n.$me.username+"")&&L(s,d),e.$me&&u!==(u=n.$me.id+"")&&L(c,u)},d(e){e&&(D(n),D(t),D(r),D(a),D(i),D(o),D(l))}}}function cf(e){var n,t,r,s,a,i,o=[of,af],l=[];function c(e,n){return n.$me?0:1}return r=c(0,e),s=l[r]=o[r](e),{c(){(n=I("h1")).textContent="User Profile",t=T(),s.c(),a=A(),O(n,"class","title")},m(e,s){_(e,n,s),_(e,t,s),l[r].m(e,s),_(e,a,s),i=!0},p(e,n){var t=r;(r=c(0,n))===t?l[r].p(e,n):(ge(),ve(l[t],1,1,()=>{l[t]=null}),he(),(s=l[r])||(s=l[r]=o[r](n)).c(),$e(s,1),s.m(a.parentNode,a))},i(e){i||($e(s),i=!0)},o(e){ve(s),i=!1},d(e){e&&(D(n),D(t)),l[r].d(e),e&&D(a)}}}function df(e,n,t){let r;return d(e,sf,e=>{t("$me",r=e)}),J(async()=>{sf.get()}),{$me:r}}const uf="\n{\n  classSessions(where: {stage_in: [Active, Started]}) {\n    id\n    stage\n    startsAt\n    startedAt\n    endsAt\n    group {\n      id\n    }\n  }\n}\n",pf="\nsubscription {\n  classSessions(where: { node: {stage_in: [Active, Started]}}) {\n    node {\n      id\n      stage\n      startsAt\n      startedAt\n      endsAt\n      group {\n        id\n      }\n    } \n  }\n}\n";function mf(n){var t,r,s;return{c(){t=I("div"),r=I("p"),s=M(n.text),R(r,"font-size",n.fontSize+"px"),O(t,"class","wrapper svelte-1e7xmbk")},m(e,a){_(e,t,a),k(t,r),k(r,s),n.p_binding(r)},p(e,n){e.text&&L(s,n.text),e.fontSize&&R(r,"font-size",n.fontSize+"px")},i:e,o:e,d(e){e&&D(t),n.p_binding(null)}}}function ff(e,n,t){let r,{text:s="this is stretchy",padding:a=5}=n,i=14,{minSize:o=14,maxSize:l=512}=n;return e.$set=e=>{"text"in e&&t("text",s=e.text),"padding"in e&&t("padding",a=e.padding),"minSize"in e&&t("minSize",o=e.minSize),"maxSize"in e&&t("maxSize",l=e.maxSize)},e.$$.update=(e={span:1,minSize:1,fontSize:1,maxSize:1})=>{if((e.span||e.minSize||e.fontSize||e.maxSize)&&r){const e=r.parentNode.clientWidth,n=r.scrollWidth;t("fontSize",i=Math.min(Math.max(o,(e-2*i)/n*i),l))}},{span:r,text:s,padding:a,fontSize:i,minSize:o,maxSize:l,p_binding:function(e){ne[e?"unshift":"push"](()=>{t("span",r=e)})}}}class gf extends Oe{constructor(e){super(),Ee(this,e,ff,mf,o,["text","padding","minSize","maxSize"])}}function hf(e){var n,t=new gf({props:{text:"waiting on "+e.absentStudents,minSize:"32",maxSize:"156"}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.absentStudents&&(r.text="waiting on "+n.absentStudents),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function $f(e){var n,t,r,s,a,i=new gf({props:{text:e.$session.group.name+" class lesson "+e.$session.number,maxSize:"300"}}),o=new gf({props:{text:(e.timeDirection(e.$session.startsAt,e.$time)>0?"starts":"scheduled to start")+"\n        "+e.timeToStart(e.$session.startsAt,e.$time)}}),l=e.absentStudents&&hf(e);return{c(){n=I("main"),i.$$.fragment.c(),t=T(),r=I("div"),o.$$.fragment.c(),s=T(),l&&l.c(),O(r,"class","svelte-1ofj9ck"),q(r,"late",e.timeDirection(e.$session.startsAt,e.$time)<0),O(n,"class","svelte-1ofj9ck")},m(e,c){_(e,n,c),Te(i,n,null),k(n,t),k(n,r),Te(o,r,null),k(n,s),l&&l.m(n,null),a=!0},p(e,t){var s={};e.$session&&(s.text=t.$session.group.name+" class lesson "+t.$session.number),i.$set(s);var a={};(e.timeDirection||e.$session||e.$time||e.timeToStart)&&(a.text=(t.timeDirection(t.$session.startsAt,t.$time)>0?"starts":"scheduled to start")+"\n        "+t.timeToStart(t.$session.startsAt,t.$time)),o.$set(a),(e.timeDirection||e.$session||e.$time)&&q(r,"late",t.timeDirection(t.$session.startsAt,t.$time)<0),t.absentStudents?l?(l.p(e,t),$e(l,1)):((l=hf(t)).c(),$e(l,1),l.m(n,null)):l&&(ge(),ve(l,1,1,()=>{l=null}),he())},i(e){a||($e(i.$$.fragment,e),$e(o.$$.fragment,e),$e(l),a=!0)},o(e){ve(i.$$.fragment,e),ve(o.$$.fragment,e),ve(l),a=!1},d(e){e&&D(n),Ae(i),Ae(o),l&&l.d()}}}function vf(e,n,t){let r,s,a;d(e,Uo,e=>{t("$sessionStudents",r=e)}),d(e,Yo,e=>{t("$session",s=e)}),d(e,Js,e=>{t("$time",a=e)});let i;return e.$$.update=(e={$sessionStudents:1})=>{e.$sessionStudents&&t("absentStudents",i=r&&r.filter(e=>!e.attendance||"Present"!==e.attendance.status).map(e=>e.englishName||e.chineseName).join(", "))},{timeToStart:(e,n)=>(function(e,n,t){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var r=t||{},s=r.locale||ma;if(!s.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var a=ra(e,n);if(isNaN(a))throw new RangeError("Invalid time value");var i,o,l=ni(r);l.addSuffix=Boolean(r.addSuffix),l.comparison=a,a>0?(i=Xs(n),o=Xs(e)):(i=Xs(e),o=Xs(n));var c,d=null==r.roundingMethod?"round":String(r.roundingMethod);if("floor"===d)c=Math.floor;else if("ceil"===d)c=Math.ceil;else{if("round"!==d)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");c=Math.round}var u,p=aa(o,i),m=c((p-(ea(o)-ea(i))/1e3)/60);if("second"===(u=null==r.unit?m<1?"second":m<60?"minute":m<oi?"hour":m<li?"day":m<ci?"month":"year":String(r.unit)))return s.formatDistance("xSeconds",p,l);if("minute"===u)return s.formatDistance("xMinutes",m,l);if("hour"===u){var f=c(m/60);return s.formatDistance("xHours",f,l)}if("day"===u){var g=c(m/oi);return s.formatDistance("xDays",g,l)}if("month"===u){var h=c(m/li);return s.formatDistance("xMonths",h,l)}if("year"===u){var $=c(m/ci);return s.formatDistance("xYears",$,l)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")})(new Date(e),n,{addSuffix:!0}),timeDirection:(e,n)=>new Date(e)-n,absentStudents:i,$session:s,$time:a}}class bf extends Oe{constructor(e){super(),Ee(this,e,vf,$f,o,[])}}const wf=(()=>{const{subscribe:e,update:n}=Re(null,e=>{const n=Yo.subscribe(n=>{n&&en(Oo,{classSessionId:n.id}).then(n=>{e(n.points)})});return()=>n()});return{subscribe:e,update:n}})();function yf(e){var n,t;return{c(){n=C("text"),t=M(e.number),O(n,"x","50%"),O(n,"y","60%"),O(n,"dominant-baseline","middle"),O(n,"text-anchor","middle"),O(n,"fill","black"),O(n,"font-size","0.8rem")},m(e,r){_(e,n,r),k(n,t)},p(e,n){e.number&&L(t,n.number)},d(e){e&&D(n)}}}function xf(n){var t,r,s=n.number&&yf(n);return{c(){t=C("svg"),r=C("path"),s&&s.c(),O(r,"d","M32.143 12.403c-.494-1.545-3.213-1.898-6.092-2.279-1.578-.207-3.371-.441-3.912-.842-.545-.398-1.305-2.035-1.977-3.482C18.94 3.169 17.783.687 16.165.683l-.03-.005c-1.604.027-2.773 2.479-4.016 5.082-.685 1.439-1.464 3.07-2.007 3.465-.549.391-2.342.611-3.925.803-2.876.35-5.599.678-6.107 2.215s1.479 3.426 3.585 5.422c1.156 1.098 2.465 2.342 2.671 2.982s-.143 2.416-.448 3.977c-.558 2.844-1.085 5.537.219 6.5.312.223.704.336 1.167.326 1.331-.021 3.246-1.057 5.097-2.061 1.387-.758 2.96-1.613 3.66-1.621.677 0 2.255.879 3.647 1.654 1.893 1.051 3.852 2.139 5.185 2.117.416-.006.771-.113 1.061-.322 1.312-.945.812-3.637.285-6.492-.29-1.564-.615-3.344-.41-3.984.212-.637 1.536-1.865 2.703-2.955 2.125-1.977 4.131-3.838 3.641-5.383z"),O(t,"class","star svelte-i1zisd"),O(t,"xmlns","http://www.w3.org/2000/svg"),R(t,"--hue",n.hue(n.index)),R(t,"--size",n.size),O(t,"viewBox","0 0 32.218 32.218"),q(t,"group",n.group)},m(e,n){_(e,t,n),k(t,r),s&&s.m(t,null)},p(e,n){n.number?s?s.p(e,n):((s=yf(n)).c(),s.m(t,null)):s&&(s.d(1),s=null),e.index&&R(t,"--hue",n.hue(n.index)),e.size&&R(t,"--size",n.size),e.group&&q(t,"group",n.group)},i:e,o:e,d(e){e&&D(t),s&&s.d()}}}function kf(e,n,t){let{size:r="8rem",group:s=!1,index:a=0,number:i=a+1}=n;return e.$set=e=>{"size"in e&&t("size",r=e.size),"group"in e&&t("group",s=e.group),"index"in e&&t("index",a=e.index),"number"in e&&t("number",i=e.number)},{size:r,group:s,index:a,number:i,hue:e=>30*e}}class _f extends Oe{constructor(e){super(),Ee(this,e,kf,xf,o,["size","group","index","number"])}}function Df(e,n,t){const r=Object.create(e);return r.point=n[t],r.i=t,r}function Sf(e){for(var n,t,r={length:e.pointsTally},s=[],a=0;a<r.length;a+=1)s[a]=If(Df(e,r,a));const i=e=>ve(s[e],1,1,()=>{s[e]=null});return{c(){for(var e=0;e<s.length;e+=1)s[e].c();n=A()},m(e,r){for(var a=0;a<s.length;a+=1)s[a].m(e,r);_(e,n,r),t=!0},p(e,t){if(e.pointsTally){r={length:t.pointsTally};for(var a=0;a<r.length;a+=1){const i=Df(t,r,a);s[a]?(s[a].p(e,i),$e(s[a],1)):(s[a]=If(i),s[a].c(),$e(s[a],1),s[a].m(n.parentNode,n))}for(ge(),a=r.length;a<s.length;a+=1)i(a);he()}},i(e){if(!t){for(var n=0;n<r.length;n+=1)$e(s[n]);t=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)ve(s[e]);t=!1},d(e){S(s,e),e&&D(n)}}}function If(n){var t,r,s,a,i=new _f({props:{index:n.i,size:"5rem"}});return{c(){t=I("div"),i.$$.fragment.c(),r=T()},m(e,n){_(e,t,n),Te(i,t,null),k(t,r),a=!0},p:e,i(e){a||($e(i.$$.fragment,e),s||oe(()=>{(s=we(t,Fe,{x:-400})).start()}),a=!0)},o(e){ve(i.$$.fragment,e),a=!1},d(e){e&&D(t),Ae(i)}}}function Cf(e){var n,t,r,s,a,i,o,l,c=e.student.englishName||e.student.chineseName+"",d=e.student.attendance&&"Absent"!==e.student.attendance.status&&Sf(e);return{c(){n=I("li"),t=I("div"),r=I("span"),s=M(c),a=T(),d&&d.c(),i=T(),o=I("div"),O(r,"class","name svelte-qiqagm"),q(r,"glow",e.glow),q(r,"absent",!e.student.attendance||"Absent"===e.student.attendance.status),O(t,"class","content svelte-qiqagm"),O(o,"class","bg svelte-qiqagm"),q(o,"glow",e.glow),O(n,"class","svelte-qiqagm")},m(e,c){_(e,n,c),k(n,t),k(t,r),k(r,s),k(t,a),d&&d.m(t,null),k(n,i),k(n,o),l=!0},p(e,n){l&&!e.student||c===(c=n.student.englishName||n.student.chineseName+"")||L(s,c),e.glow&&q(r,"glow",n.glow),e.student&&q(r,"absent",!n.student.attendance||"Absent"===n.student.attendance.status),n.student.attendance&&"Absent"!==n.student.attendance.status?d?(d.p(e,n),$e(d,1)):((d=Sf(n)).c(),$e(d,1),d.m(t,null)):d&&(ge(),ve(d,1,1,()=>{d=null}),he()),e.glow&&q(o,"glow",n.glow)},i(e){l||($e(d),l=!0)},o(e){ve(d),l=!1},d(e){e&&D(n),d&&d.d()}}}function Mf(e,n,t){let r;d(e,wf,e=>{t("$points",r=e)});let s,{student:a,sessionId:i,glow:o=!1}=n;return e.$set=e=>{"student"in e&&t("student",a=e.student),"sessionId"in e&&t("sessionId",i=e.sessionId),"glow"in e&&t("glow",o=e.glow)},e.$$.update=(e={$points:1,student:1})=>{(e.$points||e.student)&&t("pointsTally",s=r?r.reduce((e,n)=>n.student.id!==a.id?e:e+n.value,0):0)},{student:a,sessionId:i,glow:o,pointsTally:s}}class Tf extends Oe{constructor(e){super(),Ee(this,e,Mf,Cf,o,["student","sessionId","glow"])}}function Af(e,n,t){const r=Object.create(e);return r.student=n[t],r}function Nf(e){var n,t,r,s=[],a=new Map,i=e.$sessionStudents;const o=e=>e.student.id;for(var l=0;l<i.length;l+=1){let n=Af(e,i,l),t=o(n);a.set(t,s[l]=Ef(t,n))}return{c(){for(n=I("section"),t=I("ul"),l=0;l<s.length;l+=1)s[l].c();O(t,"class","svelte-qpkq6m"),O(n,"class","scoreboard svelte-qpkq6m")},m(e,a){for(_(e,n,a),k(n,t),l=0;l<s.length;l+=1)s[l].m(t,null);r=!0},p(e,n){const r=n.$sessionStudents;ge(),s=Ie(s,e,o,1,n,r,a,t,Se,Ef,null,Af),he()},i(e){if(!r){for(var n=0;n<i.length;n+=1)$e(s[n]);r=!0}},o(e){for(l=0;l<s.length;l+=1)ve(s[l]);r=!1},d(e){for(e&&D(n),l=0;l<s.length;l+=1)s[l].d()}}}function Ef(e,n){var t,r,s=new Tf({props:{student:n.student,sessionId:n.$sessionId,glow:n.newPoint&&n.newPoint.student.id===n.student.id}});return{key:e,first:null,c(){t=A(),s.$$.fragment.c(),this.first=t},m(e,n){_(e,t,n),Te(s,e,n),r=!0},p(e,n){var t={};e.$sessionStudents&&(t.student=n.student),e.$sessionId&&(t.sessionId=n.$sessionId),(e.newPoint||e.$sessionStudents)&&(t.glow=n.newPoint&&n.newPoint.student.id===n.student.id),s.$set(t)},i(e){r||($e(s.$$.fragment,e),r=!0)},o(e){ve(s.$$.fragment,e),r=!1},d(e){e&&D(t),Ae(s,e)}}}function Of(e){var n,t,r,s,a,i,o,l=e.$session.group.name+"",c=e.$session.number+"",d=e.$sessionStudents&&Nf(e);return{c(){n=I("h2"),t=M(l),r=M(" class lesson "),s=M(c),a=T(),d&&d.c(),i=A(),O(n,"class","title")},m(e,l){_(e,n,l),k(n,t),k(n,r),k(n,s),_(e,a,l),d&&d.m(e,l),_(e,i,l),o=!0},p(e,n){o&&!e.$session||l===(l=n.$session.group.name+"")||L(t,l),o&&!e.$session||c===(c=n.$session.number+"")||L(s,c),n.$sessionStudents?d?(d.p(e,n),$e(d,1)):((d=Nf(n)).c(),$e(d,1),d.m(i.parentNode,i)):d&&(ge(),ve(d,1,1,()=>{d=null}),he())},i(e){o||($e(d),o=!0)},o(e){ve(d),o=!1},d(e){e&&(D(n),D(a)),d&&d.d(e),e&&D(i)}}}function Lf(e,n,t){let r,s,a;d(e,Uo,e=>{t("$sessionStudents",r=e)}),d(e,Yo,e=>{t("$session",s=e)}),d(e,Wo,e=>{t("$sessionId",a=e)});let i=null;const o=new Audio("sounds/ui-confirmation-alert-a5min.wav"),l=new Audio("sounds/quick-fart.wav"),c=new Audio("sounds/gamelan_glissando_upward_002_538.mp3");J(()=>{c.play();const e=Ws.request({query:Lo,variables:{classSessionId:s.id}}).subscribe({next(e){if(e.data&&e.data.points){const{node:n,mutation:t,previousValues:r}=e.data.points;"CREATED"===t&&u(n),"DELETED"===t&&wf.update(e=>e.filter(e=>e.id!==r.id))}}});return()=>e&&e.unsubscribe()});const u=e=>{(e=>{t("newPoint",i=e),setTimeout(()=>{t("newPoint",i=null)},1e3)})(e),e.value>0?o.play():l.play(),wf.update(n=>[e,...n])};return e.$$.update=(e={$sessionStudents:1})=>{e.$sessionStudents&&console.log(r)},{newPoint:i,$sessionStudents:r,$session:s,$sessionId:a}}class Pf extends Oe{constructor(e){super(),Ee(this,e,Lf,Of,o,[])}}const{Object:Rf}=_e;function zf(e,n,t){const r=Rf.create(e);return r.group=n[t],r.i=t,r}function jf(n){var t,r=new It({props:{what:"results"}});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function qf(n){var t,r=[],s=new Map,a=n.groupedResults;const i=e=>e.group.total;for(var o=0;o<a.length;o+=1){let e=zf(n,a,o),t=i(e);s.set(t,r[o]=Wf(t,e))}return{c(){for(o=0;o<r.length;o+=1)r[o].c();t=A()},m(e,n){for(o=0;o<r.length;o+=1)r[o].m(e,n);_(e,t,n)},p(e,n){const a=n.groupedResults;r=Ie(r,e,i,1,n,a,s,t.parentNode,De,Wf,t,zf)},i:e,o:e,d(e){for(o=0;o<r.length;o+=1)r[o].d(e);e&&D(t)}}}function Hf(e){var n,t,r,s,a=e.group.total+"",i=e.listNames(e.group.students)+"";return{c(){n=I("p"),t=M(a),r=M(" stars: "),s=M(i),O(n,"class","svelte-3ys7yi")},m(e,a){_(e,n,a),k(n,t),k(n,r),k(n,s)},p(e,n){e.groupedResults&&a!==(a=n.group.total+"")&&L(t,a),e.groupedResults&&i!==(i=n.listNames(n.group.students)+"")&&L(s,i)},d(e){e&&D(n)}}}function Ff(e){var n,t,r,s,a,i,o,l,c=e.group.total+"",d=e.listNames(e.group.students)+"";return{c(){n=I("div"),t=I("p"),r=I("i"),s=M("×"),a=M(c),i=T(),o=M(d),l=T(),O(r,"class","fas fa-star bounce svelte-3ys7yi"),O(t,"class","big svelte-3ys7yi"),O(n,"class","winner svelte-3ys7yi")},m(e,c){_(e,n,c),k(n,t),k(t,r),k(t,s),k(t,a),k(t,i),k(t,o),k(n,l)},p(e,n){e.groupedResults&&c!==(c=n.group.total+"")&&L(a,c),e.groupedResults&&d!==(d=n.listNames(n.group.students)+"")&&L(o,d)},d(e){e&&D(n)}}}function Wf(e,n){var t,r;function s(e,n){return 0===n.i?Ff:Hf}var a=s(0,n),i=a(n);return{key:e,first:null,c(){t=A(),i.c(),r=A(),this.first=t},m(e,n){_(e,t,n),i.m(e,n),_(e,r,n)},p(e,n){a===(a=s(0,n))&&i?i.p(e,n):(i.d(1),(i=a(n))&&(i.c(),i.m(r.parentNode,r)))},d(e){e&&D(t),i.d(e),e&&D(r)}}}function Yf(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h=e.$session.group.name+"",$=e.$session.number+"",v=[qf,jf],b=[];function w(e,n){return n.results?0:1}return u=w(0,e),p=b[u]=v[u](e),{c(){(n=I("audio")).innerHTML='<source type="audio/mp3" src="sounds/gamelan_glissando_downward_004_536.mp3">',t=T(),r=I("h2"),s=M(h),a=M(" class lesson "),i=M($),o=M(" ended "),l=M(e.endedDistance),c=T(),d=I("section"),p.c(),m=T(),f=I("span"),O(n,"preload",""),n.autoplay=!0,O(r,"class","title"),O(d,"class","results svelte-3ys7yi"),O(f,"class","bounce")},m(e,p){_(e,n,p),_(e,t,p),_(e,r,p),k(r,s),k(r,a),k(r,i),k(r,o),k(r,l),_(e,c,p),_(e,d,p),b[u].m(d,null),_(e,m,p),_(e,f,p),g=!0},p(e,n){g&&!e.$session||h===(h=n.$session.group.name+"")||L(s,h),g&&!e.$session||$===($=n.$session.number+"")||L(i,$),g&&!e.endedDistance||L(l,n.endedDistance);var t=u;(u=w(0,n))===t?b[u].p(e,n):(ge(),ve(b[t],1,1,()=>{b[t]=null}),he(),(p=b[u])||(p=b[u]=v[u](n)).c(),$e(p,1),p.m(d,null))},i(e){g||($e(p),g=!0)},o(e){ve(p),g=!1},d(e){e&&(D(n),D(t),D(r),D(c),D(d)),b[u].d(),e&&(D(m),D(f))}}}function Uf(e,n,t){let r,s;d(e,Yo,e=>{t("$session",r=e)}),d(e,Js,e=>{t("$time",s=e)});let a=null;J(async()=>{t("results",a=await Zo(r.id))});let i,o;return e.$$.update=(e={$session:1,$time:1,results:1})=>{(e.$session||e.$time)&&t("endedDistance",i=ii(new Date(r.endedAt),new Date(s),{addSuffix:!0})),e.results&&t("groupedResults",o=(e=>{if(!e||0===e.length)return[];const n=e.reduce((e,n)=>{const t=n.pointsTally;return e[t]=e[t]||[],e[t].push(n),e},{});return Object.keys(n).sort((e,n)=>n-e).map((e,t)=>({total:parseInt(e),students:n[e]}))})(a))},{results:a,listNames:e=>{const n=e.map(e=>e.student.englishName||e.student.chineseName);return[n.slice(0,-1).join(", "),n.slice(-1)[0]].join(n.length<2?"":" and ")},$session:r,endedDistance:i,groupedResults:o}}class Bf extends Oe{constructor(e){super(),Ee(this,e,Uf,Yf,o,[])}}function Gf(e){var n,t=new Pf({});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Zf(e){var n,t=new bf({});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Vf(e){var n,t=new It({props:{what:"session"}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Jf(n){var t;return{c(){(t=I("h2")).textContent="No active session found",O(t,"class","title")},m(e,n){_(e,t,n)},i:e,o:e,d(e){e&&D(t)}}}function Xf(e){var n,t=new Bf({});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Qf(e){var n,t,r,s,a,i,o,l,c=[Jf,Vf,Zf,Gf],d=[];function u(e,n){return n.$sessionId?n.$session?"Active"===n.$session.stage?2:"Started"===n.$session.stage?3:-1:1:0}~(a=u(0,e))&&(i=d[a]=c[a](e));var p=e.$session&&"Ended"===e.$session.stage&&Xf();return{c(){n=I("link"),(t=I("style")).textContent="body {\n      background: black;\n    }",r=T(),s=I("div"),i&&i.c(),o=T(),p&&p.c(),document.title="Viewer",O(n,"href","https://fonts.googleapis.com/css?family=Schoolbell"),O(n,"rel","stylesheet"),O(s,"class","svelte-11094u3")},m(e,i){k(document.head,n),k(document.head,t),_(e,r,i),_(e,s,i),~a&&d[a].m(s,null),k(s,o),p&&p.m(s,null),l=!0},p(e,n){var t=a;(a=u(0,n))!==t&&(i&&(ge(),ve(d[t],1,1,()=>{d[t]=null}),he()),~a?((i=d[a])||(i=d[a]=c[a](n)).c(),$e(i,1),i.m(s,o)):i=null),n.$session&&"Ended"===n.$session.stage?p?$e(p,1):((p=Xf()).c(),$e(p,1),p.m(s,null)):p&&(ge(),ve(p,1,1,()=>{p=null}),he())},i(e){l||($e(i),$e(p),l=!0)},o(e){ve(i),ve(p),l=!1},d(e){D(n),D(t),e&&(D(r),D(s)),~a&&d[a].d(),p&&p.d()}}}function Kf(e,n,t){let r,s;return d(e,Wo,e=>{t("$sessionId",r=e)}),d(e,Yo,e=>{t("$session",s=e)}),J(async()=>{const e=await en(uf);e.classSessions[0]&&Wo.set(e.classSessions[0].id);const n=Ws.request({query:pf}).subscribe({next(e){e.data&&e.data.classSessions&&Wo.set(e.data.classSessions.node.id)}});return()=>{n&&n.unsubscribe()}}),{$sessionId:r,$session:s}}var eg={"/":class extends Oe{constructor(e){super(),Ee(this,e,null,$n,o,[])}},"/semesters":class extends Oe{constructor(e){super(),Ee(this,e,At,Tt,o,[])}},"/students":class extends Oe{constructor(e){super(),Ee(this,e,Br,Ur,o,[])}},"/groups":class extends Oe{constructor(e){super(),Ee(this,e,Ps,Ls,o,[])}},"/sessions":class extends Oe{constructor(e){super(),Ee(this,e,To,Mo,o,[])}},"/session/:id":class extends Oe{constructor(e){super(),Ee(this,e,Ld,Od,o,["params"])}},"/lessons":class extends Oe{constructor(e){super(),Ee(this,e,Vd,Zd,o,[])}},"/lesson/:id":class extends Oe{constructor(e){super(),Ee(this,e,Xu,Ju,o,["params"])}},"/edit-lesson/:id":class extends Oe{constructor(e){super(),Ee(this,e,sp,rp,o,["params"])}},"/new-lesson":class extends Oe{constructor(e){super(),Ee(this,e,ip,ap,o,[])}},"/materials":class extends Oe{constructor(e){super(),Ee(this,e,Cp,Ip,o,[])}},"/material/:id":class extends Oe{constructor(e){super(),Ee(this,e,qp,jp,o,["params"])}},"/words":class extends Oe{constructor(e){super(),Ee(this,e,cm,lm,o,[])}},"/word/:id":class extends Oe{constructor(e){super(),Ee(this,e,xm,ym,o,["params"])}},"/tags":class extends Oe{constructor(e){super(),Ee(this,e,rf,tf,o,[])}},"/me":class extends Oe{constructor(e){super(),Ee(this,e,df,cf,o,[])}},"/viewer":class extends Oe{constructor(e){super(),Ee(this,e,Kf,Qf,o,[])}},"/viewer/results/:id":Bf,"/not-found/:item/:id?":hn,"*":hn};function ng(e){var n;return{c(){O(n=I("i"),"class","fas fa-eye-slash")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function tg(e){var n;return{c(){O(n=I("i"),"class","fas fa-eye")},m(e,t){_(e,n,t)},d(e){e&&D(n)}}}function rg(e){var n,t,r,s,i,o,l,c,d,u,p,m,f,g,h,$,v,b,w,y,x,S,C,M,A,L,R,z=new xn({props:{errors:e.errors}});function j(n){e.input0_value_binding.call(null,n),u=!0,le(()=>u=!1)}let H={name:"usernameField",type:"text",label:"Username",required:!0,leftIcon:"user"};void 0!==e.username&&(H.value=e.username);var F=new Bn({props:H});function W(e,n){return n.show?tg:ng}ne.push(()=>Me(F,"value",j));var Y=W(0,e),U=Y(e);return{c(){n=T(),t=I("div"),r=I("div"),(s=I("h1")).textContent="Login",i=T(),(o=I("h3")).textContent="gotta log in to continue.",l=T(),z.$$.fragment.c(),c=T(),d=I("form"),F.$$.fragment.c(),p=T(),(m=I("label")).textContent="Password",f=T(),g=I("div"),h=I("div"),$=I("input"),v=T(),(b=I("span")).innerHTML='<i class="fas fa-key"></i>',w=T(),y=I("div"),x=I("span"),U.c(),S=T(),C=I("div"),M=I("div"),(A=I("button")).textContent="Let me in!",document.title="Login",O(s,"class","title"),O(o,"class","subtitle"),O(m,"class","label"),O(m,"for","passwordField"),O($,"class","input"),O($,"type","password"),$.required=!0,O(b,"class","icon is-small is-left"),O(h,"class","control has-icons-left"),O(x,"class","button is-white showhide svelte-1o7mwy6"),O(y,"class","control"),O(g,"class","field has-addons"),O(A,"type","submit"),O(A,"class","button is-primary is-loading"),q(A,"is-loading",e.loading),O(M,"class","control"),O(C,"class","field"),d.noValidate=!0,O(r,"class","login"),O(t,"class","container-centered svelte-1o7mwy6"),R=[N($,"input",e.input1_input_handler),N(x,"click",e.showPassword),N(d,"submit",E(e.login))]},m(a,u){_(a,n,u),_(a,t,u),k(t,r),k(r,s),k(r,i),k(r,o),k(r,l),Te(z,r,null),k(r,c),k(r,d),Te(F,d,null),k(d,p),k(d,m),k(d,f),k(d,g),k(g,h),k(h,$),P($,e.password),e.input1_binding($),k(h,v),k(h,b),k(g,w),k(g,y),k(y,x),U.m(x,null),k(d,S),k(d,C),k(C,M),k(M,A),e.button_binding(A),e.form_1_binding(d),L=!0},p(e,n){var t={};e.errors&&(t.errors=n.errors),z.$set(t);var r={};!u&&e.username&&(r.value=n.username),F.$set(r),e.password&&$.value!==n.password&&P($,n.password),Y!==(Y=W(0,n))&&(U.d(1),(U=Y(n))&&(U.c(),U.m(x,null))),e.loading&&q(A,"is-loading",n.loading)},i(e){L||($e(z.$$.fragment,e),$e(F.$$.fragment,e),L=!0)},o(e){ve(z.$$.fragment,e),ve(F.$$.fragment,e),L=!1},d(r){r&&(D(n),D(t)),Ae(z),Ae(F),e.input1_binding(null),U.d(),e.button_binding(null),e.form_1_binding(null),a(R)}}}function sg(e,n,t){let r,s,a,i="",o="",l="",c=!1,d=!1;return{username:i,password:o,errors:l,loading:c,show:d,submit:r,passInput:s,form:a,login:async()=>{if(a.checkValidity()){t("loading",c=!0),r.disabled=!0,t("submit",r);try{await tn.login(i,o),je.add({text:`Logged in as '${i}'`,type:"success"})}catch(e){t("errors",l=e),je.add({text:"Login failed.",type:"danger"}),r.disabled=!1,t("submit",r)}finally{t("loading",c=!1)}}else je.add({text:"Please fix form errors first.",type:"danger"})},showPassword:()=>{s.type=d?"password":"text",t("passInput",s),t("show",d=!d)},input0_value_binding:function(e){t("username",i=e)},input1_input_handler:function(){o=this.value,t("password",o)},input1_binding:function(e){ne[e?"unshift":"push"](()=>{t("passInput",s=e)})},button_binding:function(e){ne[e?"unshift":"push"](()=>{t("submit",r=e)})},form_1_binding:function(e){ne[e?"unshift":"push"](()=>{t("form",a=e)})}}}class ag extends Oe{constructor(e){super(),Ee(this,e,sg,rg,o,[])}}function ig(e){var n,t;return{c(){O(n=I("i"),"class",t="fas fa-"+e.icon+" svelte-fam8bh")},m(e,t){_(e,n,t)},p(e,r){e.icon&&t!==(t="fas fa-"+r.icon+" svelte-fam8bh")&&O(n,"class",t)},d(e){e&&D(n)}}}function og(n){var t,r,s,a,i=n.icon&&ig(n);return{c(){t=I("a"),i&&i.c(),r=T(),s=M(n.text),O(t,"class","navbar-item svelte-fam8bh"),O(t,"href",a="#"+n.url),q(t,"is-active",n.$location===n.url)},m(e,n){_(e,t,n),i&&i.m(t,null),k(t,r),k(t,s)},p(e,n){n.icon?i?i.p(e,n):((i=ig(n)).c(),i.m(t,r)):i&&(i.d(1),i=null),e.text&&L(s,n.text),e.url&&a!==(a="#"+n.url)&&O(t,"href",a),(e.$location||e.url)&&q(t,"is-active",n.$location===n.url)},i:e,o:e,d(e){e&&D(t),i&&i.d()}}}function lg(e,n,t){let r;d(e,on,e=>{t("$location",r=e)});let{url:s="",text:a="",icon:i=null}=n;return e.$set=e=>{"url"in e&&t("url",s=e.url),"text"in e&&t("text",a=e.text),"icon"in e&&t("icon",i=e.icon)},{url:s,text:a,icon:i,$location:r}}class cg extends Oe{constructor(e){super(),Ee(this,e,lg,og,o,["url","text","icon"])}}function dg(e){var n,t;return{c(){(n=I("div")).innerHTML='<span aria-hidden="true"></span> <span aria-hidden="true"></span> <span aria-hidden="true"></span>',O(n,"role","button"),O(n,"class","navbar-burger burger svelte-3cc10n"),O(n,"aria-label","menu"),O(n,"aria-expanded","false"),O(n,"data-target","navmenu"),q(n,"is-active",e.showMenu),t=N(n,"click",e.click_handler)},m(e,t){_(e,n,t)},p(e,t){e.showMenu&&q(n,"is-active",t.showMenu)},d(e){e&&D(n),t()}}}function ug(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g,h=new cg({props:{url:"/",text:"Dashboard",icon:"chalkboard-teacher"}}),$=new cg({props:{url:"/sessions",text:"Schedule",icon:"calendar-alt"}}),v=new cg({props:{url:"/groups",text:"Groups",icon:"users"}}),b=new cg({props:{url:"/students",text:"Students",icon:"address-card"}}),w=new cg({props:{url:"/semesters",text:"Semesters",icon:"school"}}),y=new cg({props:{url:"/lessons",text:"Lessons"}}),x=new cg({props:{url:"/materials",text:"Materials"}}),S=new cg({props:{url:"/words",text:"Words"}}),C=new cg({props:{url:"/tags",text:"Tags"}});return{c(){h.$$.fragment.c(),n=T(),$.$$.fragment.c(),t=T(),v.$$.fragment.c(),r=T(),b.$$.fragment.c(),s=T(),w.$$.fragment.c(),a=T(),i=I("div"),(o=I("span")).innerHTML='<i class="fas fa-book svelte-3cc10n"></i>Contents\n\t\t\t          ',l=T(),c=I("div"),y.$$.fragment.c(),d=T(),x.$$.fragment.c(),u=T(),S.$$.fragment.c(),p=T(),m=I("hr"),f=T(),C.$$.fragment.c(),O(o,"class","navbar-link svelte-3cc10n"),O(m,"class","navbar-divider svelte-3cc10n"),O(c,"class","navbar-dropdown svelte-3cc10n"),O(i,"class","navbar-item has-dropdown is-hoverable svelte-3cc10n")},m(e,D){Te(h,e,D),_(e,n,D),Te($,e,D),_(e,t,D),Te(v,e,D),_(e,r,D),Te(b,e,D),_(e,s,D),Te(w,e,D),_(e,a,D),_(e,i,D),k(i,o),k(i,l),k(i,c),Te(y,c,null),k(c,d),Te(x,c,null),k(c,u),Te(S,c,null),k(c,p),k(c,m),k(c,f),Te(C,c,null),g=!0},i(e){g||($e(h.$$.fragment,e),$e($.$$.fragment,e),$e(v.$$.fragment,e),$e(b.$$.fragment,e),$e(w.$$.fragment,e),$e(y.$$.fragment,e),$e(x.$$.fragment,e),$e(S.$$.fragment,e),$e(C.$$.fragment,e),g=!0)},o(e){ve(h.$$.fragment,e),ve($.$$.fragment,e),ve(v.$$.fragment,e),ve(b.$$.fragment,e),ve(w.$$.fragment,e),ve(y.$$.fragment,e),ve(x.$$.fragment,e),ve(S.$$.fragment,e),ve(C.$$.fragment,e),g=!1},d(e){Ae(h,e),e&&D(n),Ae($,e),e&&D(t),Ae(v,e),e&&D(r),Ae(b,e),e&&D(s),Ae(w,e),e&&(D(a),D(i)),Ae(y),Ae(x),Ae(S),Ae(C)}}}function pg(e){var n,t,r,s,a,i=new cg({props:{url:"/me",icon:"user-circle",text:e.$auth.username}});return{c(){i.$$.fragment.c(),n=T(),t=I("div"),(r=I("button")).innerHTML="<strong>Log out</strong>",O(r,"class","button is-text"),O(t,"class","buttons"),a=N(r,"click",e.logout)},m(e,a){Te(i,e,a),_(e,n,a),_(e,t,a),k(t,r),s=!0},p(e,n){var t={};e.$auth&&(t.text=n.$auth.username),i.$set(t)},i(e){s||($e(i.$$.fragment,e),s=!0)},o(e){ve(i.$$.fragment,e),s=!1},d(e){Ae(i,e),e&&(D(n),D(t)),a()}}}function mg(e){var n,t,r,s,a,i,o,l,c,d,u,p=e.$auth.username&&dg(e),m=e.$auth.username&&ug(),f=e.$auth.username&&pg(e);return{c(){n=I("nav"),t=I("div"),(r=I("a")).innerHTML='<img class="logo svelte-3cc10n" src="kumu-logo.png" height="28" alt="levitation logo"> <span class="title is-4 appname svelte-3cc10n">Kumu</span>',s=T(),p&&p.c(),a=T(),i=I("div"),o=I("div"),m&&m.c(),l=T(),c=I("div"),f&&f.c(),O(r,"class","navbar-item svelte-3cc10n"),O(r,"href","#/"),O(t,"class","navbar-brand svelte-3cc10n"),O(o,"class","navbar-start svelte-3cc10n"),O(c,"class","navbar-end svelte-3cc10n"),O(i,"id","navmenu"),O(i,"class","navbar-menu svelte-3cc10n"),q(i,"is-active",e.showMenu),O(n,"class","navbar is-black svelte-3cc10n"),O(n,"role","navigation"),O(n,"aria-label","main navigation"),u=N(i,"click",e.click_handler_1)},m(e,u){_(e,n,u),k(n,t),k(t,r),k(t,s),p&&p.m(t,null),k(n,a),k(n,i),k(i,o),m&&m.m(o,null),k(i,l),k(i,c),f&&f.m(c,null),d=!0},p(e,n){n.$auth.username?p?p.p(e,n):((p=dg(n)).c(),p.m(t,null)):p&&(p.d(1),p=null),n.$auth.username?m?$e(m,1):((m=ug()).c(),$e(m,1),m.m(o,null)):m&&(ge(),ve(m,1,1,()=>{m=null}),he()),n.$auth.username?f?(f.p(e,n),$e(f,1)):((f=pg(n)).c(),$e(f,1),f.m(c,null)):f&&(ge(),ve(f,1,1,()=>{f=null}),he()),e.showMenu&&q(i,"is-active",n.showMenu)},i(e){d||($e(m),$e(f),d=!0)},o(e){ve(m),ve(f),d=!1},d(e){e&&D(n),p&&p.d(),m&&m.d(),f&&f.d(),u()}}}function fg(e,n,t){let r;d(e,tn,e=>{t("$auth",r=e)});let s=!1;return{showMenu:s,logout:async()=>{const e=await tn.logout();je.add({text:`Logged out user '${e}'`,type:"success"})},$auth:r,click_handler:function(){t("showMenu",s=!s)},click_handler_1:function(){t("showMenu",s=!s)}}}class gg extends Oe{constructor(e){super(),Ee(this,e,fg,mg,o,[])}}function hg(e){var n,t,r,s,a,i,o,l;const c=e.$$slots.default,d=u(c,e,null);return{c(){n=I("div"),t=I("p"),r=I("i"),s=T(),a=M(e.title),i=T(),o=I("section"),d&&d.c(),O(r,"class","fas fa-exclamation-triangle svelte-1ipf0fy"),O(t,"class","warning-message-header svelte-1ipf0fy"),O(o,"class","warning-message-body svelte-1ipf0fy"),O(n,"class","warning svelte-1ipf0fy")},l(e){d&&d.l(section_nodes)},m(e,c){_(e,n,c),k(n,t),k(t,r),k(t,s),k(t,a),k(n,i),k(n,o),d&&d.m(o,null),l=!0},p(e,n){l&&!e.title||L(a,n.title),d&&d.p&&e.$$scope&&d.p(m(c,n,e,null),p(c,n,null))},i(e){l||($e(d,e),l=!0)},o(e){ve(d,e),l=!1},d(e){e&&D(n),d&&d.d(e)}}}function $g(e,n,t){let{title:r="Warning"}=n,{$$slots:s={},$$scope:a}=n;return e.$set=e=>{"title"in e&&t("title",r=e.title),"$$scope"in e&&t("$$scope",a=e.$$scope)},{title:r,$$slots:s,$$scope:a}}class vg extends Oe{constructor(e){super(),Ee(this,e,$g,hg,o,["title"])}}function bg(e){var n,t,r=e.uri!==`/session/${e.$todaysSessions.now.id}`&&wg(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.uri!==`/session/${t.$todaysSessions.now.id}`?r?(r.p(e,t),$e(r,1)):((r=wg(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function wg(e){var n,t=new vg({props:{title:e.$todaysSessions.now.group.name+" class is on right now!",$$slots:{default:[xg]},$$scope:{ctx:e}}});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},p(e,n){var r={};e.$todaysSessions&&(r.title=n.$todaysSessions.now.group.name+" class is on right now!"),(e.$$scope||e.$todaysSessions)&&(r.$$scope={changed:e,ctx:n}),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function yg(e){var n,t,r,s,a,i,o,l,c,d,u,p,m,f,g=e.dateString(e.$todaysSessions.now.startsAt)+"",h=e.dateString(e.$todaysSessions.now.endsAt)+"",$=e.$todaysSessions.now.stage+"";return{c(){(n=I("dt")).textContent="Started:",t=T(),r=I("dd"),s=M(g),a=T(),(i=I("dt")).textContent="Ends:",o=T(),l=I("dd"),c=M(h),d=T(),(u=I("dt")).textContent="Status:",p=T(),m=I("dd"),f=M($)},m(e,g){_(e,n,g),_(e,t,g),_(e,r,g),k(r,s),_(e,a,g),_(e,i,g),_(e,o,g),_(e,l,g),k(l,c),_(e,d,g),_(e,u,g),_(e,p,g),_(e,m,g),k(m,f)},p(e,n){e.$todaysSessions&&g!==(g=n.dateString(n.$todaysSessions.now.startsAt)+"")&&L(s,g),e.$todaysSessions&&h!==(h=n.dateString(n.$todaysSessions.now.endsAt)+"")&&L(c,h),e.$todaysSessions&&$!==($=n.$todaysSessions.now.stage+"")&&L(f,$)},d(e){e&&(D(n),D(t),D(r),D(a),D(i),D(o),D(l),D(d),D(u),D(p),D(m))}}}function xg(e){var n,t,r,s,a,i,o,l=new gr({props:{$$slots:{default:[yg]},$$scope:{ctx:e}}});return{c(){n=I("div"),l.$$.fragment.c(),t=T(),r=I("a"),s=I("i"),a=M("  Go now"),O(s,"class","fas fa-running"),O(r,"href",i="#/session/"+e.$todaysSessions.now.id),O(r,"class","button is-link svelte-1byku66"),O(n,"class","warning svelte-1byku66")},m(e,i){_(e,n,i),Te(l,n,null),k(n,t),k(n,r),k(r,s),k(r,a),o=!0},p(e,n){var t={};(e.$$scope||e.$todaysSessions)&&(t.$$scope={changed:e,ctx:n}),l.$set(t),o&&!e.$todaysSessions||i===(i="#/session/"+n.$todaysSessions.now.id)||O(r,"href",i)},i(e){o||($e(l.$$.fragment,e),o=!0)},o(e){ve(l.$$.fragment,e),o=!1},d(e){e&&D(n),Ae(l)}}}function kg(e){var n,t,r=e.$todaysSessions&&e.$todaysSessions.now&&"Ended"!==e.$todaysSessions.now.stage&&bg(e);return{c(){r&&r.c(),n=A()},m(e,s){r&&r.m(e,s),_(e,n,s),t=!0},p(e,t){t.$todaysSessions&&t.$todaysSessions.now&&"Ended"!==t.$todaysSessions.now.stage?r?(r.p(e,t),$e(r,1)):((r=bg(t)).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he())},i(e){t||($e(r),t=!0)},o(e){ve(r),t=!1},d(e){r&&r.d(e),e&&D(n)}}}function _g(e,n,t){let r;d(e,Vs,e=>{t("$todaysSessions",r=e)});let{active:s="/",uri:a=location.pathname}=n;return e.$set=e=>{"active"in e&&t("active",s=e.active),"uri"in e&&t("uri",a=e.uri)},{active:s,uri:a,dateString:e=>{return ii(new Date(e),new Date,{addSuffix:!0})},$todaysSessions:r}}class Dg extends Oe{constructor(e){super(),Ee(this,e,_g,kg,o,["active","uri"])}}function Sg(e){var n,t=new gg({});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Ig(n){var t,r=new ag({});return{c(){r.$$.fragment.c()},m(e,n){Te(r,e,n),t=!0},p:e,i(e){t||($e(r.$$.fragment,e),t=!0)},o(e){ve(r.$$.fragment,e),t=!1},d(e){Ae(r,e)}}}function Cg(e){var n,t,r="/viewer"!==e.$location&&Mg(),s=new un({props:{routes:eg}});return{c(){r&&r.c(),n=T(),s.$$.fragment.c()},m(e,a){r&&r.m(e,a),_(e,n,a),Te(s,e,a),t=!0},p(e,t){"/viewer"!==t.$location?r?$e(r,1):((r=Mg()).c(),$e(r,1),r.m(n.parentNode,n)):r&&(ge(),ve(r,1,1,()=>{r=null}),he());var a={};e.routes&&(a.routes=eg),s.$set(a)},i(e){t||($e(r),$e(s.$$.fragment,e),t=!0)},o(e){ve(r),ve(s.$$.fragment,e),t=!1},d(e){r&&r.d(e),e&&D(n),Ae(s,e)}}}function Mg(e){var n,t=new Dg({});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Tg(e){var n,t=new Qe({});return{c(){t.$$.fragment.c()},m(e,r){Te(t,e,r),n=!0},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Ae(t,e)}}}function Ag(e){var n,t,r,s,a,i,o,l="/viewer"!==e.$location&&Sg(),c=[Cg,Ig],d=[];function u(e,n){return n.$auth.username?0:1}r=u(0,e),s=d[r]=c[r](e);var p="/viewer"!==on&&Tg();return{c(){l&&l.c(),n=T(),t=I("main"),s.c(),a=T(),p&&p.c(),i=A(),O(t,"class","svelte-3eevj6")},m(e,s){l&&l.m(e,s),_(e,n,s),_(e,t,s),d[r].m(t,null),_(e,a,s),p&&p.m(e,s),_(e,i,s),o=!0},p(e,a){"/viewer"!==a.$location?l?$e(l,1):((l=Sg()).c(),$e(l,1),l.m(n.parentNode,n)):l&&(ge(),ve(l,1,1,()=>{l=null}),he());var o=r;(r=u(0,a))===o?d[r].p(e,a):(ge(),ve(d[o],1,1,()=>{d[o]=null}),he(),(s=d[r])||(s=d[r]=c[r](a)).c(),$e(s,1),s.m(t,null)),"/viewer"!==on?p?$e(p,1):((p=Tg()).c(),$e(p,1),p.m(i.parentNode,i)):p&&(ge(),ve(p,1,1,()=>{p=null}),he())},i(e){o||($e(l),$e(s),$e(p),o=!0)},o(e){ve(l),ve(s),ve(p),o=!1},d(e){l&&l.d(e),e&&(D(n),D(t)),d[r].d(),e&&D(a),p&&p.d(e),e&&D(i)}}}function Ng(e,n,t){let r,s;return d(e,on,e=>{t("$location",r=e)}),d(e,tn,e=>{t("$auth",s=e)}),{$location:r,$auth:s}}return new class extends Oe{constructor(e){super(),Ee(this,e,Ng,Ag,o,[])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
